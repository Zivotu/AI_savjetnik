var Z_=Object.defineProperty;var Ky=t=>{throw TypeError(t)};var eA=(t,e,n)=>e in t?Z_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Tc=(t,e,n)=>eA(t,typeof e!="symbol"?e+"":e,n),Mf=(t,e,n)=>e.has(t)||Ky("Cannot "+n);var D=(t,e,n)=>(Mf(t,e,"read from private field"),n?n.call(t):e.get(t)),ke=(t,e,n)=>e.has(t)?Ky("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),de=(t,e,n,i)=>(Mf(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),_t=(t,e,n)=>(Mf(t,e,"access private method"),n);var kc=(t,e,n,i)=>({set _(r){de(t,e,r,n)},get _(){return D(t,e,i)}});function tA(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function LT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jT={exports:{}},Od={},FT={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cc=Symbol.for("react.element"),nA=Symbol.for("react.portal"),iA=Symbol.for("react.fragment"),rA=Symbol.for("react.strict_mode"),sA=Symbol.for("react.profiler"),oA=Symbol.for("react.provider"),aA=Symbol.for("react.context"),lA=Symbol.for("react.forward_ref"),cA=Symbol.for("react.suspense"),uA=Symbol.for("react.memo"),dA=Symbol.for("react.lazy"),Yy=Symbol.iterator;function fA(t){return t===null||typeof t!="object"?null:(t=Yy&&t[Yy]||t["@@iterator"],typeof t=="function"?t:null)}var UT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},BT=Object.assign,VT={};function xa(t,e,n){this.props=t,this.context=e,this.refs=VT,this.updater=n||UT}xa.prototype.isReactComponent={};xa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zT(){}zT.prototype=xa.prototype;function pg(t,e,n){this.props=t,this.context=e,this.refs=VT,this.updater=n||UT}var mg=pg.prototype=new zT;mg.constructor=pg;BT(mg,xa.prototype);mg.isPureReactComponent=!0;var Qy=Array.isArray,$T=Object.prototype.hasOwnProperty,gg={current:null},WT={key:!0,ref:!0,__self:!0,__source:!0};function HT(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)$T.call(e,i)&&!WT.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:cc,type:t,key:s,ref:o,props:r,_owner:gg.current}}function hA(t,e){return{$$typeof:cc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vg(t){return typeof t=="object"&&t!==null&&t.$$typeof===cc}function pA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Xy=/\/+/g;function Df(t,e){return typeof t=="object"&&t!==null&&t.key!=null?pA(""+t.key):e.toString(36)}function ru(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case cc:case nA:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Df(o,0):i,Qy(r)?(n="",t!=null&&(n=t.replace(Xy,"$&/")+"/"),ru(r,e,n,"",function(c){return c})):r!=null&&(vg(r)&&(r=hA(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Xy,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",Qy(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Df(s,a);o+=ru(s,e,n,l,r)}else if(l=fA(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Df(s,a++),o+=ru(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function wc(t,e,n){if(t==null)return t;var i=[],r=0;return ru(t,i,"","",function(s){return e.call(n,s,r++)}),i}function mA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Yt={current:null},su={transition:null},gA={ReactCurrentDispatcher:Yt,ReactCurrentBatchConfig:su,ReactCurrentOwner:gg};function qT(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:wc,forEach:function(t,e,n){wc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wc(t,function(){e++}),e},toArray:function(t){return wc(t,function(e){return e})||[]},only:function(t){if(!vg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=xa;ve.Fragment=iA;ve.Profiler=sA;ve.PureComponent=pg;ve.StrictMode=rA;ve.Suspense=cA;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gA;ve.act=qT;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=BT({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=gg.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)$T.call(e,l)&&!WT.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:cc,type:t.type,key:r,ref:s,props:i,_owner:o}};ve.createContext=function(t){return t={$$typeof:aA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:oA,_context:t},t.Consumer=t};ve.createElement=HT;ve.createFactory=function(t){var e=HT.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:lA,render:t}};ve.isValidElement=vg;ve.lazy=function(t){return{$$typeof:dA,_payload:{_status:-1,_result:t},_init:mA}};ve.memo=function(t,e){return{$$typeof:uA,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=su.transition;su.transition={};try{t()}finally{su.transition=e}};ve.unstable_act=qT;ve.useCallback=function(t,e){return Yt.current.useCallback(t,e)};ve.useContext=function(t){return Yt.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return Yt.current.useDeferredValue(t)};ve.useEffect=function(t,e){return Yt.current.useEffect(t,e)};ve.useId=function(){return Yt.current.useId()};ve.useImperativeHandle=function(t,e,n){return Yt.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return Yt.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return Yt.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return Yt.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return Yt.current.useReducer(t,e,n)};ve.useRef=function(t){return Yt.current.useRef(t)};ve.useState=function(t){return Yt.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return Yt.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return Yt.current.useTransition()};ve.version="18.3.1";FT.exports=ve;var x=FT.exports;const H=LT(x),yg=tA({__proto__:null,default:H},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vA=x,yA=Symbol.for("react.element"),bA=Symbol.for("react.fragment"),xA=Object.prototype.hasOwnProperty,SA=vA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TA={key:!0,ref:!0,__self:!0,__source:!0};function GT(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)xA.call(e,i)&&!TA.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:yA,type:t,key:s,ref:o,props:r,_owner:SA.current}}Od.Fragment=bA;Od.jsx=GT;Od.jsxs=GT;jT.exports=Od;var g=jT.exports,KT={exports:{}},_n={},YT={exports:{}},QT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,M){var q=I.length;I.push(M);e:for(;0<q;){var Y=q-1>>>1,ne=I[Y];if(0<r(ne,M))I[Y]=M,I[q]=ne,q=Y;else break e}}function n(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var M=I[0],q=I.pop();if(q!==M){I[0]=q;e:for(var Y=0,ne=I.length,ee=ne>>>1;Y<ee;){var ue=2*(Y+1)-1,ce=I[ue],Ce=ue+1,pe=I[Ce];if(0>r(ce,q))Ce<ne&&0>r(pe,ce)?(I[Y]=pe,I[Ce]=q,Y=Ce):(I[Y]=ce,I[ue]=q,Y=ue);else if(Ce<ne&&0>r(pe,q))I[Y]=pe,I[Ce]=q,Y=Ce;else break e}}return M}function r(I,M){var q=I.sortIndex-M.sortIndex;return q!==0?q:I.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,v=!1,m=!1,b=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(I){for(var M=n(c);M!==null;){if(M.callback===null)i(c);else if(M.startTime<=I)i(c),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(c)}}function T(I){if(m=!1,S(I),!v)if(n(l)!==null)v=!0,ae(k);else{var M=n(c);M!==null&&X(T,M.startTime-I)}}function k(I,M){v=!1,m&&(m=!1,p(P),P=-1),h=!0;var q=f;try{for(S(M),d=n(l);d!==null&&(!(d.expirationTime>M)||I&&!O());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,f=d.priorityLevel;var ne=Y(d.expirationTime<=M);M=t.unstable_now(),typeof ne=="function"?d.callback=ne:d===n(l)&&i(l),S(M)}else i(l);d=n(l)}if(d!==null)var ee=!0;else{var ue=n(c);ue!==null&&X(T,ue.startTime-M),ee=!1}return ee}finally{d=null,f=q,h=!1}}var w=!1,E=null,P=-1,_=5,A=-1;function O(){return!(t.unstable_now()-A<_)}function L(){if(E!==null){var I=t.unstable_now();A=I;var M=!0;try{M=E(!0,I)}finally{M?Q():(w=!1,E=null)}}else w=!1}var Q;if(typeof y=="function")Q=function(){y(L)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,oe=z.port2;z.port1.onmessage=L,Q=function(){oe.postMessage(null)}}else Q=function(){b(L,0)};function ae(I){E=I,w||(w=!0,Q())}function X(I,M){P=b(function(){I(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){v||h||(v=!0,ae(k))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(I){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var q=f;f=M;try{return I()}finally{f=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,M){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var q=f;f=I;try{return M()}finally{f=q}},t.unstable_scheduleCallback=function(I,M,q){var Y=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?Y+q:Y):q=Y,I){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=q+ne,I={id:u++,callback:M,priorityLevel:I,startTime:q,expirationTime:ne,sortIndex:-1},q>Y?(I.sortIndex=q,e(c,I),n(l)===null&&I===n(c)&&(m?(p(P),P=-1):m=!0,X(T,q-Y))):(I.sortIndex=ne,e(l,I),v||h||(v=!0,ae(k))),I},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(I){var M=f;return function(){var q=f;f=M;try{return I.apply(this,arguments)}finally{f=q}}}})(QT);YT.exports=QT;var kA=YT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wA=x,Pn=kA;function V(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var XT=new Set,Pl={};function Ks(t,e){sa(t,e),sa(t+"Capture",e)}function sa(t,e){for(Pl[t]=e,t=0;t<e.length;t++)XT.add(e[t])}var dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ap=Object.prototype.hasOwnProperty,CA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jy={},Zy={};function EA(t){return ap.call(Zy,t)?!0:ap.call(Jy,t)?!1:CA.test(t)?Zy[t]=!0:(Jy[t]=!0,!1)}function PA(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function RA(t,e,n,i){if(e===null||typeof e>"u"||PA(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){kt[t]=new Qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];kt[e]=new Qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){kt[t]=new Qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){kt[t]=new Qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){kt[t]=new Qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){kt[t]=new Qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){kt[t]=new Qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){kt[t]=new Qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){kt[t]=new Qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var bg=/[\-:]([a-z])/g;function xg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bg,xg);kt[e]=new Qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bg,xg);kt[e]=new Qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bg,xg);kt[e]=new Qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){kt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!1,!1)});kt.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){kt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sg(t,e,n,i){var r=kt.hasOwnProperty(e)?kt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(RA(e,n,r,i)&&(n=null),i||r===null?EA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var xr=wA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cc=Symbol.for("react.element"),go=Symbol.for("react.portal"),vo=Symbol.for("react.fragment"),Tg=Symbol.for("react.strict_mode"),lp=Symbol.for("react.profiler"),JT=Symbol.for("react.provider"),ZT=Symbol.for("react.context"),kg=Symbol.for("react.forward_ref"),cp=Symbol.for("react.suspense"),up=Symbol.for("react.suspense_list"),wg=Symbol.for("react.memo"),Ar=Symbol.for("react.lazy"),ek=Symbol.for("react.offscreen"),e0=Symbol.iterator;function Ia(t){return t===null||typeof t!="object"?null:(t=e0&&t[e0]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,Lf;function el(t){if(Lf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Lf=e&&e[1]||""}return`
`+Lf+t}var jf=!1;function Ff(t,e){if(!t||jf)return"";jf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{jf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?el(t):""}function _A(t){switch(t.tag){case 5:return el(t.type);case 16:return el("Lazy");case 13:return el("Suspense");case 19:return el("SuspenseList");case 0:case 2:case 15:return t=Ff(t.type,!1),t;case 11:return t=Ff(t.type.render,!1),t;case 1:return t=Ff(t.type,!0),t;default:return""}}function dp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vo:return"Fragment";case go:return"Portal";case lp:return"Profiler";case Tg:return"StrictMode";case cp:return"Suspense";case up:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ZT:return(t.displayName||"Context")+".Consumer";case JT:return(t._context.displayName||"Context")+".Provider";case kg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wg:return e=t.displayName||null,e!==null?e:dp(t.type)||"Memo";case Ar:e=t._payload,t=t._init;try{return dp(t(e))}catch{}}return null}function AA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dp(e);case 8:return e===Tg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ns(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function NA(t){var e=tk(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ec(t){t._valueTracker||(t._valueTracker=NA(t))}function nk(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=tk(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Bu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fp(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function t0(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ns(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ik(t,e){e=e.checked,e!=null&&Sg(t,"checked",e,!1)}function hp(t,e){ik(t,e);var n=ns(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pp(t,e.type,n):e.hasOwnProperty("defaultValue")&&pp(t,e.type,ns(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function n0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function pp(t,e,n){(e!=="number"||Bu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var tl=Array.isArray;function Lo(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ns(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function mp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(V(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function i0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(V(92));if(tl(n)){if(1<n.length)throw Error(V(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ns(n)}}function rk(t,e){var n=ns(e.value),i=ns(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function r0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function sk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?sk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pc,ok=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pc=Pc||document.createElement("div"),Pc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Rl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var cl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IA=["Webkit","ms","Moz","O"];Object.keys(cl).forEach(function(t){IA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cl[e]=cl[t]})});function ak(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||cl.hasOwnProperty(t)&&cl[t]?(""+e).trim():e+"px"}function lk(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=ak(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var OA=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vp(t,e){if(e){if(OA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(V(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(V(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(V(61))}if(e.style!=null&&typeof e.style!="object")throw Error(V(62))}}function yp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bp=null;function Cg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xp=null,jo=null,Fo=null;function s0(t){if(t=fc(t)){if(typeof xp!="function")throw Error(V(280));var e=t.stateNode;e&&(e=Fd(e),xp(t.stateNode,t.type,e))}}function ck(t){jo?Fo?Fo.push(t):Fo=[t]:jo=t}function uk(){if(jo){var t=jo,e=Fo;if(Fo=jo=null,s0(t),e)for(t=0;t<e.length;t++)s0(e[t])}}function dk(t,e){return t(e)}function fk(){}var Uf=!1;function hk(t,e,n){if(Uf)return t(e,n);Uf=!0;try{return dk(t,e,n)}finally{Uf=!1,(jo!==null||Fo!==null)&&(fk(),uk())}}function _l(t,e){var n=t.stateNode;if(n===null)return null;var i=Fd(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(V(231,e,typeof n));return n}var Sp=!1;if(dr)try{var Oa={};Object.defineProperty(Oa,"passive",{get:function(){Sp=!0}}),window.addEventListener("test",Oa,Oa),window.removeEventListener("test",Oa,Oa)}catch{Sp=!1}function MA(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var ul=!1,Vu=null,zu=!1,Tp=null,DA={onError:function(t){ul=!0,Vu=t}};function LA(t,e,n,i,r,s,o,a,l){ul=!1,Vu=null,MA.apply(DA,arguments)}function jA(t,e,n,i,r,s,o,a,l){if(LA.apply(this,arguments),ul){if(ul){var c=Vu;ul=!1,Vu=null}else throw Error(V(198));zu||(zu=!0,Tp=c)}}function Ys(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function pk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function o0(t){if(Ys(t)!==t)throw Error(V(188))}function FA(t){var e=t.alternate;if(!e){if(e=Ys(t),e===null)throw Error(V(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return o0(r),t;if(s===i)return o0(r),e;s=s.sibling}throw Error(V(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(V(189))}}if(n.alternate!==i)throw Error(V(190))}if(n.tag!==3)throw Error(V(188));return n.stateNode.current===n?t:e}function mk(t){return t=FA(t),t!==null?gk(t):null}function gk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gk(t);if(e!==null)return e;t=t.sibling}return null}var vk=Pn.unstable_scheduleCallback,a0=Pn.unstable_cancelCallback,UA=Pn.unstable_shouldYield,BA=Pn.unstable_requestPaint,nt=Pn.unstable_now,VA=Pn.unstable_getCurrentPriorityLevel,Eg=Pn.unstable_ImmediatePriority,yk=Pn.unstable_UserBlockingPriority,$u=Pn.unstable_NormalPriority,zA=Pn.unstable_LowPriority,bk=Pn.unstable_IdlePriority,Md=null,Ai=null;function $A(t){if(Ai&&typeof Ai.onCommitFiberRoot=="function")try{Ai.onCommitFiberRoot(Md,t,void 0,(t.current.flags&128)===128)}catch{}}var ai=Math.clz32?Math.clz32:qA,WA=Math.log,HA=Math.LN2;function qA(t){return t>>>=0,t===0?32:31-(WA(t)/HA|0)|0}var Rc=64,_c=4194304;function nl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wu(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=nl(a):(s&=o,s!==0&&(i=nl(s)))}else o=n&~r,o!==0?i=nl(o):s!==0&&(i=nl(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ai(e),r=1<<n,i|=t[n],e&=~r;return i}function GA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KA(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ai(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=GA(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function kp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function xk(){var t=Rc;return Rc<<=1,!(Rc&4194240)&&(Rc=64),t}function Bf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function uc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ai(e),t[e]=n}function YA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ai(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Pg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ai(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ee=0;function Sk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Tk,Rg,kk,wk,Ck,wp=!1,Ac=[],Hr=null,qr=null,Gr=null,Al=new Map,Nl=new Map,Or=[],QA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function l0(t,e){switch(t){case"focusin":case"focusout":Hr=null;break;case"dragenter":case"dragleave":qr=null;break;case"mouseover":case"mouseout":Gr=null;break;case"pointerover":case"pointerout":Al.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nl.delete(e.pointerId)}}function Ma(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=fc(e),e!==null&&Rg(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function XA(t,e,n,i,r){switch(e){case"focusin":return Hr=Ma(Hr,t,e,n,i,r),!0;case"dragenter":return qr=Ma(qr,t,e,n,i,r),!0;case"mouseover":return Gr=Ma(Gr,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Al.set(s,Ma(Al.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Nl.set(s,Ma(Nl.get(s)||null,t,e,n,i,r)),!0}return!1}function Ek(t){var e=ks(t.target);if(e!==null){var n=Ys(e);if(n!==null){if(e=n.tag,e===13){if(e=pk(n),e!==null){t.blockedOn=e,Ck(t.priority,function(){kk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ou(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Cp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);bp=i,n.target.dispatchEvent(i),bp=null}else return e=fc(n),e!==null&&Rg(e),t.blockedOn=n,!1;e.shift()}return!0}function c0(t,e,n){ou(t)&&n.delete(e)}function JA(){wp=!1,Hr!==null&&ou(Hr)&&(Hr=null),qr!==null&&ou(qr)&&(qr=null),Gr!==null&&ou(Gr)&&(Gr=null),Al.forEach(c0),Nl.forEach(c0)}function Da(t,e){t.blockedOn===e&&(t.blockedOn=null,wp||(wp=!0,Pn.unstable_scheduleCallback(Pn.unstable_NormalPriority,JA)))}function Il(t){function e(r){return Da(r,t)}if(0<Ac.length){Da(Ac[0],t);for(var n=1;n<Ac.length;n++){var i=Ac[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Hr!==null&&Da(Hr,t),qr!==null&&Da(qr,t),Gr!==null&&Da(Gr,t),Al.forEach(e),Nl.forEach(e),n=0;n<Or.length;n++)i=Or[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Or.length&&(n=Or[0],n.blockedOn===null);)Ek(n),n.blockedOn===null&&Or.shift()}var Uo=xr.ReactCurrentBatchConfig,Hu=!0;function ZA(t,e,n,i){var r=Ee,s=Uo.transition;Uo.transition=null;try{Ee=1,_g(t,e,n,i)}finally{Ee=r,Uo.transition=s}}function eN(t,e,n,i){var r=Ee,s=Uo.transition;Uo.transition=null;try{Ee=4,_g(t,e,n,i)}finally{Ee=r,Uo.transition=s}}function _g(t,e,n,i){if(Hu){var r=Cp(t,e,n,i);if(r===null)Qf(t,e,i,qu,n),l0(t,i);else if(XA(r,t,e,n,i))i.stopPropagation();else if(l0(t,i),e&4&&-1<QA.indexOf(t)){for(;r!==null;){var s=fc(r);if(s!==null&&Tk(s),s=Cp(t,e,n,i),s===null&&Qf(t,e,i,qu,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Qf(t,e,i,null,n)}}var qu=null;function Cp(t,e,n,i){if(qu=null,t=Cg(i),t=ks(t),t!==null)if(e=Ys(t),e===null)t=null;else if(n=e.tag,n===13){if(t=pk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qu=t,null}function Pk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VA()){case Eg:return 1;case yk:return 4;case $u:case zA:return 16;case bk:return 536870912;default:return 16}default:return 16}}var Vr=null,Ag=null,au=null;function Rk(){if(au)return au;var t,e=Ag,n=e.length,i,r="value"in Vr?Vr.value:Vr.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return au=r.slice(t,1<i?1-i:void 0)}function lu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Nc(){return!0}function u0(){return!1}function An(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Nc:u0,this.isPropagationStopped=u0,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nc)},persist:function(){},isPersistent:Nc}),e}var Sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ng=An(Sa),dc=He({},Sa,{view:0,detail:0}),tN=An(dc),Vf,zf,La,Dd=He({},dc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ig,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==La&&(La&&t.type==="mousemove"?(Vf=t.screenX-La.screenX,zf=t.screenY-La.screenY):zf=Vf=0,La=t),Vf)},movementY:function(t){return"movementY"in t?t.movementY:zf}}),d0=An(Dd),nN=He({},Dd,{dataTransfer:0}),iN=An(nN),rN=He({},dc,{relatedTarget:0}),$f=An(rN),sN=He({},Sa,{animationName:0,elapsedTime:0,pseudoElement:0}),oN=An(sN),aN=He({},Sa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lN=An(aN),cN=He({},Sa,{data:0}),f0=An(cN),uN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=fN[t])?!!e[t]:!1}function Ig(){return hN}var pN=He({},dc,{key:function(t){if(t.key){var e=uN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=lu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ig,charCode:function(t){return t.type==="keypress"?lu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?lu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mN=An(pN),gN=He({},Dd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),h0=An(gN),vN=He({},dc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ig}),yN=An(vN),bN=He({},Sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),xN=An(bN),SN=He({},Dd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),TN=An(SN),kN=[9,13,27,32],Og=dr&&"CompositionEvent"in window,dl=null;dr&&"documentMode"in document&&(dl=document.documentMode);var wN=dr&&"TextEvent"in window&&!dl,_k=dr&&(!Og||dl&&8<dl&&11>=dl),p0=" ",m0=!1;function Ak(t,e){switch(t){case"keyup":return kN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yo=!1;function CN(t,e){switch(t){case"compositionend":return Nk(e);case"keypress":return e.which!==32?null:(m0=!0,p0);case"textInput":return t=e.data,t===p0&&m0?null:t;default:return null}}function EN(t,e){if(yo)return t==="compositionend"||!Og&&Ak(t,e)?(t=Rk(),au=Ag=Vr=null,yo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _k&&e.locale!=="ko"?null:e.data;default:return null}}var PN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function g0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!PN[t.type]:e==="textarea"}function Ik(t,e,n,i){ck(i),e=Gu(e,"onChange"),0<e.length&&(n=new Ng("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var fl=null,Ol=null;function RN(t){$k(t,0)}function Ld(t){var e=So(t);if(nk(e))return t}function _N(t,e){if(t==="change")return e}var Ok=!1;if(dr){var Wf;if(dr){var Hf="oninput"in document;if(!Hf){var v0=document.createElement("div");v0.setAttribute("oninput","return;"),Hf=typeof v0.oninput=="function"}Wf=Hf}else Wf=!1;Ok=Wf&&(!document.documentMode||9<document.documentMode)}function y0(){fl&&(fl.detachEvent("onpropertychange",Mk),Ol=fl=null)}function Mk(t){if(t.propertyName==="value"&&Ld(Ol)){var e=[];Ik(e,Ol,t,Cg(t)),hk(RN,e)}}function AN(t,e,n){t==="focusin"?(y0(),fl=e,Ol=n,fl.attachEvent("onpropertychange",Mk)):t==="focusout"&&y0()}function NN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ld(Ol)}function IN(t,e){if(t==="click")return Ld(e)}function ON(t,e){if(t==="input"||t==="change")return Ld(e)}function MN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ci=typeof Object.is=="function"?Object.is:MN;function Ml(t,e){if(ci(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!ap.call(e,r)||!ci(t[r],e[r]))return!1}return!0}function b0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function x0(t,e){var n=b0(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=b0(n)}}function Dk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Dk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Lk(){for(var t=window,e=Bu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Bu(t.document)}return e}function Mg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function DN(t){var e=Lk(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Dk(n.ownerDocument.documentElement,n)){if(i!==null&&Mg(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=x0(n,s);var o=x0(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var LN=dr&&"documentMode"in document&&11>=document.documentMode,bo=null,Ep=null,hl=null,Pp=!1;function S0(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pp||bo==null||bo!==Bu(i)||(i=bo,"selectionStart"in i&&Mg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),hl&&Ml(hl,i)||(hl=i,i=Gu(Ep,"onSelect"),0<i.length&&(e=new Ng("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=bo)))}function Ic(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xo={animationend:Ic("Animation","AnimationEnd"),animationiteration:Ic("Animation","AnimationIteration"),animationstart:Ic("Animation","AnimationStart"),transitionend:Ic("Transition","TransitionEnd")},qf={},jk={};dr&&(jk=document.createElement("div").style,"AnimationEvent"in window||(delete xo.animationend.animation,delete xo.animationiteration.animation,delete xo.animationstart.animation),"TransitionEvent"in window||delete xo.transitionend.transition);function jd(t){if(qf[t])return qf[t];if(!xo[t])return t;var e=xo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in jk)return qf[t]=e[n];return t}var Fk=jd("animationend"),Uk=jd("animationiteration"),Bk=jd("animationstart"),Vk=jd("transitionend"),zk=new Map,T0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cs(t,e){zk.set(t,e),Ks(e,[t])}for(var Gf=0;Gf<T0.length;Gf++){var Kf=T0[Gf],jN=Kf.toLowerCase(),FN=Kf[0].toUpperCase()+Kf.slice(1);cs(jN,"on"+FN)}cs(Fk,"onAnimationEnd");cs(Uk,"onAnimationIteration");cs(Bk,"onAnimationStart");cs("dblclick","onDoubleClick");cs("focusin","onFocus");cs("focusout","onBlur");cs(Vk,"onTransitionEnd");sa("onMouseEnter",["mouseout","mouseover"]);sa("onMouseLeave",["mouseout","mouseover"]);sa("onPointerEnter",["pointerout","pointerover"]);sa("onPointerLeave",["pointerout","pointerover"]);Ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UN=new Set("cancel close invalid load scroll toggle".split(" ").concat(il));function k0(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,jA(i,e,void 0,t),t.currentTarget=null}function $k(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;k0(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;k0(r,a,c),s=l}}}if(zu)throw t=Tp,zu=!1,Tp=null,t}function Me(t,e){var n=e[Ip];n===void 0&&(n=e[Ip]=new Set);var i=t+"__bubble";n.has(i)||(Wk(e,t,2,!1),n.add(i))}function Yf(t,e,n){var i=0;e&&(i|=4),Wk(n,t,i,e)}var Oc="_reactListening"+Math.random().toString(36).slice(2);function Dl(t){if(!t[Oc]){t[Oc]=!0,XT.forEach(function(n){n!=="selectionchange"&&(UN.has(n)||Yf(n,!1,t),Yf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Oc]||(e[Oc]=!0,Yf("selectionchange",!1,e))}}function Wk(t,e,n,i){switch(Pk(e)){case 1:var r=ZA;break;case 4:r=eN;break;default:r=_g}n=r.bind(null,e,n,t),r=void 0,!Sp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Qf(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ks(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}hk(function(){var c=s,u=Cg(n),d=[];e:{var f=zk.get(t);if(f!==void 0){var h=Ng,v=t;switch(t){case"keypress":if(lu(n)===0)break e;case"keydown":case"keyup":h=mN;break;case"focusin":v="focus",h=$f;break;case"focusout":v="blur",h=$f;break;case"beforeblur":case"afterblur":h=$f;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=d0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=iN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=yN;break;case Fk:case Uk:case Bk:h=oN;break;case Vk:h=xN;break;case"scroll":h=tN;break;case"wheel":h=TN;break;case"copy":case"cut":case"paste":h=lN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=h0}var m=(e&4)!==0,b=!m&&t==="scroll",p=m?f!==null?f+"Capture":null:f;m=[];for(var y=c,S;y!==null;){S=y;var T=S.stateNode;if(S.tag===5&&T!==null&&(S=T,p!==null&&(T=_l(y,p),T!=null&&m.push(Ll(y,T,S)))),b)break;y=y.return}0<m.length&&(f=new h(f,v,null,n,u),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==bp&&(v=n.relatedTarget||n.fromElement)&&(ks(v)||v[fr]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(v=n.relatedTarget||n.toElement,h=c,v=v?ks(v):null,v!==null&&(b=Ys(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(h=null,v=c),h!==v)){if(m=d0,T="onMouseLeave",p="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=h0,T="onPointerLeave",p="onPointerEnter",y="pointer"),b=h==null?f:So(h),S=v==null?f:So(v),f=new m(T,y+"leave",h,n,u),f.target=b,f.relatedTarget=S,T=null,ks(u)===c&&(m=new m(p,y+"enter",v,n,u),m.target=S,m.relatedTarget=b,T=m),b=T,h&&v)t:{for(m=h,p=v,y=0,S=m;S;S=oo(S))y++;for(S=0,T=p;T;T=oo(T))S++;for(;0<y-S;)m=oo(m),y--;for(;0<S-y;)p=oo(p),S--;for(;y--;){if(m===p||p!==null&&m===p.alternate)break t;m=oo(m),p=oo(p)}m=null}else m=null;h!==null&&w0(d,f,h,m,!1),v!==null&&b!==null&&w0(d,b,v,m,!0)}}e:{if(f=c?So(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var k=_N;else if(g0(f))if(Ok)k=ON;else{k=NN;var w=AN}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=IN);if(k&&(k=k(t,c))){Ik(d,k,n,u);break e}w&&w(t,f,c),t==="focusout"&&(w=f._wrapperState)&&w.controlled&&f.type==="number"&&pp(f,"number",f.value)}switch(w=c?So(c):window,t){case"focusin":(g0(w)||w.contentEditable==="true")&&(bo=w,Ep=c,hl=null);break;case"focusout":hl=Ep=bo=null;break;case"mousedown":Pp=!0;break;case"contextmenu":case"mouseup":case"dragend":Pp=!1,S0(d,n,u);break;case"selectionchange":if(LN)break;case"keydown":case"keyup":S0(d,n,u)}var E;if(Og)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else yo?Ak(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(_k&&n.locale!=="ko"&&(yo||P!=="onCompositionStart"?P==="onCompositionEnd"&&yo&&(E=Rk()):(Vr=u,Ag="value"in Vr?Vr.value:Vr.textContent,yo=!0)),w=Gu(c,P),0<w.length&&(P=new f0(P,t,null,n,u),d.push({event:P,listeners:w}),E?P.data=E:(E=Nk(n),E!==null&&(P.data=E)))),(E=wN?CN(t,n):EN(t,n))&&(c=Gu(c,"onBeforeInput"),0<c.length&&(u=new f0("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=E))}$k(d,e)})}function Ll(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Gu(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=_l(t,n),s!=null&&i.unshift(Ll(t,s,r)),s=_l(t,e),s!=null&&i.push(Ll(t,s,r))),t=t.return}return i}function oo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function w0(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=_l(n,s),l!=null&&o.unshift(Ll(n,l,a))):r||(l=_l(n,s),l!=null&&o.push(Ll(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var BN=/\r\n?/g,VN=/\u0000|\uFFFD/g;function C0(t){return(typeof t=="string"?t:""+t).replace(BN,`
`).replace(VN,"")}function Mc(t,e,n){if(e=C0(e),C0(t)!==e&&n)throw Error(V(425))}function Ku(){}var Rp=null,_p=null;function Ap(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Np=typeof setTimeout=="function"?setTimeout:void 0,zN=typeof clearTimeout=="function"?clearTimeout:void 0,E0=typeof Promise=="function"?Promise:void 0,$N=typeof queueMicrotask=="function"?queueMicrotask:typeof E0<"u"?function(t){return E0.resolve(null).then(t).catch(WN)}:Np;function WN(t){setTimeout(function(){throw t})}function Xf(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Il(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Il(e)}function Kr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function P0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ta=Math.random().toString(36).slice(2),Ei="__reactFiber$"+Ta,jl="__reactProps$"+Ta,fr="__reactContainer$"+Ta,Ip="__reactEvents$"+Ta,HN="__reactListeners$"+Ta,qN="__reactHandles$"+Ta;function ks(t){var e=t[Ei];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fr]||n[Ei]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=P0(t);t!==null;){if(n=t[Ei])return n;t=P0(t)}return e}t=n,n=t.parentNode}return null}function fc(t){return t=t[Ei]||t[fr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function So(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(V(33))}function Fd(t){return t[jl]||null}var Op=[],To=-1;function us(t){return{current:t}}function Le(t){0>To||(t.current=Op[To],Op[To]=null,To--)}function Ie(t,e){To++,Op[To]=t.current,t.current=e}var is={},Lt=us(is),un=us(!1),Fs=is;function oa(t,e){var n=t.type.contextTypes;if(!n)return is;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function dn(t){return t=t.childContextTypes,t!=null}function Yu(){Le(un),Le(Lt)}function R0(t,e,n){if(Lt.current!==is)throw Error(V(168));Ie(Lt,e),Ie(un,n)}function Hk(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(V(108,AA(t)||"Unknown",r));return He({},n,i)}function Qu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||is,Fs=Lt.current,Ie(Lt,t),Ie(un,un.current),!0}function _0(t,e,n){var i=t.stateNode;if(!i)throw Error(V(169));n?(t=Hk(t,e,Fs),i.__reactInternalMemoizedMergedChildContext=t,Le(un),Le(Lt),Ie(Lt,t)):Le(un),Ie(un,n)}var Zi=null,Ud=!1,Jf=!1;function qk(t){Zi===null?Zi=[t]:Zi.push(t)}function GN(t){Ud=!0,qk(t)}function ds(){if(!Jf&&Zi!==null){Jf=!0;var t=0,e=Ee;try{var n=Zi;for(Ee=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Zi=null,Ud=!1}catch(r){throw Zi!==null&&(Zi=Zi.slice(t+1)),vk(Eg,ds),r}finally{Ee=e,Jf=!1}}return null}var ko=[],wo=0,Xu=null,Ju=0,Mn=[],Dn=0,Us=null,or=1,ar="";function vs(t,e){ko[wo++]=Ju,ko[wo++]=Xu,Xu=t,Ju=e}function Gk(t,e,n){Mn[Dn++]=or,Mn[Dn++]=ar,Mn[Dn++]=Us,Us=t;var i=or;t=ar;var r=32-ai(i)-1;i&=~(1<<r),n+=1;var s=32-ai(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,or=1<<32-ai(e)+r|n<<r|i,ar=s+t}else or=1<<s|n<<r|i,ar=t}function Dg(t){t.return!==null&&(vs(t,1),Gk(t,1,0))}function Lg(t){for(;t===Xu;)Xu=ko[--wo],ko[wo]=null,Ju=ko[--wo],ko[wo]=null;for(;t===Us;)Us=Mn[--Dn],Mn[Dn]=null,ar=Mn[--Dn],Mn[Dn]=null,or=Mn[--Dn],Mn[Dn]=null}var kn=null,Sn=null,Be=!1,ii=null;function Kk(t,e){var n=Ln(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function A0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kn=t,Sn=Kr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kn=t,Sn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Us!==null?{id:or,overflow:ar}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ln(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kn=t,Sn=null,!0):!1;default:return!1}}function Mp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Dp(t){if(Be){var e=Sn;if(e){var n=e;if(!A0(t,e)){if(Mp(t))throw Error(V(418));e=Kr(n.nextSibling);var i=kn;e&&A0(t,e)?Kk(i,n):(t.flags=t.flags&-4097|2,Be=!1,kn=t)}}else{if(Mp(t))throw Error(V(418));t.flags=t.flags&-4097|2,Be=!1,kn=t}}}function N0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kn=t}function Dc(t){if(t!==kn)return!1;if(!Be)return N0(t),Be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ap(t.type,t.memoizedProps)),e&&(e=Sn)){if(Mp(t))throw Yk(),Error(V(418));for(;e;)Kk(t,e),e=Kr(e.nextSibling)}if(N0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(V(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Sn=Kr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Sn=null}}else Sn=kn?Kr(t.stateNode.nextSibling):null;return!0}function Yk(){for(var t=Sn;t;)t=Kr(t.nextSibling)}function aa(){Sn=kn=null,Be=!1}function jg(t){ii===null?ii=[t]:ii.push(t)}var KN=xr.ReactCurrentBatchConfig;function ja(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(V(309));var i=n.stateNode}if(!i)throw Error(V(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(V(284));if(!n._owner)throw Error(V(290,t))}return t}function Lc(t,e){throw t=Object.prototype.toString.call(e),Error(V(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function I0(t){var e=t._init;return e(t._payload)}function Qk(t){function e(p,y){if(t){var S=p.deletions;S===null?(p.deletions=[y],p.flags|=16):S.push(y)}}function n(p,y){if(!t)return null;for(;y!==null;)e(p,y),y=y.sibling;return null}function i(p,y){for(p=new Map;y!==null;)y.key!==null?p.set(y.key,y):p.set(y.index,y),y=y.sibling;return p}function r(p,y){return p=Jr(p,y),p.index=0,p.sibling=null,p}function s(p,y,S){return p.index=S,t?(S=p.alternate,S!==null?(S=S.index,S<y?(p.flags|=2,y):S):(p.flags|=2,y)):(p.flags|=1048576,y)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,y,S,T){return y===null||y.tag!==6?(y=sh(S,p.mode,T),y.return=p,y):(y=r(y,S),y.return=p,y)}function l(p,y,S,T){var k=S.type;return k===vo?u(p,y,S.props.children,T,S.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ar&&I0(k)===y.type)?(T=r(y,S.props),T.ref=ja(p,y,S),T.return=p,T):(T=mu(S.type,S.key,S.props,null,p.mode,T),T.ref=ja(p,y,S),T.return=p,T)}function c(p,y,S,T){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=oh(S,p.mode,T),y.return=p,y):(y=r(y,S.children||[]),y.return=p,y)}function u(p,y,S,T,k){return y===null||y.tag!==7?(y=Ms(S,p.mode,T,k),y.return=p,y):(y=r(y,S),y.return=p,y)}function d(p,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=sh(""+y,p.mode,S),y.return=p,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Cc:return S=mu(y.type,y.key,y.props,null,p.mode,S),S.ref=ja(p,null,y),S.return=p,S;case go:return y=oh(y,p.mode,S),y.return=p,y;case Ar:var T=y._init;return d(p,T(y._payload),S)}if(tl(y)||Ia(y))return y=Ms(y,p.mode,S,null),y.return=p,y;Lc(p,y)}return null}function f(p,y,S,T){var k=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return k!==null?null:a(p,y,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Cc:return S.key===k?l(p,y,S,T):null;case go:return S.key===k?c(p,y,S,T):null;case Ar:return k=S._init,f(p,y,k(S._payload),T)}if(tl(S)||Ia(S))return k!==null?null:u(p,y,S,T,null);Lc(p,S)}return null}function h(p,y,S,T,k){if(typeof T=="string"&&T!==""||typeof T=="number")return p=p.get(S)||null,a(y,p,""+T,k);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Cc:return p=p.get(T.key===null?S:T.key)||null,l(y,p,T,k);case go:return p=p.get(T.key===null?S:T.key)||null,c(y,p,T,k);case Ar:var w=T._init;return h(p,y,S,w(T._payload),k)}if(tl(T)||Ia(T))return p=p.get(S)||null,u(y,p,T,k,null);Lc(y,T)}return null}function v(p,y,S,T){for(var k=null,w=null,E=y,P=y=0,_=null;E!==null&&P<S.length;P++){E.index>P?(_=E,E=null):_=E.sibling;var A=f(p,E,S[P],T);if(A===null){E===null&&(E=_);break}t&&E&&A.alternate===null&&e(p,E),y=s(A,y,P),w===null?k=A:w.sibling=A,w=A,E=_}if(P===S.length)return n(p,E),Be&&vs(p,P),k;if(E===null){for(;P<S.length;P++)E=d(p,S[P],T),E!==null&&(y=s(E,y,P),w===null?k=E:w.sibling=E,w=E);return Be&&vs(p,P),k}for(E=i(p,E);P<S.length;P++)_=h(E,p,P,S[P],T),_!==null&&(t&&_.alternate!==null&&E.delete(_.key===null?P:_.key),y=s(_,y,P),w===null?k=_:w.sibling=_,w=_);return t&&E.forEach(function(O){return e(p,O)}),Be&&vs(p,P),k}function m(p,y,S,T){var k=Ia(S);if(typeof k!="function")throw Error(V(150));if(S=k.call(S),S==null)throw Error(V(151));for(var w=k=null,E=y,P=y=0,_=null,A=S.next();E!==null&&!A.done;P++,A=S.next()){E.index>P?(_=E,E=null):_=E.sibling;var O=f(p,E,A.value,T);if(O===null){E===null&&(E=_);break}t&&E&&O.alternate===null&&e(p,E),y=s(O,y,P),w===null?k=O:w.sibling=O,w=O,E=_}if(A.done)return n(p,E),Be&&vs(p,P),k;if(E===null){for(;!A.done;P++,A=S.next())A=d(p,A.value,T),A!==null&&(y=s(A,y,P),w===null?k=A:w.sibling=A,w=A);return Be&&vs(p,P),k}for(E=i(p,E);!A.done;P++,A=S.next())A=h(E,p,P,A.value,T),A!==null&&(t&&A.alternate!==null&&E.delete(A.key===null?P:A.key),y=s(A,y,P),w===null?k=A:w.sibling=A,w=A);return t&&E.forEach(function(L){return e(p,L)}),Be&&vs(p,P),k}function b(p,y,S,T){if(typeof S=="object"&&S!==null&&S.type===vo&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Cc:e:{for(var k=S.key,w=y;w!==null;){if(w.key===k){if(k=S.type,k===vo){if(w.tag===7){n(p,w.sibling),y=r(w,S.props.children),y.return=p,p=y;break e}}else if(w.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ar&&I0(k)===w.type){n(p,w.sibling),y=r(w,S.props),y.ref=ja(p,w,S),y.return=p,p=y;break e}n(p,w);break}else e(p,w);w=w.sibling}S.type===vo?(y=Ms(S.props.children,p.mode,T,S.key),y.return=p,p=y):(T=mu(S.type,S.key,S.props,null,p.mode,T),T.ref=ja(p,y,S),T.return=p,p=T)}return o(p);case go:e:{for(w=S.key;y!==null;){if(y.key===w)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){n(p,y.sibling),y=r(y,S.children||[]),y.return=p,p=y;break e}else{n(p,y);break}else e(p,y);y=y.sibling}y=oh(S,p.mode,T),y.return=p,p=y}return o(p);case Ar:return w=S._init,b(p,y,w(S._payload),T)}if(tl(S))return v(p,y,S,T);if(Ia(S))return m(p,y,S,T);Lc(p,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(n(p,y.sibling),y=r(y,S),y.return=p,p=y):(n(p,y),y=sh(S,p.mode,T),y.return=p,p=y),o(p)):n(p,y)}return b}var la=Qk(!0),Xk=Qk(!1),Zu=us(null),ed=null,Co=null,Fg=null;function Ug(){Fg=Co=ed=null}function Bg(t){var e=Zu.current;Le(Zu),t._currentValue=e}function Lp(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Bo(t,e){ed=t,Fg=Co=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ln=!0),t.firstContext=null)}function Fn(t){var e=t._currentValue;if(Fg!==t)if(t={context:t,memoizedValue:e,next:null},Co===null){if(ed===null)throw Error(V(308));Co=t,ed.dependencies={lanes:0,firstContext:t}}else Co=Co.next=t;return e}var ws=null;function Vg(t){ws===null?ws=[t]:ws.push(t)}function Jk(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Vg(e)):(n.next=r.next,r.next=n),e.interleaved=n,hr(t,i)}function hr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Nr=!1;function zg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function lr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Te&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,hr(t,n)}return r=i.interleaved,r===null?(e.next=e,Vg(i)):(e.next=r.next,r.next=e),i.interleaved=e,hr(t,n)}function cu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Pg(t,n)}}function O0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function td(t,e,n,i){var r=t.updateQueue;Nr=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((i&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,m=a;switch(f=e,h=n,m.tag){case 1:if(v=m.payload,typeof v=="function"){d=v.call(h,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=m.payload,f=typeof v=="function"?v.call(h,d,f):v,f==null)break e;d=He({},d,f);break e;case 2:Nr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Vs|=o,t.lanes=o,t.memoizedState=d}}function M0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(V(191,r));r.call(i)}}}var hc={},Ni=us(hc),Fl=us(hc),Ul=us(hc);function Cs(t){if(t===hc)throw Error(V(174));return t}function $g(t,e){switch(Ie(Ul,e),Ie(Fl,t),Ie(Ni,hc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gp(e,t)}Le(Ni),Ie(Ni,e)}function ca(){Le(Ni),Le(Fl),Le(Ul)}function ew(t){Cs(Ul.current);var e=Cs(Ni.current),n=gp(e,t.type);e!==n&&(Ie(Fl,t),Ie(Ni,n))}function Wg(t){Fl.current===t&&(Le(Ni),Le(Fl))}var ze=us(0);function nd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zf=[];function Hg(){for(var t=0;t<Zf.length;t++)Zf[t]._workInProgressVersionPrimary=null;Zf.length=0}var uu=xr.ReactCurrentDispatcher,eh=xr.ReactCurrentBatchConfig,Bs=0,We=null,ut=null,pt=null,id=!1,pl=!1,Bl=0,YN=0;function At(){throw Error(V(321))}function qg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ci(t[n],e[n]))return!1;return!0}function Gg(t,e,n,i,r,s){if(Bs=s,We=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,uu.current=t===null||t.memoizedState===null?ZN:eI,t=n(i,r),pl){s=0;do{if(pl=!1,Bl=0,25<=s)throw Error(V(301));s+=1,pt=ut=null,e.updateQueue=null,uu.current=tI,t=n(i,r)}while(pl)}if(uu.current=rd,e=ut!==null&&ut.next!==null,Bs=0,pt=ut=We=null,id=!1,e)throw Error(V(300));return t}function Kg(){var t=Bl!==0;return Bl=0,t}function Si(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?We.memoizedState=pt=t:pt=pt.next=t,pt}function Un(){if(ut===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=ut.next;var e=pt===null?We.memoizedState:pt.next;if(e!==null)pt=e,ut=t;else{if(t===null)throw Error(V(310));ut=t,t={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},pt===null?We.memoizedState=pt=t:pt=pt.next=t}return pt}function Vl(t,e){return typeof e=="function"?e(t):e}function th(t){var e=Un(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var i=ut,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Bs&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,We.lanes|=u,Vs|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,ci(i,e.memoizedState)||(ln=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,We.lanes|=s,Vs|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function nh(t){var e=Un(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);ci(s,e.memoizedState)||(ln=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function tw(){}function nw(t,e){var n=We,i=Un(),r=e(),s=!ci(i.memoizedState,r);if(s&&(i.memoizedState=r,ln=!0),i=i.queue,Yg(sw.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||pt!==null&&pt.memoizedState.tag&1){if(n.flags|=2048,zl(9,rw.bind(null,n,i,r,e),void 0,null),vt===null)throw Error(V(349));Bs&30||iw(n,e,r)}return r}function iw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function rw(t,e,n,i){e.value=n,e.getSnapshot=i,ow(e)&&aw(t)}function sw(t,e,n){return n(function(){ow(e)&&aw(t)})}function ow(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ci(t,n)}catch{return!0}}function aw(t){var e=hr(t,1);e!==null&&li(e,t,1,-1)}function D0(t){var e=Si();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:t},e.queue=t,t=t.dispatch=JN.bind(null,We,t),[e.memoizedState,t]}function zl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function lw(){return Un().memoizedState}function du(t,e,n,i){var r=Si();We.flags|=t,r.memoizedState=zl(1|e,n,void 0,i===void 0?null:i)}function Bd(t,e,n,i){var r=Un();i=i===void 0?null:i;var s=void 0;if(ut!==null){var o=ut.memoizedState;if(s=o.destroy,i!==null&&qg(i,o.deps)){r.memoizedState=zl(e,n,s,i);return}}We.flags|=t,r.memoizedState=zl(1|e,n,s,i)}function L0(t,e){return du(8390656,8,t,e)}function Yg(t,e){return Bd(2048,8,t,e)}function cw(t,e){return Bd(4,2,t,e)}function uw(t,e){return Bd(4,4,t,e)}function dw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function fw(t,e,n){return n=n!=null?n.concat([t]):null,Bd(4,4,dw.bind(null,e,t),n)}function Qg(){}function hw(t,e){var n=Un();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&qg(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function pw(t,e){var n=Un();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&qg(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function mw(t,e,n){return Bs&21?(ci(n,e)||(n=xk(),We.lanes|=n,Vs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ln=!0),t.memoizedState=n)}function QN(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var i=eh.transition;eh.transition={};try{t(!1),e()}finally{Ee=n,eh.transition=i}}function gw(){return Un().memoizedState}function XN(t,e,n){var i=Xr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},vw(t))yw(e,n);else if(n=Jk(t,e,n,i),n!==null){var r=qt();li(n,t,i,r),bw(n,e,i)}}function JN(t,e,n){var i=Xr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(vw(t))yw(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ci(a,o)){var l=e.interleaved;l===null?(r.next=r,Vg(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=Jk(t,e,r,i),n!==null&&(r=qt(),li(n,t,i,r),bw(n,e,i))}}function vw(t){var e=t.alternate;return t===We||e!==null&&e===We}function yw(t,e){pl=id=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function bw(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Pg(t,n)}}var rd={readContext:Fn,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},ZN={readContext:Fn,useCallback:function(t,e){return Si().memoizedState=[t,e===void 0?null:e],t},useContext:Fn,useEffect:L0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,du(4194308,4,dw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return du(4194308,4,t,e)},useInsertionEffect:function(t,e){return du(4,2,t,e)},useMemo:function(t,e){var n=Si();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Si();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=XN.bind(null,We,t),[i.memoizedState,t]},useRef:function(t){var e=Si();return t={current:t},e.memoizedState=t},useState:D0,useDebugValue:Qg,useDeferredValue:function(t){return Si().memoizedState=t},useTransition:function(){var t=D0(!1),e=t[0];return t=QN.bind(null,t[1]),Si().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=We,r=Si();if(Be){if(n===void 0)throw Error(V(407));n=n()}else{if(n=e(),vt===null)throw Error(V(349));Bs&30||iw(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,L0(sw.bind(null,i,s,t),[t]),i.flags|=2048,zl(9,rw.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Si(),e=vt.identifierPrefix;if(Be){var n=ar,i=or;n=(i&~(1<<32-ai(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Bl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=YN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eI={readContext:Fn,useCallback:hw,useContext:Fn,useEffect:Yg,useImperativeHandle:fw,useInsertionEffect:cw,useLayoutEffect:uw,useMemo:pw,useReducer:th,useRef:lw,useState:function(){return th(Vl)},useDebugValue:Qg,useDeferredValue:function(t){var e=Un();return mw(e,ut.memoizedState,t)},useTransition:function(){var t=th(Vl)[0],e=Un().memoizedState;return[t,e]},useMutableSource:tw,useSyncExternalStore:nw,useId:gw,unstable_isNewReconciler:!1},tI={readContext:Fn,useCallback:hw,useContext:Fn,useEffect:Yg,useImperativeHandle:fw,useInsertionEffect:cw,useLayoutEffect:uw,useMemo:pw,useReducer:nh,useRef:lw,useState:function(){return nh(Vl)},useDebugValue:Qg,useDeferredValue:function(t){var e=Un();return ut===null?e.memoizedState=t:mw(e,ut.memoizedState,t)},useTransition:function(){var t=nh(Vl)[0],e=Un().memoizedState;return[t,e]},useMutableSource:tw,useSyncExternalStore:nw,useId:gw,unstable_isNewReconciler:!1};function Xn(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jp(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vd={isMounted:function(t){return(t=t._reactInternals)?Ys(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=qt(),r=Xr(t),s=lr(i,r);s.payload=e,n!=null&&(s.callback=n),e=Yr(t,s,r),e!==null&&(li(e,t,r,i),cu(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=qt(),r=Xr(t),s=lr(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Yr(t,s,r),e!==null&&(li(e,t,r,i),cu(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qt(),i=Xr(t),r=lr(n,i);r.tag=2,e!=null&&(r.callback=e),e=Yr(t,r,i),e!==null&&(li(e,t,i,n),cu(e,t,i))}};function j0(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ml(n,i)||!Ml(r,s):!0}function xw(t,e,n){var i=!1,r=is,s=e.contextType;return typeof s=="object"&&s!==null?s=Fn(s):(r=dn(e)?Fs:Lt.current,i=e.contextTypes,s=(i=i!=null)?oa(t,r):is),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vd,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function F0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Vd.enqueueReplaceState(e,e.state,null)}function Fp(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},zg(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Fn(s):(s=dn(e)?Fs:Lt.current,r.context=oa(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(jp(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Vd.enqueueReplaceState(r,r.state,null),td(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function ua(t,e){try{var n="",i=e;do n+=_A(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function ih(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Up(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var nI=typeof WeakMap=="function"?WeakMap:Map;function Sw(t,e,n){n=lr(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){od||(od=!0,Yp=i),Up(t,e)},n}function Tw(t,e,n){n=lr(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Up(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Up(t,e),typeof i!="function"&&(Qr===null?Qr=new Set([this]):Qr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function U0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new nI;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=gI.bind(null,t,e,n),e.then(t,t))}function B0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function V0(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=lr(-1,1),e.tag=2,Yr(n,e,1))),n.lanes|=1),t)}var iI=xr.ReactCurrentOwner,ln=!1;function $t(t,e,n,i){e.child=t===null?Xk(e,null,n,i):la(e,t.child,n,i)}function z0(t,e,n,i,r){n=n.render;var s=e.ref;return Bo(e,r),i=Gg(t,e,n,i,s,r),n=Kg(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,pr(t,e,r)):(Be&&n&&Dg(e),e.flags|=1,$t(t,e,i,r),e.child)}function $0(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!rv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,kw(t,e,s,i,r)):(t=mu(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ml,n(o,i)&&t.ref===e.ref)return pr(t,e,r)}return e.flags|=1,t=Jr(s,i),t.ref=e.ref,t.return=e,e.child=t}function kw(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Ml(s,i)&&t.ref===e.ref)if(ln=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(ln=!0);else return e.lanes=t.lanes,pr(t,e,r)}return Bp(t,e,n,i,r)}function ww(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(Po,vn),vn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(Po,vn),vn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Ie(Po,vn),vn|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Ie(Po,vn),vn|=i;return $t(t,e,r,n),e.child}function Cw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Bp(t,e,n,i,r){var s=dn(n)?Fs:Lt.current;return s=oa(e,s),Bo(e,r),n=Gg(t,e,n,i,s,r),i=Kg(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,pr(t,e,r)):(Be&&i&&Dg(e),e.flags|=1,$t(t,e,n,r),e.child)}function W0(t,e,n,i,r){if(dn(n)){var s=!0;Qu(e)}else s=!1;if(Bo(e,r),e.stateNode===null)fu(t,e),xw(e,n,i),Fp(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Fn(c):(c=dn(n)?Fs:Lt.current,c=oa(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&F0(e,o,i,c),Nr=!1;var f=e.memoizedState;o.state=f,td(e,i,o,r),l=e.memoizedState,a!==i||f!==l||un.current||Nr?(typeof u=="function"&&(jp(e,n,u,i),l=e.memoizedState),(a=Nr||j0(e,n,a,i,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,Zk(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Xn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Fn(l):(l=dn(n)?Fs:Lt.current,l=oa(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&F0(e,o,i,l),Nr=!1,f=e.memoizedState,o.state=f,td(e,i,o,r);var v=e.memoizedState;a!==d||f!==v||un.current||Nr?(typeof h=="function"&&(jp(e,n,h,i),v=e.memoizedState),(c=Nr||j0(e,n,c,i,f,v,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return Vp(t,e,n,i,s,r)}function Vp(t,e,n,i,r,s){Cw(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&_0(e,n,!1),pr(t,e,s);i=e.stateNode,iI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=la(e,t.child,null,s),e.child=la(e,null,a,s)):$t(t,e,a,s),e.memoizedState=i.state,r&&_0(e,n,!0),e.child}function Ew(t){var e=t.stateNode;e.pendingContext?R0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&R0(t,e.context,!1),$g(t,e.containerInfo)}function H0(t,e,n,i,r){return aa(),jg(r),e.flags|=256,$t(t,e,n,i),e.child}var zp={dehydrated:null,treeContext:null,retryLane:0};function $p(t){return{baseLanes:t,cachePool:null,transitions:null}}function Pw(t,e,n){var i=e.pendingProps,r=ze.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ie(ze,r&1),t===null)return Dp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Wd(o,i,0,null),t=Ms(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=$p(n),e.memoizedState=zp,t):Xg(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return rI(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Jr(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Jr(a,s):(s=Ms(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?$p(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=zp,i}return s=t.child,t=s.sibling,i=Jr(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Xg(t,e){return e=Wd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function jc(t,e,n,i){return i!==null&&jg(i),la(e,t.child,null,n),t=Xg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rI(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=ih(Error(V(422))),jc(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Wd({mode:"visible",children:i.children},r,0,null),s=Ms(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&la(e,t.child,null,o),e.child.memoizedState=$p(o),e.memoizedState=zp,s);if(!(e.mode&1))return jc(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(V(419)),i=ih(s,i,void 0),jc(t,e,o,i)}if(a=(o&t.childLanes)!==0,ln||a){if(i=vt,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,hr(t,r),li(i,t,r,-1))}return iv(),i=ih(Error(V(421))),jc(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=vI.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Sn=Kr(r.nextSibling),kn=e,Be=!0,ii=null,t!==null&&(Mn[Dn++]=or,Mn[Dn++]=ar,Mn[Dn++]=Us,or=t.id,ar=t.overflow,Us=e),e=Xg(e,i.children),e.flags|=4096,e)}function q0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Lp(t.return,e,n)}function rh(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Rw(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if($t(t,e,i.children,n),i=ze.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&q0(t,n,e);else if(t.tag===19)q0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ie(ze,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&nd(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),rh(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&nd(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}rh(e,!0,n,null,s);break;case"together":rh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(V(153));if(e.child!==null){for(t=e.child,n=Jr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Jr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sI(t,e,n){switch(e.tag){case 3:Ew(e),aa();break;case 5:ew(e);break;case 1:dn(e.type)&&Qu(e);break;case 4:$g(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ie(Zu,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ie(ze,ze.current&1),e.flags|=128,null):n&e.child.childLanes?Pw(t,e,n):(Ie(ze,ze.current&1),t=pr(t,e,n),t!==null?t.sibling:null);Ie(ze,ze.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Rw(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ie(ze,ze.current),i)break;return null;case 22:case 23:return e.lanes=0,ww(t,e,n)}return pr(t,e,n)}var _w,Wp,Aw,Nw;_w=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wp=function(){};Aw=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Cs(Ni.current);var s=null;switch(n){case"input":r=fp(t,r),i=fp(t,i),s=[];break;case"select":r=He({},r,{value:void 0}),i=He({},i,{value:void 0}),s=[];break;case"textarea":r=mp(t,r),i=mp(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Ku)}vp(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Pl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Pl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Me("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Nw=function(t,e,n,i){n!==i&&(e.flags|=4)};function Fa(t,e){if(!Be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function oI(t,e,n){var i=e.pendingProps;switch(Lg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(e),null;case 1:return dn(e.type)&&Yu(),Nt(e),null;case 3:return i=e.stateNode,ca(),Le(un),Le(Lt),Hg(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Dc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ii!==null&&(Jp(ii),ii=null))),Wp(t,e),Nt(e),null;case 5:Wg(e);var r=Cs(Ul.current);if(n=e.type,t!==null&&e.stateNode!=null)Aw(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(V(166));return Nt(e),null}if(t=Cs(Ni.current),Dc(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Ei]=e,i[jl]=s,t=(e.mode&1)!==0,n){case"dialog":Me("cancel",i),Me("close",i);break;case"iframe":case"object":case"embed":Me("load",i);break;case"video":case"audio":for(r=0;r<il.length;r++)Me(il[r],i);break;case"source":Me("error",i);break;case"img":case"image":case"link":Me("error",i),Me("load",i);break;case"details":Me("toggle",i);break;case"input":t0(i,s),Me("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Me("invalid",i);break;case"textarea":i0(i,s),Me("invalid",i)}vp(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Mc(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Mc(i.textContent,a,t),r=["children",""+a]):Pl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Me("scroll",i)}switch(n){case"input":Ec(i),n0(i,s,!0);break;case"textarea":Ec(i),r0(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Ku)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=sk(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Ei]=e,t[jl]=i,_w(t,e,!1,!1),e.stateNode=t;e:{switch(o=yp(n,i),n){case"dialog":Me("cancel",t),Me("close",t),r=i;break;case"iframe":case"object":case"embed":Me("load",t),r=i;break;case"video":case"audio":for(r=0;r<il.length;r++)Me(il[r],t);r=i;break;case"source":Me("error",t),r=i;break;case"img":case"image":case"link":Me("error",t),Me("load",t),r=i;break;case"details":Me("toggle",t),r=i;break;case"input":t0(t,i),r=fp(t,i),Me("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=He({},i,{value:void 0}),Me("invalid",t);break;case"textarea":i0(t,i),r=mp(t,i),Me("invalid",t);break;default:r=i}vp(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?lk(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ok(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Rl(t,l):typeof l=="number"&&Rl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Pl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Me("scroll",t):l!=null&&Sg(t,s,l,o))}switch(n){case"input":Ec(t),n0(t,i,!1);break;case"textarea":Ec(t),r0(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ns(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Lo(t,!!i.multiple,s,!1):i.defaultValue!=null&&Lo(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Ku)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nt(e),null;case 6:if(t&&e.stateNode!=null)Nw(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(V(166));if(n=Cs(Ul.current),Cs(Ni.current),Dc(e)){if(i=e.stateNode,n=e.memoizedProps,i[Ei]=e,(s=i.nodeValue!==n)&&(t=kn,t!==null))switch(t.tag){case 3:Mc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Mc(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ei]=e,e.stateNode=i}return Nt(e),null;case 13:if(Le(ze),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Be&&Sn!==null&&e.mode&1&&!(e.flags&128))Yk(),aa(),e.flags|=98560,s=!1;else if(s=Dc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(V(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(V(317));s[Ei]=e}else aa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nt(e),s=!1}else ii!==null&&(Jp(ii),ii=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||ze.current&1?dt===0&&(dt=3):iv())),e.updateQueue!==null&&(e.flags|=4),Nt(e),null);case 4:return ca(),Wp(t,e),t===null&&Dl(e.stateNode.containerInfo),Nt(e),null;case 10:return Bg(e.type._context),Nt(e),null;case 17:return dn(e.type)&&Yu(),Nt(e),null;case 19:if(Le(ze),s=e.memoizedState,s===null)return Nt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Fa(s,!1);else{if(dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=nd(t),o!==null){for(e.flags|=128,Fa(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(ze,ze.current&1|2),e.child}t=t.sibling}s.tail!==null&&nt()>da&&(e.flags|=128,i=!0,Fa(s,!1),e.lanes=4194304)}else{if(!i)if(t=nd(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Be)return Nt(e),null}else 2*nt()-s.renderingStartTime>da&&n!==1073741824&&(e.flags|=128,i=!0,Fa(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=nt(),e.sibling=null,n=ze.current,Ie(ze,i?n&1|2:n&1),e):(Nt(e),null);case 22:case 23:return nv(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?vn&1073741824&&(Nt(e),e.subtreeFlags&6&&(e.flags|=8192)):Nt(e),null;case 24:return null;case 25:return null}throw Error(V(156,e.tag))}function aI(t,e){switch(Lg(e),e.tag){case 1:return dn(e.type)&&Yu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ca(),Le(un),Le(Lt),Hg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wg(e),null;case 13:if(Le(ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(V(340));aa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Le(ze),null;case 4:return ca(),null;case 10:return Bg(e.type._context),null;case 22:case 23:return nv(),null;case 24:return null;default:return null}}var Fc=!1,Mt=!1,lI=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Eo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Xe(t,e,i)}else n.current=null}function Hp(t,e,n){try{n()}catch(i){Xe(t,e,i)}}var G0=!1;function cI(t,e){if(Rp=Hu,t=Lk(),Mg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===s&&++u===i&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(_p={focusedElem:t,selectionRange:n},Hu=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var m=v.memoizedProps,b=v.memoizedState,p=e.stateNode,y=p.getSnapshotBeforeUpdate(e.elementType===e.type?m:Xn(e.type,m),b);p.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(T){Xe(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return v=G0,G0=!1,v}function ml(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Hp(e,n,s)}r=r.next}while(r!==i)}}function zd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function qp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Iw(t){var e=t.alternate;e!==null&&(t.alternate=null,Iw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ei],delete e[jl],delete e[Ip],delete e[HN],delete e[qN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ow(t){return t.tag===5||t.tag===3||t.tag===4}function K0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ow(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ku));else if(i!==4&&(t=t.child,t!==null))for(Gp(t,e,n),t=t.sibling;t!==null;)Gp(t,e,n),t=t.sibling}function Kp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Kp(t,e,n),t=t.sibling;t!==null;)Kp(t,e,n),t=t.sibling}var bt=null,ti=!1;function Sr(t,e,n){for(n=n.child;n!==null;)Mw(t,e,n),n=n.sibling}function Mw(t,e,n){if(Ai&&typeof Ai.onCommitFiberUnmount=="function")try{Ai.onCommitFiberUnmount(Md,n)}catch{}switch(n.tag){case 5:Mt||Eo(n,e);case 6:var i=bt,r=ti;bt=null,Sr(t,e,n),bt=i,ti=r,bt!==null&&(ti?(t=bt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):bt.removeChild(n.stateNode));break;case 18:bt!==null&&(ti?(t=bt,n=n.stateNode,t.nodeType===8?Xf(t.parentNode,n):t.nodeType===1&&Xf(t,n),Il(t)):Xf(bt,n.stateNode));break;case 4:i=bt,r=ti,bt=n.stateNode.containerInfo,ti=!0,Sr(t,e,n),bt=i,ti=r;break;case 0:case 11:case 14:case 15:if(!Mt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Hp(n,e,o),r=r.next}while(r!==i)}Sr(t,e,n);break;case 1:if(!Mt&&(Eo(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Xe(n,e,a)}Sr(t,e,n);break;case 21:Sr(t,e,n);break;case 22:n.mode&1?(Mt=(i=Mt)||n.memoizedState!==null,Sr(t,e,n),Mt=i):Sr(t,e,n);break;default:Sr(t,e,n)}}function Y0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new lI),e.forEach(function(i){var r=yI.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Hn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:bt=a.stateNode,ti=!1;break e;case 3:bt=a.stateNode.containerInfo,ti=!0;break e;case 4:bt=a.stateNode.containerInfo,ti=!0;break e}a=a.return}if(bt===null)throw Error(V(160));Mw(s,o,r),bt=null,ti=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Xe(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Dw(e,t),e=e.sibling}function Dw(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hn(e,t),bi(t),i&4){try{ml(3,t,t.return),zd(3,t)}catch(m){Xe(t,t.return,m)}try{ml(5,t,t.return)}catch(m){Xe(t,t.return,m)}}break;case 1:Hn(e,t),bi(t),i&512&&n!==null&&Eo(n,n.return);break;case 5:if(Hn(e,t),bi(t),i&512&&n!==null&&Eo(n,n.return),t.flags&32){var r=t.stateNode;try{Rl(r,"")}catch(m){Xe(t,t.return,m)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&ik(r,s),yp(a,o);var c=yp(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?lk(r,d):u==="dangerouslySetInnerHTML"?ok(r,d):u==="children"?Rl(r,d):Sg(r,u,d,c)}switch(a){case"input":hp(r,s);break;case"textarea":rk(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Lo(r,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?Lo(r,!!s.multiple,s.defaultValue,!0):Lo(r,!!s.multiple,s.multiple?[]:"",!1))}r[jl]=s}catch(m){Xe(t,t.return,m)}}break;case 6:if(Hn(e,t),bi(t),i&4){if(t.stateNode===null)throw Error(V(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(m){Xe(t,t.return,m)}}break;case 3:if(Hn(e,t),bi(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Il(e.containerInfo)}catch(m){Xe(t,t.return,m)}break;case 4:Hn(e,t),bi(t);break;case 13:Hn(e,t),bi(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(ev=nt())),i&4&&Y0(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Mt=(c=Mt)||u,Hn(e,t),Mt=c):Hn(e,t),bi(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Z=t,u=t.child;u!==null;){for(d=Z=u;Z!==null;){switch(f=Z,h=f.child,f.tag){case 0:case 11:case 14:case 15:ml(4,f,f.return);break;case 1:Eo(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(m){Xe(i,n,m)}}break;case 5:Eo(f,f.return);break;case 22:if(f.memoizedState!==null){X0(d);continue}}h!==null?(h.return=f,Z=h):X0(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ak("display",o))}catch(m){Xe(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Xe(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Hn(e,t),bi(t),i&4&&Y0(t);break;case 21:break;default:Hn(e,t),bi(t)}}function bi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ow(n)){var i=n;break e}n=n.return}throw Error(V(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Rl(r,""),i.flags&=-33);var s=K0(t);Kp(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=K0(t);Gp(t,a,o);break;default:throw Error(V(161))}}catch(l){Xe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uI(t,e,n){Z=t,Lw(t)}function Lw(t,e,n){for(var i=(t.mode&1)!==0;Z!==null;){var r=Z,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Fc;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Mt;a=Fc;var c=Mt;if(Fc=o,(Mt=l)&&!c)for(Z=r;Z!==null;)o=Z,l=o.child,o.tag===22&&o.memoizedState!==null?J0(r):l!==null?(l.return=o,Z=l):J0(r);for(;s!==null;)Z=s,Lw(s),s=s.sibling;Z=r,Fc=a,Mt=c}Q0(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Z=s):Q0(t)}}function Q0(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mt||zd(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Mt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Xn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&M0(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}M0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Il(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}Mt||e.flags&512&&qp(e)}catch(f){Xe(e,e.return,f)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function X0(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function J0(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{zd(4,e)}catch(l){Xe(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Xe(e,r,l)}}var s=e.return;try{qp(e)}catch(l){Xe(e,s,l)}break;case 5:var o=e.return;try{qp(e)}catch(l){Xe(e,o,l)}}}catch(l){Xe(e,e.return,l)}if(e===t){Z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Z=a;break}Z=e.return}}var dI=Math.ceil,sd=xr.ReactCurrentDispatcher,Jg=xr.ReactCurrentOwner,jn=xr.ReactCurrentBatchConfig,Te=0,vt=null,ot=null,Tt=0,vn=0,Po=us(0),dt=0,$l=null,Vs=0,$d=0,Zg=0,gl=null,on=null,ev=0,da=1/0,Ji=null,od=!1,Yp=null,Qr=null,Uc=!1,zr=null,ad=0,vl=0,Qp=null,hu=-1,pu=0;function qt(){return Te&6?nt():hu!==-1?hu:hu=nt()}function Xr(t){return t.mode&1?Te&2&&Tt!==0?Tt&-Tt:KN.transition!==null?(pu===0&&(pu=xk()),pu):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:Pk(t.type)),t):1}function li(t,e,n,i){if(50<vl)throw vl=0,Qp=null,Error(V(185));uc(t,n,i),(!(Te&2)||t!==vt)&&(t===vt&&(!(Te&2)&&($d|=n),dt===4&&Mr(t,Tt)),fn(t,i),n===1&&Te===0&&!(e.mode&1)&&(da=nt()+500,Ud&&ds()))}function fn(t,e){var n=t.callbackNode;KA(t,e);var i=Wu(t,t===vt?Tt:0);if(i===0)n!==null&&a0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&a0(n),e===1)t.tag===0?GN(Z0.bind(null,t)):qk(Z0.bind(null,t)),$N(function(){!(Te&6)&&ds()}),n=null;else{switch(Sk(i)){case 1:n=Eg;break;case 4:n=yk;break;case 16:n=$u;break;case 536870912:n=bk;break;default:n=$u}n=Ww(n,jw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function jw(t,e){if(hu=-1,pu=0,Te&6)throw Error(V(327));var n=t.callbackNode;if(Vo()&&t.callbackNode!==n)return null;var i=Wu(t,t===vt?Tt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=ld(t,i);else{e=i;var r=Te;Te|=2;var s=Uw();(vt!==t||Tt!==e)&&(Ji=null,da=nt()+500,Os(t,e));do try{pI();break}catch(a){Fw(t,a)}while(!0);Ug(),sd.current=s,Te=r,ot!==null?e=0:(vt=null,Tt=0,e=dt)}if(e!==0){if(e===2&&(r=kp(t),r!==0&&(i=r,e=Xp(t,r))),e===1)throw n=$l,Os(t,0),Mr(t,i),fn(t,nt()),n;if(e===6)Mr(t,i);else{if(r=t.current.alternate,!(i&30)&&!fI(r)&&(e=ld(t,i),e===2&&(s=kp(t),s!==0&&(i=s,e=Xp(t,s))),e===1))throw n=$l,Os(t,0),Mr(t,i),fn(t,nt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(V(345));case 2:ys(t,on,Ji);break;case 3:if(Mr(t,i),(i&130023424)===i&&(e=ev+500-nt(),10<e)){if(Wu(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){qt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Np(ys.bind(null,t,on,Ji),e);break}ys(t,on,Ji);break;case 4:if(Mr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-ai(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=nt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*dI(i/1960))-i,10<i){t.timeoutHandle=Np(ys.bind(null,t,on,Ji),i);break}ys(t,on,Ji);break;case 5:ys(t,on,Ji);break;default:throw Error(V(329))}}}return fn(t,nt()),t.callbackNode===n?jw.bind(null,t):null}function Xp(t,e){var n=gl;return t.current.memoizedState.isDehydrated&&(Os(t,e).flags|=256),t=ld(t,e),t!==2&&(e=on,on=n,e!==null&&Jp(e)),t}function Jp(t){on===null?on=t:on.push.apply(on,t)}function fI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ci(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mr(t,e){for(e&=~Zg,e&=~$d,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ai(e),i=1<<n;t[n]=-1,e&=~i}}function Z0(t){if(Te&6)throw Error(V(327));Vo();var e=Wu(t,0);if(!(e&1))return fn(t,nt()),null;var n=ld(t,e);if(t.tag!==0&&n===2){var i=kp(t);i!==0&&(e=i,n=Xp(t,i))}if(n===1)throw n=$l,Os(t,0),Mr(t,e),fn(t,nt()),n;if(n===6)throw Error(V(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ys(t,on,Ji),fn(t,nt()),null}function tv(t,e){var n=Te;Te|=1;try{return t(e)}finally{Te=n,Te===0&&(da=nt()+500,Ud&&ds())}}function zs(t){zr!==null&&zr.tag===0&&!(Te&6)&&Vo();var e=Te;Te|=1;var n=jn.transition,i=Ee;try{if(jn.transition=null,Ee=1,t)return t()}finally{Ee=i,jn.transition=n,Te=e,!(Te&6)&&ds()}}function nv(){vn=Po.current,Le(Po)}function Os(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zN(n)),ot!==null)for(n=ot.return;n!==null;){var i=n;switch(Lg(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Yu();break;case 3:ca(),Le(un),Le(Lt),Hg();break;case 5:Wg(i);break;case 4:ca();break;case 13:Le(ze);break;case 19:Le(ze);break;case 10:Bg(i.type._context);break;case 22:case 23:nv()}n=n.return}if(vt=t,ot=t=Jr(t.current,null),Tt=vn=e,dt=0,$l=null,Zg=$d=Vs=0,on=gl=null,ws!==null){for(e=0;e<ws.length;e++)if(n=ws[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}ws=null}return t}function Fw(t,e){do{var n=ot;try{if(Ug(),uu.current=rd,id){for(var i=We.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}id=!1}if(Bs=0,pt=ut=We=null,pl=!1,Bl=0,Jg.current=null,n===null||n.return===null){dt=1,$l=e,ot=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Tt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=B0(o);if(h!==null){h.flags&=-257,V0(h,o,a,s,e),h.mode&1&&U0(s,c,e),e=h,l=c;var v=e.updateQueue;if(v===null){var m=new Set;m.add(l),e.updateQueue=m}else v.add(l);break e}else{if(!(e&1)){U0(s,c,e),iv();break e}l=Error(V(426))}}else if(Be&&a.mode&1){var b=B0(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),V0(b,o,a,s,e),jg(ua(l,a));break e}}s=l=ua(l,a),dt!==4&&(dt=2),gl===null?gl=[s]:gl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=Sw(s,l,e);O0(s,p);break e;case 1:a=l;var y=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Qr===null||!Qr.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=Tw(s,a,e);O0(s,T);break e}}s=s.return}while(s!==null)}Vw(n)}catch(k){e=k,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(!0)}function Uw(){var t=sd.current;return sd.current=rd,t===null?rd:t}function iv(){(dt===0||dt===3||dt===2)&&(dt=4),vt===null||!(Vs&268435455)&&!($d&268435455)||Mr(vt,Tt)}function ld(t,e){var n=Te;Te|=2;var i=Uw();(vt!==t||Tt!==e)&&(Ji=null,Os(t,e));do try{hI();break}catch(r){Fw(t,r)}while(!0);if(Ug(),Te=n,sd.current=i,ot!==null)throw Error(V(261));return vt=null,Tt=0,dt}function hI(){for(;ot!==null;)Bw(ot)}function pI(){for(;ot!==null&&!UA();)Bw(ot)}function Bw(t){var e=$w(t.alternate,t,vn);t.memoizedProps=t.pendingProps,e===null?Vw(t):ot=e,Jg.current=null}function Vw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=aI(n,e),n!==null){n.flags&=32767,ot=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dt=6,ot=null;return}}else if(n=oI(n,e,vn),n!==null){ot=n;return}if(e=e.sibling,e!==null){ot=e;return}ot=e=t}while(e!==null);dt===0&&(dt=5)}function ys(t,e,n){var i=Ee,r=jn.transition;try{jn.transition=null,Ee=1,mI(t,e,n,i)}finally{jn.transition=r,Ee=i}return null}function mI(t,e,n,i){do Vo();while(zr!==null);if(Te&6)throw Error(V(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(V(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(YA(t,s),t===vt&&(ot=vt=null,Tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Uc||(Uc=!0,Ww($u,function(){return Vo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=jn.transition,jn.transition=null;var o=Ee;Ee=1;var a=Te;Te|=4,Jg.current=null,cI(t,n),Dw(n,t),DN(_p),Hu=!!Rp,_p=Rp=null,t.current=n,uI(n),BA(),Te=a,Ee=o,jn.transition=s}else t.current=n;if(Uc&&(Uc=!1,zr=t,ad=r),s=t.pendingLanes,s===0&&(Qr=null),$A(n.stateNode),fn(t,nt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(od)throw od=!1,t=Yp,Yp=null,t;return ad&1&&t.tag!==0&&Vo(),s=t.pendingLanes,s&1?t===Qp?vl++:(vl=0,Qp=t):vl=0,ds(),null}function Vo(){if(zr!==null){var t=Sk(ad),e=jn.transition,n=Ee;try{if(jn.transition=null,Ee=16>t?16:t,zr===null)var i=!1;else{if(t=zr,zr=null,ad=0,Te&6)throw Error(V(331));var r=Te;for(Te|=4,Z=t.current;Z!==null;){var s=Z,o=s.child;if(Z.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Z=c;Z!==null;){var u=Z;switch(u.tag){case 0:case 11:case 15:ml(8,u,s)}var d=u.child;if(d!==null)d.return=u,Z=d;else for(;Z!==null;){u=Z;var f=u.sibling,h=u.return;if(Iw(u),u===c){Z=null;break}if(f!==null){f.return=h,Z=f;break}Z=h}}}var v=s.alternate;if(v!==null){var m=v.child;if(m!==null){v.child=null;do{var b=m.sibling;m.sibling=null,m=b}while(m!==null)}}Z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Z=o;else e:for(;Z!==null;){if(s=Z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ml(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,Z=p;break e}Z=s.return}}var y=t.current;for(Z=y;Z!==null;){o=Z;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Z=S;else e:for(o=y;Z!==null;){if(a=Z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:zd(9,a)}}catch(k){Xe(a,a.return,k)}if(a===o){Z=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,Z=T;break e}Z=a.return}}if(Te=r,ds(),Ai&&typeof Ai.onPostCommitFiberRoot=="function")try{Ai.onPostCommitFiberRoot(Md,t)}catch{}i=!0}return i}finally{Ee=n,jn.transition=e}}return!1}function eb(t,e,n){e=ua(n,e),e=Sw(t,e,1),t=Yr(t,e,1),e=qt(),t!==null&&(uc(t,1,e),fn(t,e))}function Xe(t,e,n){if(t.tag===3)eb(t,t,n);else for(;e!==null;){if(e.tag===3){eb(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Qr===null||!Qr.has(i))){t=ua(n,t),t=Tw(e,t,1),e=Yr(e,t,1),t=qt(),e!==null&&(uc(e,1,t),fn(e,t));break}}e=e.return}}function gI(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=qt(),t.pingedLanes|=t.suspendedLanes&n,vt===t&&(Tt&n)===n&&(dt===4||dt===3&&(Tt&130023424)===Tt&&500>nt()-ev?Os(t,0):Zg|=n),fn(t,e)}function zw(t,e){e===0&&(t.mode&1?(e=_c,_c<<=1,!(_c&130023424)&&(_c=4194304)):e=1);var n=qt();t=hr(t,e),t!==null&&(uc(t,e,n),fn(t,n))}function vI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),zw(t,n)}function yI(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(V(314))}i!==null&&i.delete(e),zw(t,n)}var $w;$w=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||un.current)ln=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ln=!1,sI(t,e,n);ln=!!(t.flags&131072)}else ln=!1,Be&&e.flags&1048576&&Gk(e,Ju,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;fu(t,e),t=e.pendingProps;var r=oa(e,Lt.current);Bo(e,n),r=Gg(null,e,i,t,r,n);var s=Kg();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dn(i)?(s=!0,Qu(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,zg(e),r.updater=Vd,e.stateNode=r,r._reactInternals=e,Fp(e,i,t,n),e=Vp(null,e,i,!0,s,n)):(e.tag=0,Be&&s&&Dg(e),$t(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(fu(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=xI(i),t=Xn(i,t),r){case 0:e=Bp(null,e,i,t,n);break e;case 1:e=W0(null,e,i,t,n);break e;case 11:e=z0(null,e,i,t,n);break e;case 14:e=$0(null,e,i,Xn(i.type,t),n);break e}throw Error(V(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Xn(i,r),Bp(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Xn(i,r),W0(t,e,i,r,n);case 3:e:{if(Ew(e),t===null)throw Error(V(387));i=e.pendingProps,s=e.memoizedState,r=s.element,Zk(t,e),td(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=ua(Error(V(423)),e),e=H0(t,e,i,n,r);break e}else if(i!==r){r=ua(Error(V(424)),e),e=H0(t,e,i,n,r);break e}else for(Sn=Kr(e.stateNode.containerInfo.firstChild),kn=e,Be=!0,ii=null,n=Xk(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(aa(),i===r){e=pr(t,e,n);break e}$t(t,e,i,n)}e=e.child}return e;case 5:return ew(e),t===null&&Dp(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Ap(i,r)?o=null:s!==null&&Ap(i,s)&&(e.flags|=32),Cw(t,e),$t(t,e,o,n),e.child;case 6:return t===null&&Dp(e),null;case 13:return Pw(t,e,n);case 4:return $g(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=la(e,null,i,n):$t(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Xn(i,r),z0(t,e,i,r,n);case 7:return $t(t,e,e.pendingProps,n),e.child;case 8:return $t(t,e,e.pendingProps.children,n),e.child;case 12:return $t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Ie(Zu,i._currentValue),i._currentValue=o,s!==null)if(ci(s.value,o)){if(s.children===r.children&&!un.current){e=pr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=lr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Lp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(V(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Lp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}$t(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Bo(e,n),r=Fn(r),i=i(r),e.flags|=1,$t(t,e,i,n),e.child;case 14:return i=e.type,r=Xn(i,e.pendingProps),r=Xn(i.type,r),$0(t,e,i,r,n);case 15:return kw(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Xn(i,r),fu(t,e),e.tag=1,dn(i)?(t=!0,Qu(e)):t=!1,Bo(e,n),xw(e,i,r),Fp(e,i,r,n),Vp(null,e,i,!0,t,n);case 19:return Rw(t,e,n);case 22:return ww(t,e,n)}throw Error(V(156,e.tag))};function Ww(t,e){return vk(t,e)}function bI(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(t,e,n,i){return new bI(t,e,n,i)}function rv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xI(t){if(typeof t=="function")return rv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===kg)return 11;if(t===wg)return 14}return 2}function Jr(t,e){var n=t.alternate;return n===null?(n=Ln(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function mu(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")rv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case vo:return Ms(n.children,r,s,e);case Tg:o=8,r|=8;break;case lp:return t=Ln(12,n,e,r|2),t.elementType=lp,t.lanes=s,t;case cp:return t=Ln(13,n,e,r),t.elementType=cp,t.lanes=s,t;case up:return t=Ln(19,n,e,r),t.elementType=up,t.lanes=s,t;case ek:return Wd(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case JT:o=10;break e;case ZT:o=9;break e;case kg:o=11;break e;case wg:o=14;break e;case Ar:o=16,i=null;break e}throw Error(V(130,t==null?t:typeof t,""))}return e=Ln(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Ms(t,e,n,i){return t=Ln(7,t,i,e),t.lanes=n,t}function Wd(t,e,n,i){return t=Ln(22,t,i,e),t.elementType=ek,t.lanes=n,t.stateNode={isHidden:!1},t}function sh(t,e,n){return t=Ln(6,t,null,e),t.lanes=n,t}function oh(t,e,n){return e=Ln(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function SI(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bf(0),this.expirationTimes=Bf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bf(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function sv(t,e,n,i,r,s,o,a,l){return t=new SI(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ln(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zg(s),t}function TI(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:go,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Hw(t){if(!t)return is;t=t._reactInternals;e:{if(Ys(t)!==t||t.tag!==1)throw Error(V(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(V(171))}if(t.tag===1){var n=t.type;if(dn(n))return Hk(t,n,e)}return e}function qw(t,e,n,i,r,s,o,a,l){return t=sv(n,i,!0,t,r,s,o,a,l),t.context=Hw(null),n=t.current,i=qt(),r=Xr(n),s=lr(i,r),s.callback=e??null,Yr(n,s,r),t.current.lanes=r,uc(t,r,i),fn(t,i),t}function Hd(t,e,n,i){var r=e.current,s=qt(),o=Xr(r);return n=Hw(n),e.context===null?e.context=n:e.pendingContext=n,e=lr(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Yr(r,e,o),t!==null&&(li(t,r,o,s),cu(t,r,o)),o}function cd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function tb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ov(t,e){tb(t,e),(t=t.alternate)&&tb(t,e)}function kI(){return null}var Gw=typeof reportError=="function"?reportError:function(t){console.error(t)};function av(t){this._internalRoot=t}qd.prototype.render=av.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(V(409));Hd(t,e,null,null)};qd.prototype.unmount=av.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zs(function(){Hd(null,t,null,null)}),e[fr]=null}};function qd(t){this._internalRoot=t}qd.prototype.unstable_scheduleHydration=function(t){if(t){var e=wk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Or.length&&e!==0&&e<Or[n].priority;n++);Or.splice(n,0,t),n===0&&Ek(t)}};function lv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Gd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nb(){}function wI(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=cd(o);s.call(c)}}var o=qw(e,i,t,0,null,!1,!1,"",nb);return t._reactRootContainer=o,t[fr]=o.current,Dl(t.nodeType===8?t.parentNode:t),zs(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=cd(l);a.call(c)}}var l=sv(t,0,!1,null,null,!1,!1,"",nb);return t._reactRootContainer=l,t[fr]=l.current,Dl(t.nodeType===8?t.parentNode:t),zs(function(){Hd(e,l,n,i)}),l}function Kd(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=cd(o);a.call(l)}}Hd(e,o,t,r)}else o=wI(n,e,t,r,i);return cd(o)}Tk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=nl(e.pendingLanes);n!==0&&(Pg(e,n|1),fn(e,nt()),!(Te&6)&&(da=nt()+500,ds()))}break;case 13:zs(function(){var i=hr(t,1);if(i!==null){var r=qt();li(i,t,1,r)}}),ov(t,1)}};Rg=function(t){if(t.tag===13){var e=hr(t,134217728);if(e!==null){var n=qt();li(e,t,134217728,n)}ov(t,134217728)}};kk=function(t){if(t.tag===13){var e=Xr(t),n=hr(t,e);if(n!==null){var i=qt();li(n,t,e,i)}ov(t,e)}};wk=function(){return Ee};Ck=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};xp=function(t,e,n){switch(e){case"input":if(hp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Fd(i);if(!r)throw Error(V(90));nk(i),hp(i,r)}}}break;case"textarea":rk(t,n);break;case"select":e=n.value,e!=null&&Lo(t,!!n.multiple,e,!1)}};dk=tv;fk=zs;var CI={usingClientEntryPoint:!1,Events:[fc,So,Fd,ck,uk,tv]},Ua={findFiberByHostInstance:ks,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},EI={bundleType:Ua.bundleType,version:Ua.version,rendererPackageName:Ua.rendererPackageName,rendererConfig:Ua.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mk(t),t===null?null:t.stateNode},findFiberByHostInstance:Ua.findFiberByHostInstance||kI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bc.isDisabled&&Bc.supportsFiber)try{Md=Bc.inject(EI),Ai=Bc}catch{}}_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CI;_n.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lv(e))throw Error(V(200));return TI(t,e,null,n)};_n.createRoot=function(t,e){if(!lv(t))throw Error(V(299));var n=!1,i="",r=Gw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=sv(t,1,!1,null,null,n,!1,i,r),t[fr]=e.current,Dl(t.nodeType===8?t.parentNode:t),new av(e)};_n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(V(188)):(t=Object.keys(t).join(","),Error(V(268,t)));return t=mk(e),t=t===null?null:t.stateNode,t};_n.flushSync=function(t){return zs(t)};_n.hydrate=function(t,e,n){if(!Gd(e))throw Error(V(200));return Kd(null,t,e,!0,n)};_n.hydrateRoot=function(t,e,n){if(!lv(t))throw Error(V(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=Gw;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=qw(e,null,t,1,n??null,r,!1,s,o),t[fr]=e.current,Dl(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new qd(e)};_n.render=function(t,e,n){if(!Gd(e))throw Error(V(200));return Kd(null,t,e,!1,n)};_n.unmountComponentAtNode=function(t){if(!Gd(t))throw Error(V(40));return t._reactRootContainer?(zs(function(){Kd(null,null,t,!1,function(){t._reactRootContainer=null,t[fr]=null})}),!0):!1};_n.unstable_batchedUpdates=tv;_n.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Gd(n))throw Error(V(200));if(t==null||t._reactInternals===void 0)throw Error(V(38));return Kd(t,e,n,!1,i)};_n.version="18.3.1-next-f1338f8080-20240426";function Kw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kw)}catch(t){console.error(t)}}Kw(),KT.exports=_n;var pc=KT.exports;const Yw=LT(pc);var Qw,ib=pc;Qw=ib.createRoot,ib.hydrateRoot;const PI=1,RI=1e6;let ah=0;function _I(){return ah=(ah+1)%Number.MAX_SAFE_INTEGER,ah.toString()}const lh=new Map,rb=t=>{if(lh.has(t))return;const e=setTimeout(()=>{lh.delete(t),yl({type:"REMOVE_TOAST",toastId:t})},RI);lh.set(t,e)},AI=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,PI)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?rb(n):t.toasts.forEach(i=>{rb(i.id)}),{...t,toasts:t.toasts.map(i=>i.id===n||n===void 0?{...i,open:!1}:i)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},gu=[];let vu={toasts:[]};function yl(t){vu=AI(vu,t),gu.forEach(e=>{e(vu)})}function Xw({...t}){const e=_I(),n=r=>yl({type:"UPDATE_TOAST",toast:{...r,id:e}}),i=()=>yl({type:"DISMISS_TOAST",toastId:e});return yl({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:r=>{r||i()}}}),{id:e,dismiss:i,update:n}}function NI(){const[t,e]=x.useState(vu);return x.useEffect(()=>(gu.push(e),()=>{const n=gu.indexOf(e);n>-1&&gu.splice(n,1)}),[t]),{...t,toast:Xw,dismiss:n=>yl({type:"DISMISS_TOAST",toastId:n})}}function Ne(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function sb(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Jw(...t){return e=>{let n=!1;const i=t.map(r=>{const s=sb(r,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():sb(t[r],null)}}}}function wt(...t){return x.useCallback(Jw(...t),t)}function II(t,e){const n=x.createContext(e),i=s=>{const{children:o,...a}=s,l=x.useMemo(()=>a,Object.values(a));return g.jsx(n.Provider,{value:l,children:o})};i.displayName=t+"Provider";function r(s){const o=x.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[i,r]}function ka(t,e=[]){let n=[];function i(s,o){const a=x.createContext(o),l=n.length;n=[...n,o];const c=d=>{var p;const{scope:f,children:h,...v}=d,m=((p=f==null?void 0:f[t])==null?void 0:p[l])||a,b=x.useMemo(()=>v,Object.values(v));return g.jsx(m.Provider,{value:b,children:h})};c.displayName=s+"Provider";function u(d,f){var m;const h=((m=f==null?void 0:f[t])==null?void 0:m[l])||a,v=x.useContext(h);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const r=()=>{const s=n.map(o=>x.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return x.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,OI(r,...e)]}function OI(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Wl(t){const e=DI(t),n=x.forwardRef((i,r)=>{const{children:s,...o}=i,a=x.Children.toArray(s),l=a.find(jI);if(l){const c=l.props.children,u=a.map(d=>d===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:d);return g.jsx(e,{...o,ref:r,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return g.jsx(e,{...o,ref:r,children:s})});return n.displayName=`${t}.Slot`,n}var MI=Wl("Slot");function DI(t){const e=x.forwardRef((n,i)=>{const{children:r,...s}=n;if(x.isValidElement(r)){const o=UI(r),a=FI(s,r.props);return r.type!==x.Fragment&&(a.ref=i?Jw(i,o):o),x.cloneElement(r,a)}return x.Children.count(r)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Zw=Symbol("radix.slottable");function LI(t){const e=({children:n})=>g.jsx(g.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=Zw,e}function jI(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Zw}function FI(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{const l=s(...a);return r(...a),l}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function UI(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function BI(t){const e=t+"CollectionProvider",[n,i]=ka(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:b,children:p}=m,y=H.useRef(null),S=H.useRef(new Map).current;return g.jsx(r,{scope:b,itemMap:S,collectionRef:y,children:p})};o.displayName=e;const a=t+"CollectionSlot",l=Wl(a),c=H.forwardRef((m,b)=>{const{scope:p,children:y}=m,S=s(a,p),T=wt(b,S.collectionRef);return g.jsx(l,{ref:T,children:y})});c.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=Wl(u),h=H.forwardRef((m,b)=>{const{scope:p,children:y,...S}=m,T=H.useRef(null),k=wt(b,T),w=s(u,p);return H.useEffect(()=>(w.itemMap.set(T,{ref:T,...S}),()=>void w.itemMap.delete(T))),g.jsx(f,{[d]:"",ref:k,children:y})});h.displayName=u;function v(m){const b=s(t+"CollectionConsumer",m);return H.useCallback(()=>{const y=b.collectionRef.current;if(!y)return[];const S=Array.from(y.querySelectorAll(`[${d}]`));return Array.from(b.itemMap.values()).sort((w,E)=>S.indexOf(w.ref.current)-S.indexOf(E.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:c,ItemSlot:h},v,i]}var VI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],qe=VI.reduce((t,e)=>{const n=Wl(`Primitive.${e}`),i=x.forwardRef((r,s)=>{const{asChild:o,...a}=r,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(l,{...a,ref:s})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function eC(t,e){t&&pc.flushSync(()=>t.dispatchEvent(e))}function Li(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>{var i;return(i=e.current)==null?void 0:i.call(e,...n)},[])}function zI(t,e=globalThis==null?void 0:globalThis.document){const n=Li(t);x.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var $I="DismissableLayer",Zp="dismissableLayer.update",WI="dismissableLayer.pointerDownOutside",HI="dismissableLayer.focusOutside",ob,tC=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Yd=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=x.useContext(tC),[u,d]=x.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=x.useState({}),v=wt(e,E=>d(E)),m=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),p=m.indexOf(b),y=u?m.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,T=y>=p,k=GI(E=>{const P=E.target,_=[...c.branches].some(A=>A.contains(P));!T||_||(r==null||r(E),o==null||o(E),E.defaultPrevented||a==null||a())},f),w=KI(E=>{const P=E.target;[...c.branches].some(A=>A.contains(P))||(s==null||s(E),o==null||o(E),E.defaultPrevented||a==null||a())},f);return zI(E=>{y===c.layers.size-1&&(i==null||i(E),!E.defaultPrevented&&a&&(E.preventDefault(),a()))},f),x.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(ob=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),ab(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=ob)}},[u,f,n,c]),x.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),ab())},[u,c]),x.useEffect(()=>{const E=()=>h({});return document.addEventListener(Zp,E),()=>document.removeEventListener(Zp,E)},[]),g.jsx(qe.div,{...l,ref:v,style:{pointerEvents:S?T?"auto":"none":void 0,...t.style},onFocusCapture:Ne(t.onFocusCapture,w.onFocusCapture),onBlurCapture:Ne(t.onBlurCapture,w.onBlurCapture),onPointerDownCapture:Ne(t.onPointerDownCapture,k.onPointerDownCapture)})});Yd.displayName=$I;var qI="DismissableLayerBranch",nC=x.forwardRef((t,e)=>{const n=x.useContext(tC),i=x.useRef(null),r=wt(e,i);return x.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),g.jsx(qe.div,{...t,ref:r})});nC.displayName=qI;function GI(t,e=globalThis==null?void 0:globalThis.document){const n=Li(t),i=x.useRef(!1),r=x.useRef(()=>{});return x.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){iC(WI,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function KI(t,e=globalThis==null?void 0:globalThis.document){const n=Li(t),i=x.useRef(!1);return x.useEffect(()=>{const r=s=>{s.target&&!i.current&&iC(HI,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function ab(){const t=new CustomEvent(Zp);document.dispatchEvent(t)}function iC(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?eC(r,s):r.dispatchEvent(s)}var YI=Yd,QI=nC,mr=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},XI="Portal",cv=x.forwardRef((t,e)=>{var a;const{container:n,...i}=t,[r,s]=x.useState(!1);mr(()=>s(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?Yw.createPortal(g.jsx(qe.div,{...i,ref:e}),o):null});cv.displayName=XI;function JI(t,e){return x.useReducer((n,i)=>e[n][i]??n,t)}var Qs=t=>{const{present:e,children:n}=t,i=ZI(e),r=typeof n=="function"?n({present:i.isPresent}):x.Children.only(n),s=wt(i.ref,eO(r));return typeof n=="function"||i.isPresent?x.cloneElement(r,{ref:s}):null};Qs.displayName="Presence";function ZI(t){const[e,n]=x.useState(),i=x.useRef(null),r=x.useRef(t),s=x.useRef("none"),o=t?"mounted":"unmounted",[a,l]=JI(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const c=Vc(i.current);s.current=a==="mounted"?c:"none"},[a]),mr(()=>{const c=i.current,u=r.current;if(u!==t){const f=s.current,h=Vc(c);t?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),mr(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=h=>{const m=Vc(i.current).includes(h.animationName);if(h.target===e&&m&&(l("ANIMATION_END"),!r.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},f=h=>{h.target===e&&(s.current=Vc(i.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:x.useCallback(c=>{i.current=c?getComputedStyle(c):null,n(c)},[])}}function Vc(t){return(t==null?void 0:t.animationName)||"none"}function eO(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var tO=yg[" useInsertionEffect ".trim().toString()]||mr;function uv({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){const[r,s,o]=nO({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:r;{const u=x.useRef(t!==void 0);x.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${i} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,i])}const c=x.useCallback(u=>{var d;if(a){const f=iO(u)?u(t):u;f!==t&&((d=o.current)==null||d.call(o,f))}else s(u)},[a,t,s,o]);return[l,c]}function nO({defaultProp:t,onChange:e}){const[n,i]=x.useState(t),r=x.useRef(n),s=x.useRef(e);return tO(()=>{s.current=e},[e]),x.useEffect(()=>{var o;r.current!==n&&((o=s.current)==null||o.call(s,n),r.current=n)},[n,r]),[n,i,s]}function iO(t){return typeof t=="function"}var rO=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),sO="VisuallyHidden",Qd=x.forwardRef((t,e)=>g.jsx(qe.span,{...t,ref:e,style:{...rO,...t.style}}));Qd.displayName=sO;var oO=Qd,dv="ToastProvider",[fv,aO,lO]=BI("Toast"),[rC,q8]=ka("Toast",[lO]),[cO,Xd]=rC(dv),sC=t=>{const{__scopeToast:e,label:n="Notification",duration:i=5e3,swipeDirection:r="right",swipeThreshold:s=50,children:o}=t,[a,l]=x.useState(null),[c,u]=x.useState(0),d=x.useRef(!1),f=x.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${dv}\`. Expected non-empty \`string\`.`),g.jsx(fv.Provider,{scope:e,children:g.jsx(cO,{scope:e,label:n,duration:i,swipeDirection:r,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:x.useCallback(()=>u(h=>h+1),[]),onToastRemove:x.useCallback(()=>u(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};sC.displayName=dv;var oC="ToastViewport",uO=["F8"],em="toast.viewportPause",tm="toast.viewportResume",aC=x.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:i=uO,label:r="Notifications ({hotkey})",...s}=t,o=Xd(oC,n),a=aO(n),l=x.useRef(null),c=x.useRef(null),u=x.useRef(null),d=x.useRef(null),f=wt(e,d,o.onViewportChange),h=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;x.useEffect(()=>{const b=p=>{var S;i.length!==0&&i.every(T=>p[T]||p.code===T)&&((S=d.current)==null||S.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[i]),x.useEffect(()=>{const b=l.current,p=d.current;if(v&&b&&p){const y=()=>{if(!o.isClosePausedRef.current){const w=new CustomEvent(em);p.dispatchEvent(w),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const w=new CustomEvent(tm);p.dispatchEvent(w),o.isClosePausedRef.current=!1}},T=w=>{!b.contains(w.relatedTarget)&&S()},k=()=>{b.contains(document.activeElement)||S()};return b.addEventListener("focusin",y),b.addEventListener("focusout",T),b.addEventListener("pointermove",y),b.addEventListener("pointerleave",k),window.addEventListener("blur",y),window.addEventListener("focus",S),()=>{b.removeEventListener("focusin",y),b.removeEventListener("focusout",T),b.removeEventListener("pointermove",y),b.removeEventListener("pointerleave",k),window.removeEventListener("blur",y),window.removeEventListener("focus",S)}}},[v,o.isClosePausedRef]);const m=x.useCallback(({tabbingDirection:b})=>{const y=a().map(S=>{const T=S.ref.current,k=[T,...kO(T)];return b==="forwards"?k:k.reverse()});return(b==="forwards"?y.reverse():y).flat()},[a]);return x.useEffect(()=>{const b=d.current;if(b){const p=y=>{var k,w,E;const S=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!S){const P=document.activeElement,_=y.shiftKey;if(y.target===b&&_){(k=c.current)==null||k.focus();return}const L=m({tabbingDirection:_?"backwards":"forwards"}),Q=L.findIndex(z=>z===P);ch(L.slice(Q+1))?y.preventDefault():_?(w=c.current)==null||w.focus():(E=u.current)==null||E.focus()}};return b.addEventListener("keydown",p),()=>b.removeEventListener("keydown",p)}},[a,m]),g.jsxs(QI,{ref:l,role:"region","aria-label":r.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&g.jsx(nm,{ref:c,onFocusFromOutsideViewport:()=>{const b=m({tabbingDirection:"forwards"});ch(b)}}),g.jsx(fv.Slot,{scope:n,children:g.jsx(qe.ol,{tabIndex:-1,...s,ref:f})}),v&&g.jsx(nm,{ref:u,onFocusFromOutsideViewport:()=>{const b=m({tabbingDirection:"backwards"});ch(b)}})]})});aC.displayName=oC;var lC="ToastFocusProxy",nm=x.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:i,...r}=t,s=Xd(lC,n);return g.jsx(Qd,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&i()}})});nm.displayName=lC;var mc="Toast",dO="toast.swipeStart",fO="toast.swipeMove",hO="toast.swipeCancel",pO="toast.swipeEnd",cC=x.forwardRef((t,e)=>{const{forceMount:n,open:i,defaultOpen:r,onOpenChange:s,...o}=t,[a,l]=uv({prop:i,defaultProp:r??!0,onChange:s,caller:mc});return g.jsx(Qs,{present:n||a,children:g.jsx(vO,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Li(t.onPause),onResume:Li(t.onResume),onSwipeStart:Ne(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ne(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:Ne(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ne(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});cC.displayName=mc;var[mO,gO]=rC(mc,{onClose(){}}),vO=x.forwardRef((t,e)=>{const{__scopeToast:n,type:i="foreground",duration:r,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:h,...v}=t,m=Xd(mc,n),[b,p]=x.useState(null),y=wt(e,z=>p(z)),S=x.useRef(null),T=x.useRef(null),k=r||m.duration,w=x.useRef(0),E=x.useRef(k),P=x.useRef(0),{onToastAdd:_,onToastRemove:A}=m,O=Li(()=>{var oe;(b==null?void 0:b.contains(document.activeElement))&&((oe=m.viewport)==null||oe.focus()),o()}),L=x.useCallback(z=>{!z||z===1/0||(window.clearTimeout(P.current),w.current=new Date().getTime(),P.current=window.setTimeout(O,z))},[O]);x.useEffect(()=>{const z=m.viewport;if(z){const oe=()=>{L(E.current),c==null||c()},ae=()=>{const X=new Date().getTime()-w.current;E.current=E.current-X,window.clearTimeout(P.current),l==null||l()};return z.addEventListener(em,ae),z.addEventListener(tm,oe),()=>{z.removeEventListener(em,ae),z.removeEventListener(tm,oe)}}},[m.viewport,k,l,c,L]),x.useEffect(()=>{s&&!m.isClosePausedRef.current&&L(k)},[s,k,m.isClosePausedRef,L]),x.useEffect(()=>(_(),()=>A()),[_,A]);const Q=x.useMemo(()=>b?gC(b):null,[b]);return m.viewport?g.jsxs(g.Fragment,{children:[Q&&g.jsx(yO,{__scopeToast:n,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:Q}),g.jsx(mO,{scope:n,onClose:O,children:pc.createPortal(g.jsx(fv.ItemSlot,{scope:n,children:g.jsx(YI,{asChild:!0,onEscapeKeyDown:Ne(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||O(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:g.jsx(qe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection,...v,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ne(t.onKeyDown,z=>{z.key==="Escape"&&(a==null||a(z.nativeEvent),z.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:Ne(t.onPointerDown,z=>{z.button===0&&(S.current={x:z.clientX,y:z.clientY})}),onPointerMove:Ne(t.onPointerMove,z=>{if(!S.current)return;const oe=z.clientX-S.current.x,ae=z.clientY-S.current.y,X=!!T.current,I=["left","right"].includes(m.swipeDirection),M=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,q=I?M(0,oe):0,Y=I?0:M(0,ae),ne=z.pointerType==="touch"?10:2,ee={x:q,y:Y},ue={originalEvent:z,delta:ee};X?(T.current=ee,zc(fO,d,ue,{discrete:!1})):lb(ee,m.swipeDirection,ne)?(T.current=ee,zc(dO,u,ue,{discrete:!1}),z.target.setPointerCapture(z.pointerId)):(Math.abs(oe)>ne||Math.abs(ae)>ne)&&(S.current=null)}),onPointerUp:Ne(t.onPointerUp,z=>{const oe=T.current,ae=z.target;if(ae.hasPointerCapture(z.pointerId)&&ae.releasePointerCapture(z.pointerId),T.current=null,S.current=null,oe){const X=z.currentTarget,I={originalEvent:z,delta:oe};lb(oe,m.swipeDirection,m.swipeThreshold)?zc(pO,h,I,{discrete:!0}):zc(hO,f,I,{discrete:!0}),X.addEventListener("click",M=>M.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),yO=t=>{const{__scopeToast:e,children:n,...i}=t,r=Xd(mc,e),[s,o]=x.useState(!1),[a,l]=x.useState(!1);return SO(()=>o(!0)),x.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:g.jsx(cv,{asChild:!0,children:g.jsx(Qd,{...i,children:s&&g.jsxs(g.Fragment,{children:[r.label," ",n]})})})},bO="ToastTitle",uC=x.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return g.jsx(qe.div,{...i,ref:e})});uC.displayName=bO;var xO="ToastDescription",dC=x.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return g.jsx(qe.div,{...i,ref:e})});dC.displayName=xO;var fC="ToastAction",hC=x.forwardRef((t,e)=>{const{altText:n,...i}=t;return n.trim()?g.jsx(mC,{altText:n,asChild:!0,children:g.jsx(hv,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${fC}\`. Expected non-empty \`string\`.`),null)});hC.displayName=fC;var pC="ToastClose",hv=x.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t,r=gO(pC,n);return g.jsx(mC,{asChild:!0,children:g.jsx(qe.button,{type:"button",...i,ref:e,onClick:Ne(t.onClick,r.onClose)})})});hv.displayName=pC;var mC=x.forwardRef((t,e)=>{const{__scopeToast:n,altText:i,...r}=t;return g.jsx(qe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...r,ref:e})});function gC(t){const e=[];return Array.from(t.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),TO(i)){const r=i.ariaHidden||i.hidden||i.style.display==="none",s=i.dataset.radixToastAnnounceExclude==="";if(!r)if(s){const o=i.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...gC(i))}}),e}function zc(t,e,n,{discrete:i}){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?eC(r,s):r.dispatchEvent(s)}var lb=(t,e,n=0)=>{const i=Math.abs(t.x),r=Math.abs(t.y),s=i>r;return e==="left"||e==="right"?s&&i>n:!s&&r>n};function SO(t=()=>{}){const e=Li(t);mr(()=>{let n=0,i=0;return n=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(i)}},[e])}function TO(t){return t.nodeType===t.ELEMENT_NODE}function kO(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function ch(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var wO=sC,vC=aC,yC=cC,bC=uC,xC=dC,SC=hC,TC=hv;function kC(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=kC(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function wC(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=kC(t))&&(i&&(i+=" "),i+=e);return i}const cb=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,ub=wC,CC=(t,e)=>n=>{var i;if((e==null?void 0:e.variants)==null)return ub(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:s}=e,o=Object.keys(r).map(c=>{const u=n==null?void 0:n[c],d=s==null?void 0:s[c];if(u===null)return null;const f=cb(u)||cb(d);return r[c][f]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,f]=u;return f===void 0||(c[d]=f),c},{}),l=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((c,u)=>{let{class:d,className:f,...h}=u;return Object.entries(h).every(v=>{let[m,b]=v;return Array.isArray(b)?b.includes({...s,...a}[m]):{...s,...a}[m]===b})?[...c,d,f]:c},[]);return ub(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),EC=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var EO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=x.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:o,...a},l)=>x.createElement("svg",{ref:l,...EO,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:EC("lucide",r),...a},[...o.map(([c,u])=>x.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=(t,e)=>{const n=x.forwardRef(({className:i,...r},s)=>x.createElement(PO,{ref:s,iconNode:e,className:EC(`lucide-${CO(t)}`,i),...r}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=ht("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=ht("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=ht("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=ht("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=ht("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=ht("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=ht("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=ht("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=ht("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=ht("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=ht("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=ht("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=ht("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=ht("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=ht("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=ht("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=ht("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=ht("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=ht("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),pv="-",HO=t=>{const e=GO(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=t;return{getClassGroupId:o=>{const a=o.split(pv);return a[0]===""&&a.length!==1&&a.shift(),RC(a,e)||qO(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&i[o]?[...l,...i[o]]:l}}},RC=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],i=e.nextPart.get(n),r=i?RC(t.slice(1),i):void 0;if(r)return r;if(e.validators.length===0)return;const s=t.join(pv);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},db=/^\[(.+)\]$/,qO=t=>{if(db.test(t)){const e=db.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},GO=t=>{const{theme:e,prefix:n}=t,i={nextPart:new Map,validators:[]};return YO(Object.entries(t.classGroups),n).forEach(([s,o])=>{im(o,i,s,e)}),i},im=(t,e,n,i)=>{t.forEach(r=>{if(typeof r=="string"){const s=r===""?e:fb(e,r);s.classGroupId=n;return}if(typeof r=="function"){if(KO(r)){im(r(i),e,n,i);return}e.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([s,o])=>{im(o,fb(e,s),n,i)})})},fb=(t,e)=>{let n=t;return e.split(pv).forEach(i=>{n.nextPart.has(i)||n.nextPart.set(i,{nextPart:new Map,validators:[]}),n=n.nextPart.get(i)}),n},KO=t=>t.isThemeGetter,YO=(t,e)=>e?t.map(([n,i])=>{const r=i.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,r]}):t,QO=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,i=new Map;const r=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,i=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=i.get(s))!==void 0)return r(s,o),o},set(s,o){n.has(s)?n.set(s,o):r(s,o)}}},_C="!",XO=t=>{const{separator:e,experimentalParseClassName:n}=t,i=e.length===1,r=e[0],s=e.length,o=a=>{const l=[];let c=0,u=0,d;for(let b=0;b<a.length;b++){let p=a[b];if(c===0){if(p===r&&(i||a.slice(b,b+s)===e)){l.push(a.slice(u,b)),u=b+s;continue}if(p==="/"){d=b;continue}}p==="["?c++:p==="]"&&c--}const f=l.length===0?a:a.substring(u),h=f.startsWith(_C),v=h?f.substring(1):f,m=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:h,baseClassName:v,maybePostfixModifierPosition:m}};return n?a=>n({className:a,parseClassName:o}):o},JO=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(i=>{i[0]==="["?(e.push(...n.sort(),i),n=[]):n.push(i)}),e.push(...n.sort()),e},ZO=t=>({cache:QO(t.cacheSize),parseClassName:XO(t),...HO(t)}),eM=/\s+/,tM=(t,e)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:r}=e,s=[],o=t.trim().split(eM);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:h}=n(c);let v=!!h,m=i(v?f.substring(0,h):f);if(!m){if(!v){a=c+(a.length>0?" "+a:a);continue}if(m=i(f),!m){a=c+(a.length>0?" "+a:a);continue}v=!1}const b=JO(u).join(":"),p=d?b+_C:b,y=p+m;if(s.includes(y))continue;s.push(y);const S=r(m,v);for(let T=0;T<S.length;++T){const k=S[T];s.push(p+k)}a=c+(a.length>0?" "+a:a)}return a};function nM(){let t=0,e,n,i="";for(;t<arguments.length;)(e=arguments[t++])&&(n=AC(e))&&(i&&(i+=" "),i+=n);return i}const AC=t=>{if(typeof t=="string")return t;let e,n="";for(let i=0;i<t.length;i++)t[i]&&(e=AC(t[i]))&&(n&&(n+=" "),n+=e);return n};function iM(t,...e){let n,i,r,s=o;function o(l){const c=e.reduce((u,d)=>d(u),t());return n=ZO(c),i=n.cache.get,r=n.cache.set,s=a,a(l)}function a(l){const c=i(l);if(c)return c;const u=tM(l,n);return r(l,u),u}return function(){return s(nM.apply(null,arguments))}}const Oe=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},NC=/^\[(?:([a-z-]+):)?(.+)\]$/i,rM=/^\d+\/\d+$/,sM=new Set(["px","full","screen"]),oM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,lM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,cM=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,uM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ki=t=>zo(t)||sM.has(t)||rM.test(t),Tr=t=>Ca(t,"length",yM),zo=t=>!!t&&!Number.isNaN(Number(t)),uh=t=>Ca(t,"number",zo),Ba=t=>!!t&&Number.isInteger(Number(t)),dM=t=>t.endsWith("%")&&zo(t.slice(0,-1)),fe=t=>NC.test(t),kr=t=>oM.test(t),fM=new Set(["length","size","percentage"]),hM=t=>Ca(t,fM,IC),pM=t=>Ca(t,"position",IC),mM=new Set(["image","url"]),gM=t=>Ca(t,mM,xM),vM=t=>Ca(t,"",bM),Va=()=>!0,Ca=(t,e,n)=>{const i=NC.exec(t);return i?i[1]?typeof e=="string"?i[1]===e:e.has(i[1]):n(i[2]):!1},yM=t=>aM.test(t)&&!lM.test(t),IC=()=>!1,bM=t=>cM.test(t),xM=t=>uM.test(t),SM=()=>{const t=Oe("colors"),e=Oe("spacing"),n=Oe("blur"),i=Oe("brightness"),r=Oe("borderColor"),s=Oe("borderRadius"),o=Oe("borderSpacing"),a=Oe("borderWidth"),l=Oe("contrast"),c=Oe("grayscale"),u=Oe("hueRotate"),d=Oe("invert"),f=Oe("gap"),h=Oe("gradientColorStops"),v=Oe("gradientColorStopPositions"),m=Oe("inset"),b=Oe("margin"),p=Oe("opacity"),y=Oe("padding"),S=Oe("saturate"),T=Oe("scale"),k=Oe("sepia"),w=Oe("skew"),E=Oe("space"),P=Oe("translate"),_=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",fe,e],L=()=>[fe,e],Q=()=>["",Ki,Tr],z=()=>["auto",zo,fe],oe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ae=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I=()=>["start","end","center","between","around","evenly","stretch"],M=()=>["","0",fe],q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Y=()=>[zo,fe];return{cacheSize:500,separator:":",theme:{colors:[Va],spacing:[Ki,Tr],blur:["none","",kr,fe],brightness:Y(),borderColor:[t],borderRadius:["none","","full",kr,fe],borderSpacing:L(),borderWidth:Q(),contrast:Y(),grayscale:M(),hueRotate:Y(),invert:M(),gap:L(),gradientColorStops:[t],gradientColorStopPositions:[dM,Tr],inset:O(),margin:O(),opacity:Y(),padding:L(),saturate:Y(),scale:Y(),sepia:M(),skew:Y(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",fe]}],container:["container"],columns:[{columns:[kr]}],"break-after":[{"break-after":q()}],"break-before":[{"break-before":q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...oe(),fe]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:_()}],"overscroll-x":[{"overscroll-x":_()}],"overscroll-y":[{"overscroll-y":_()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ba,fe]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",fe]}],grow:[{grow:M()}],shrink:[{shrink:M()}],order:[{order:["first","last","none",Ba,fe]}],"grid-cols":[{"grid-cols":[Va]}],"col-start-end":[{col:["auto",{span:["full",Ba,fe]},fe]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[Va]}],"row-start-end":[{row:["auto",{span:[Ba,fe]},fe]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",fe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",fe]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...I()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...I(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...I(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",fe,e]}],"min-w":[{"min-w":[fe,e,"min","max","fit"]}],"max-w":[{"max-w":[fe,e,"none","full","min","max","fit","prose",{screen:[kr]},kr]}],h:[{h:[fe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[fe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[fe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[fe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",kr,Tr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",uh]}],"font-family":[{font:[Va]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",fe]}],"line-clamp":[{"line-clamp":["none",zo,uh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ki,fe]}],"list-image":[{"list-image":["none",fe]}],"list-style-type":[{list:["none","disc","decimal",fe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[p]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[p]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ae(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ki,Tr]}],"underline-offset":[{"underline-offset":["auto",Ki,fe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",fe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",fe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[p]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...oe(),pM]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",hM]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},gM]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[p]}],"border-style":[{border:[...ae(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[p]}],"divide-style":[{divide:ae()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...ae()]}],"outline-offset":[{"outline-offset":[Ki,fe]}],"outline-w":[{outline:[Ki,Tr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:Q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[p]}],"ring-offset-w":[{"ring-offset":[Ki,Tr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",kr,vM]}],"shadow-color":[{shadow:[Va]}],opacity:[{opacity:[p]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[i]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",kr,fe]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[S]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[p]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",fe]}],duration:[{duration:Y()}],ease:[{ease:["linear","in","out","in-out",fe]}],delay:[{delay:Y()}],animate:[{animate:["none","spin","ping","pulse","bounce",fe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[T]}],"scale-x":[{"scale-x":[T]}],"scale-y":[{"scale-y":[T]}],rotate:[{rotate:[Ba,fe]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[w]}],"skew-y":[{"skew-y":[w]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",fe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",fe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",fe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ki,Tr,uh]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},TM=iM(SM);function Fe(...t){return TM(wC(t))}const kM=wO,OC=x.forwardRef(({className:t,...e},n)=>g.jsx(vC,{ref:n,className:Fe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));OC.displayName=vC.displayName;const wM=CC("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),MC=x.forwardRef(({className:t,variant:e,...n},i)=>g.jsx(yC,{ref:i,className:Fe(wM({variant:e}),t),...n}));MC.displayName=yC.displayName;const CM=x.forwardRef(({className:t,...e},n)=>g.jsx(SC,{ref:n,className:Fe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));CM.displayName=SC.displayName;const DC=x.forwardRef(({className:t,...e},n)=>g.jsx(TC,{ref:n,className:Fe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:g.jsx(wa,{className:"h-4 w-4"})}));DC.displayName=TC.displayName;const LC=x.forwardRef(({className:t,...e},n)=>g.jsx(bC,{ref:n,className:Fe("text-sm font-semibold",t),...e}));LC.displayName=bC.displayName;const jC=x.forwardRef(({className:t,...e},n)=>g.jsx(xC,{ref:n,className:Fe("text-sm opacity-90",t),...e}));jC.displayName=xC.displayName;function EM(){const{toasts:t}=NI();return g.jsxs(kM,{children:[t.map(function({id:e,title:n,description:i,action:r,...s}){return g.jsxs(MC,{...s,children:[g.jsxs("div",{className:"grid gap-1",children:[n&&g.jsx(LC,{children:n}),i&&g.jsx(jC,{children:i})]}),r,g.jsx(DC,{})]},e)}),g.jsx(OC,{})]})}var hb=["light","dark"],PM="(prefers-color-scheme: dark)",RM=x.createContext(void 0),_M={setTheme:t=>{},themes:[]},AM=()=>{var t;return(t=x.useContext(RM))!=null?t:_M};x.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:i,enableColorScheme:r,defaultTheme:s,value:o,attrs:a,nonce:l})=>{let c=s==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=r?hb.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(v,m=!1,b=!0)=>{let p=o?o[v]:v,y=m?v+"|| ''":`'${p}'`,S="";return r&&b&&!m&&hb.includes(v)&&(S+=`d.style.colorScheme = '${v}';`),n==="class"?m||p?S+=`c.add(${y})`:S+="null":p&&(S+=`d[s](n,${y})`),S},h=t?`!function(){${u}${f(t)}}()`:i?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${PM}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(s,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(s,!1,!1)};}${d}}catch(t){}}();`;return x.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:h}})});var NM=t=>{switch(t){case"success":return MM;case"info":return LM;case"warning":return DM;case"error":return jM;default:return null}},IM=Array(12).fill(0),OM=({visible:t,className:e})=>H.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},H.createElement("div",{className:"sonner-spinner"},IM.map((n,i)=>H.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),MM=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),DM=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),LM=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),jM=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),FM=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},H.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),H.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),UM=()=>{let[t,e]=H.useState(document.hidden);return H.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},rm=1,BM=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...i}=t,r=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:rm++,s=this.toasts.find(a=>a.id===r),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(r)&&this.dismissedToasts.delete(r),s?this.toasts=this.toasts.map(a=>a.id===r?(this.publish({...a,...t,id:r,title:n}),{...a,...t,id:r,dismissible:o,title:n}):a):this.addToast({title:n,...i,dismissible:o,id:r}),r},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let i=t instanceof Promise?t:t(),r=n!==void 0,s,o=i.then(async l=>{if(s=["resolve",l],H.isValidElement(l))r=!1,this.create({id:n,type:"default",message:l});else if(zM(l)&&!l.ok){r=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:n,type:"error",message:c,description:u})}else if(e.success!==void 0){r=!1;let c=typeof e.success=="function"?await e.success(l):e.success,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"success",message:c,description:u})}}).catch(async l=>{if(s=["reject",l],e.error!==void 0){r=!1;let c=typeof e.error=="function"?await e.error(l):e.error,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"error",message:c,description:u})}}).finally(()=>{var l;r&&(this.dismiss(n),n=void 0),(l=e.finally)==null||l.call(e)}),a=()=>new Promise((l,c)=>o.then(()=>s[0]==="reject"?c(s[1]):l(s[1])).catch(c));return typeof n!="string"&&typeof n!="number"?{unwrap:a}:Object.assign(n,{unwrap:a})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||rm++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},sn=new BM,VM=(t,e)=>{let n=(e==null?void 0:e.id)||rm++;return sn.addToast({title:t,...e,id:n}),n},zM=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",$M=VM,WM=()=>sn.toasts,HM=()=>sn.getActiveToasts(),dh=Object.assign($M,{success:sn.success,info:sn.info,warning:sn.warning,error:sn.error,custom:sn.custom,message:sn.message,promise:sn.promise,dismiss:sn.dismiss,loading:sn.loading},{getHistory:WM,getToasts:HM});function qM(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",e==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}qM(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function $c(t){return t.label!==void 0}var GM=3,KM="32px",YM="16px",pb=4e3,QM=356,XM=14,JM=20,ZM=200;function qn(...t){return t.filter(Boolean).join(" ")}function eD(t){let[e,n]=t.split("-"),i=[];return e&&i.push(e),n&&i.push(n),i}var tD=t=>{var e,n,i,r,s,o,a,l,c,u,d;let{invert:f,toast:h,unstyled:v,interacting:m,setHeights:b,visibleToasts:p,heights:y,index:S,toasts:T,expanded:k,removeToast:w,defaultRichColors:E,closeButton:P,style:_,cancelButtonStyle:A,actionButtonStyle:O,className:L="",descriptionClassName:Q="",duration:z,position:oe,gap:ae,loadingIcon:X,expandByDefault:I,classNames:M,icons:q,closeButtonAriaLabel:Y="Close toast",pauseWhenPageIsHidden:ne}=t,[ee,ue]=H.useState(null),[ce,Ce]=H.useState(null),[pe,Xt]=H.useState(!1),[Ge,jt]=H.useState(!1),[pn,Ft]=H.useState(!1),[Ct,Jt]=H.useState(!1),[zi,pi]=H.useState(!1),[Vn,Et]=H.useState(0),[Zt,ms]=H.useState(0),mi=H.useRef(h.duration||z||pb),to=H.useRef(null),mn=H.useRef(null),$i=S===0,gi=S+1<=p,et=h.type,zn=h.dismissible!==!1,no=h.className||"",io=h.descriptionClassName||"",vi=H.useMemo(()=>y.findIndex(te=>te.toastId===h.id)||0,[y,h.id]),ro=H.useMemo(()=>{var te;return(te=h.closeButton)!=null?te:P},[h.closeButton,P]),U=H.useMemo(()=>h.duration||z||pb,[h.duration,z]),J=H.useRef(0),ie=H.useRef(0),xe=H.useRef(0),Pe=H.useRef(null),[yt,Sc]=oe.split("-"),Wi=H.useMemo(()=>y.reduce((te,ye,Ae)=>Ae>=vi?te:te+ye.height,0),[y,vi]),Hi=UM(),Ut=h.invert||f,$n=et==="loading";ie.current=H.useMemo(()=>vi*ae+Wi,[vi,Wi]),H.useEffect(()=>{mi.current=U},[U]),H.useEffect(()=>{Xt(!0)},[]),H.useEffect(()=>{let te=mn.current;if(te){let ye=te.getBoundingClientRect().height;return ms(ye),b(Ae=>[{toastId:h.id,height:ye,position:h.position},...Ae]),()=>b(Ae=>Ae.filter(tn=>tn.toastId!==h.id))}},[b,h.id]),H.useLayoutEffect(()=>{if(!pe)return;let te=mn.current,ye=te.style.height;te.style.height="auto";let Ae=te.getBoundingClientRect().height;te.style.height=ye,ms(Ae),b(tn=>tn.find(Bt=>Bt.toastId===h.id)?tn.map(Bt=>Bt.toastId===h.id?{...Bt,height:Ae}:Bt):[{toastId:h.id,height:Ae,position:h.position},...tn])},[pe,h.title,h.description,b,h.id]);let en=H.useCallback(()=>{jt(!0),Et(ie.current),b(te=>te.filter(ye=>ye.toastId!==h.id)),setTimeout(()=>{w(h)},ZM)},[h,w,b,ie]);H.useEffect(()=>{if(h.promise&&et==="loading"||h.duration===1/0||h.type==="loading")return;let te;return k||m||ne&&Hi?(()=>{if(xe.current<J.current){let ye=new Date().getTime()-J.current;mi.current=mi.current-ye}xe.current=new Date().getTime()})():mi.current!==1/0&&(J.current=new Date().getTime(),te=setTimeout(()=>{var ye;(ye=h.onAutoClose)==null||ye.call(h,h),en()},mi.current)),()=>clearTimeout(te)},[k,m,h,et,ne,Hi,en]),H.useEffect(()=>{h.delete&&en()},[en,h.delete]);function Nf(){var te,ye,Ae;return q!=null&&q.loading?H.createElement("div",{className:qn(M==null?void 0:M.loader,(te=h==null?void 0:h.classNames)==null?void 0:te.loader,"sonner-loader"),"data-visible":et==="loading"},q.loading):X?H.createElement("div",{className:qn(M==null?void 0:M.loader,(ye=h==null?void 0:h.classNames)==null?void 0:ye.loader,"sonner-loader"),"data-visible":et==="loading"},X):H.createElement(OM,{className:qn(M==null?void 0:M.loader,(Ae=h==null?void 0:h.classNames)==null?void 0:Ae.loader),visible:et==="loading"})}return H.createElement("li",{tabIndex:0,ref:mn,className:qn(L,no,M==null?void 0:M.toast,(e=h==null?void 0:h.classNames)==null?void 0:e.toast,M==null?void 0:M.default,M==null?void 0:M[et],(n=h==null?void 0:h.classNames)==null?void 0:n[et]),"data-sonner-toast":"","data-rich-colors":(i=h.richColors)!=null?i:E,"data-styled":!(h.jsx||h.unstyled||v),"data-mounted":pe,"data-promise":!!h.promise,"data-swiped":zi,"data-removed":Ge,"data-visible":gi,"data-y-position":yt,"data-x-position":Sc,"data-index":S,"data-front":$i,"data-swiping":pn,"data-dismissible":zn,"data-type":et,"data-invert":Ut,"data-swipe-out":Ct,"data-swipe-direction":ce,"data-expanded":!!(k||I&&pe),style:{"--index":S,"--toasts-before":S,"--z-index":T.length-S,"--offset":`${Ge?Vn:ie.current}px`,"--initial-height":I?"auto":`${Zt}px`,..._,...h.style},onDragEnd:()=>{Ft(!1),ue(null),Pe.current=null},onPointerDown:te=>{$n||!zn||(to.current=new Date,Et(ie.current),te.target.setPointerCapture(te.pointerId),te.target.tagName!=="BUTTON"&&(Ft(!0),Pe.current={x:te.clientX,y:te.clientY}))},onPointerUp:()=>{var te,ye,Ae,tn;if(Ct||!zn)return;Pe.current=null;let Bt=Number(((te=mn.current)==null?void 0:te.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Wn=Number(((ye=mn.current)==null?void 0:ye.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),yi=new Date().getTime()-((Ae=to.current)==null?void 0:Ae.getTime()),gn=ee==="x"?Bt:Wn,at=Math.abs(gn)/yi;if(Math.abs(gn)>=JM||at>.11){Et(ie.current),(tn=h.onDismiss)==null||tn.call(h,h),Ce(ee==="x"?Bt>0?"right":"left":Wn>0?"down":"up"),en(),Jt(!0),pi(!1);return}Ft(!1),ue(null)},onPointerMove:te=>{var ye,Ae,tn,Bt;if(!Pe.current||!zn||((ye=window.getSelection())==null?void 0:ye.toString().length)>0)return;let Wn=te.clientY-Pe.current.y,yi=te.clientX-Pe.current.x,gn=(Ae=t.swipeDirections)!=null?Ae:eD(oe);!ee&&(Math.abs(yi)>1||Math.abs(Wn)>1)&&ue(Math.abs(yi)>Math.abs(Wn)?"x":"y");let at={x:0,y:0};ee==="y"?(gn.includes("top")||gn.includes("bottom"))&&(gn.includes("top")&&Wn<0||gn.includes("bottom")&&Wn>0)&&(at.y=Wn):ee==="x"&&(gn.includes("left")||gn.includes("right"))&&(gn.includes("left")&&yi<0||gn.includes("right")&&yi>0)&&(at.x=yi),(Math.abs(at.x)>0||Math.abs(at.y)>0)&&pi(!0),(tn=mn.current)==null||tn.style.setProperty("--swipe-amount-x",`${at.x}px`),(Bt=mn.current)==null||Bt.style.setProperty("--swipe-amount-y",`${at.y}px`)}},ro&&!h.jsx?H.createElement("button",{"aria-label":Y,"data-disabled":$n,"data-close-button":!0,onClick:$n||!zn?()=>{}:()=>{var te;en(),(te=h.onDismiss)==null||te.call(h,h)},className:qn(M==null?void 0:M.closeButton,(r=h==null?void 0:h.classNames)==null?void 0:r.closeButton)},(s=q==null?void 0:q.close)!=null?s:FM):null,h.jsx||x.isValidElement(h.title)?h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title:H.createElement(H.Fragment,null,et||h.icon||h.promise?H.createElement("div",{"data-icon":"",className:qn(M==null?void 0:M.icon,(o=h==null?void 0:h.classNames)==null?void 0:o.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||Nf():null,h.type!=="loading"?h.icon||(q==null?void 0:q[et])||NM(et):null):null,H.createElement("div",{"data-content":"",className:qn(M==null?void 0:M.content,(a=h==null?void 0:h.classNames)==null?void 0:a.content)},H.createElement("div",{"data-title":"",className:qn(M==null?void 0:M.title,(l=h==null?void 0:h.classNames)==null?void 0:l.title)},typeof h.title=="function"?h.title():h.title),h.description?H.createElement("div",{"data-description":"",className:qn(Q,io,M==null?void 0:M.description,(c=h==null?void 0:h.classNames)==null?void 0:c.description)},typeof h.description=="function"?h.description():h.description):null),x.isValidElement(h.cancel)?h.cancel:h.cancel&&$c(h.cancel)?H.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||A,onClick:te=>{var ye,Ae;$c(h.cancel)&&zn&&((Ae=(ye=h.cancel).onClick)==null||Ae.call(ye,te),en())},className:qn(M==null?void 0:M.cancelButton,(u=h==null?void 0:h.classNames)==null?void 0:u.cancelButton)},h.cancel.label):null,x.isValidElement(h.action)?h.action:h.action&&$c(h.action)?H.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||O,onClick:te=>{var ye,Ae;$c(h.action)&&((Ae=(ye=h.action).onClick)==null||Ae.call(ye,te),!te.defaultPrevented&&en())},className:qn(M==null?void 0:M.actionButton,(d=h==null?void 0:h.classNames)==null?void 0:d.actionButton)},h.action.label):null))};function mb(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function nD(t,e){let n={};return[t,e].forEach((i,r)=>{let s=r===1,o=s?"--mobile-offset":"--offset",a=s?YM:KM;function l(c){["top","right","bottom","left"].forEach(u=>{n[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof i=="number"||typeof i=="string"?l(i):typeof i=="object"?["top","right","bottom","left"].forEach(c=>{i[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof i[c]=="number"?`${i[c]}px`:i[c]}):l(a)}),n}var iD=x.forwardRef(function(t,e){let{invert:n,position:i="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:l,mobileOffset:c,theme:u="light",richColors:d,duration:f,style:h,visibleToasts:v=GM,toastOptions:m,dir:b=mb(),gap:p=XM,loadingIcon:y,icons:S,containerAriaLabel:T="Notifications",pauseWhenPageIsHidden:k}=t,[w,E]=H.useState([]),P=H.useMemo(()=>Array.from(new Set([i].concat(w.filter(ne=>ne.position).map(ne=>ne.position)))),[w,i]),[_,A]=H.useState([]),[O,L]=H.useState(!1),[Q,z]=H.useState(!1),[oe,ae]=H.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),X=H.useRef(null),I=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),M=H.useRef(null),q=H.useRef(!1),Y=H.useCallback(ne=>{E(ee=>{var ue;return(ue=ee.find(ce=>ce.id===ne.id))!=null&&ue.delete||sn.dismiss(ne.id),ee.filter(({id:ce})=>ce!==ne.id)})},[]);return H.useEffect(()=>sn.subscribe(ne=>{if(ne.dismiss){E(ee=>ee.map(ue=>ue.id===ne.id?{...ue,delete:!0}:ue));return}setTimeout(()=>{Yw.flushSync(()=>{E(ee=>{let ue=ee.findIndex(ce=>ce.id===ne.id);return ue!==-1?[...ee.slice(0,ue),{...ee[ue],...ne},...ee.slice(ue+1)]:[ne,...ee]})})})}),[]),H.useEffect(()=>{if(u!=="system"){ae(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ae("dark"):ae("light")),typeof window>"u")return;let ne=window.matchMedia("(prefers-color-scheme: dark)");try{ne.addEventListener("change",({matches:ee})=>{ae(ee?"dark":"light")})}catch{ne.addListener(({matches:ue})=>{try{ae(ue?"dark":"light")}catch(ce){console.error(ce)}})}},[u]),H.useEffect(()=>{w.length<=1&&L(!1)},[w]),H.useEffect(()=>{let ne=ee=>{var ue,ce;r.every(Ce=>ee[Ce]||ee.code===Ce)&&(L(!0),(ue=X.current)==null||ue.focus()),ee.code==="Escape"&&(document.activeElement===X.current||(ce=X.current)!=null&&ce.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",ne),()=>document.removeEventListener("keydown",ne)},[r]),H.useEffect(()=>{if(X.current)return()=>{M.current&&(M.current.focus({preventScroll:!0}),M.current=null,q.current=!1)}},[X.current]),H.createElement("section",{ref:e,"aria-label":`${T} ${I}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((ne,ee)=>{var ue;let[ce,Ce]=ne.split("-");return w.length?H.createElement("ol",{key:ne,dir:b==="auto"?mb():b,tabIndex:-1,ref:X,className:a,"data-sonner-toaster":!0,"data-theme":oe,"data-y-position":ce,"data-lifted":O&&w.length>1&&!s,"data-x-position":Ce,style:{"--front-toast-height":`${((ue=_[0])==null?void 0:ue.height)||0}px`,"--width":`${QM}px`,"--gap":`${p}px`,...h,...nD(l,c)},onBlur:pe=>{q.current&&!pe.currentTarget.contains(pe.relatedTarget)&&(q.current=!1,M.current&&(M.current.focus({preventScroll:!0}),M.current=null))},onFocus:pe=>{pe.target instanceof HTMLElement&&pe.target.dataset.dismissible==="false"||q.current||(q.current=!0,M.current=pe.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{Q||L(!1)},onDragEnd:()=>L(!1),onPointerDown:pe=>{pe.target instanceof HTMLElement&&pe.target.dataset.dismissible==="false"||z(!0)},onPointerUp:()=>z(!1)},w.filter(pe=>!pe.position&&ee===0||pe.position===ne).map((pe,Xt)=>{var Ge,jt;return H.createElement(tD,{key:pe.id,icons:S,index:Xt,toast:pe,defaultRichColors:d,duration:(Ge=m==null?void 0:m.duration)!=null?Ge:f,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:n,visibleToasts:v,closeButton:(jt=m==null?void 0:m.closeButton)!=null?jt:o,interacting:Q,position:ne,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:Y,toasts:w.filter(pn=>pn.position==pe.position),heights:_.filter(pn=>pn.position==pe.position),setHeights:A,expandByDefault:s,gap:p,loadingIcon:y,expanded:O,pauseWhenPageIsHidden:k,swipeDirections:t.swipeDirections})})):null}))});const rD=({...t})=>{const{theme:e="system"}=AM();return g.jsx(iD,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var sD=yg[" useId ".trim().toString()]||(()=>{}),oD=0;function fh(t){const[e,n]=x.useState(sD());return mr(()=>{n(i=>i??String(oD++))},[t]),t||(e?`radix-${e}`:"")}const aD=["top","right","bottom","left"],rs=Math.min,yn=Math.max,ud=Math.round,Wc=Math.floor,Ii=t=>({x:t,y:t}),lD={left:"right",right:"left",bottom:"top",top:"bottom"},cD={start:"end",end:"start"};function sm(t,e,n){return yn(t,rs(e,n))}function gr(t,e){return typeof t=="function"?t(e):t}function vr(t){return t.split("-")[0]}function Ea(t){return t.split("-")[1]}function mv(t){return t==="x"?"y":"x"}function gv(t){return t==="y"?"height":"width"}const uD=new Set(["top","bottom"]);function _i(t){return uD.has(vr(t))?"y":"x"}function vv(t){return mv(_i(t))}function dD(t,e,n){n===void 0&&(n=!1);const i=Ea(t),r=vv(t),s=gv(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=dd(o)),[o,dd(o)]}function fD(t){const e=dd(t);return[om(t),e,om(e)]}function om(t){return t.replace(/start|end/g,e=>cD[e])}const gb=["left","right"],vb=["right","left"],hD=["top","bottom"],pD=["bottom","top"];function mD(t,e,n){switch(t){case"top":case"bottom":return n?e?vb:gb:e?gb:vb;case"left":case"right":return e?hD:pD;default:return[]}}function gD(t,e,n,i){const r=Ea(t);let s=mD(vr(t),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(om)))),s}function dd(t){return t.replace(/left|right|bottom|top/g,e=>lD[e])}function vD(t){return{top:0,right:0,bottom:0,left:0,...t}}function FC(t){return typeof t!="number"?vD(t):{top:t,right:t,bottom:t,left:t}}function fd(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function yb(t,e,n){let{reference:i,floating:r}=t;const s=_i(e),o=vv(e),a=gv(o),l=vr(e),c=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,f=i[a]/2-r[a]/2;let h;switch(l){case"top":h={x:u,y:i.y-r.height};break;case"bottom":h={x:u,y:i.y+i.height};break;case"right":h={x:i.x+i.width,y:d};break;case"left":h={x:i.x-r.width,y:d};break;default:h={x:i.x,y:i.y}}switch(Ea(e)){case"start":h[o]-=f*(n&&c?-1:1);break;case"end":h[o]+=f*(n&&c?-1:1);break}return h}const yD=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:d}=yb(c,i,l),f=i,h={},v=0;for(let m=0;m<a.length;m++){const{name:b,fn:p}=a[m],{x:y,y:S,data:T,reset:k}=await p({x:u,y:d,initialPlacement:i,placement:f,strategy:r,middlewareData:h,rects:c,platform:o,elements:{reference:t,floating:e}});u=y??u,d=S??d,h={...h,[b]:{...h[b],...T}},k&&v<=50&&(v++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):k.rects),{x:u,y:d}=yb(c,f,l)),m=-1)}return{x:u,y:d,placement:f,strategy:r,middlewareData:h}};async function Hl(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=gr(e,t),v=FC(h),b=a[f?d==="floating"?"reference":"floating":d],p=fd(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(b)))==null||n?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),y=d==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),T=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},k=fd(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:S,strategy:l}):y);return{top:(p.top-k.top+v.top)/T.y,bottom:(k.bottom-p.bottom+v.bottom)/T.y,left:(p.left-k.left+v.left)/T.x,right:(k.right-p.right+v.right)/T.x}}const bD=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=gr(t,e)||{};if(c==null)return{};const d=FC(u),f={x:n,y:i},h=vv(r),v=gv(h),m=await o.getDimensions(c),b=h==="y",p=b?"top":"left",y=b?"bottom":"right",S=b?"clientHeight":"clientWidth",T=s.reference[v]+s.reference[h]-f[h]-s.floating[v],k=f[h]-s.reference[h],w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let E=w?w[S]:0;(!E||!await(o.isElement==null?void 0:o.isElement(w)))&&(E=a.floating[S]||s.floating[v]);const P=T/2-k/2,_=E/2-m[v]/2-1,A=rs(d[p],_),O=rs(d[y],_),L=A,Q=E-m[v]-O,z=E/2-m[v]/2+P,oe=sm(L,z,Q),ae=!l.arrow&&Ea(r)!=null&&z!==oe&&s.reference[v]/2-(z<L?A:O)-m[v]/2<0,X=ae?z<L?z-L:z-Q:0;return{[h]:f[h]+X,data:{[h]:oe,centerOffset:z-oe-X,...ae&&{alignmentOffset:X}},reset:ae}}}),xD=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:m=!0,...b}=gr(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const p=vr(r),y=_i(a),S=vr(a)===a,T=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=f||(S||!m?[dd(a)]:fD(a)),w=v!=="none";!f&&w&&k.push(...gD(a,m,v,T));const E=[a,...k],P=await Hl(e,b),_=[];let A=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&_.push(P[p]),d){const z=dD(r,o,T);_.push(P[z[0]],P[z[1]])}if(A=[...A,{placement:r,overflows:_}],!_.every(z=>z<=0)){var O,L;const z=(((O=s.flip)==null?void 0:O.index)||0)+1,oe=E[z];if(oe&&(!(d==="alignment"?y!==_i(oe):!1)||A.every(I=>I.overflows[0]>0&&_i(I.placement)===y)))return{data:{index:z,overflows:A},reset:{placement:oe}};let ae=(L=A.filter(X=>X.overflows[0]<=0).sort((X,I)=>X.overflows[1]-I.overflows[1])[0])==null?void 0:L.placement;if(!ae)switch(h){case"bestFit":{var Q;const X=(Q=A.filter(I=>{if(w){const M=_i(I.placement);return M===y||M==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(M=>M>0).reduce((M,q)=>M+q,0)]).sort((I,M)=>I[1]-M[1])[0])==null?void 0:Q[0];X&&(ae=X);break}case"initialPlacement":ae=a;break}if(r!==ae)return{reset:{placement:ae}}}return{}}}};function bb(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function xb(t){return aD.some(e=>t[e]>=0)}const SD=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=gr(t,e);switch(i){case"referenceHidden":{const s=await Hl(e,{...r,elementContext:"reference"}),o=bb(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:xb(o)}}}case"escaped":{const s=await Hl(e,{...r,altBoundary:!0}),o=bb(s,n.floating);return{data:{escapedOffsets:o,escaped:xb(o)}}}default:return{}}}}},UC=new Set(["left","top"]);async function TD(t,e){const{placement:n,platform:i,elements:r}=t,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=vr(n),a=Ea(n),l=_i(n)==="y",c=UC.has(o)?-1:1,u=s&&l?-1:1,d=gr(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:v}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof v=="number"&&(h=a==="end"?v*-1:v),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const kD=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await TD(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},wD=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:p,y}=b;return{x:p,y}}},...l}=gr(t,e),c={x:n,y:i},u=await Hl(e,l),d=_i(vr(r)),f=mv(d);let h=c[f],v=c[d];if(s){const b=f==="y"?"top":"left",p=f==="y"?"bottom":"right",y=h+u[b],S=h-u[p];h=sm(y,h,S)}if(o){const b=d==="y"?"top":"left",p=d==="y"?"bottom":"right",y=v+u[b],S=v-u[p];v=sm(y,v,S)}const m=a.fn({...e,[f]:h,[d]:v});return{...m,data:{x:m.x-n,y:m.y-i,enabled:{[f]:s,[d]:o}}}}}},CD=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=gr(t,e),u={x:n,y:i},d=_i(r),f=mv(d);let h=u[f],v=u[d];const m=gr(a,e),b=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const S=f==="y"?"height":"width",T=s.reference[f]-s.floating[S]+b.mainAxis,k=s.reference[f]+s.reference[S]-b.mainAxis;h<T?h=T:h>k&&(h=k)}if(c){var p,y;const S=f==="y"?"width":"height",T=UC.has(vr(r)),k=s.reference[d]-s.floating[S]+(T&&((p=o.offset)==null?void 0:p[d])||0)+(T?0:b.crossAxis),w=s.reference[d]+s.reference[S]+(T?0:((y=o.offset)==null?void 0:y[d])||0)-(T?b.crossAxis:0);v<k?v=k:v>w&&(v=w)}return{[f]:h,[d]:v}}}},ED=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=gr(t,e),u=await Hl(e,c),d=vr(r),f=Ea(r),h=_i(r)==="y",{width:v,height:m}=s.floating;let b,p;d==="top"||d==="bottom"?(b=d,p=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(p=d,b=f==="end"?"top":"bottom");const y=m-u.top-u.bottom,S=v-u.left-u.right,T=rs(m-u[b],y),k=rs(v-u[p],S),w=!e.middlewareData.shift;let E=T,P=k;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(P=S),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(E=y),w&&!f){const A=yn(u.left,0),O=yn(u.right,0),L=yn(u.top,0),Q=yn(u.bottom,0);h?P=v-2*(A!==0||O!==0?A+O:yn(u.left,u.right)):E=m-2*(L!==0||Q!==0?L+Q:yn(u.top,u.bottom))}await l({...e,availableWidth:P,availableHeight:E});const _=await o.getDimensions(a.floating);return v!==_.width||m!==_.height?{reset:{rects:!0}}:{}}}};function Jd(){return typeof window<"u"}function Pa(t){return BC(t)?(t.nodeName||"").toLowerCase():"#document"}function wn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Bi(t){var e;return(e=(BC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function BC(t){return Jd()?t instanceof Node||t instanceof wn(t).Node:!1}function ui(t){return Jd()?t instanceof Element||t instanceof wn(t).Element:!1}function ji(t){return Jd()?t instanceof HTMLElement||t instanceof wn(t).HTMLElement:!1}function Sb(t){return!Jd()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof wn(t).ShadowRoot}const PD=new Set(["inline","contents"]);function gc(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=di(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!PD.has(r)}const RD=new Set(["table","td","th"]);function _D(t){return RD.has(Pa(t))}const AD=[":popover-open",":modal"];function Zd(t){return AD.some(e=>{try{return t.matches(e)}catch{return!1}})}const ND=["transform","translate","scale","rotate","perspective"],ID=["transform","translate","scale","rotate","perspective","filter"],OD=["paint","layout","strict","content"];function yv(t){const e=bv(),n=ui(t)?di(t):t;return ND.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||ID.some(i=>(n.willChange||"").includes(i))||OD.some(i=>(n.contain||"").includes(i))}function MD(t){let e=ss(t);for(;ji(e)&&!fa(e);){if(yv(e))return e;if(Zd(e))return null;e=ss(e)}return null}function bv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const DD=new Set(["html","body","#document"]);function fa(t){return DD.has(Pa(t))}function di(t){return wn(t).getComputedStyle(t)}function ef(t){return ui(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ss(t){if(Pa(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Sb(t)&&t.host||Bi(t);return Sb(e)?e.host:e}function VC(t){const e=ss(t);return fa(e)?t.ownerDocument?t.ownerDocument.body:t.body:ji(e)&&gc(e)?e:VC(e)}function ql(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=VC(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),o=wn(r);if(s){const a=am(o);return e.concat(o,o.visualViewport||[],gc(r)?r:[],a&&n?ql(a):[])}return e.concat(r,ql(r,[],n))}function am(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function zC(t){const e=di(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=ji(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=ud(n)!==s||ud(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function xv(t){return ui(t)?t:t.contextElement}function $o(t){const e=xv(t);if(!ji(e))return Ii(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=zC(e);let o=(s?ud(n.width):n.width)/i,a=(s?ud(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const LD=Ii(0);function $C(t){const e=wn(t);return!bv()||!e.visualViewport?LD:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function jD(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==wn(t)?!1:e}function $s(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=xv(t);let o=Ii(1);e&&(i?ui(i)&&(o=$o(i)):o=$o(t));const a=jD(s,n,i)?$C(s):Ii(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,d=r.height/o.y;if(s){const f=wn(s),h=i&&ui(i)?wn(i):i;let v=f,m=am(v);for(;m&&i&&h!==v;){const b=$o(m),p=m.getBoundingClientRect(),y=di(m),S=p.left+(m.clientLeft+parseFloat(y.paddingLeft))*b.x,T=p.top+(m.clientTop+parseFloat(y.paddingTop))*b.y;l*=b.x,c*=b.y,u*=b.x,d*=b.y,l+=S,c+=T,v=wn(m),m=am(v)}}return fd({width:u,height:d,x:l,y:c})}function Sv(t,e){const n=ef(t).scrollLeft;return e?e.left+n:$s(Bi(t)).left+n}function WC(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-(n?0:Sv(t,i)),s=i.top+e.scrollTop;return{x:r,y:s}}function FD(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const s=r==="fixed",o=Bi(i),a=e?Zd(e.floating):!1;if(i===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Ii(1);const u=Ii(0),d=ji(i);if((d||!d&&!s)&&((Pa(i)!=="body"||gc(o))&&(l=ef(i)),ji(i))){const h=$s(i);c=$o(i),u.x=h.x+i.clientLeft,u.y=h.y+i.clientTop}const f=o&&!d&&!s?WC(o,l,!0):Ii(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function UD(t){return Array.from(t.getClientRects())}function BD(t){const e=Bi(t),n=ef(t),i=t.ownerDocument.body,r=yn(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=yn(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+Sv(t);const a=-n.scrollTop;return di(i).direction==="rtl"&&(o+=yn(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function VD(t,e){const n=wn(t),i=Bi(t),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const c=bv();(!c||c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}const zD=new Set(["absolute","fixed"]);function $D(t,e){const n=$s(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,s=ji(t)?$o(t):Ii(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function Tb(t,e,n){let i;if(e==="viewport")i=VD(t,n);else if(e==="document")i=BD(Bi(t));else if(ui(e))i=$D(e,n);else{const r=$C(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return fd(i)}function HC(t,e){const n=ss(t);return n===e||!ui(n)||fa(n)?!1:di(n).position==="fixed"||HC(n,e)}function WD(t,e){const n=e.get(t);if(n)return n;let i=ql(t,[],!1).filter(a=>ui(a)&&Pa(a)!=="body"),r=null;const s=di(t).position==="fixed";let o=s?ss(t):t;for(;ui(o)&&!fa(o);){const a=di(o),l=yv(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&zD.has(r.position)||gc(o)&&!l&&HC(t,o))?i=i.filter(u=>u!==o):r=a,o=ss(o)}return e.set(t,i),i}function HD(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const o=[...n==="clippingAncestors"?Zd(e)?[]:WD(e,this._c):[].concat(n),i],a=o[0],l=o.reduce((c,u)=>{const d=Tb(e,u,r);return c.top=yn(d.top,c.top),c.right=rs(d.right,c.right),c.bottom=rs(d.bottom,c.bottom),c.left=yn(d.left,c.left),c},Tb(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function qD(t){const{width:e,height:n}=zC(t);return{width:e,height:n}}function GD(t,e,n){const i=ji(e),r=Bi(e),s=n==="fixed",o=$s(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Ii(0);function c(){l.x=Sv(r)}if(i||!i&&!s)if((Pa(e)!=="body"||gc(r))&&(a=ef(e)),i){const h=$s(e,!0,s,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else r&&c();s&&!i&&r&&c();const u=r&&!i&&!s?WC(r,a):Ii(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function hh(t){return di(t).position==="static"}function kb(t,e){if(!ji(t)||di(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Bi(t)===n&&(n=n.ownerDocument.body),n}function qC(t,e){const n=wn(t);if(Zd(t))return n;if(!ji(t)){let r=ss(t);for(;r&&!fa(r);){if(ui(r)&&!hh(r))return r;r=ss(r)}return n}let i=kb(t,e);for(;i&&_D(i)&&hh(i);)i=kb(i,e);return i&&fa(i)&&hh(i)&&!yv(i)?n:i||MD(t)||n}const KD=async function(t){const e=this.getOffsetParent||qC,n=this.getDimensions,i=await n(t.floating);return{reference:GD(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function YD(t){return di(t).direction==="rtl"}const QD={convertOffsetParentRelativeRectToViewportRelativeRect:FD,getDocumentElement:Bi,getClippingRect:HD,getOffsetParent:qC,getElementRects:KD,getClientRects:UD,getDimensions:qD,getScale:$o,isElement:ui,isRTL:YD};function GC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function XD(t,e){let n=null,i;const r=Bi(t);function s(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=c;if(a||e(),!f||!h)return;const v=Wc(d),m=Wc(r.clientWidth-(u+f)),b=Wc(r.clientHeight-(d+h)),p=Wc(u),S={rootMargin:-v+"px "+-m+"px "+-b+"px "+-p+"px",threshold:yn(0,rs(1,l))||1};let T=!0;function k(w){const E=w[0].intersectionRatio;if(E!==l){if(!T)return o();E?o(!1,E):i=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!GC(c,t.getBoundingClientRect())&&o(),T=!1}try{n=new IntersectionObserver(k,{...S,root:r.ownerDocument})}catch{n=new IntersectionObserver(k,S)}n.observe(t)}return o(!0),s}function JD(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=xv(t),u=r||s?[...c?ql(c):[],...ql(e)]:[];u.forEach(p=>{r&&p.addEventListener("scroll",n,{passive:!0}),s&&p.addEventListener("resize",n)});const d=c&&a?XD(c,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(p=>{let[y]=p;y&&y.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var S;(S=h)==null||S.observe(e)})),n()}),c&&!l&&h.observe(c),h.observe(e));let v,m=l?$s(t):null;l&&b();function b(){const p=$s(t);m&&!GC(m,p)&&n(),m=p,v=requestAnimationFrame(b)}return n(),()=>{var p;u.forEach(y=>{r&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),d==null||d(),(p=h)==null||p.disconnect(),h=null,l&&cancelAnimationFrame(v)}}const ZD=kD,eL=wD,tL=xD,nL=ED,iL=SD,wb=bD,rL=CD,sL=(t,e,n)=>{const i=new Map,r={platform:QD,...n},s={...r.platform,_c:i};return yD(t,e,{...r,platform:s})};var oL=typeof document<"u",aL=function(){},yu=oL?x.useLayoutEffect:aL;function hd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!hd(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!hd(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function KC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Cb(t,e){const n=KC(t);return Math.round(e*n)/n}function ph(t){const e=x.useRef(t);return yu(()=>{e.current=t}),e}function lL(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=x.useState(i);hd(f,i)||h(i);const[v,m]=x.useState(null),[b,p]=x.useState(null),y=x.useCallback(I=>{I!==w.current&&(w.current=I,m(I))},[]),S=x.useCallback(I=>{I!==E.current&&(E.current=I,p(I))},[]),T=s||v,k=o||b,w=x.useRef(null),E=x.useRef(null),P=x.useRef(u),_=l!=null,A=ph(l),O=ph(r),L=ph(c),Q=x.useCallback(()=>{if(!w.current||!E.current)return;const I={placement:e,strategy:n,middleware:f};O.current&&(I.platform=O.current),sL(w.current,E.current,I).then(M=>{const q={...M,isPositioned:L.current!==!1};z.current&&!hd(P.current,q)&&(P.current=q,pc.flushSync(()=>{d(q)}))})},[f,e,n,O,L]);yu(()=>{c===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,d(I=>({...I,isPositioned:!1})))},[c]);const z=x.useRef(!1);yu(()=>(z.current=!0,()=>{z.current=!1}),[]),yu(()=>{if(T&&(w.current=T),k&&(E.current=k),T&&k){if(A.current)return A.current(T,k,Q);Q()}},[T,k,Q,A,_]);const oe=x.useMemo(()=>({reference:w,floating:E,setReference:y,setFloating:S}),[y,S]),ae=x.useMemo(()=>({reference:T,floating:k}),[T,k]),X=x.useMemo(()=>{const I={position:n,left:0,top:0};if(!ae.floating)return I;const M=Cb(ae.floating,u.x),q=Cb(ae.floating,u.y);return a?{...I,transform:"translate("+M+"px, "+q+"px)",...KC(ae.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:M,top:q}},[n,a,ae.floating,u.x,u.y]);return x.useMemo(()=>({...u,update:Q,refs:oe,elements:ae,floatingStyles:X}),[u,Q,oe,ae,X])}const cL=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?wb({element:i.current,padding:r}).fn(n):{}:i?wb({element:i,padding:r}).fn(n):{}}}},uL=(t,e)=>({...ZD(t),options:[t,e]}),dL=(t,e)=>({...eL(t),options:[t,e]}),fL=(t,e)=>({...rL(t),options:[t,e]}),hL=(t,e)=>({...tL(t),options:[t,e]}),pL=(t,e)=>({...nL(t),options:[t,e]}),mL=(t,e)=>({...iL(t),options:[t,e]}),gL=(t,e)=>({...cL(t),options:[t,e]});var vL="Arrow",YC=x.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...s}=t;return g.jsx(qe.svg,{...s,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:g.jsx("polygon",{points:"0,0 30,0 15,10"})})});YC.displayName=vL;var yL=YC;function QC(t){const[e,n]=x.useState(void 0);return mr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var XC="Popper",[JC,ZC]=ka(XC),[G8,eE]=JC(XC),tE="PopperAnchor",nE=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=eE(tE,n),o=x.useRef(null),a=wt(e,o);return x.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:g.jsx(qe.div,{...r,ref:a})});nE.displayName=tE;var Tv="PopperContent",[bL,xL]=JC(Tv),iE=x.forwardRef((t,e)=>{var pe,Xt,Ge,jt,pn,Ft;const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:v,...m}=t,b=eE(Tv,n),[p,y]=x.useState(null),S=wt(e,Ct=>y(Ct)),[T,k]=x.useState(null),w=QC(T),E=(w==null?void 0:w.width)??0,P=(w==null?void 0:w.height)??0,_=i+(s!=="center"?"-"+s:""),A=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},O=Array.isArray(c)?c:[c],L=O.length>0,Q={padding:A,boundary:O.filter(TL),altBoundary:L},{refs:z,floatingStyles:oe,placement:ae,isPositioned:X,middlewareData:I}=lL({strategy:"fixed",placement:_,whileElementsMounted:(...Ct)=>JD(...Ct,{animationFrame:h==="always"}),elements:{reference:b.anchor},middleware:[uL({mainAxis:r+P,alignmentAxis:o}),l&&dL({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?fL():void 0,...Q}),l&&hL({...Q}),pL({...Q,apply:({elements:Ct,rects:Jt,availableWidth:zi,availableHeight:pi})=>{const{width:Vn,height:Et}=Jt.reference,Zt=Ct.floating.style;Zt.setProperty("--radix-popper-available-width",`${zi}px`),Zt.setProperty("--radix-popper-available-height",`${pi}px`),Zt.setProperty("--radix-popper-anchor-width",`${Vn}px`),Zt.setProperty("--radix-popper-anchor-height",`${Et}px`)}}),T&&gL({element:T,padding:a}),kL({arrowWidth:E,arrowHeight:P}),f&&mL({strategy:"referenceHidden",...Q})]}),[M,q]=oE(ae),Y=Li(v);mr(()=>{X&&(Y==null||Y())},[X,Y]);const ne=(pe=I.arrow)==null?void 0:pe.x,ee=(Xt=I.arrow)==null?void 0:Xt.y,ue=((Ge=I.arrow)==null?void 0:Ge.centerOffset)!==0,[ce,Ce]=x.useState();return mr(()=>{p&&Ce(window.getComputedStyle(p).zIndex)},[p]),g.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:X?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ce,"--radix-popper-transform-origin":[(jt=I.transformOrigin)==null?void 0:jt.x,(pn=I.transformOrigin)==null?void 0:pn.y].join(" "),...((Ft=I.hide)==null?void 0:Ft.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:g.jsx(bL,{scope:n,placedSide:M,onArrowChange:k,arrowX:ne,arrowY:ee,shouldHideArrow:ue,children:g.jsx(qe.div,{"data-side":M,"data-align":q,...m,ref:S,style:{...m.style,animation:X?void 0:"none"}})})})});iE.displayName=Tv;var rE="PopperArrow",SL={top:"bottom",right:"left",bottom:"top",left:"right"},sE=x.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,s=xL(rE,i),o=SL[s.placedSide];return g.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:g.jsx(yL,{...r,ref:n,style:{...r.style,display:"block"}})})});sE.displayName=rE;function TL(t){return t!==null}var kL=t=>({name:"transformOrigin",options:t,fn(e){var b,p,y;const{placement:n,rects:i,middlewareData:r}=e,o=((b=r.arrow)==null?void 0:b.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=oE(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((p=r.arrow)==null?void 0:p.x)??0)+a/2,h=(((y=r.arrow)==null?void 0:y.y)??0)+l/2;let v="",m="";return c==="bottom"?(v=o?d:`${f}px`,m=`${-l}px`):c==="top"?(v=o?d:`${f}px`,m=`${i.floating.height+l}px`):c==="right"?(v=`${-l}px`,m=o?d:`${h}px`):c==="left"&&(v=`${i.floating.width+l}px`,m=o?d:`${h}px`),{data:{x:v,y:m}}}});function oE(t){const[e,n="center"]=t.split("-");return[e,n]}var wL=nE,CL=iE,EL=sE,[tf,K8]=ka("Tooltip",[ZC]),kv=ZC(),aE="TooltipProvider",PL=700,Eb="tooltip.open",[RL,lE]=tf(aE),cE=t=>{const{__scopeTooltip:e,delayDuration:n=PL,skipDelayDuration:i=300,disableHoverableContent:r=!1,children:s}=t,o=x.useRef(!0),a=x.useRef(!1),l=x.useRef(0);return x.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),g.jsx(RL,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:x.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:x.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,i)},[i]),isPointerInTransitRef:a,onPointerInTransitChange:x.useCallback(c=>{a.current=c},[]),disableHoverableContent:r,children:s})};cE.displayName=aE;var uE="Tooltip",[Y8,nf]=tf(uE),lm="TooltipTrigger",_L=x.forwardRef((t,e)=>{const{__scopeTooltip:n,...i}=t,r=nf(lm,n),s=lE(lm,n),o=kv(n),a=x.useRef(null),l=wt(e,a,r.onTriggerChange),c=x.useRef(!1),u=x.useRef(!1),d=x.useCallback(()=>c.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),g.jsx(wL,{asChild:!0,...o,children:g.jsx(qe.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...i,ref:l,onPointerMove:Ne(t.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(r.onTriggerEnter(),u.current=!0)}),onPointerLeave:Ne(t.onPointerLeave,()=>{r.onTriggerLeave(),u.current=!1}),onPointerDown:Ne(t.onPointerDown,()=>{r.open&&r.onClose(),c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Ne(t.onFocus,()=>{c.current||r.onOpen()}),onBlur:Ne(t.onBlur,r.onClose),onClick:Ne(t.onClick,r.onClose)})})});_L.displayName=lm;var AL="TooltipPortal",[Q8,NL]=tf(AL,{forceMount:void 0}),ha="TooltipContent",dE=x.forwardRef((t,e)=>{const n=NL(ha,t.__scopeTooltip),{forceMount:i=n.forceMount,side:r="top",...s}=t,o=nf(ha,t.__scopeTooltip);return g.jsx(Qs,{present:i||o.open,children:o.disableHoverableContent?g.jsx(fE,{side:r,...s,ref:e}):g.jsx(IL,{side:r,...s,ref:e})})}),IL=x.forwardRef((t,e)=>{const n=nf(ha,t.__scopeTooltip),i=lE(ha,t.__scopeTooltip),r=x.useRef(null),s=wt(e,r),[o,a]=x.useState(null),{trigger:l,onClose:c}=n,u=r.current,{onPointerInTransitChange:d}=i,f=x.useCallback(()=>{a(null),d(!1)},[d]),h=x.useCallback((v,m)=>{const b=v.currentTarget,p={x:v.clientX,y:v.clientY},y=jL(p,b.getBoundingClientRect()),S=FL(p,y),T=UL(m.getBoundingClientRect()),k=VL([...S,...T]);a(k),d(!0)},[d]);return x.useEffect(()=>()=>f(),[f]),x.useEffect(()=>{if(l&&u){const v=b=>h(b,u),m=b=>h(b,l);return l.addEventListener("pointerleave",v),u.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",v),u.removeEventListener("pointerleave",m)}}},[l,u,h,f]),x.useEffect(()=>{if(o){const v=m=>{const b=m.target,p={x:m.clientX,y:m.clientY},y=(l==null?void 0:l.contains(b))||(u==null?void 0:u.contains(b)),S=!BL(p,o);y?f():S&&(f(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,u,o,c,f]),g.jsx(fE,{...t,ref:s})}),[OL,ML]=tf(uE,{isInside:!1}),DL=LI("TooltipContent"),fE=x.forwardRef((t,e)=>{const{__scopeTooltip:n,children:i,"aria-label":r,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,l=nf(ha,n),c=kv(n),{onClose:u}=l;return x.useEffect(()=>(document.addEventListener(Eb,u),()=>document.removeEventListener(Eb,u)),[u]),x.useEffect(()=>{if(l.trigger){const d=f=>{const h=f.target;h!=null&&h.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),g.jsx(Yd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:g.jsxs(CL,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[g.jsx(DL,{children:i}),g.jsx(OL,{scope:n,isInside:!0,children:g.jsx(oO,{id:l.contentId,role:"tooltip",children:r||i})})]})})});dE.displayName=ha;var hE="TooltipArrow",LL=x.forwardRef((t,e)=>{const{__scopeTooltip:n,...i}=t,r=kv(n);return ML(hE,n).isInside?null:g.jsx(EL,{...r,...i,ref:e})});LL.displayName=hE;function jL(t,e){const n=Math.abs(e.top-t.y),i=Math.abs(e.bottom-t.y),r=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,i,r,s)){case s:return"left";case r:return"right";case n:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function FL(t,e,n=5){const i=[];switch(e){case"top":i.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":i.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":i.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":i.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return i}function UL(t){const{top:e,right:n,bottom:i,left:r}=t;return[{x:r,y:e},{x:n,y:e},{x:n,y:i},{x:r,y:i}]}function BL(t,e){const{x:n,y:i}=t;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,d=l.x,f=l.y;u>i!=f>i&&n<(d-c)*(i-u)/(f-u)+c&&(r=!r)}return r}function VL(t){const e=t.slice();return e.sort((n,i)=>n.x<i.x?-1:n.x>i.x?1:n.y<i.y?-1:n.y>i.y?1:0),zL(e)}function zL(t){if(t.length<=1)return t.slice();const e=[];for(let i=0;i<t.length;i++){const r=t[i];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(r.y-o.y)>=(s.y-o.y)*(r.x-o.x))e.pop();else break}e.push(r)}e.pop();const n=[];for(let i=t.length-1;i>=0;i--){const r=t[i];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(r.y-o.y)>=(s.y-o.y)*(r.x-o.x))n.pop();else break}n.push(r)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var $L=cE,pE=dE;const WL=$L,HL=x.forwardRef(({className:t,sideOffset:e=4,...n},i)=>g.jsx(pE,{ref:i,sideOffset:e,className:Fe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));HL.displayName=pE.displayName;var rf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},sf=typeof window>"u"||"Deno"in globalThis;function Jn(){}function qL(t,e){return typeof t=="function"?t(e):t}function GL(t){return typeof t=="number"&&t>=0&&t!==1/0}function KL(t,e){return Math.max(t+(e||0)-Date.now(),0)}function cm(t,e){return typeof t=="function"?t(e):t}function YL(t,e){return typeof t=="function"?t(e):t}function Pb(t,e){const{type:n="all",exact:i,fetchStatus:r,predicate:s,queryKey:o,stale:a}=t;if(o){if(i){if(e.queryHash!==wv(o,e.options))return!1}else if(!Kl(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||r&&r!==e.state.fetchStatus||s&&!s(e))}function Rb(t,e){const{exact:n,status:i,predicate:r,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Gl(e.options.mutationKey)!==Gl(s))return!1}else if(!Kl(e.options.mutationKey,s))return!1}return!(i&&e.state.status!==i||r&&!r(e))}function wv(t,e){return((e==null?void 0:e.queryKeyHashFn)||Gl)(t)}function Gl(t){return JSON.stringify(t,(e,n)=>um(n)?Object.keys(n).sort().reduce((i,r)=>(i[r]=n[r],i),{}):n)}function Kl(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Kl(t[n],e[n])):!1}function mE(t,e){if(t===e)return t;const n=_b(t)&&_b(e);if(n||um(t)&&um(e)){const i=n?t:Object.keys(t),r=i.length,s=n?e:Object.keys(e),o=s.length,a=n?[]:{},l=new Set(i);let c=0;for(let u=0;u<o;u++){const d=n?u:s[u];(!n&&l.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,c++):(a[d]=mE(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&c++)}return r===o&&c===r?t:a}return e}function _b(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function um(t){if(!Ab(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Ab(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Ab(t){return Object.prototype.toString.call(t)==="[object Object]"}function QL(t){return new Promise(e=>{setTimeout(e,t)})}function XL(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?mE(t,e):e}function JL(t,e,n=0){const i=[...t,e];return n&&i.length>n?i.slice(1):i}function ZL(t,e,n=0){const i=[e,...t];return n&&i.length>n?i.slice(0,-1):i}var Cv=Symbol();function gE(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Cv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Ps,Lr,Xo,RT,ej=(RT=class extends rf{constructor(){super();ke(this,Ps);ke(this,Lr);ke(this,Xo);de(this,Xo,e=>{if(!sf&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){D(this,Lr)||this.setEventListener(D(this,Xo))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,Lr))==null||e.call(this),de(this,Lr,void 0))}setEventListener(e){var n;de(this,Xo,e),(n=D(this,Lr))==null||n.call(this),de(this,Lr,e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(e){D(this,Ps)!==e&&(de(this,Ps,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof D(this,Ps)=="boolean"?D(this,Ps):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ps=new WeakMap,Lr=new WeakMap,Xo=new WeakMap,RT),vE=new ej,Jo,jr,Zo,_T,tj=(_T=class extends rf{constructor(){super();ke(this,Jo,!0);ke(this,jr);ke(this,Zo);de(this,Zo,e=>{if(!sf&&window.addEventListener){const n=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",i)}}})}onSubscribe(){D(this,jr)||this.setEventListener(D(this,Zo))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,jr))==null||e.call(this),de(this,jr,void 0))}setEventListener(e){var n;de(this,Zo,e),(n=D(this,jr))==null||n.call(this),de(this,jr,e(this.setOnline.bind(this)))}setOnline(e){D(this,Jo)!==e&&(de(this,Jo,e),this.listeners.forEach(i=>{i(e)}))}isOnline(){return D(this,Jo)}},Jo=new WeakMap,jr=new WeakMap,Zo=new WeakMap,_T),pd=new tj;function nj(){let t,e;const n=new Promise((r,s)=>{t=r,e=s});n.status="pending",n.catch(()=>{});function i(r){Object.assign(n,r),delete n.resolve,delete n.reject}return n.resolve=r=>{i({status:"fulfilled",value:r}),t(r)},n.reject=r=>{i({status:"rejected",reason:r}),e(r)},n}function ij(t){return Math.min(1e3*2**t,3e4)}function yE(t){return(t??"online")==="online"?pd.isOnline():!0}var bE=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function mh(t){return t instanceof bE}function xE(t){let e=!1,n=0,i=!1,r;const s=nj(),o=m=>{var b;i||(f(new bE(m)),(b=t.abort)==null||b.call(t))},a=()=>{e=!0},l=()=>{e=!1},c=()=>vE.isFocused()&&(t.networkMode==="always"||pd.isOnline())&&t.canRun(),u=()=>yE(t.networkMode)&&t.canRun(),d=m=>{var b;i||(i=!0,(b=t.onSuccess)==null||b.call(t,m),r==null||r(),s.resolve(m))},f=m=>{var b;i||(i=!0,(b=t.onError)==null||b.call(t,m),r==null||r(),s.reject(m))},h=()=>new Promise(m=>{var b;r=p=>{(i||c())&&m(p)},(b=t.onPause)==null||b.call(t)}).then(()=>{var m;r=void 0,i||(m=t.onContinue)==null||m.call(t)}),v=()=>{if(i)return;let m;const b=n===0?t.initialPromise:void 0;try{m=b??t.fn()}catch(p){m=Promise.reject(p)}Promise.resolve(m).then(d).catch(p=>{var w;if(i)return;const y=t.retry??(sf?0:3),S=t.retryDelay??ij,T=typeof S=="function"?S(n,p):S,k=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,p);if(e||!k){f(p);return}n++,(w=t.onFail)==null||w.call(t,n,p),QL(T).then(()=>c()?void 0:h()).then(()=>{e?f(p):v()})})};return{promise:s,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?v():h().then(v),s)}}var rj=t=>setTimeout(t,0);function sj(){let t=[],e=0,n=a=>{a()},i=a=>{a()},r=rj;const s=a=>{e?t.push(a):r(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&r(()=>{i(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{i=a},setScheduler:a=>{r=a}}}var Wt=sj(),Rs,AT,SE=(AT=class{constructor(){ke(this,Rs)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),GL(this.gcTime)&&de(this,Rs,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(sf?1/0:5*60*1e3))}clearGcTimeout(){D(this,Rs)&&(clearTimeout(D(this,Rs)),de(this,Rs,void 0))}},Rs=new WeakMap,AT),ea,_s,On,As,It,ac,Ns,Zn,Yi,NT,oj=(NT=class extends SE{constructor(e){super();ke(this,Zn);ke(this,ea);ke(this,_s);ke(this,On);ke(this,As);ke(this,It);ke(this,ac);ke(this,Ns);de(this,Ns,!1),de(this,ac,e.defaultOptions),this.setOptions(e.options),this.observers=[],de(this,As,e.client),de(this,On,D(this,As).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,de(this,ea,lj(this.options)),this.state=e.state??D(this,ea),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=D(this,It))==null?void 0:e.promise}setOptions(e){this.options={...D(this,ac),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&D(this,On).remove(this)}setData(e,n){const i=XL(this.state.data,e,this.options);return _t(this,Zn,Yi).call(this,{data:i,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),i}setState(e,n){_t(this,Zn,Yi).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var i,r;const n=(i=D(this,It))==null?void 0:i.promise;return(r=D(this,It))==null||r.cancel(e),n?n.then(Jn).catch(Jn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(D(this,ea))}isActive(){return this.observers.some(e=>YL(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Cv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>cm(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!KL(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(i=>i.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=D(this,It))==null||n.continue()}onOnline(){var n;const e=this.observers.find(i=>i.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=D(this,It))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),D(this,On).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(D(this,It)&&(D(this,Ns)?D(this,It).cancel({revert:!0}):D(this,It).cancelRetry()),this.scheduleGc()),D(this,On).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||_t(this,Zn,Yi).call(this,{type:"invalidate"})}fetch(e,n){var c,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(D(this,It))return D(this,It).continueRetry(),D(this,It).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const i=new AbortController,r=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(de(this,Ns,!0),i.signal)})},s=()=>{const f=gE(this.options,n),v=(()=>{const m={client:D(this,As),queryKey:this.queryKey,meta:this.meta};return r(m),m})();return de(this,Ns,!1),this.options.persister?this.options.persister(f,v,this):f(v)},a=(()=>{const f={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:D(this,As),state:this.state,fetchFn:s};return r(f),f})();(c=this.options.behavior)==null||c.onFetch(a,this),de(this,_s,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&_t(this,Zn,Yi).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const l=f=>{var h,v,m,b;mh(f)&&f.silent||_t(this,Zn,Yi).call(this,{type:"error",error:f}),mh(f)||((v=(h=D(this,On).config).onError)==null||v.call(h,f,this),(b=(m=D(this,On).config).onSettled)==null||b.call(m,this.state.data,f,this)),this.scheduleGc()};return de(this,It,xE({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:i.abort.bind(i),onSuccess:f=>{var h,v,m,b;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(p){l(p);return}(v=(h=D(this,On).config).onSuccess)==null||v.call(h,f,this),(b=(m=D(this,On).config).onSettled)==null||b.call(m,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,h)=>{_t(this,Zn,Yi).call(this,{type:"failed",failureCount:f,error:h})},onPause:()=>{_t(this,Zn,Yi).call(this,{type:"pause"})},onContinue:()=>{_t(this,Zn,Yi).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),D(this,It).start()}},ea=new WeakMap,_s=new WeakMap,On=new WeakMap,As=new WeakMap,It=new WeakMap,ac=new WeakMap,Ns=new WeakMap,Zn=new WeakSet,Yi=function(e){const n=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...aj(i.data,this.options),fetchMeta:e.meta??null};case"success":return de(this,_s,void 0),{...i,data:e.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return mh(r)&&r.revert&&D(this,_s)?{...D(this,_s),fetchStatus:"idle"}:{...i,error:r,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=n(this.state),Wt.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),D(this,On).notify({query:this,type:"updated",action:e})})},NT);function aj(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:yE(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function lj(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,i=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ki,IT,cj=(IT=class extends rf{constructor(e={}){super();ke(this,ki);this.config=e,de(this,ki,new Map)}build(e,n,i){const r=n.queryKey,s=n.queryHash??wv(r,n);let o=this.get(s);return o||(o=new oj({client:e,queryKey:r,queryHash:s,options:e.defaultQueryOptions(n),state:i,defaultOptions:e.getQueryDefaults(r)}),this.add(o)),o}add(e){D(this,ki).has(e.queryHash)||(D(this,ki).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=D(this,ki).get(e.queryHash);n&&(e.destroy(),n===e&&D(this,ki).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Wt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return D(this,ki).get(e)}getAll(){return[...D(this,ki).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(i=>Pb(n,i))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(i=>Pb(e,i)):n}notify(e){Wt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Wt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Wt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ki=new WeakMap,IT),wi,zt,Is,Ci,Er,OT,uj=(OT=class extends SE{constructor(e){super();ke(this,Ci);ke(this,wi);ke(this,zt);ke(this,Is);this.mutationId=e.mutationId,de(this,zt,e.mutationCache),de(this,wi,[]),this.state=e.state||dj(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){D(this,wi).includes(e)||(D(this,wi).push(e),this.clearGcTimeout(),D(this,zt).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){de(this,wi,D(this,wi).filter(n=>n!==e)),this.scheduleGc(),D(this,zt).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){D(this,wi).length||(this.state.status==="pending"?this.scheduleGc():D(this,zt).remove(this))}continue(){var e;return((e=D(this,Is))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,o,a,l,c,u,d,f,h,v,m,b,p,y,S,T,k,w,E,P;const n=()=>{_t(this,Ci,Er).call(this,{type:"continue"})};de(this,Is,xE({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(_,A)=>{_t(this,Ci,Er).call(this,{type:"failed",failureCount:_,error:A})},onPause:()=>{_t(this,Ci,Er).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>D(this,zt).canRun(this)}));const i=this.state.status==="pending",r=!D(this,Is).canStart();try{if(i)n();else{_t(this,Ci,Er).call(this,{type:"pending",variables:e,isPaused:r}),await((o=(s=D(this,zt).config).onMutate)==null?void 0:o.call(s,e,this));const A=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e));A!==this.state.context&&_t(this,Ci,Er).call(this,{type:"pending",context:A,variables:e,isPaused:r})}const _=await D(this,Is).start();return await((u=(c=D(this,zt).config).onSuccess)==null?void 0:u.call(c,_,e,this.state.context,this)),await((f=(d=this.options).onSuccess)==null?void 0:f.call(d,_,e,this.state.context)),await((v=(h=D(this,zt).config).onSettled)==null?void 0:v.call(h,_,null,this.state.variables,this.state.context,this)),await((b=(m=this.options).onSettled)==null?void 0:b.call(m,_,null,e,this.state.context)),_t(this,Ci,Er).call(this,{type:"success",data:_}),_}catch(_){try{throw await((y=(p=D(this,zt).config).onError)==null?void 0:y.call(p,_,e,this.state.context,this)),await((T=(S=this.options).onError)==null?void 0:T.call(S,_,e,this.state.context)),await((w=(k=D(this,zt).config).onSettled)==null?void 0:w.call(k,void 0,_,this.state.variables,this.state.context,this)),await((P=(E=this.options).onSettled)==null?void 0:P.call(E,void 0,_,e,this.state.context)),_}finally{_t(this,Ci,Er).call(this,{type:"error",error:_})}}finally{D(this,zt).runNext(this)}}},wi=new WeakMap,zt=new WeakMap,Is=new WeakMap,Ci=new WeakSet,Er=function(e){const n=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Wt.batch(()=>{D(this,wi).forEach(i=>{i.onMutationUpdate(e)}),D(this,zt).notify({mutation:this,type:"updated",action:e})})},OT);function dj(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var tr,ei,lc,MT,fj=(MT=class extends rf{constructor(e={}){super();ke(this,tr);ke(this,ei);ke(this,lc);this.config=e,de(this,tr,new Set),de(this,ei,new Map),de(this,lc,0)}build(e,n,i){const r=new uj({mutationCache:this,mutationId:++kc(this,lc)._,options:e.defaultMutationOptions(n),state:i});return this.add(r),r}add(e){D(this,tr).add(e);const n=Hc(e);if(typeof n=="string"){const i=D(this,ei).get(n);i?i.push(e):D(this,ei).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(D(this,tr).delete(e)){const n=Hc(e);if(typeof n=="string"){const i=D(this,ei).get(n);if(i)if(i.length>1){const r=i.indexOf(e);r!==-1&&i.splice(r,1)}else i[0]===e&&D(this,ei).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Hc(e);if(typeof n=="string"){const i=D(this,ei).get(n),r=i==null?void 0:i.find(s=>s.state.status==="pending");return!r||r===e}else return!0}runNext(e){var i;const n=Hc(e);if(typeof n=="string"){const r=(i=D(this,ei).get(n))==null?void 0:i.find(s=>s!==e&&s.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Wt.batch(()=>{D(this,tr).forEach(e=>{this.notify({type:"removed",mutation:e})}),D(this,tr).clear(),D(this,ei).clear()})}getAll(){return Array.from(D(this,tr))}find(e){const n={exact:!0,...e};return this.getAll().find(i=>Rb(n,i))}findAll(e={}){return this.getAll().filter(n=>Rb(e,n))}notify(e){Wt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Wt.batch(()=>Promise.all(e.map(n=>n.continue().catch(Jn))))}},tr=new WeakMap,ei=new WeakMap,lc=new WeakMap,MT);function Hc(t){var e;return(e=t.options.scope)==null?void 0:e.id}function Nb(t){return{onFetch:(e,n)=>{var u,d,f,h,v;const i=e.options,r=(f=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,s=((h=e.state.data)==null?void 0:h.pages)||[],o=((v=e.state.data)==null?void 0:v.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let m=!1;const b=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},p=gE(e.options,e.fetchOptions),y=async(S,T,k)=>{if(m)return Promise.reject();if(T==null&&S.pages.length)return Promise.resolve(S);const E=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:T,direction:k?"backward":"forward",meta:e.options.meta};return b(O),O})(),P=await p(E),{maxPages:_}=e.options,A=k?ZL:JL;return{pages:A(S.pages,P,_),pageParams:A(S.pageParams,T,_)}};if(r&&s.length){const S=r==="backward",T=S?hj:Ib,k={pages:s,pageParams:o},w=T(i,k);a=await y(k,w,S)}else{const S=t??s.length;do{const T=l===0?o[0]??i.initialPageParam:Ib(i,a);if(l>0&&T==null)break;a=await y(a,T),l++}while(l<S)}return a};e.options.persister?e.fetchFn=()=>{var m,b;return(b=(m=e.options).persister)==null?void 0:b.call(m,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function Ib(t,{pages:e,pageParams:n}){const i=e.length-1;return e.length>0?t.getNextPageParam(e[i],e,n[i],n):void 0}function hj(t,{pages:e,pageParams:n}){var i;return e.length>0?(i=t.getPreviousPageParam)==null?void 0:i.call(t,e[0],e,n[0],n):void 0}var Ke,Fr,Ur,ta,na,Br,ia,ra,DT,pj=(DT=class{constructor(t={}){ke(this,Ke);ke(this,Fr);ke(this,Ur);ke(this,ta);ke(this,na);ke(this,Br);ke(this,ia);ke(this,ra);de(this,Ke,t.queryCache||new cj),de(this,Fr,t.mutationCache||new fj),de(this,Ur,t.defaultOptions||{}),de(this,ta,new Map),de(this,na,new Map),de(this,Br,0)}mount(){kc(this,Br)._++,D(this,Br)===1&&(de(this,ia,vE.subscribe(async t=>{t&&(await this.resumePausedMutations(),D(this,Ke).onFocus())})),de(this,ra,pd.subscribe(async t=>{t&&(await this.resumePausedMutations(),D(this,Ke).onOnline())})))}unmount(){var t,e;kc(this,Br)._--,D(this,Br)===0&&((t=D(this,ia))==null||t.call(this),de(this,ia,void 0),(e=D(this,ra))==null||e.call(this),de(this,ra,void 0))}isFetching(t){return D(this,Ke).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return D(this,Fr).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=D(this,Ke).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=D(this,Ke).build(this,e),i=n.state.data;return i===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(cm(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(i))}getQueriesData(t){return D(this,Ke).findAll(t).map(({queryKey:e,state:n})=>{const i=n.data;return[e,i]})}setQueryData(t,e,n){const i=this.defaultQueryOptions({queryKey:t}),r=D(this,Ke).get(i.queryHash),s=r==null?void 0:r.state.data,o=qL(e,s);if(o!==void 0)return D(this,Ke).build(this,i).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Wt.batch(()=>D(this,Ke).findAll(t).map(({queryKey:i})=>[i,this.setQueryData(i,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=D(this,Ke).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=D(this,Ke);Wt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=D(this,Ke);return Wt.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},i=Wt.batch(()=>D(this,Ke).findAll(t).map(r=>r.cancel(n)));return Promise.all(i).then(Jn).catch(Jn)}invalidateQueries(t,e={}){return Wt.batch(()=>(D(this,Ke).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},i=Wt.batch(()=>D(this,Ke).findAll(t).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let s=r.fetch(void 0,n);return n.throwOnError||(s=s.catch(Jn)),r.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(i).then(Jn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=D(this,Ke).build(this,e);return n.isStaleByTime(cm(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Jn).catch(Jn)}fetchInfiniteQuery(t){return t.behavior=Nb(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Jn).catch(Jn)}ensureInfiniteQueryData(t){return t.behavior=Nb(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return pd.isOnline()?D(this,Fr).resumePausedMutations():Promise.resolve()}getQueryCache(){return D(this,Ke)}getMutationCache(){return D(this,Fr)}getDefaultOptions(){return D(this,Ur)}setDefaultOptions(t){de(this,Ur,t)}setQueryDefaults(t,e){D(this,ta).set(Gl(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...D(this,ta).values()],n={};return e.forEach(i=>{Kl(t,i.queryKey)&&Object.assign(n,i.defaultOptions)}),n}setMutationDefaults(t,e){D(this,na).set(Gl(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...D(this,na).values()],n={};return e.forEach(i=>{Kl(t,i.mutationKey)&&Object.assign(n,i.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...D(this,Ur).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=wv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Cv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...D(this,Ur).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){D(this,Ke).clear(),D(this,Fr).clear()}},Ke=new WeakMap,Fr=new WeakMap,Ur=new WeakMap,ta=new WeakMap,na=new WeakMap,Br=new WeakMap,ia=new WeakMap,ra=new WeakMap,DT),mj=x.createContext(void 0),gj=({client:t,children:e})=>(x.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),g.jsx(mj.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yl(){return Yl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Yl.apply(this,arguments)}var $r;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})($r||($r={}));const Ob="popstate";function vj(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return dm("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:kE(r)}return bj(e,n,null,t)}function ft(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function TE(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yj(){return Math.random().toString(36).substr(2,8)}function Mb(t,e){return{usr:t.state,key:t.key,idx:e}}function dm(t,e,n,i){return n===void 0&&(n=null),Yl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ra(e):e,{state:n,key:e&&e.key||i||yj()})}function kE(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ra(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function bj(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=$r.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Yl({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=$r.Pop;let b=u(),p=b==null?null:b-c;c=b,l&&l({action:a,location:m.location,delta:p})}function f(b,p){a=$r.Push;let y=dm(m.location,b,p);c=u()+1;let S=Mb(y,c),T=m.createHref(y);try{o.pushState(S,"",T)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;r.location.assign(T)}s&&l&&l({action:a,location:m.location,delta:1})}function h(b,p){a=$r.Replace;let y=dm(m.location,b,p);c=u();let S=Mb(y,c),T=m.createHref(y);o.replaceState(S,"",T),s&&l&&l({action:a,location:m.location,delta:0})}function v(b){let p=r.location.origin!=="null"?r.location.origin:r.location.href,y=typeof b=="string"?b:kE(b);return y=y.replace(/ $/,"%20"),ft(p,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,p)}let m={get action(){return a},get location(){return t(r,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(Ob,d),l=b,()=>{r.removeEventListener(Ob,d),l=null}},createHref(b){return e(r,b)},createURL:v,encodeLocation(b){let p=v(b);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:f,replace:h,go(b){return o.go(b)}};return m}var Db;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Db||(Db={}));function xj(t,e,n){return n===void 0&&(n="/"),Sj(t,e,n)}function Sj(t,e,n,i){let r=typeof e=="string"?Ra(e):e,s=EE(r.pathname||"/",n);if(s==null)return null;let o=wE(t);Tj(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Mj(s);a=Nj(o[l],c)}return a}function wE(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(ft(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Ds([i,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(ft(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),wE(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:_j(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of CE(s.path))r(s,o,l)}),e}function CE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=CE(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Tj(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Aj(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const kj=/^:[\w-]+$/,wj=3,Cj=2,Ej=1,Pj=10,Rj=-2,Lb=t=>t==="*";function _j(t,e){let n=t.split("/"),i=n.length;return n.some(Lb)&&(i+=Rj),e&&(i+=Cj),n.filter(r=>!Lb(r)).reduce((r,s)=>r+(kj.test(s)?wj:s===""?Ej:Pj),i)}function Aj(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function Nj(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=Ij({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d)return null;Object.assign(r,d.params),o.push({params:r,pathname:Ds([s,d.pathname]),pathnameBase:Bj(Ds([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Ds([s,d.pathnameBase]))}return o}function Ij(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=Oj(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,u,d)=>{let{paramName:f,isOptional:h}=u;if(f==="*"){let m=a[d]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const v=a[d];return h&&!v?c[f]=void 0:c[f]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function Oj(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),TE(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function Mj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return TE(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function EE(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function Dj(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Ra(t):t;return{pathname:n?n.startsWith("/")?n:Lj(n,e):e,search:Vj(i),hash:zj(r)}}function Lj(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function gh(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Fj(t,e){let n=jj(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Uj(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Ra(t):(r=Yl({},t),ft(!r.pathname||!r.pathname.includes("?"),gh("?","pathname","search",r)),ft(!r.pathname||!r.pathname.includes("#"),gh("#","pathname","hash",r)),ft(!r.search||!r.search.includes("#"),gh("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=Dj(r,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Ds=t=>t.join("/").replace(/\/\/+/g,"/"),Bj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Vj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,zj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function $j(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const PE=["post","put","patch","delete"];new Set(PE);const Wj=["get",...PE];new Set(Wj);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ql(){return Ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ql.apply(this,arguments)}const Ev=x.createContext(null),Hj=x.createContext(null),of=x.createContext(null),af=x.createContext(null),Xs=x.createContext({outlet:null,matches:[],isDataRoute:!1}),RE=x.createContext(null);function lf(){return x.useContext(af)!=null}function Pv(){return lf()||ft(!1),x.useContext(af).location}function _E(t){x.useContext(of).static||x.useLayoutEffect(t)}function AE(){let{isDataRoute:t}=x.useContext(Xs);return t?s2():qj()}function qj(){lf()||ft(!1);let t=x.useContext(Ev),{basename:e,future:n,navigator:i}=x.useContext(of),{matches:r}=x.useContext(Xs),{pathname:s}=Pv(),o=JSON.stringify(Fj(r,n.v7_relativeSplatPath)),a=x.useRef(!1);return _E(()=>{a.current=!0}),x.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let d=Uj(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ds([e,d.pathname])),(u.replace?i.replace:i.push)(d,u.state,u)},[e,i,o,s,t])}function Gj(){let{matches:t}=x.useContext(Xs),e=t[t.length-1];return e?e.params:{}}function Kj(t,e){return Yj(t,e)}function Yj(t,e,n,i){lf()||ft(!1);let{navigator:r}=x.useContext(of),{matches:s}=x.useContext(Xs),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Pv(),u;if(e){var d;let b=typeof e=="string"?Ra(e):e;l==="/"||(d=b.pathname)!=null&&d.startsWith(l)||ft(!1),u=b}else u=c;let f=u.pathname||"/",h=f;if(l!=="/"){let b=l.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=xj(t,{pathname:h}),m=e2(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:Ds([l,r.encodeLocation?r.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:Ds([l,r.encodeLocation?r.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,n,i);return e&&m?x.createElement(af.Provider,{value:{location:Ql({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:$r.Pop}},m):m}function Qj(){let t=r2(),e=$j(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:r},n):null,null)}const Xj=x.createElement(Qj,null);class Jj extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?x.createElement(Xs.Provider,{value:this.props.routeContext},x.createElement(RE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Zj(t){let{routeContext:e,match:n,children:i}=t,r=x.useContext(Ev);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(Xs.Provider,{value:e},i)}function e2(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||ft(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:h}=n,v=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let h,v=!1,m=null,b=null;n&&(h=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||Xj,l&&(c<0&&f===0?(o2("route-fallback"),v=!0,b=null):c===f&&(v=!0,b=d.route.hydrateFallbackElement||null)));let p=e.concat(o.slice(0,f+1)),y=()=>{let S;return h?S=m:v?S=b:d.route.Component?S=x.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=u,x.createElement(Zj,{match:d,routeContext:{outlet:u,matches:p,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?x.createElement(Jj,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:y(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):y()},null)}var NE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(NE||{}),IE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(IE||{});function t2(t){let e=x.useContext(Ev);return e||ft(!1),e}function n2(t){let e=x.useContext(Hj);return e||ft(!1),e}function i2(t){let e=x.useContext(Xs);return e||ft(!1),e}function OE(t){let e=i2(),n=e.matches[e.matches.length-1];return n.route.id||ft(!1),n.route.id}function r2(){var t;let e=x.useContext(RE),n=n2(),i=OE();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function s2(){let{router:t}=t2(NE.UseNavigateStable),e=OE(IE.UseNavigateStable),n=x.useRef(!1);return _E(()=>{n.current=!0}),x.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Ql({fromRouteId:e},s)))},[t,e])}const jb={};function o2(t,e,n){jb[t]||(jb[t]=!0)}function a2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function bs(t){ft(!1)}function l2(t){let{basename:e="/",children:n=null,location:i,navigationType:r=$r.Pop,navigator:s,static:o=!1,future:a}=t;lf()&&ft(!1);let l=e.replace(/^\/*/,"/"),c=x.useMemo(()=>({basename:l,navigator:s,static:o,future:Ql({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=Ra(i));let{pathname:u="/",search:d="",hash:f="",state:h=null,key:v="default"}=i,m=x.useMemo(()=>{let b=EE(u,l);return b==null?null:{location:{pathname:b,search:d,hash:f,state:h,key:v},navigationType:r}},[l,u,d,f,h,v,r]);return m==null?null:x.createElement(of.Provider,{value:c},x.createElement(af.Provider,{children:n,value:m}))}function c2(t){let{children:e,location:n}=t;return Kj(fm(e),n)}new Promise(()=>{});function fm(t,e){e===void 0&&(e=[]);let n=[];return x.Children.forEach(t,(i,r)=>{if(!x.isValidElement(i))return;let s=[...e,r];if(i.type===x.Fragment){n.push.apply(n,fm(i.props.children,s));return}i.type!==bs&&ft(!1),!i.props.index||!i.props.children||ft(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=fm(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const u2="6";try{window.__reactRouterVersion=u2}catch{}const d2="startTransition",Fb=yg[d2];function f2(t){let{basename:e,children:n,future:i,window:r}=t,s=x.useRef();s.current==null&&(s.current=vj({window:r,v5Compat:!0}));let o=s.current,[a,l]=x.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},u=x.useCallback(d=>{c&&Fb?Fb(()=>l(d)):l(d)},[l,c]);return x.useLayoutEffect(()=>o.listen(u),[o,u]),x.useEffect(()=>a2(i),[i]),x.createElement(l2,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}var Ub;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ub||(Ub={}));var Bb;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Bb||(Bb={}));const h2="/assets/neurobiz_logo--pm8PSyg.png",cf=({language:t,onLanguageChange:e})=>{const n={hr:{support:"info@neurobiz.me",contact:"Dodaj svoje kontakt informacije",question:"Imate pitanje?"},en:{support:"info@neurobiz.me",contact:"Add your contact information",question:"Have a question?"}};return g.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-white/20 backdrop-blur-lg bg-gray-900/50",children:g.jsxs("div",{className:"container mx-auto px-6 h-16 flex items-center justify-between",children:[g.jsx("a",{href:"/",className:"flex items-center group",children:g.jsx("img",{src:h2,alt:"Neurobiz logo",className:"h-10 w-auto transition-transform group-hover:scale-105"})}),g.jsxs("div",{className:"flex items-center space-x-6",children:[g.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("openContactModal")),className:"bg-blue-600/90 hover:bg-blue-700 text-white px-4 py-2 rounded-full text-sm font-semibold transition-all duration-300 ease-in-out transform hover:scale-105 shadow-md",children:n[t].contact}),g.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("openQuestionModal")),className:"bg-purple-600/90 hover:bg-purple-700 text-white px-4 py-2 rounded-full text-sm font-semibold transition-all duration-300 ease-in-out transform hover:scale-105 shadow-md",children:n[t].question}),g.jsxs("div",{className:"flex items-center space-x-1 bg-gray-800/80 rounded-full p-1 shadow-inner",children:[g.jsx("button",{onClick:()=>e("hr"),className:`px-4 py-1 rounded-full text-sm font-semibold transition-all duration-200 ${t==="hr"?"bg-blue-500 text-white shadow-md":"text-gray-200 hover:text-white hover:bg-gray-700/50"}`,"aria-label":"Hrvatski jezik",children:"HR"}),g.jsx("button",{onClick:()=>e("en"),className:`px-4 py-1 rounded-full text-sm font-semibold transition-all duration-200 ${t==="en"?"bg-blue-500 text-white shadow-md":"text-gray-200 hover:text-white hover:bg-gray-700/50"}`,"aria-label":"English language",children:"EN"})]}),g.jsxs("a",{href:`mailto:${n[t].support}`,className:"flex items-center space-x-2 text-gray-100 hover:text-blue-300 transition-all duration-300 group","aria-label":`Poaljite email na ${n[t].support}`,children:[g.jsx(MO,{className:"w-5 h-5 group-hover:scale-110 group-hover:text-blue-300 transition-transform duration-300"}),g.jsx("span",{className:"hidden lg:inline text-sm font-medium",children:n[t].support})]})]})]})})},Rv=x.createContext({});function _v(t){const e=x.useRef(null);return e.current===null&&(e.current=t()),e.current}const uf=x.createContext(null),Av=x.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class p2 extends x.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function m2({children:t,isPresent:e}){const n=x.useId(),i=x.useRef(null),r=x.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=x.useContext(Av);return x.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=r.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=n;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),g.jsx(p2,{isPresent:e,childRef:i,sizeRef:r,children:x.cloneElement(t,{ref:i})})}const g2=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o})=>{const a=_v(v2),l=x.useId(),c=x.useCallback(d=>{a.set(d,!0);for(const f of a.values())if(!f)return;i&&i()},[a,i]),u=x.useMemo(()=>({id:l,initial:e,isPresent:n,custom:r,onExitComplete:c,register:d=>(a.set(d,!1),()=>a.delete(d))}),s?[Math.random(),c]:[n,c]);return x.useMemo(()=>{a.forEach((d,f)=>a.set(f,!1))},[n]),x.useEffect(()=>{!n&&!a.size&&i&&i()},[n]),o==="popLayout"&&(t=g.jsx(m2,{isPresent:n,children:t})),g.jsx(uf.Provider,{value:u,children:t})};function v2(){return new Map}function ME(t=!0){const e=x.useContext(uf);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,s=x.useId();x.useEffect(()=>{t&&r(s)},[t]);const o=x.useCallback(()=>t&&i&&i(s),[s,i,t]);return!n&&i?[!1,o]:[!0]}const qc=t=>t.key||"";function Vb(t){const e=[];return x.Children.forEach(t,n=>{x.isValidElement(n)&&e.push(n)}),e}const Nv=typeof window<"u",DE=Nv?x.useLayoutEffect:x.useEffect,bu=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=ME(o),c=x.useMemo(()=>Vb(t),[t]),u=o&&!a?[]:c.map(qc),d=x.useRef(!0),f=x.useRef(c),h=_v(()=>new Map),[v,m]=x.useState(c),[b,p]=x.useState(c);DE(()=>{d.current=!1,f.current=c;for(let T=0;T<b.length;T++){const k=qc(b[T]);u.includes(k)?h.delete(k):h.get(k)!==!0&&h.set(k,!1)}},[b,u.length,u.join("-")]);const y=[];if(c!==v){let T=[...c];for(let k=0;k<b.length;k++){const w=b[k],E=qc(w);u.includes(E)||(T.splice(k,0,w),y.push(w))}s==="wait"&&y.length&&(T=y),p(Vb(T)),m(c);return}const{forceRender:S}=x.useContext(Rv);return g.jsx(g.Fragment,{children:b.map(T=>{const k=qc(T),w=o&&!a?!1:c===b||u.includes(k),E=()=>{if(h.has(k))h.set(k,!0);else return;let P=!0;h.forEach(_=>{_||(P=!1)}),P&&(S==null||S(),p(f.current),o&&(l==null||l()),i&&i())};return g.jsx(g2,{isPresent:w,initial:!d.current||n?void 0:!1,custom:w?void 0:e,presenceAffectsLayout:r,mode:s,onExitComplete:w?void 0:E,children:T},k)})})},Cn=t=>t;let LE=Cn;function Iv(t){let e;return()=>(e===void 0&&(e=t()),e)}const pa=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},cr=t=>t*1e3,ur=t=>t/1e3,y2={useManualTiming:!1};function b2(t){let e=new Set,n=new Set,i=!1,r=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,u=!1,d=!1)=>{const h=d&&i?e:n;return u&&s.add(c),h.has(c)||h.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,i){r=!0;return}i=!0,[e,n]=[n,e],e.forEach(a),e.clear(),i=!1,r&&(r=!1,l.process(c))}};return l}const Gc=["read","resolveKeyframes","update","preRender","render","postRender"],x2=40;function jE(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Gc.reduce((p,y)=>(p[y]=b2(s),p),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:f}=o,h=()=>{const p=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(p-r.timestamp,x2),1),r.timestamp=p,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),u.process(r),d.process(r),f.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(h))},v=()=>{n=!0,i=!0,r.isProcessing||t(h)};return{schedule:Gc.reduce((p,y)=>{const S=o[y];return p[y]=(T,k=!1,w=!1)=>(n||v(),S.schedule(T,k,w)),p},{}),cancel:p=>{for(let y=0;y<Gc.length;y++)o[Gc[y]].cancel(p)},state:r,steps:o}}const{schedule:je,cancel:os,state:xt,steps:vh}=jE(typeof requestAnimationFrame<"u"?requestAnimationFrame:Cn,!0),FE=x.createContext({strict:!1}),zb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ma={};for(const t in zb)ma[t]={isEnabled:e=>zb[t].some(n=>!!e[n])};function S2(t){for(const e in t)ma[e]={...ma[e],...t[e]}}const T2=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function md(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||T2.has(t)}let UE=t=>!md(t);function k2(t){t&&(UE=e=>e.startsWith("on")?!md(e):t(e))}try{k2(require("@emotion/is-prop-valid").default)}catch{}function w2(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(UE(r)||n===!0&&md(r)||!e&&!md(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function C2(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const df=x.createContext({});function Xl(t){return typeof t=="string"||Array.isArray(t)}function ff(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Ov=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Mv=["initial",...Ov];function hf(t){return ff(t.animate)||Mv.some(e=>Xl(t[e]))}function BE(t){return!!(hf(t)||t.variants)}function E2(t,e){if(hf(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Xl(n)?n:void 0,animate:Xl(i)?i:void 0}}return t.inherit!==!1?e:{}}function P2(t){const{initial:e,animate:n}=E2(t,x.useContext(df));return x.useMemo(()=>({initial:e,animate:n}),[$b(e),$b(n)])}function $b(t){return Array.isArray(t)?t.join(" "):t}const R2=Symbol.for("motionComponentSymbol");function Ro(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function _2(t,e,n){return x.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Ro(n)&&(n.current=i))},[e])}const Dv=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),A2="framerAppearId",VE="data-"+Dv(A2),{schedule:Lv}=jE(queueMicrotask,!1),zE=x.createContext({});function N2(t,e,n,i,r){var s,o;const{visualElement:a}=x.useContext(df),l=x.useContext(FE),c=x.useContext(uf),u=x.useContext(Av).reducedMotion,d=x.useRef(null);i=i||l.renderer,!d.current&&i&&(d.current=i(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const f=d.current,h=x.useContext(zE);f&&!f.projection&&r&&(f.type==="html"||f.type==="svg")&&I2(d.current,n,r,h);const v=x.useRef(!1);x.useInsertionEffect(()=>{f&&v.current&&f.update(n,c)});const m=n[VE],b=x.useRef(!!m&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,m))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,m)));return DE(()=>{f&&(v.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),Lv.render(f.render),b.current&&f.animationState&&f.animationState.animateChanges())}),x.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var p;(p=window.MotionHandoffMarkAsComplete)===null||p===void 0||p.call(window,m)}),b.current=!1))}),f}function I2(t,e,n,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:$E(t.parent)),t.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&Ro(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}function $E(t){if(t)return t.options.allowProjection!==!1?t.projection:$E(t.parent)}function O2({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var s,o;t&&S2(t);function a(c,u){let d;const f={...x.useContext(Av),...c,layoutId:M2(c)},{isStatic:h}=f,v=P2(c),m=i(c,h);if(!h&&Nv){D2();const b=L2(f);d=b.MeasureLayout,v.visualElement=N2(r,m,f,e,b.ProjectionNode)}return g.jsxs(df.Provider,{value:v,children:[d&&v.visualElement?g.jsx(d,{visualElement:v.visualElement,...f}):null,n(r,c,_2(m,v.visualElement,u),m,h,v.visualElement)]})}a.displayName=`motion.${typeof r=="string"?r:`create(${(o=(s=r.displayName)!==null&&s!==void 0?s:r.name)!==null&&o!==void 0?o:""})`}`;const l=x.forwardRef(a);return l[R2]=r,l}function M2({layoutId:t}){const e=x.useContext(Rv).id;return e&&t!==void 0?e+"-"+t:t}function D2(t,e){x.useContext(FE).strict}function L2(t){const{drag:e,layout:n}=ma;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const j2=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function jv(t){return typeof t!="string"||t.includes("-")?!1:!!(j2.indexOf(t)>-1||/[A-Z]/u.test(t))}function Wb(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function Fv(t,e,n,i){if(typeof e=="function"){const[r,s]=Wb(i);e=e(n!==void 0?n:t.custom,r,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,s]=Wb(i);e=e(n!==void 0?n:t.custom,r,s)}return e}const hm=t=>Array.isArray(t),F2=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),U2=t=>hm(t)?t[t.length-1]||0:t,Dt=t=>!!(t&&t.getVelocity);function xu(t){const e=Dt(t)?t.get():t;return F2(e)?e.toValue():e}function B2({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,s){const o={latestValues:V2(i,r,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:i,current:a,...o}),o.onUpdate=a=>n(a)),o}const WE=t=>(e,n)=>{const i=x.useContext(df),r=x.useContext(uf),s=()=>B2(t,e,i,r);return n?s():_v(s)};function V2(t,e,n,i){const r={},s=i(t,{});for(const f in s)r[f]=xu(s[f]);let{initial:o,animate:a}=t;const l=hf(t),c=BE(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const d=u?a:o;if(d&&typeof d!="boolean"&&!ff(d)){const f=Array.isArray(d)?d:[d];for(let h=0;h<f.length;h++){const v=Fv(t,f[h]);if(v){const{transitionEnd:m,transition:b,...p}=v;for(const y in p){let S=p[y];if(Array.isArray(S)){const T=u?S.length-1:0;S=S[T]}S!==null&&(r[y]=S)}for(const y in m)r[y]=m[y]}}}return r}const _a=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Js=new Set(_a),HE=t=>e=>typeof e=="string"&&e.startsWith(t),qE=HE("--"),z2=HE("var(--"),Uv=t=>z2(t)?$2.test(t.split("/*")[0].trim()):!1,$2=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,GE=(t,e)=>e&&typeof t=="number"?e.transform(t):t,yr=(t,e,n)=>n>e?e:n<t?t:n,Aa={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Jl={...Aa,transform:t=>yr(0,1,t)},Kc={...Aa,default:1},vc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Pr=vc("deg"),Oi=vc("%"),le=vc("px"),W2=vc("vh"),H2=vc("vw"),Hb={...Oi,parse:t=>Oi.parse(t)/100,transform:t=>Oi.transform(t*100)},q2={borderWidth:le,borderTopWidth:le,borderRightWidth:le,borderBottomWidth:le,borderLeftWidth:le,borderRadius:le,radius:le,borderTopLeftRadius:le,borderTopRightRadius:le,borderBottomRightRadius:le,borderBottomLeftRadius:le,width:le,maxWidth:le,height:le,maxHeight:le,top:le,right:le,bottom:le,left:le,padding:le,paddingTop:le,paddingRight:le,paddingBottom:le,paddingLeft:le,margin:le,marginTop:le,marginRight:le,marginBottom:le,marginLeft:le,backgroundPositionX:le,backgroundPositionY:le},G2={rotate:Pr,rotateX:Pr,rotateY:Pr,rotateZ:Pr,scale:Kc,scaleX:Kc,scaleY:Kc,scaleZ:Kc,skew:Pr,skewX:Pr,skewY:Pr,distance:le,translateX:le,translateY:le,translateZ:le,x:le,y:le,z:le,perspective:le,transformPerspective:le,opacity:Jl,originX:Hb,originY:Hb,originZ:le},qb={...Aa,transform:Math.round},Bv={...q2,...G2,zIndex:qb,size:le,fillOpacity:Jl,strokeOpacity:Jl,numOctaves:qb},K2={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Y2=_a.length;function Q2(t,e,n){let i="",r=!0;for(let s=0;s<Y2;s++){const o=_a[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=GE(a,Bv[o]);if(!l){r=!1;const u=K2[o]||o;i+=`${u}(${c}) `}n&&(e[o]=c)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function Vv(t,e,n){const{style:i,vars:r,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Js.has(l)){o=!0;continue}else if(qE(l)){r[l]=c;continue}else{const u=GE(c,Bv[l]);l.startsWith("origin")?(a=!0,s[l]=u):i[l]=u}}if(e.transform||(o||n?i.transform=Q2(e,t.transform,n):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;i.transformOrigin=`${l} ${c} ${u}`}}const X2={offset:"stroke-dashoffset",array:"stroke-dasharray"},J2={offset:"strokeDashoffset",array:"strokeDasharray"};function Z2(t,e,n=1,i=0,r=!0){t.pathLength=1;const s=r?X2:J2;t[s.offset]=le.transform(-i);const o=le.transform(e),a=le.transform(n);t[s.array]=`${o} ${a}`}function Gb(t,e,n){return typeof t=="string"?t:le.transform(e+n*t)}function e5(t,e,n){const i=Gb(e,t.x,t.width),r=Gb(n,t.y,t.height);return`${i} ${r}`}function zv(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d){if(Vv(t,c,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:h,dimensions:v}=t;f.transform&&(v&&(h.transform=f.transform),delete f.transform),v&&(r!==void 0||s!==void 0||h.transform)&&(h.transformOrigin=e5(v,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),i!==void 0&&(f.scale=i),o!==void 0&&Z2(f,o,a,l,!1)}const $v=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),KE=()=>({...$v(),attrs:{}}),Wv=t=>typeof t=="string"&&t.toLowerCase()==="svg";function YE(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const s in n)t.style.setProperty(s,n[s])}const QE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function XE(t,e,n,i){YE(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(QE.has(r)?r:Dv(r),e.attrs[r])}const gd={};function t5(t){Object.assign(gd,t)}function JE(t,{layout:e,layoutId:n}){return Js.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!gd[t]||t==="opacity")}function Hv(t,e,n){var i;const{style:r}=t,s={};for(const o in r)(Dt(r[o])||e.style&&Dt(e.style[o])||JE(o,t)||((i=n==null?void 0:n.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}function ZE(t,e,n){const i=Hv(t,e,n);for(const r in t)if(Dt(t[r])||Dt(e[r])){const s=_a.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=t[r]}return i}function n5(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const Kb=["x","y","width","height","cx","cy","r"],i5={useVisualState:WE({scrapeMotionValuesFromProps:ZE,createRenderState:KE,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in r)if(Js.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<Kb.length;a++){const l=Kb[a];t[l]!==e[l]&&(o=!0)}o&&je.read(()=>{n5(n,i),je.render(()=>{zv(i,r,Wv(n.tagName),t.transformTemplate),XE(n,i)})})}})},r5={useVisualState:WE({scrapeMotionValuesFromProps:Hv,createRenderState:$v})};function e1(t,e,n){for(const i in e)!Dt(e[i])&&!JE(i,n)&&(t[i]=e[i])}function s5({transformTemplate:t},e){return x.useMemo(()=>{const n=$v();return Vv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function o5(t,e){const n=t.style||{},i={};return e1(i,n,t),Object.assign(i,s5(t,e)),i}function a5(t,e){const n={},i=o5(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function l5(t,e,n,i){const r=x.useMemo(()=>{const s=KE();return zv(s,e,Wv(i),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};e1(s,t.style,t),r.style={...s,...r.style}}return r}function c5(t=!1){return(n,i,r,{latestValues:s},o)=>{const l=(jv(n)?l5:a5)(i,s,o,n),c=w2(i,typeof n=="string",t),u=n!==x.Fragment?{...c,...l,ref:r}:{},{children:d}=i,f=x.useMemo(()=>Dt(d)?d.get():d,[d]);return x.createElement(n,{...u,children:f})}}function u5(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...jv(i)?i5:r5,preloadedFeatures:t,useRender:c5(r),createVisualElement:e,Component:i};return O2(o)}}function t1(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function pf(t,e,n){const i=t.getProps();return Fv(i,e,n!==void 0?n:i.custom,t)}const d5=Iv(()=>window.ScrollTimeline!==void 0);class f5{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if(d5()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class h5 extends f5{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function qv(t,e){return t?t[e]||t.default||t:void 0}const pm=2e4;function n1(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<pm;)e+=n,i=t.next(e);return e>=pm?1/0:e}function Gv(t){return typeof t=="function"}function Yb(t,e){t.timeline=e,t.onfinish=null}const Kv=t=>Array.isArray(t)&&typeof t[0]=="number",p5={linearEasing:void 0};function m5(t,e){const n=Iv(t);return()=>{var i;return(i=p5[e])!==null&&i!==void 0?i:n()}}const vd=m5(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),i1=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let s=0;s<r;s++)i+=t(pa(0,r-1,s))+", ";return`linear(${i.substring(0,i.length-2)})`};function r1(t){return!!(typeof t=="function"&&vd()||!t||typeof t=="string"&&(t in mm||vd())||Kv(t)||Array.isArray(t)&&t.every(r1))}const rl=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,mm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:rl([0,.65,.55,1]),circOut:rl([.55,0,1,.45]),backIn:rl([.31,.01,.66,-.59]),backOut:rl([.33,1.53,.69,.99])};function s1(t,e){if(t)return typeof t=="function"&&vd()?i1(t,e):Kv(t)?rl(t):Array.isArray(t)?t.map(n=>s1(n,e)||mm.easeOut):mm[t]}const Kn={x:!1,y:!1};function o1(){return Kn.x||Kn.y}function g5(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const s=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function a1(t,e){const n=g5(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function Qb(t){return e=>{e.pointerType==="touch"||o1()||t(e)}}function v5(t,e,n={}){const[i,r,s]=a1(t,n),o=Qb(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=Qb(d=>{c(d),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,r)});return i.forEach(a=>{a.addEventListener("pointerenter",o,r)}),s}const l1=(t,e)=>e?t===e?!0:l1(t,e.parentElement):!1,Yv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,y5=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function b5(t){return y5.has(t.tagName)||t.tabIndex!==-1}const sl=new WeakSet;function Xb(t){return e=>{e.key==="Enter"&&t(e)}}function yh(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const x5=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=Xb(()=>{if(sl.has(n))return;yh(n,"down");const r=Xb(()=>{yh(n,"up")}),s=()=>yh(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function Jb(t){return Yv(t)&&!o1()}function S5(t,e,n={}){const[i,r,s]=a1(t,n),o=a=>{const l=a.currentTarget;if(!Jb(a)||sl.has(l))return;sl.add(l);const c=e(a),u=(h,v)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),!(!Jb(h)||!sl.has(l))&&(sl.delete(l),typeof c=="function"&&c(h,{success:v}))},d=h=>{u(h,n.useGlobalTarget||l1(l,h.target))},f=h=>{u(h,!1)};window.addEventListener("pointerup",d,r),window.addEventListener("pointercancel",f,r)};return i.forEach(a=>{!b5(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),a.addEventListener("focus",c=>x5(c,r),r)}),s}function T5(t){return t==="x"||t==="y"?Kn[t]?null:(Kn[t]=!0,()=>{Kn[t]=!1}):Kn.x||Kn.y?null:(Kn.x=Kn.y=!0,()=>{Kn.x=Kn.y=!1})}const c1=new Set(["width","height","top","left","right","bottom",..._a]);let Su;function k5(){Su=void 0}const Mi={now:()=>(Su===void 0&&Mi.set(xt.isProcessing||y2.useManualTiming?xt.timestamp:performance.now()),Su),set:t=>{Su=t,queueMicrotask(k5)}};function Qv(t,e){t.indexOf(e)===-1&&t.push(e)}function Xv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Jv{constructor(){this.subscriptions=[]}add(e){return Qv(this.subscriptions,e),()=>Xv(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function u1(t,e){return e?t*(1e3/e):0}const Zb=30,w5=t=>!isNaN(parseFloat(t));class C5{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=Mi.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Mi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=w5(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Jv);const i=this.events[e].add(n);return e==="change"?()=>{i(),je.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Mi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Zb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Zb);return u1(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Zl(t,e){return new C5(t,e)}function E5(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Zl(n))}function P5(t,e){const n=pf(t,e);let{transitionEnd:i={},transition:r={},...s}=n||{};s={...s,...i};for(const o in s){const a=U2(s[o]);E5(t,o,a)}}function R5(t){return!!(Dt(t)&&t.add)}function gm(t,e){const n=t.getValue("willChange");if(R5(n))return n.add(e)}function d1(t){return t.props[VE]}const f1=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,_5=1e-7,A5=12;function N5(t,e,n,i,r){let s,o,a=0;do o=e+(n-e)/2,s=f1(o,i,r)-t,s>0?n=o:e=o;while(Math.abs(s)>_5&&++a<A5);return o}function yc(t,e,n,i){if(t===e&&n===i)return Cn;const r=s=>N5(s,0,1,t,n);return s=>s===0||s===1?s:f1(r(s),e,i)}const h1=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,p1=t=>e=>1-t(1-e),m1=yc(.33,1.53,.69,.99),Zv=p1(m1),g1=h1(Zv),v1=t=>(t*=2)<1?.5*Zv(t):.5*(2-Math.pow(2,-10*(t-1))),ey=t=>1-Math.sin(Math.acos(t)),y1=p1(ey),b1=h1(ey),x1=t=>/^0[^.\s]+$/u.test(t);function I5(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||x1(t):!0}const bl=t=>Math.round(t*1e5)/1e5,ty=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function O5(t){return t==null}const M5=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ny=(t,e)=>n=>!!(typeof n=="string"&&M5.test(n)&&n.startsWith(t)||e&&!O5(n)&&Object.prototype.hasOwnProperty.call(n,e)),S1=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(ty);return{[t]:parseFloat(r),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},D5=t=>yr(0,255,t),bh={...Aa,transform:t=>Math.round(D5(t))},Es={test:ny("rgb","red"),parse:S1("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+bh.transform(t)+", "+bh.transform(e)+", "+bh.transform(n)+", "+bl(Jl.transform(i))+")"};function L5(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const vm={test:ny("#"),parse:L5,transform:Es.transform},_o={test:ny("hsl","hue"),parse:S1("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Oi.transform(bl(e))+", "+Oi.transform(bl(n))+", "+bl(Jl.transform(i))+")"},Ot={test:t=>Es.test(t)||vm.test(t)||_o.test(t),parse:t=>Es.test(t)?Es.parse(t):_o.test(t)?_o.parse(t):vm.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Es.transform(t):_o.transform(t)},j5=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function F5(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(ty))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(j5))===null||n===void 0?void 0:n.length)||0)>0}const T1="number",k1="color",U5="var",B5="var(",ex="${}",V5=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ec(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(V5,l=>(Ot.test(l)?(i.color.push(s),r.push(k1),n.push(Ot.parse(l))):l.startsWith(B5)?(i.var.push(s),r.push(U5),n.push(l)):(i.number.push(s),r.push(T1),n.push(parseFloat(l))),++s,ex)).split(ex);return{values:n,split:a,indexes:i,types:r}}function w1(t){return ec(t).values}function C1(t){const{split:e,types:n}=ec(t),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=n[o];a===T1?s+=bl(r[o]):a===k1?s+=Ot.transform(r[o]):s+=r[o]}return s}}const z5=t=>typeof t=="number"?0:t;function $5(t){const e=w1(t);return C1(t)(e.map(z5))}const as={test:F5,parse:w1,createTransformer:C1,getAnimatableNone:$5},W5=new Set(["brightness","contrast","saturate","opacity"]);function H5(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(ty)||[];if(!i)return t;const r=n.replace(i,"");let s=W5.has(e)?1:0;return i!==n&&(s*=100),e+"("+s+r+")"}const q5=/\b([a-z-]*)\(.*?\)/gu,ym={...as,getAnimatableNone:t=>{const e=t.match(q5);return e?e.map(H5).join(" "):t}},G5={...Bv,color:Ot,backgroundColor:Ot,outlineColor:Ot,fill:Ot,stroke:Ot,borderColor:Ot,borderTopColor:Ot,borderRightColor:Ot,borderBottomColor:Ot,borderLeftColor:Ot,filter:ym,WebkitFilter:ym},iy=t=>G5[t];function E1(t,e){let n=iy(t);return n!==ym&&(n=as),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const K5=new Set(["auto","none","0"]);function Y5(t,e,n){let i=0,r;for(;i<t.length&&!r;){const s=t[i];typeof s=="string"&&!K5.has(s)&&ec(s).values.length&&(r=t[i]),i++}if(r&&n)for(const s of e)t[s]=E1(n,r)}const tx=t=>t===Aa||t===le,nx=(t,e)=>parseFloat(t.split(", ")[e]),ix=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return nx(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?nx(s[1],t):0}},Q5=new Set(["x","y","z"]),X5=_a.filter(t=>!Q5.has(t));function J5(t){const e=[];return X5.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const ga={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:ix(4,13),y:ix(5,14)};ga.translateX=ga.x;ga.translateY=ga.y;const Ls=new Set;let bm=!1,xm=!1;function P1(){if(xm){const t=Array.from(Ls).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=J5(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([s,o])=>{var a;(a=i.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}xm=!1,bm=!1,Ls.forEach(t=>t.complete()),Ls.clear()}function R1(){Ls.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(xm=!0)})}function Z5(){R1(),P1()}class ry{constructor(e,n,i,r,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ls.add(this),bm||(bm=!0,je.read(R1),je.resolveKeyframes(P1))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=r==null?void 0:r.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&n){const l=i.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),r&&o===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ls.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ls.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const _1=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),eF=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function tF(t){const e=eF.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function A1(t,e,n=1){const[i,r]=tF(t);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return _1(o)?parseFloat(o):o}return Uv(r)?A1(r,e,n+1):r}const N1=t=>e=>e.test(t),nF={test:t=>t==="auto",parse:t=>t},I1=[Aa,le,Oi,Pr,H2,W2,nF],rx=t=>I1.find(N1(t));class O1 extends ry{constructor(e,n,i,r,s){super(e,n,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Uv(c))){const u=A1(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!c1.has(i)||e.length!==2)return;const[r,s]=e,o=rx(r),a=rx(s);if(o!==a)if(tx(o)&&tx(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)I5(e[r])&&i.push(r);i.length&&Y5(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ga[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const s=n.getValue(i);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=ga[i](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const sx=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(as.test(t)||t==="0")&&!t.startsWith("url("));function iF(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function rF(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=sx(r,e),a=sx(s,e);return!o||!a?!1:iF(t)||(n==="spring"||Gv(n))&&i}const sF=t=>t!==null;function mf(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(sF),s=e&&n!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}const oF=40;class M1{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Mi.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>oF?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Z5(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Mi.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!rF(e,i,r,s))if(o)this.options.duration=0;else{l&&l(mf(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const $e=(t,e,n)=>t+(e-t)*n;function xh(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function aF({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,s=0,o=0;if(!e)r=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;r=xh(l,a,t+1/3),s=xh(l,a,t),o=xh(l,a,t-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function yd(t,e){return n=>n>0?e:t}const Sh=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},lF=[vm,Es,_o],cF=t=>lF.find(e=>e.test(t));function ox(t){const e=cF(t);if(!e)return!1;let n=e.parse(t);return e===_o&&(n=aF(n)),n}const ax=(t,e)=>{const n=ox(t),i=ox(e);if(!n||!i)return yd(t,e);const r={...n};return s=>(r.red=Sh(n.red,i.red,s),r.green=Sh(n.green,i.green,s),r.blue=Sh(n.blue,i.blue,s),r.alpha=$e(n.alpha,i.alpha,s),Es.transform(r))},uF=(t,e)=>n=>e(t(n)),bc=(...t)=>t.reduce(uF),Sm=new Set(["none","hidden"]);function dF(t,e){return Sm.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function fF(t,e){return n=>$e(t,e,n)}function sy(t){return typeof t=="number"?fF:typeof t=="string"?Uv(t)?yd:Ot.test(t)?ax:mF:Array.isArray(t)?D1:typeof t=="object"?Ot.test(t)?ax:hF:yd}function D1(t,e){const n=[...t],i=n.length,r=t.map((s,o)=>sy(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)n[o]=r[o](s);return n}}function hF(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=sy(t[r])(t[r],e[r]));return r=>{for(const s in i)n[s]=i[s](r);return n}}function pF(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][r[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;i[s]=l,r[o]++}return i}const mF=(t,e)=>{const n=as.createTransformer(e),i=ec(t),r=ec(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?Sm.has(t)&&!r.values.length||Sm.has(e)&&!i.values.length?dF(t,e):bc(D1(pF(i,r),r.values),n):yd(t,e)};function L1(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?$e(t,e,n):sy(t)(t,e)}const gF=5;function j1(t,e,n){const i=Math.max(e-gF,0);return u1(n-t(i),e-i)}const Ye={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Th=.001;function vF({duration:t=Ye.duration,bounce:e=Ye.bounce,velocity:n=Ye.velocity,mass:i=Ye.mass}){let r,s,o=1-e;o=yr(Ye.minDamping,Ye.maxDamping,o),t=yr(Ye.minDuration,Ye.maxDuration,ur(t)),o<1?(r=c=>{const u=c*o,d=u*t,f=u-n,h=Tm(c,o),v=Math.exp(-d);return Th-f/h*v},s=c=>{const d=c*o*t,f=d*n+n,h=Math.pow(o,2)*Math.pow(c,2)*t,v=Math.exp(-d),m=Tm(Math.pow(c,2),o);return(-r(c)+Th>0?-1:1)*((f-h)*v)/m}):(r=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-Th+u*d},s=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const a=5/t,l=bF(r,s,a);if(t=cr(t),isNaN(l))return{stiffness:Ye.stiffness,damping:Ye.damping,duration:t};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:t}}}const yF=12;function bF(t,e,n){let i=n;for(let r=1;r<yF;r++)i=i-t(i)/e(i);return i}function Tm(t,e){return t*Math.sqrt(1-e*e)}const xF=["duration","bounce"],SF=["stiffness","damping","mass"];function lx(t,e){return e.some(n=>t[n]!==void 0)}function TF(t){let e={velocity:Ye.velocity,stiffness:Ye.stiffness,damping:Ye.damping,mass:Ye.mass,isResolvedFromDuration:!1,...t};if(!lx(t,SF)&&lx(t,xF))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,s=2*yr(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:Ye.mass,stiffness:r,damping:s}}else{const n=vF(t);e={...e,...n,mass:Ye.mass},e.isResolvedFromDuration=!0}return e}function F1(t=Ye.visualDuration,e=Ye.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:f,isResolvedFromDuration:h}=TF({...n,velocity:-ur(n.velocity||0)}),v=f||0,m=c/(2*Math.sqrt(l*u)),b=o-s,p=ur(Math.sqrt(l/u)),y=Math.abs(b)<5;i||(i=y?Ye.restSpeed.granular:Ye.restSpeed.default),r||(r=y?Ye.restDelta.granular:Ye.restDelta.default);let S;if(m<1){const k=Tm(p,m);S=w=>{const E=Math.exp(-m*p*w);return o-E*((v+m*p*b)/k*Math.sin(k*w)+b*Math.cos(k*w))}}else if(m===1)S=k=>o-Math.exp(-p*k)*(b+(v+p*b)*k);else{const k=p*Math.sqrt(m*m-1);S=w=>{const E=Math.exp(-m*p*w),P=Math.min(k*w,300);return o-E*((v+m*p*b)*Math.sinh(P)+k*b*Math.cosh(P))/k}}const T={calculatedDuration:h&&d||null,next:k=>{const w=S(k);if(h)a.done=k>=d;else{let E=0;m<1&&(E=k===0?cr(v):j1(S,k,w));const P=Math.abs(E)<=i,_=Math.abs(o-w)<=r;a.done=P&&_}return a.value=a.done?o:w,a},toString:()=>{const k=Math.min(n1(T),pm),w=i1(E=>T.next(k*E).value,k,30);return k+"ms "+w}};return T}function cx({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],f={done:!1,value:d},h=P=>a!==void 0&&P<a||l!==void 0&&P>l,v=P=>a===void 0?l:l===void 0||Math.abs(a-P)<Math.abs(l-P)?a:l;let m=n*e;const b=d+m,p=o===void 0?b:o(b);p!==b&&(m=p-d);const y=P=>-m*Math.exp(-P/i),S=P=>p+y(P),T=P=>{const _=y(P),A=S(P);f.done=Math.abs(_)<=c,f.value=f.done?p:A};let k,w;const E=P=>{h(f.value)&&(k=P,w=F1({keyframes:[f.value,v(f.value)],velocity:j1(S,P,f.value),damping:r,stiffness:s,restDelta:c,restSpeed:u}))};return E(0),{calculatedDuration:null,next:P=>{let _=!1;return!w&&k===void 0&&(_=!0,T(P),E(P)),k!==void 0&&P>=k?w.next(P-k):(!_&&T(P),f)}}}const kF=yc(.42,0,1,1),wF=yc(0,0,.58,1),U1=yc(.42,0,.58,1),CF=t=>Array.isArray(t)&&typeof t[0]!="number",EF={linear:Cn,easeIn:kF,easeInOut:U1,easeOut:wF,circIn:ey,circInOut:b1,circOut:y1,backIn:Zv,backInOut:g1,backOut:m1,anticipate:v1},ux=t=>{if(Kv(t)){LE(t.length===4);const[e,n,i,r]=t;return yc(e,n,i,r)}else if(typeof t=="string")return EF[t];return t};function PF(t,e,n){const i=[],r=n||L1,s=t.length-1;for(let o=0;o<s;o++){let a=r(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Cn:e;a=bc(l,a)}i.push(a)}return i}function RF(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const s=t.length;if(LE(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=PF(e,i,r),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const f=pa(t[d],t[d+1],u);return a[d](f)};return n?u=>c(yr(t[0],t[s-1],u)):c}function _F(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=pa(0,e,i);t.push($e(n,1,r))}}function AF(t){const e=[0];return _F(e,t.length-1),e}function NF(t,e){return t.map(n=>n*e)}function IF(t,e){return t.map(()=>e||U1).splice(0,t.length-1)}function bd({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=CF(i)?i.map(ux):ux(i),s={done:!1,value:e[0]},o=NF(n&&n.length===e.length?n:AF(e),t),a=RF(o,e,{ease:Array.isArray(r)?r:IF(e,r)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const OF=t=>{const e=({timestamp:n})=>t(n);return{start:()=>je.update(e,!0),stop:()=>os(e),now:()=>xt.isProcessing?xt.timestamp:Mi.now()}},MF={decay:cx,inertia:cx,tween:bd,keyframes:bd,spring:F1},DF=t=>t/100;class oy extends M1{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:i,element:r,keyframes:s}=this.options,o=(r==null?void 0:r.KeyframeResolver)||ry,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=this.options,a=Gv(n)?n:MF[n]||bd;let l,c;a!==bd&&typeof e[0]!="number"&&(l=bc(DF,L1(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=n1(u));const{calculatedDuration:d}=u,f=d+r,h=f*(i+1)-r;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:h}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:P}=this.options;return{done:!0,value:P[P.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:d}=i;if(this.startTime===null)return s.next(0);const{delay:f,repeat:h,repeatType:v,repeatDelay:m,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const p=this.currentTime-f*(this.speed>=0?1:-1),y=this.speed>=0?p<0:p>u;this.currentTime=Math.max(p,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let S=this.currentTime,T=s;if(h){const P=Math.min(this.currentTime,u)/d;let _=Math.floor(P),A=P%1;!A&&P>=1&&(A=1),A===1&&_--,_=Math.min(_,h+1),!!(_%2)&&(v==="reverse"?(A=1-A,m&&(A-=m/d)):v==="mirror"&&(T=o)),S=yr(0,1,A)*d}const k=y?{done:!1,value:l[0]}:T.next(S);a&&(k.value=a(k.value));let{done:w}=k;!y&&c!==null&&(w=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&w);return E&&r!==void 0&&(k.value=mf(l,this.options,r)),b&&b(k.value),E&&this.finish(),k}get duration(){const{resolved:e}=this;return e?ur(e.calculatedDuration):0}get time(){return ur(this.currentTime)}set time(e){e=cr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ur(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=OF,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const LF=new Set(["opacity","clipPath","filter","transform"]);function jF(t,e,n,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=s1(a,r);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:i,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const FF=Iv(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),xd=10,UF=2e4;function BF(t){return Gv(t.type)||t.type==="spring"||!r1(t.ease)}function VF(t,e){const n=new oy({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let s=0;for(;!i.done&&s<UF;)i=n.sample(s),r.push(i.value),s+=xd;return{times:void 0,keyframes:r,duration:s-xd,ease:"linear"}}const B1={anticipate:v1,backInOut:g1,circInOut:b1};function zF(t){return t in B1}class dx extends M1{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:s}=this.options;this.resolver=new O1(s,(o,a)=>this.onKeyframesResolved(o,a),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&vd()&&zF(s)&&(s=B1[s]),BF(this.options)){const{onComplete:d,onUpdate:f,motionValue:h,element:v,...m}=this.options,b=VF(e,m);e=b.keyframes,e.length===1&&(e[1]=e[0]),i=b.duration,r=b.times,s=b.ease,o="keyframes"}const u=jF(a.owner.current,l,e,{...this.options,duration:i,times:r,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(Yb(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:d}=this.options;a.set(mf(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:i,times:r,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return ur(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return ur(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=cr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Cn;const{animation:i}=n;Yb(i,e)}return Cn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:d,element:f,...h}=this.options,v=new oy({...h,keyframes:i,duration:r,type:s,ease:o,times:a,isGenerator:!0}),m=cr(this.time);c.setWithVelocity(v.sample(m-xd).value,v.sample(m).value,xd)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return FF()&&i&&LF.has(i)&&!l&&!c&&!r&&s!=="mirror"&&o!==0&&a!=="inertia"}}const $F={type:"spring",stiffness:500,damping:25,restSpeed:10},WF=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),HF={type:"keyframes",duration:.8},qF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},GF=(t,{keyframes:e})=>e.length>2?HF:Js.has(t)?t.startsWith("scale")?WF(e[1]):$F:qF;function KF({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const ay=(t,e,n,i={},r,s)=>o=>{const a=qv(i,t)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c=c-cr(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:r};KF(a)||(u={...u,...GF(t,u)}),u.duration&&(u.duration=cr(u.duration)),u.repeatDelay&&(u.repeatDelay=cr(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const f=mf(u.keyframes,a);if(f!==void 0)return je.update(()=>{u.onUpdate(f),u.onComplete()}),new h5([])}return!s&&dx.supports(u)?new dx(u):new oy(u)};function YF({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function V1(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;i&&(o=i);const c=[],u=r&&t.animationState&&t.animationState.getState()[r];for(const d in l){const f=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),h=l[d];if(h===void 0||u&&YF(u,d))continue;const v={delay:n,...qv(o||{},d)};let m=!1;if(window.MotionHandoffAnimation){const p=d1(t);if(p){const y=window.MotionHandoffAnimation(p,d,je);y!==null&&(v.startTime=y,m=!0)}}gm(t,d),f.start(ay(d,f,h,t.shouldReduceMotion&&c1.has(d)?{type:!1}:v,t,m));const b=f.animation;b&&c.push(b)}return a&&Promise.all(c).then(()=>{je.update(()=>{a&&P5(t,a)})}),c}function km(t,e,n={}){var i;const r=pf(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const o=r?()=>Promise.all(V1(t,r,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=s;return QF(t,e,u+c,d,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function QF(t,e,n=0,i=0,r=1,s){const o=[],a=(t.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(t.variantChildren).sort(XF).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(km(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function XF(t,e){return t.sortNodePosition(e)}function JF(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>km(t,s,n));i=Promise.all(r)}else if(typeof e=="string")i=km(t,e,n);else{const r=typeof e=="function"?pf(t,e,n.custom):e;i=Promise.all(V1(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const ZF=Mv.length;function z1(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?z1(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<ZF;n++){const i=Mv[n],r=t.props[i];(Xl(r)||r===!1)&&(e[i]=r)}return e}const e3=[...Ov].reverse(),t3=Ov.length;function n3(t){return e=>Promise.all(e.map(({animation:n,options:i})=>JF(t,n,i)))}function i3(t){let e=n3(t),n=fx(),i=!0;const r=l=>(c,u)=>{var d;const f=pf(t,u,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:h,transitionEnd:v,...m}=f;c={...c,...m,...v}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=z1(t.parent)||{},d=[],f=new Set;let h={},v=1/0;for(let b=0;b<t3;b++){const p=e3[b],y=n[p],S=c[p]!==void 0?c[p]:u[p],T=Xl(S),k=p===l?y.isActive:null;k===!1&&(v=b);let w=S===u[p]&&S!==c[p]&&T;if(w&&i&&t.manuallyAnimateOnMount&&(w=!1),y.protectedKeys={...h},!y.isActive&&k===null||!S&&!y.prevProp||ff(S)||typeof S=="boolean")continue;const E=r3(y.prevProp,S);let P=E||p===l&&y.isActive&&!w&&T||b>v&&T,_=!1;const A=Array.isArray(S)?S:[S];let O=A.reduce(r(p),{});k===!1&&(O={});const{prevResolvedValues:L={}}=y,Q={...L,...O},z=X=>{P=!0,f.has(X)&&(_=!0,f.delete(X)),y.needsAnimating[X]=!0;const I=t.getValue(X);I&&(I.liveStyle=!1)};for(const X in Q){const I=O[X],M=L[X];if(h.hasOwnProperty(X))continue;let q=!1;hm(I)&&hm(M)?q=!t1(I,M):q=I!==M,q?I!=null?z(X):f.add(X):I!==void 0&&f.has(X)?z(X):y.protectedKeys[X]=!0}y.prevProp=S,y.prevResolvedValues=O,y.isActive&&(h={...h,...O}),i&&t.blockInitialAnimation&&(P=!1),P&&(!(w&&E)||_)&&d.push(...A.map(X=>({animation:X,options:{type:p}})))}if(f.size){const b={};f.forEach(p=>{const y=t.getBaseTarget(p),S=t.getValue(p);S&&(S.liveStyle=!0),b[p]=y??null}),d.push({animation:b})}let m=!!d.length;return i&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(m=!1),i=!1,m?e(d):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(f=>{var h;return(h=f.animationState)===null||h===void 0?void 0:h.setActive(l,c)}),n[l].isActive=c;const d=o(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=fx(),i=!0}}}function r3(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!t1(e,t):!1}function gs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function fx(){return{animate:gs(!0),whileInView:gs(),whileHover:gs(),whileTap:gs(),whileDrag:gs(),whileFocus:gs(),exit:gs()}}class fs{constructor(e){this.isMounted=!1,this.node=e}update(){}}class s3 extends fs{constructor(e){super(e),e.animationState||(e.animationState=i3(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ff(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let o3=0;class a3 extends fs{constructor(){super(...arguments),this.id=o3++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const l3={animation:{Feature:s3},exit:{Feature:a3}};function tc(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function xc(t){return{point:{x:t.pageX,y:t.pageY}}}const c3=t=>e=>Yv(e)&&t(e,xc(e));function xl(t,e,n,i){return tc(t,e,c3(n),i)}const hx=(t,e)=>Math.abs(t-e);function u3(t,e){const n=hx(t.x,e.x),i=hx(t.y,e.y);return Math.sqrt(n**2+i**2)}class $1{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=wh(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,h=u3(d.offset,{x:0,y:0})>=3;if(!f&&!h)return;const{point:v}=d,{timestamp:m}=xt;this.history.push({...v,timestamp:m});const{onStart:b,onMove:p}=this.handlers;f||(b&&b(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=kh(f,this.transformPagePoint),je.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:h,onSessionEnd:v,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=wh(d.type==="pointercancel"?this.lastMoveEventInfo:kh(f,this.transformPagePoint),this.history);this.startEvent&&h&&h(d,b),v&&v(d,b)},!Yv(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const o=xc(e),a=kh(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=xt;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,wh(a,this.history)),this.removeListeners=bc(xl(this.contextWindow,"pointermove",this.handlePointerMove),xl(this.contextWindow,"pointerup",this.handlePointerUp),xl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),os(this.updatePoint)}}function kh(t,e){return e?{point:e(t.point)}:t}function px(t,e){return{x:t.x-e.x,y:t.y-e.y}}function wh({point:t},e){return{point:t,delta:px(t,W1(e)),offset:px(t,d3(e)),velocity:f3(e,.1)}}function d3(t){return t[0]}function W1(t){return t[t.length-1]}function f3(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=W1(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>cr(e)));)n--;if(!i)return{x:0,y:0};const s=ur(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const H1=1e-4,h3=1-H1,p3=1+H1,q1=.01,m3=0-q1,g3=0+q1;function Rn(t){return t.max-t.min}function v3(t,e,n){return Math.abs(t-e)<=n}function mx(t,e,n,i=.5){t.origin=i,t.originPoint=$e(e.min,e.max,t.origin),t.scale=Rn(n)/Rn(e),t.translate=$e(n.min,n.max,t.origin)-t.originPoint,(t.scale>=h3&&t.scale<=p3||isNaN(t.scale))&&(t.scale=1),(t.translate>=m3&&t.translate<=g3||isNaN(t.translate))&&(t.translate=0)}function Sl(t,e,n,i){mx(t.x,e.x,n.x,i?i.originX:void 0),mx(t.y,e.y,n.y,i?i.originY:void 0)}function gx(t,e,n){t.min=n.min+e.min,t.max=t.min+Rn(e)}function y3(t,e,n){gx(t.x,e.x,n.x),gx(t.y,e.y,n.y)}function vx(t,e,n){t.min=e.min-n.min,t.max=t.min+Rn(e)}function Tl(t,e,n){vx(t.x,e.x,n.x),vx(t.y,e.y,n.y)}function b3(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?$e(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?$e(n,t,i.max):Math.min(t,n)),t}function yx(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function x3(t,{top:e,left:n,bottom:i,right:r}){return{x:yx(t.x,n,r),y:yx(t.y,e,i)}}function bx(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function S3(t,e){return{x:bx(t.x,e.x),y:bx(t.y,e.y)}}function T3(t,e){let n=.5;const i=Rn(t),r=Rn(e);return r>i?n=pa(e.min,e.max-i,t.min):i>r&&(n=pa(t.min,t.max-r,e.min)),yr(0,1,n)}function k3(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const wm=.35;function w3(t=wm){return t===!1?t=0:t===!0&&(t=wm),{x:xx(t,"left","right"),y:xx(t,"top","bottom")}}function xx(t,e,n){return{min:Sx(t,e),max:Sx(t,n)}}function Sx(t,e){return typeof t=="number"?t:t[e]||0}const Tx=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ao=()=>({x:Tx(),y:Tx()}),kx=()=>({min:0,max:0}),tt=()=>({x:kx(),y:kx()});function In(t){return[t("x"),t("y")]}function G1({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function C3({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function E3(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Ch(t){return t===void 0||t===1}function Cm({scale:t,scaleX:e,scaleY:n}){return!Ch(t)||!Ch(e)||!Ch(n)}function xs(t){return Cm(t)||K1(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function K1(t){return wx(t.x)||wx(t.y)}function wx(t){return t&&t!=="0%"}function Sd(t,e,n){const i=t-n,r=e*i;return n+r}function Cx(t,e,n,i,r){return r!==void 0&&(t=Sd(t,r,i)),Sd(t,n,i)+e}function Em(t,e=0,n=1,i,r){t.min=Cx(t.min,e,n,i,r),t.max=Cx(t.max,e,n,i,r)}function Y1(t,{x:e,y:n}){Em(t.x,e.translate,e.scale,e.originPoint),Em(t.y,n.translate,n.scale,n.originPoint)}const Ex=.999999999999,Px=1.0000000000001;function P3(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Io(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Y1(t,o)),i&&xs(s.latestValues)&&Io(t,s.latestValues))}e.x<Px&&e.x>Ex&&(e.x=1),e.y<Px&&e.y>Ex&&(e.y=1)}function No(t,e){t.min=t.min+e,t.max=t.max+e}function Rx(t,e,n,i,r=.5){const s=$e(t.min,t.max,r);Em(t,e,n,s,i)}function Io(t,e){Rx(t.x,e.x,e.scaleX,e.scale,e.originX),Rx(t.y,e.y,e.scaleY,e.scale,e.originY)}function Q1(t,e){return G1(E3(t.getBoundingClientRect(),e))}function R3(t,e,n){const i=Q1(t,n),{scroll:r}=e;return r&&(No(i.x,r.offset.x),No(i.y,r.offset.y)),i}const X1=({current:t})=>t?t.ownerDocument.defaultView:null,_3=new WeakMap;class A3{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=tt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(xc(u).point)},s=(u,d)=>{const{drag:f,dragPropagation:h,onDragStart:v}=this.getProps();if(f&&!h&&(this.openDragLock&&this.openDragLock(),this.openDragLock=T5(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),In(b=>{let p=this.getAxisMotionValue(b).get()||0;if(Oi.test(p)){const{projection:y}=this.visualElement;if(y&&y.layout){const S=y.layout.layoutBox[b];S&&(p=Rn(S)*(parseFloat(p)/100))}}this.originPoint[b]=p}),v&&je.postRender(()=>v(u,d)),gm(this.visualElement,"transform");const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:f,dragDirectionLock:h,onDirectionLock:v,onDrag:m}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:b}=d;if(h&&this.currentDirection===null){this.currentDirection=N3(b),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",d.point,b),this.updateAxis("y",d.point,b),this.visualElement.render(),m&&m(u,d)},a=(u,d)=>this.stop(u,d),l=()=>In(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new $1(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:X1(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&je.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Yc(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=b3(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Ro(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=x3(r.layoutBox,n):this.constraints=!1,this.elastic=w3(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&In(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=k3(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ro(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=R3(i,r.root,this.visualElement.getTransformPagePoint());let o=S3(r.layout.layoutBox,s);if(n){const a=n(C3(o));this.hasMutatedConstraints=!!a,a&&(o=G1(a))}return o}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=In(u=>{if(!Yc(u,n,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const f=r?200:1e6,h=r?40:1e7,v={type:"inertia",velocity:i?e[u]:0,bounceStiffness:f,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,v)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return gm(this.visualElement,e),i.start(ay(e,i,0,n,this.visualElement,!1))}stopAnimation(){In(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){In(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){In(n=>{const{drag:i}=this.getProps();if(!Yc(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(n);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[n];s.set(e[n]-$e(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Ro(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};In(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=T3({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),In(o=>{if(!Yc(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set($e(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;_3.set(this.visualElement,this);const e=this.visualElement.current,n=xl(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Ro(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),je.read(i);const o=tc(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(In(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=wm,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Yc(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function N3(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class I3 extends fs{constructor(e){super(e),this.removeGroupControls=Cn,this.removeListeners=Cn,this.controls=new A3(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Cn}unmount(){this.removeGroupControls(),this.removeListeners()}}const _x=t=>(e,n)=>{t&&je.postRender(()=>t(e,n))};class O3 extends fs{constructor(){super(...arguments),this.removePointerDownListener=Cn}onPointerDown(e){this.session=new $1(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:X1(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:_x(e),onStart:_x(n),onMove:i,onEnd:(s,o)=>{delete this.session,r&&je.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=xl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Tu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ax(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const za={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(le.test(t))t=parseFloat(t);else return t;const n=Ax(t,e.target.x),i=Ax(t,e.target.y);return`${n}% ${i}%`}},M3={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=as.parse(t);if(r.length>5)return i;const s=as.createTransformer(t),o=typeof r[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=$e(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}};class D3 extends x.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;t5(L3),s&&(n.group&&n.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Tu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||je.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Lv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function J1(t){const[e,n]=ME(),i=x.useContext(Rv);return g.jsx(D3,{...t,layoutGroup:i,switchLayoutGroup:x.useContext(zE),isPresent:e,safeToRemove:n})}const L3={borderRadius:{...za,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:za,borderTopRightRadius:za,borderBottomLeftRadius:za,borderBottomRightRadius:za,boxShadow:M3};function j3(t,e,n){const i=Dt(t)?t:Zl(t);return i.start(ay("",i,e,n)),i.animation}function F3(t){return t instanceof SVGElement&&t.tagName!=="svg"}const U3=(t,e)=>t.depth-e.depth;class B3{constructor(){this.children=[],this.isDirty=!1}add(e){Qv(this.children,e),this.isDirty=!0}remove(e){Xv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(U3),this.isDirty=!1,this.children.forEach(e)}}function V3(t,e){const n=Mi.now(),i=({timestamp:r})=>{const s=r-n;s>=e&&(os(i),t(s-e))};return je.read(i,!0),()=>os(i)}const Z1=["TopLeft","TopRight","BottomLeft","BottomRight"],z3=Z1.length,Nx=t=>typeof t=="string"?parseFloat(t):t,Ix=t=>typeof t=="number"||le.test(t);function $3(t,e,n,i,r,s){r?(t.opacity=$e(0,n.opacity!==void 0?n.opacity:1,W3(i)),t.opacityExit=$e(e.opacity!==void 0?e.opacity:1,0,H3(i))):s&&(t.opacity=$e(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let o=0;o<z3;o++){const a=`border${Z1[o]}Radius`;let l=Ox(e,a),c=Ox(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Ix(l)===Ix(c)?(t[a]=Math.max($e(Nx(l),Nx(c),i),0),(Oi.test(c)||Oi.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=$e(e.rotate||0,n.rotate||0,i))}function Ox(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const W3=eP(0,.5,y1),H3=eP(.5,.95,Cn);function eP(t,e,n){return i=>i<t?0:i>e?1:n(pa(t,e,i))}function Mx(t,e){t.min=e.min,t.max=e.max}function Nn(t,e){Mx(t.x,e.x),Mx(t.y,e.y)}function Dx(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Lx(t,e,n,i,r){return t-=e,t=Sd(t,1/n,i),r!==void 0&&(t=Sd(t,1/r,i)),t}function q3(t,e=0,n=1,i=.5,r,s=t,o=t){if(Oi.test(e)&&(e=parseFloat(e),e=$e(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=$e(s.min,s.max,i);t===s&&(a-=e),t.min=Lx(t.min,e,n,a,r),t.max=Lx(t.max,e,n,a,r)}function jx(t,e,[n,i,r],s,o){q3(t,e[n],e[i],e[r],e.scale,s,o)}const G3=["x","scaleX","originX"],K3=["y","scaleY","originY"];function Fx(t,e,n,i){jx(t.x,e,G3,n?n.x:void 0,i?i.x:void 0),jx(t.y,e,K3,n?n.y:void 0,i?i.y:void 0)}function Ux(t){return t.translate===0&&t.scale===1}function tP(t){return Ux(t.x)&&Ux(t.y)}function Bx(t,e){return t.min===e.min&&t.max===e.max}function Y3(t,e){return Bx(t.x,e.x)&&Bx(t.y,e.y)}function Vx(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function nP(t,e){return Vx(t.x,e.x)&&Vx(t.y,e.y)}function zx(t){return Rn(t.x)/Rn(t.y)}function $x(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Q3{constructor(){this.members=[]}add(e){Qv(this.members,e),e.scheduleRender()}remove(e){if(Xv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function X3(t,e,n){let i="";const r=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:f,skewX:h,skewY:v}=n;c&&(i=`perspective(${c}px) ${i}`),u&&(i+=`rotate(${u}deg) `),d&&(i+=`rotateX(${d}deg) `),f&&(i+=`rotateY(${f}deg) `),h&&(i+=`skewX(${h}deg) `),v&&(i+=`skewY(${v}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const Ss={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ol=typeof window<"u"&&window.MotionDebug!==void 0,Eh=["","X","Y","Z"],J3={visibility:"hidden"},Wx=1e3;let Z3=0;function Ph(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function iP(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=d1(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",je,!(r||s))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&iP(i)}function rP({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Z3++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ol&&(Ss.totalNodes=Ss.resolvedTargetDeltas=Ss.recalculatedProjection=0),this.nodes.forEach(nU),this.nodes.forEach(aU),this.nodes.forEach(lU),this.nodes.forEach(iU),ol&&window.MotionDebug.record(Ss)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new B3)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Jv),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=F3(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=V3(f,250),Tu.hasAnimatedSinceResize&&(Tu.hasAnimatedSinceResize=!1,this.nodes.forEach(qx))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:h,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||hU,{onLayoutAnimationStart:b,onLayoutAnimationComplete:p}=u.getProps(),y=!this.targetLayout||!nP(this.targetLayout,v)||h,S=!f&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,S);const T={...qv(m,"layout"),onPlay:b,onComplete:p};(u.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T)}else f||qx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,os(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(cU),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&iP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Hx);return}this.isUpdating||this.nodes.forEach(sU),this.isUpdating=!1,this.nodes.forEach(oU),this.nodes.forEach(eU),this.nodes.forEach(tU),this.clearAllSnapshots();const a=Mi.now();xt.delta=yr(0,1e3/60,a-xt.timestamp),xt.timestamp=a,xt.isProcessing=!0,vh.update.process(xt),vh.preRender.process(xt),vh.render.process(xt),xt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Lv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(rU),this.sharedNodes.forEach(uU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,je.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){je.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=tt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!tP(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||xs(this.latestValues)||u)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),pU(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return tt();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(mU))){const{scroll:u}=this.root;u&&(No(l.x,u.offset.x),No(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=tt();if(Nn(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Nn(l,o),No(l.x,d.offset.x),No(l.y,d.offset.y))}return l}applyTransform(o,a=!1){const l=tt();Nn(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Io(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),xs(u.latestValues)&&Io(l,u.latestValues)}return xs(this.latestValues)&&Io(l,this.latestValues),l}removeTransform(o){const a=tt();Nn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!xs(c.latestValues))continue;Cm(c.latestValues)&&c.updateSnapshot();const u=tt(),d=c.measurePageBox();Nn(u,d),Fx(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return xs(this.latestValues)&&Fx(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=xt.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tt(),this.relativeTargetOrigin=tt(),Tl(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),Nn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=tt(),this.targetWithTransforms=tt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),y3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Nn(this.target,this.layout.layoutBox),Y1(this.target,this.targetDelta)):Nn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tt(),this.relativeTargetOrigin=tt(),Tl(this.relativeTargetOrigin,this.target,h.target),Nn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ol&&Ss.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Cm(this.parent.latestValues)||K1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===xt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Nn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;P3(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=tt());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Dx(this.prevProjectionDelta.x,this.projectionDelta.x),Dx(this.prevProjectionDelta.y,this.projectionDelta.y)),Sl(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!$x(this.projectionDelta.x,this.prevProjectionDelta.x)||!$x(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),ol&&Ss.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ao(),this.projectionDelta=Ao(),this.projectionDeltaWithTransform=Ao()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=Ao();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=tt(),h=l?l.source:void 0,v=this.layout?this.layout.source:void 0,m=h!==v,b=this.getStack(),p=!b||b.members.length<=1,y=!!(m&&!p&&this.options.crossfade===!0&&!this.path.some(fU));this.animationProgress=0;let S;this.mixTargetDelta=T=>{const k=T/1e3;Gx(d.x,o.x,k),Gx(d.y,o.y,k),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Tl(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),dU(this.relativeTarget,this.relativeTargetOrigin,f,k),S&&Y3(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=tt()),Nn(S,this.relativeTarget)),m&&(this.animationValues=u,$3(u,c,this.latestValues,k,y,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(os(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=je.update(()=>{Tu.hasAnimatedSinceResize=!0,this.currentAnimation=j3(0,Wx,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Wx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&sP(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||tt();const d=Rn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=Rn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}Nn(a,l),Io(a,u),Sl(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Q3),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Ph("z",o,c,this.animationValues);for(let u=0;u<Eh.length;u++)Ph(`rotate${Eh[u]}`,o,c,this.animationValues),Ph(`skew${Eh[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return J3;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=xu(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=xu(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!xs(this.latestValues)&&(m.transform=u?u({},""):"none",this.hasProjected=!1),m}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=X3(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:h,y:v}=this.projectionDelta;c.transformOrigin=`${h.origin*100}% ${v.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const m in gd){if(f[m]===void 0)continue;const{correct:b,applyTo:p}=gd[m],y=c.transform==="none"?f[m]:b(f[m],d);if(p){const S=p.length;for(let T=0;T<S;T++)c[p[T]]=y}else c[m]=y}return this.options.layoutId&&(c.pointerEvents=d===this?xu(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Hx),this.root.sharedNodes.clear()}}}function eU(t){t.updateLayout()}function tU(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?In(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],h=Rn(f);f.min=i[d].min,f.max=f.min+h}):sP(s,n.layoutBox,i)&&In(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],h=Rn(i[d]);f.max=f.min+h,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+h)});const a=Ao();Sl(a,i,n.layoutBox);const l=Ao();o?Sl(l,t.applyTransform(r,!0),n.measuredBox):Sl(l,i,n.layoutBox);const c=!tP(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:h}=d;if(f&&h){const v=tt();Tl(v,n.layoutBox,f.layoutBox);const m=tt();Tl(m,i,h.layoutBox),nP(v,m)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=v,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function nU(t){ol&&Ss.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function iU(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function rU(t){t.clearSnapshot()}function Hx(t){t.clearMeasurements()}function sU(t){t.isLayoutDirty=!1}function oU(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function qx(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function aU(t){t.resolveTargetDelta()}function lU(t){t.calcProjection()}function cU(t){t.resetSkewAndRotation()}function uU(t){t.removeLeadSnapshot()}function Gx(t,e,n){t.translate=$e(e.translate,0,n),t.scale=$e(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Kx(t,e,n,i){t.min=$e(e.min,n.min,i),t.max=$e(e.max,n.max,i)}function dU(t,e,n,i){Kx(t.x,e.x,n.x,i),Kx(t.y,e.y,n.y,i)}function fU(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const hU={duration:.45,ease:[.4,0,.1,1]},Yx=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Qx=Yx("applewebkit/")&&!Yx("chrome/")?Math.round:Cn;function Xx(t){t.min=Qx(t.min),t.max=Qx(t.max)}function pU(t){Xx(t.x),Xx(t.y)}function sP(t,e,n){return t==="position"||t==="preserve-aspect"&&!v3(zx(e),zx(n),.2)}function mU(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const gU=rP({attachResizeListener:(t,e)=>tc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Rh={current:void 0},oP=rP({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Rh.current){const t=new gU({});t.mount(window),t.setOptions({layoutScroll:!0}),Rh.current=t}return Rh.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),vU={pan:{Feature:O3},drag:{Feature:I3,ProjectionNode:oP,MeasureLayout:J1}};function Jx(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,s=i[r];s&&je.postRender(()=>s(e,xc(e)))}class yU extends fs{mount(){const{current:e}=this.node;e&&(this.unmount=v5(e,n=>(Jx(this.node,n,"Start"),i=>Jx(this.node,i,"End"))))}unmount(){}}class bU extends fs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=bc(tc(this.node.current,"focus",()=>this.onFocus()),tc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Zx(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),s=i[r];s&&je.postRender(()=>s(e,xc(e)))}class xU extends fs{mount(){const{current:e}=this.node;e&&(this.unmount=S5(e,n=>(Zx(this.node,n,"Start"),(i,{success:r})=>Zx(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Pm=new WeakMap,_h=new WeakMap,SU=t=>{const e=Pm.get(t.target);e&&e(t)},TU=t=>{t.forEach(SU)};function kU({root:t,...e}){const n=t||document;_h.has(n)||_h.set(n,{});const i=_h.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(TU,{root:t,...e})),i[r]}function wU(t,e,n){const i=kU(e);return Pm.set(t,n),i.observe(t),()=>{Pm.delete(t),i.unobserve(t)}}const CU={some:0,all:1};class EU extends fs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:CU[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),f=c?u:d;f&&f(l)};return wU(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(PU(e,n))&&this.startObserver()}unmount(){}}function PU({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const RU={inView:{Feature:EU},tap:{Feature:xU},focus:{Feature:bU},hover:{Feature:yU}},_U={layout:{ProjectionNode:oP,MeasureLayout:J1}},Rm={current:null},aP={current:!1};function AU(){if(aP.current=!0,!!Nv)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Rm.current=t.matches;t.addListener(e),e()}else Rm.current=!1}const NU=[...I1,Ot,as],IU=t=>NU.find(N1(t)),eS=new WeakMap;function OU(t,e,n){for(const i in e){const r=e[i],s=n[i];if(Dt(r))t.addValue(i,r);else if(Dt(s))t.addValue(i,Zl(r,{owner:t}));else if(s!==r)if(t.hasValue(i)){const o=t.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=t.getStaticValue(i);t.addValue(i,Zl(o!==void 0?o:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const tS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class MU{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ry,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Mi.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,je.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=hf(n),this.isVariantNode=BE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in f){const v=f[h];l[h]!==void 0&&Dt(v)&&v.set(l[h],!1)}}mount(e){this.current=e,eS.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),aP.current||AU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Rm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){eS.delete(this.current),this.projection&&this.projection.unmount(),os(this.notifyUpdate),os(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Js.has(e),r=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&je.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ma){const n=ma[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):tt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<tS.length;i++){const r=tS[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=OU(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Zl(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(_1(r)||x1(r))?r=parseFloat(r):!IU(r)&&as.test(n)&&(r=E1(e,n)),this.setBaseTarget(e,Dt(r)?r.get():r)),Dt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const o=Fv(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(r=o[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Dt(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Jv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class lP extends MU{constructor(){super(...arguments),this.KeyframeResolver=O1}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Dt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function DU(t){return window.getComputedStyle(t)}class LU extends lP{constructor(){super(...arguments),this.type="html",this.renderInstance=YE}readValueFromInstance(e,n){if(Js.has(n)){const i=iy(n);return i&&i.default||0}else{const i=DU(e),r=(qE(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Q1(e,n)}build(e,n,i){Vv(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return Hv(e,n,i)}}class jU extends lP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=tt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Js.has(n)){const i=iy(n);return i&&i.default||0}return n=QE.has(n)?n:Dv(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return ZE(e,n,i)}build(e,n,i){zv(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){XE(e,n,i,r)}mount(e){this.isSVGTag=Wv(e.tagName),super.mount(e)}}const FU=(t,e)=>jv(t)?new jU(e):new LU(e,{allowProjection:t!==x.Fragment}),UU=u5({...l3,...RU,...vU,..._U},FU),rt=C2(UU);var Ah="focusScope.autoFocusOnMount",Nh="focusScope.autoFocusOnUnmount",nS={bubbles:!1,cancelable:!0},BU="FocusScope",cP=x.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=t,[a,l]=x.useState(null),c=Li(r),u=Li(s),d=x.useRef(null),f=wt(e,m=>l(m)),h=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(i){let m=function(S){if(h.paused||!a)return;const T=S.target;a.contains(T)?d.current=T:Rr(d.current,{select:!0})},b=function(S){if(h.paused||!a)return;const T=S.relatedTarget;T!==null&&(a.contains(T)||Rr(d.current,{select:!0}))},p=function(S){if(document.activeElement===document.body)for(const k of S)k.removedNodes.length>0&&Rr(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",b);const y=new MutationObserver(p);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",b),y.disconnect()}}},[i,a,h.paused]),x.useEffect(()=>{if(a){rS.add(h);const m=document.activeElement;if(!a.contains(m)){const p=new CustomEvent(Ah,nS);a.addEventListener(Ah,c),a.dispatchEvent(p),p.defaultPrevented||(VU(qU(uP(a)),{select:!0}),document.activeElement===m&&Rr(a))}return()=>{a.removeEventListener(Ah,c),setTimeout(()=>{const p=new CustomEvent(Nh,nS);a.addEventListener(Nh,u),a.dispatchEvent(p),p.defaultPrevented||Rr(m??document.body,{select:!0}),a.removeEventListener(Nh,u),rS.remove(h)},0)}}},[a,c,u,h]);const v=x.useCallback(m=>{if(!n&&!i||h.paused)return;const b=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,p=document.activeElement;if(b&&p){const y=m.currentTarget,[S,T]=zU(y);S&&T?!m.shiftKey&&p===T?(m.preventDefault(),n&&Rr(S,{select:!0})):m.shiftKey&&p===S&&(m.preventDefault(),n&&Rr(T,{select:!0})):p===y&&m.preventDefault()}},[n,i,h.paused]);return g.jsx(qe.div,{tabIndex:-1,...o,ref:f,onKeyDown:v})});cP.displayName=BU;function VU(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(Rr(i,{select:e}),document.activeElement!==n)return}function zU(t){const e=uP(t),n=iS(e,t),i=iS(e.reverse(),t);return[n,i]}function uP(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function iS(t,e){for(const n of t)if(!$U(n,{upTo:e}))return n}function $U(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function WU(t){return t instanceof HTMLInputElement&&"select"in t}function Rr(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&WU(t)&&e&&t.select()}}var rS=HU();function HU(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=sS(t,e),t.unshift(e)},remove(e){var n;t=sS(t,e),(n=t[0])==null||n.resume()}}}function sS(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function qU(t){return t.filter(e=>e.tagName!=="A")}var Ih=0;function GU(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??oS()),document.body.insertAdjacentElement("beforeend",t[1]??oS()),Ih++,()=>{Ih===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Ih--}},[])}function oS(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Pi=function(){return Pi=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Pi.apply(this,arguments)};function dP(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function KU(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var ku="right-scroll-bar-position",wu="width-before-scroll-bar",YU="with-scroll-bars-hidden",QU="--removed-body-scroll-bar-size";function Oh(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function XU(t,e){var n=x.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var JU=typeof window<"u"?x.useLayoutEffect:x.useEffect,aS=new WeakMap;function ZU(t,e){var n=XU(null,function(i){return t.forEach(function(r){return Oh(r,i)})});return JU(function(){var i=aS.get(n);if(i){var r=new Set(i),s=new Set(t),o=n.current;r.forEach(function(a){s.has(a)||Oh(a,null)}),s.forEach(function(a){r.has(a)||Oh(a,o)})}aS.set(n,t)},[t]),n}function e4(t){return t}function t4(t,e){e===void 0&&(e=e4);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return r}function n4(t){t===void 0&&(t={});var e=t4(null);return e.options=Pi({async:!0,ssr:!1},t),e}var fP=function(t){var e=t.sideCar,n=dP(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return x.createElement(i,Pi({},n))};fP.isSideCarExport=!0;function i4(t,e){return t.useMedium(e),fP}var hP=n4(),Mh=function(){},gf=x.forwardRef(function(t,e){var n=x.useRef(null),i=x.useState({onScrollCapture:Mh,onWheelCapture:Mh,onTouchMoveCapture:Mh}),r=i[0],s=i[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,h=t.noRelative,v=t.noIsolation,m=t.inert,b=t.allowPinchZoom,p=t.as,y=p===void 0?"div":p,S=t.gapMode,T=dP(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,w=ZU([n,e]),E=Pi(Pi({},T),r);return x.createElement(x.Fragment,null,u&&x.createElement(k,{sideCar:hP,removeScrollBar:c,shards:d,noRelative:h,noIsolation:v,inert:m,setCallbacks:s,allowPinchZoom:!!b,lockRef:n,gapMode:S}),o?x.cloneElement(x.Children.only(a),Pi(Pi({},E),{ref:w})):x.createElement(y,Pi({},E,{className:l,ref:w}),a))});gf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};gf.classNames={fullWidth:wu,zeroRight:ku};var r4=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function s4(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=r4();return e&&t.setAttribute("nonce",e),t}function o4(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function a4(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var l4=function(){var t=0,e=null;return{add:function(n){t==0&&(e=s4())&&(o4(e,n),a4(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},c4=function(){var t=l4();return function(e,n){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},pP=function(){var t=c4(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},u4={left:0,top:0,right:0,gap:0},Dh=function(t){return parseInt(t||"",10)||0},d4=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[Dh(n),Dh(i),Dh(r)]},f4=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return u4;var e=d4(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},h4=pP(),Wo="data-scroll-locked",p4=function(t,e,n,i){var r=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(YU,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(Wo,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ku,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(wu,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(ku," .").concat(ku,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(wu," .").concat(wu,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Wo,`] {
    `).concat(QU,": ").concat(a,`px;
  }
`)},lS=function(){var t=parseInt(document.body.getAttribute(Wo)||"0",10);return isFinite(t)?t:0},m4=function(){x.useEffect(function(){return document.body.setAttribute(Wo,(lS()+1).toString()),function(){var t=lS()-1;t<=0?document.body.removeAttribute(Wo):document.body.setAttribute(Wo,t.toString())}},[])},g4=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;m4();var s=x.useMemo(function(){return f4(r)},[r]);return x.createElement(h4,{styles:p4(s,!e,r,n?"":"!important")})},_m=!1;if(typeof window<"u")try{var Qc=Object.defineProperty({},"passive",{get:function(){return _m=!0,!0}});window.addEventListener("test",Qc,Qc),window.removeEventListener("test",Qc,Qc)}catch{_m=!1}var ao=_m?{passive:!1}:!1,v4=function(t){return t.tagName==="TEXTAREA"},mP=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!v4(t)&&n[e]==="visible")},y4=function(t){return mP(t,"overflowY")},b4=function(t){return mP(t,"overflowX")},cS=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=gP(t,i);if(r){var s=vP(t,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},x4=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},S4=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},gP=function(t,e){return t==="v"?y4(e):b4(e)},vP=function(t,e){return t==="v"?x4(e):S4(e)},T4=function(t,e){return t==="h"&&e==="rtl"?-1:1},k4=function(t,e,n,i,r){var s=T4(t,window.getComputedStyle(e).direction),o=s*i,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{if(!a)break;var h=vP(t,a),v=h[0],m=h[1],b=h[2],p=m-b-s*v;(v||p)&&gP(t,a)&&(d+=p,f+=v);var y=a.parentNode;a=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},Xc=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},uS=function(t){return[t.deltaX,t.deltaY]},dS=function(t){return t&&"current"in t?t.current:t},w4=function(t,e){return t[0]===e[0]&&t[1]===e[1]},C4=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},E4=0,lo=[];function P4(t){var e=x.useRef([]),n=x.useRef([0,0]),i=x.useRef(),r=x.useState(E4++)[0],s=x.useState(pP)[0],o=x.useRef(t);x.useEffect(function(){o.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var m=KU([t.lockRef.current],(t.shards||[]).map(dS),!0).filter(Boolean);return m.forEach(function(b){return b.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),m.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=x.useCallback(function(m,b){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var p=Xc(m),y=n.current,S="deltaX"in m?m.deltaX:y[0]-p[0],T="deltaY"in m?m.deltaY:y[1]-p[1],k,w=m.target,E=Math.abs(S)>Math.abs(T)?"h":"v";if("touches"in m&&E==="h"&&w.type==="range")return!1;var P=cS(E,w);if(!P)return!0;if(P?k=E:(k=E==="v"?"h":"v",P=cS(E,w)),!P)return!1;if(!i.current&&"changedTouches"in m&&(S||T)&&(i.current=k),!k)return!0;var _=i.current||k;return k4(_,b,m,_==="h"?S:T)},[]),l=x.useCallback(function(m){var b=m;if(!(!lo.length||lo[lo.length-1]!==s)){var p="deltaY"in b?uS(b):Xc(b),y=e.current.filter(function(k){return k.name===b.type&&(k.target===b.target||b.target===k.shadowParent)&&w4(k.delta,p)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var S=(o.current.shards||[]).map(dS).filter(Boolean).filter(function(k){return k.contains(b.target)}),T=S.length>0?a(b,S[0]):!o.current.noIsolation;T&&b.cancelable&&b.preventDefault()}}},[]),c=x.useCallback(function(m,b,p,y){var S={name:m,delta:b,target:p,should:y,shadowParent:R4(p)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(T){return T!==S})},1)},[]),u=x.useCallback(function(m){n.current=Xc(m),i.current=void 0},[]),d=x.useCallback(function(m){c(m.type,uS(m),m.target,a(m,t.lockRef.current))},[]),f=x.useCallback(function(m){c(m.type,Xc(m),m.target,a(m,t.lockRef.current))},[]);x.useEffect(function(){return lo.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,ao),document.addEventListener("touchmove",l,ao),document.addEventListener("touchstart",u,ao),function(){lo=lo.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,ao),document.removeEventListener("touchmove",l,ao),document.removeEventListener("touchstart",u,ao)}},[]);var h=t.removeScrollBar,v=t.inert;return x.createElement(x.Fragment,null,v?x.createElement(s,{styles:C4(r)}):null,h?x.createElement(g4,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function R4(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const _4=i4(hP,P4);var yP=x.forwardRef(function(t,e){return x.createElement(gf,Pi({},t,{ref:e,sideCar:_4}))});yP.classNames=gf.classNames;var A4=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},co=new WeakMap,Jc=new WeakMap,Zc={},Lh=0,bP=function(t){return t&&(t.host||bP(t.parentNode))},N4=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=bP(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},I4=function(t,e,n,i){var r=N4(e,Array.isArray(t)?t:[t]);Zc[n]||(Zc[n]=new WeakMap);var s=Zc[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var h=f.getAttribute(i),v=h!==null&&h!=="false",m=(co.get(f)||0)+1,b=(s.get(f)||0)+1;co.set(f,m),s.set(f,b),o.push(f),m===1&&v&&Jc.set(f,!0),b===1&&f.setAttribute(n,"true"),v||f.setAttribute(i,"true")}catch(p){console.error("aria-hidden: cannot operate on ",f,p)}})};return u(e),a.clear(),Lh++,function(){o.forEach(function(d){var f=co.get(d)-1,h=s.get(d)-1;co.set(d,f),s.set(d,h),f||(Jc.has(d)||d.removeAttribute(i),Jc.delete(d)),h||d.removeAttribute(n)}),Lh--,Lh||(co=new WeakMap,co=new WeakMap,Jc=new WeakMap,Zc={})}},O4=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=A4(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),I4(i,r,n,"aria-hidden")):function(){return null}},vf="Dialog",[xP,J8]=ka(vf),[M4,hi]=xP(vf),SP=t=>{const{__scopeDialog:e,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!0}=t,a=x.useRef(null),l=x.useRef(null),[c,u]=uv({prop:i,defaultProp:r??!1,onChange:s,caller:vf});return g.jsx(M4,{scope:e,triggerRef:a,contentRef:l,contentId:fh(),titleId:fh(),descriptionId:fh(),open:c,onOpenChange:u,onOpenToggle:x.useCallback(()=>u(d=>!d),[u]),modal:o,children:n})};SP.displayName=vf;var TP="DialogTrigger",D4=x.forwardRef((t,e)=>{const{__scopeDialog:n,...i}=t,r=hi(TP,n),s=wt(e,r.triggerRef);return g.jsx(qe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":uy(r.open),...i,ref:s,onClick:Ne(t.onClick,r.onOpenToggle)})});D4.displayName=TP;var ly="DialogPortal",[L4,kP]=xP(ly,{forceMount:void 0}),wP=t=>{const{__scopeDialog:e,forceMount:n,children:i,container:r}=t,s=hi(ly,e);return g.jsx(L4,{scope:e,forceMount:n,children:x.Children.map(i,o=>g.jsx(Qs,{present:n||s.open,children:g.jsx(cv,{asChild:!0,container:r,children:o})}))})};wP.displayName=ly;var Td="DialogOverlay",CP=x.forwardRef((t,e)=>{const n=kP(Td,t.__scopeDialog),{forceMount:i=n.forceMount,...r}=t,s=hi(Td,t.__scopeDialog);return s.modal?g.jsx(Qs,{present:i||s.open,children:g.jsx(F4,{...r,ref:e})}):null});CP.displayName=Td;var j4=Wl("DialogOverlay.RemoveScroll"),F4=x.forwardRef((t,e)=>{const{__scopeDialog:n,...i}=t,r=hi(Td,n);return g.jsx(yP,{as:j4,allowPinchZoom:!0,shards:[r.contentRef],children:g.jsx(qe.div,{"data-state":uy(r.open),...i,ref:e,style:{pointerEvents:"auto",...i.style}})})}),Ws="DialogContent",EP=x.forwardRef((t,e)=>{const n=kP(Ws,t.__scopeDialog),{forceMount:i=n.forceMount,...r}=t,s=hi(Ws,t.__scopeDialog);return g.jsx(Qs,{present:i||s.open,children:s.modal?g.jsx(U4,{...r,ref:e}):g.jsx(B4,{...r,ref:e})})});EP.displayName=Ws;var U4=x.forwardRef((t,e)=>{const n=hi(Ws,t.__scopeDialog),i=x.useRef(null),r=wt(e,n.contentRef,i);return x.useEffect(()=>{const s=i.current;if(s)return O4(s)},[]),g.jsx(PP,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ne(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ne(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:Ne(t.onFocusOutside,s=>s.preventDefault())})}),B4=x.forwardRef((t,e)=>{const n=hi(Ws,t.__scopeDialog),i=x.useRef(!1),r=x.useRef(!1);return g.jsx(PP,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),PP=x.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,...o}=t,a=hi(Ws,n),l=x.useRef(null),c=wt(e,l);return GU(),g.jsxs(g.Fragment,{children:[g.jsx(cP,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:g.jsx(Yd,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":uy(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),g.jsxs(g.Fragment,{children:[g.jsx(V4,{titleId:a.titleId}),g.jsx($4,{contentRef:l,descriptionId:a.descriptionId})]})]})}),cy="DialogTitle",RP=x.forwardRef((t,e)=>{const{__scopeDialog:n,...i}=t,r=hi(cy,n);return g.jsx(qe.h2,{id:r.titleId,...i,ref:e})});RP.displayName=cy;var _P="DialogDescription",AP=x.forwardRef((t,e)=>{const{__scopeDialog:n,...i}=t,r=hi(_P,n);return g.jsx(qe.p,{id:r.descriptionId,...i,ref:e})});AP.displayName=_P;var NP="DialogClose",IP=x.forwardRef((t,e)=>{const{__scopeDialog:n,...i}=t,r=hi(NP,n);return g.jsx(qe.button,{type:"button",...i,ref:e,onClick:Ne(t.onClick,()=>r.onOpenChange(!1))})});IP.displayName=NP;function uy(t){return t?"open":"closed"}var OP="DialogTitleWarning",[Z8,MP]=II(OP,{contentName:Ws,titleName:cy,docsSlug:"dialog"}),V4=({titleId:t})=>{const e=MP(OP),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return x.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},z4="DialogDescriptionWarning",$4=({contentRef:t,descriptionId:e})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${MP(z4).contentName}}.`;return x.useEffect(()=>{var s;const r=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&r&&(document.getElementById(e)||console.warn(i))},[i,t,e]),null},W4=SP,H4=wP,DP=CP,LP=EP,jP=RP,FP=AP,q4=IP;const dy=W4,G4=H4,UP=x.forwardRef(({className:t,...e},n)=>g.jsx(DP,{ref:n,className:Fe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));UP.displayName=DP.displayName;const yf=x.forwardRef(({className:t,children:e,...n},i)=>g.jsxs(G4,{children:[g.jsx(UP,{}),g.jsxs(LP,{ref:i,className:Fe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,g.jsxs(q4,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[g.jsx(wa,{className:"h-4 w-4"}),g.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));yf.displayName=LP.displayName;const bf=({className:t,...e})=>g.jsx("div",{className:Fe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});bf.displayName="DialogHeader";const xf=({className:t,...e})=>g.jsx("div",{className:Fe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});xf.displayName="DialogFooter";const Sf=x.forwardRef(({className:t,...e},n)=>g.jsx(jP,{ref:n,className:Fe("text-lg font-semibold leading-none tracking-tight",t),...e}));Sf.displayName=jP.displayName;const K4=x.forwardRef(({className:t,...e},n)=>g.jsx(FP,{ref:n,className:Fe("text-sm text-muted-foreground",t),...e}));K4.displayName=FP.displayName;const Y4=CC("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),xn=x.forwardRef(({className:t,variant:e,size:n,asChild:i=!1,...r},s)=>{const o=i?MI:"button";return g.jsx(o,{className:Fe(Y4({variant:e,size:n,className:t})),ref:s,...r})});xn.displayName="Button";function Q4(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Tf="Checkbox",[X4,e9]=ka(Tf),[J4,fy]=X4(Tf);function Z4(t){const{__scopeCheckbox:e,checked:n,children:i,defaultChecked:r,disabled:s,form:o,name:a,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:d}=t,[f,h]=uv({prop:n,defaultProp:r??!1,onChange:l,caller:Tf}),[v,m]=x.useState(null),[b,p]=x.useState(null),y=x.useRef(!1),S=v?!!o||!!v.closest("form"):!0,T={checked:f,disabled:s,setChecked:h,control:v,setControl:m,name:a,form:o,value:u,hasConsumerStoppedPropagationRef:y,required:c,defaultChecked:Zr(r)?!1:r,isFormControl:S,bubbleInput:b,setBubbleInput:p};return g.jsx(J4,{scope:e,...T,children:eB(d)?d(T):i})}var BP="CheckboxTrigger",VP=x.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...i},r)=>{const{control:s,value:o,disabled:a,checked:l,required:c,setControl:u,setChecked:d,hasConsumerStoppedPropagationRef:f,isFormControl:h,bubbleInput:v}=fy(BP,t),m=wt(r,u),b=x.useRef(l);return x.useEffect(()=>{const p=s==null?void 0:s.form;if(p){const y=()=>d(b.current);return p.addEventListener("reset",y),()=>p.removeEventListener("reset",y)}},[s,d]),g.jsx(qe.button,{type:"button",role:"checkbox","aria-checked":Zr(l)?"mixed":l,"aria-required":c,"data-state":qP(l),"data-disabled":a?"":void 0,disabled:a,value:o,...i,ref:m,onKeyDown:Ne(e,p=>{p.key==="Enter"&&p.preventDefault()}),onClick:Ne(n,p=>{d(y=>Zr(y)?!0:!y),v&&h&&(f.current=p.isPropagationStopped(),f.current||p.stopPropagation())})})});VP.displayName=BP;var hy=x.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:i,checked:r,defaultChecked:s,required:o,disabled:a,value:l,onCheckedChange:c,form:u,...d}=t;return g.jsx(Z4,{__scopeCheckbox:n,checked:r,defaultChecked:s,disabled:a,required:o,onCheckedChange:c,name:i,form:u,value:l,internal_do_not_use_render:({isFormControl:f})=>g.jsxs(g.Fragment,{children:[g.jsx(VP,{...d,ref:e,__scopeCheckbox:n}),f&&g.jsx(HP,{__scopeCheckbox:n})]})})});hy.displayName=Tf;var zP="CheckboxIndicator",$P=x.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:i,...r}=t,s=fy(zP,n);return g.jsx(Qs,{present:i||Zr(s.checked)||s.checked===!0,children:g.jsx(qe.span,{"data-state":qP(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e,style:{pointerEvents:"none",...t.style}})})});$P.displayName=zP;var WP="CheckboxBubbleInput",HP=x.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:i,hasConsumerStoppedPropagationRef:r,checked:s,defaultChecked:o,required:a,disabled:l,name:c,value:u,form:d,bubbleInput:f,setBubbleInput:h}=fy(WP,t),v=wt(n,h),m=Q4(s),b=QC(i);x.useEffect(()=>{const y=f;if(!y)return;const S=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(S,"checked").set,w=!r.current;if(m!==s&&k){const E=new Event("click",{bubbles:w});y.indeterminate=Zr(s),k.call(y,Zr(s)?!1:s),y.dispatchEvent(E)}},[f,m,s,r]);const p=x.useRef(Zr(s)?!1:s);return g.jsx(qe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??p.current,required:a,disabled:l,name:c,value:u,form:d,...e,tabIndex:-1,ref:v,style:{...e.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});HP.displayName=WP;function eB(t){return typeof t=="function"}function Zr(t){return t==="indeterminate"}function qP(t){return Zr(t)?"indeterminate":t?"checked":"unchecked"}const GP=x.forwardRef(({className:t,...e},n)=>g.jsx(hy,{ref:n,className:Fe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:g.jsx($P,{className:Fe("flex items-center justify-center text-current"),children:g.jsx(AO,{className:"h-4 w-4"})})}));GP.displayName=hy.displayName;function tB({open:t,onAccept:e,onClose:n}){const[i,r]=x.useState(!1);return g.jsx(dy,{open:t,onOpenChange:n,children:g.jsxs(yf,{className:"max-w-lg",children:[g.jsx(bf,{children:g.jsx(Sf,{children:"Privola za snimanje razgovora"})}),g.jsxs("p",{className:"text-sm leading-relaxed",children:["Razgovor se snima i pohranjuje iskljuivo radi pruanja AI savjetovanja. Vie detalja moete pronai u naoj"," ",g.jsx("a",{href:"#privatnost",className:"underline text-primary",children:"politici privatnosti"}),"."]}),g.jsxs("div",{className:"flex items-center space-x-2 pt-4",children:[g.jsx(GP,{id:"consent",checked:i,onCheckedChange:s=>r(!!s)}),g.jsx("label",{htmlFor:"consent",className:"text-sm select-none",children:"Prihvaam snimanje razgovora"})]}),g.jsx(xf,{children:g.jsx(xn,{onClick:e,disabled:!i,children:"Prihvaam"})})]})})}function nB({open:t,defaultEmail:e="",defaultPhone:n="",onSave:i,onClose:r,onDecline:s}){const[o,a]=x.useState(e),[l,c]=x.useState(n),[u,d]=x.useState(!1);x.useEffect(()=>{t&&(a(e),c(n),d(!1))},[t,e,n]);function f(m){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m)}function h(m){return/^[0-9+()\- ]{6,}$/.test(m)}const v=f(o)&&h(l);return t?g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:g.jsxs("div",{className:"glass-strong rounded-3xl p-8 w-full max-w-md shadow-strong",children:[g.jsxs("div",{className:"flex items-center justify-between mb-6",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"Uredi svoje kontakt podatke"}),g.jsx("p",{className:"text-white text-sm",children:"Odgovoramo u roku od 24 sata"})]}),g.jsx("button",{onClick:r,className:"p-2 hover:bg-white/20 rounded-full transition-smooth","aria-label":"Zatvori",children:g.jsx(wa,{className:"w-6 h-6"})})]}),g.jsxs("form",{onSubmit:m=>{m.preventDefault(),v&&i(o.trim(),l.trim())},className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"E-mail"}),g.jsx("input",{type:"email",placeholder:"E-mail",value:o,onChange:m=>{a(m.target.value),d(!0)},className:"w-full px-4 py-3 bg-white/50 border border-white/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary transition-smooth"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Telefon"}),g.jsx("input",{type:"tel",placeholder:"Telefon",value:l,onChange:m=>{c(m.target.value),d(!0)},className:"w-full px-4 py-3 bg-white/50 border border-white/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary transition-smooth"})]}),u&&!v&&g.jsx("p",{className:"text-xs text-red-400",children:"Unesite valjanu e-mail adresu i broj telefona."}),g.jsxs("div",{className:"flex space-x-3 pt-4",children:[g.jsx("button",{type:"button",onClick:s,className:"w-full bg-white/20 hover:bg-white/30 text-white py-3 rounded-xl font-semibold transition-smooth",children:"Ne elim ponudu"}),g.jsx("button",{type:"submit",disabled:!v,className:"w-full bg-gradient-primary text-white py-3 rounded-xl font-semibold shadow-medium hover:shadow-strong transition-smooth hover:scale-[1.02] disabled:opacity-50",children:"Spremi"})]})]})]})}):null}function iB({open:t,solution:e,language:n,onClose:i}){const s={hr:{title:"AI rjeenje",print:"Ispii",share:"Dijeli"},en:{title:"AI Solution",print:"Print",share:"Share"}}[n];function o(){navigator.share&&navigator.share({title:s.title,text:e}).catch(()=>{})}return g.jsx(dy,{open:t,onOpenChange:i,children:g.jsxs(yf,{className:"max-w-lg",children:[g.jsx(bf,{children:g.jsx(Sf,{children:s.title})}),g.jsx("p",{className:"whitespace-pre-line text-sm",children:e}),g.jsxs(xf,{children:[g.jsx(xn,{type:"button",onClick:()=>window.print(),children:s.print}),g.jsx(xn,{type:"button",variant:"secondary",onClick:o,disabled:!navigator.share,children:s.share})]})]})})}const rB="/assets/Bubi_2-BC8t6L12.png";function sB({title:t,subtitle:e,startLabel:n,isChatActive:i,isSpeaking:r,isListening:s,isMuted:o,onStartChat:a,onMicToggle:l,onMuteToggle:c,onEndChat:u}){const d=s?" Sluam...":r?" Govorim...":" Razmiljam...";return g.jsx("div",{className:"relative flex flex-col items-center",children:g.jsx(bu,{mode:"wait",children:i?g.jsxs(rt.div,{className:"relative flex flex-col items-center",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6},children:[g.jsx("div",{className:"relative mb-8",children:g.jsxs(rt.div,{className:"relative w-48 h-48 rounded-full bg-gradient-to-br from-white/20 to-white/5 backdrop-blur-lg border border-white/20 shadow-2xl flex items-center justify-center",animate:{rotateY:r?[0,5,-5,0]:0},transition:{duration:.6,repeat:r?1/0:0},children:[g.jsx(bu,{children:r&&g.jsx(g.Fragment,{children:[1,2,3].map(f=>g.jsx(rt.div,{className:"absolute inset-0 rounded-full border-2 border-blue-400/60",initial:{scale:1,opacity:.8},animate:{scale:[1,1.2+f*.1,1.4+f*.1],opacity:[.8,.4,0]},transition:{duration:2,repeat:1/0,delay:f*.2,ease:"easeOut"}},f))})}),g.jsx(bu,{children:s&&g.jsx(rt.div,{className:"absolute inset-0 rounded-full bg-gradient-to-r from-red-500/30 to-pink-500/30",initial:{scale:.8,opacity:0},animate:{scale:1.1,opacity:[.3,.7,.3]},exit:{scale:.8,opacity:0},transition:{duration:.8,repeat:1/0}})}),g.jsx(rt.div,{className:"w-32 h-32 rounded-full overflow-hidden bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-xl",animate:{scale:r?[1,1.05,1]:1},transition:{duration:.6,repeat:r?1/0:0},children:g.jsx("img",{src:rB,alt:"Bubi",className:"w-full h-full object-cover"})}),g.jsx(rt.div,{className:"absolute top-4 right-4 w-6 h-6 bg-green-500 rounded-full border-3 border-white shadow-lg",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0}}),s&&g.jsx(rt.div,{className:"absolute top-4 left-4 w-6 h-6 bg-red-500 rounded-full border-3 border-white shadow-lg",animate:{opacity:[.5,1,.5]},transition:{duration:.5,repeat:1/0}})]})}),g.jsxs("div",{className:"flex gap-6 mb-8",children:[g.jsx(rt.button,{onClick:l,className:`w-16 h-16 rounded-full flex items-center justify-center shadow-lg transition-all duration-300 ${s?"bg-red-500 text-white":"bg-white/20 backdrop-blur-lg border border-white/20 text-white hover:bg-white/30"}`,whileHover:{scale:1.1,y:-2},whileTap:{scale:.9},animate:{boxShadow:s?["0 0 0 0 rgba(239, 68, 68, 0.7)","0 0 0 10px rgba(239, 68, 68, 0)","0 0 0 0 rgba(239, 68, 68, 0)"]:"none"},transition:{duration:1,repeat:s?1/0:0},children:s?g.jsx(LO,{className:"w-6 h-6"}):g.jsx(jO,{className:"w-6 h-6"})}),g.jsx(rt.button,{onClick:c,className:"w-16 h-16 rounded-full bg-white/20 backdrop-blur-lg border border-white/20 text-white flex items-center justify-center shadow-lg hover:bg-white/30 transition-all duration-300",whileHover:{scale:1.1,y:-2},whileTap:{scale:.9},children:o?g.jsx(WO,{className:"w-6 h-6"}):g.jsx($O,{className:"w-6 h-6"})}),g.jsx(rt.button,{onClick:u,className:"w-16 h-16 rounded-full bg-red-500/80 backdrop-blur-lg border border-red-400/20 text-white flex items-center justify-center shadow-lg hover:bg-red-500 transition-all duration-300",whileHover:{scale:1.1,y:-2},whileTap:{scale:.9},children:g.jsx(wa,{className:"w-6 h-6"})})]}),g.jsx(rt.p,{className:"text-slate-300 text-center mt-4 text-sm",animate:{opacity:[.6,1,.6]},transition:{duration:2,repeat:1/0},children:d}),g.jsx("span",{className:"mt-2 text-2xl font-extrabold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Bubi"})]},"chat-screen"):g.jsxs(rt.div,{className:"text-center",initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{duration:.6},children:[g.jsx(rt.h1,{className:"text-5xl font-bold text-white mb-4 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.8},children:t}),g.jsx(rt.p,{className:"text-slate-300 text-lg mb-12 max-w-md mx-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.6},children:e}),g.jsxs(rt.button,{onClick:a,className:"group relative mx-auto bg-gradient-to-r from-white to-gray-200 text-purple-800 text-2xl font-bold px-14 py-7 rounded-2xl flex items-center gap-4 shadow-2xl hover:shadow-purple-500/25 transition-all duration-300",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.6,duration:.8,type:"spring"},whileHover:{scale:1.05,y:-5},whileTap:{scale:.95},children:[g.jsx(rt.div,{animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},children:g.jsx(FO,{className:"w-7 h-7"})}),n,g.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-r from-purple-200 to-purple-300 opacity-0 group-hover:opacity-20 transition-opacity duration-300"})]})]},"start-screen")})})}class oB{constructor(){Tc(this,"context",new AudioContext);Tc(this,"queue",[]);Tc(this,"current",null)}enqueueBase64(e){const n=Uint8Array.from(atob(e),i=>i.charCodeAt(0)).buffer;this.queue.push(n),this.current||this.playNext()}stop(){if(this.queue=[],this.current){try{this.current.stop()}catch{}this.current.disconnect(),this.current=null}}async playNext(){if(!this.queue.length){this.current=null;return}const e=this.queue.shift(),n=await this.context.decodeAudioData(e.slice(0)),i=this.context.createBufferSource();i.buffer=n,i.connect(this.context.destination),i.onended=()=>{this.current=null,this.playNext()},this.current=i,i.start()}}var fS={};function aB(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in t)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(t)}var lB=Object.defineProperty,cB=(t,e,n)=>e in t?lB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hS=(t,e,n)=>cB(t,typeof e!="symbol"?e+"":e,n);let Ht=class{constructor(){hS(this,"_locking"),hS(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const n=new Promise(r=>e=()=>{this._locks-=1,r()}),i=this._locking.then(()=>e);return this._locking=this._locking.then(()=>n),i}};function Je(t,e){if(!t)throw new Error(e)}const uB=34028234663852886e22,dB=-34028234663852886e22,fB=4294967295,hB=2147483647,pB=-2147483648;function Cu(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>hB||t<pB)throw new Error("invalid int 32: "+t)}function Am(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>fB||t<0)throw new Error("invalid uint 32: "+t)}function KP(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>uB||t<dB))throw new Error("invalid float 32: "+t)}const YP=Symbol("@bufbuild/protobuf/enum-type");function mB(t){const e=t[YP];return Je(e,"missing enum type on enum object"),e}function QP(t,e,n,i){t[YP]=XP(e,n.map(r=>({no:r.no,name:r.name,localName:t[r.no]})))}function XP(t,e,n){const i=Object.create(null),r=Object.create(null),s=[];for(const o of e){const a=JP(o);s.push(a),i[o.name]=a,r[o.no]=a}return{typeName:t,values:s,findName(o){return i[o]},findNumber(o){return r[o]}}}function gB(t,e,n){const i={};for(const r of e){const s=JP(r);i[s.localName]=s.no,i[s.no]=s.localName}return QP(i,t,e),i}function JP(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class py{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const i=this.getType(),r=i.runtime.bin,s=r.makeReadOptions(n);return r.readMessage(this,s.readerFactory(e),e.byteLength,s),this}fromJson(e,n){const i=this.getType(),r=i.runtime.json,s=r.makeReadOptions(n);return r.readMessage(i,e,s,this),this}fromJsonString(e,n){let i;try{i=JSON.parse(e)}catch(r){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(r instanceof Error?r.message:String(r)))}return this.fromJson(i,n)}toBinary(e){const n=this.getType(),i=n.runtime.bin,r=i.makeWriteOptions(e),s=r.writerFactory();return i.writeMessage(this,s,r),s.finish()}toJson(e){const n=this.getType(),i=n.runtime.json,r=i.makeWriteOptions(e);return i.writeMessage(this,r)}toJsonString(e){var n;const i=this.toJson(e);return JSON.stringify(i,null,(n=e==null?void 0:e.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function vB(t,e,n,i){var r;const s=(r=i==null?void 0:i.localName)!==null&&r!==void 0?r:e.substring(e.lastIndexOf(".")+1),o={[s]:function(a){t.util.initFields(this),t.util.initPartial(a,this)}}[s];return Object.setPrototypeOf(o.prototype,new py),Object.assign(o,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(a,l){return new o().fromBinary(a,l)},fromJson(a,l){return new o().fromJson(a,l)},fromJsonString(a,l){return new o().fromJsonString(a,l)},equals(a,l){return t.util.equals(o,a,l)}}),o}function yB(){let t=0,e=0;for(let i=0;i<28;i+=7){let r=this.buf[this.pos++];if(t|=(r&127)<<i,!(r&128))return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,!(n&128))return this.assertBounds(),[t,e];for(let i=3;i<=31;i+=7){let r=this.buf[this.pos++];if(e|=(r&127)<<i,!(r&128))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function jh(t,e,n){for(let s=0;s<28;s=s+7){const o=t>>>s,a=!(!(o>>>7)&&e==0),l=(a?o|128:o)&255;if(n.push(l),!a)return}const i=t>>>28&15|(e&7)<<4,r=!!(e>>3);if(n.push((r?i|128:i)&255),!!r){for(let s=3;s<31;s=s+7){const o=e>>>s,a=!!(o>>>7),l=(a?o|128:o)&255;if(n.push(l),!a)return}n.push(e>>>31&1)}}const Eu=4294967296;function pS(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let i=0,r=0;function s(o,a){const l=Number(t.slice(o,a));r*=n,i=i*n+l,i>=Eu&&(r=r+(i/Eu|0),i=i%Eu)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),e?eR(i,r):my(i,r)}function bB(t,e){let n=my(t,e);const i=n.hi&2147483648;i&&(n=eR(n.lo,n.hi));const r=ZP(n.lo,n.hi);return i?"-"+r:r}function ZP(t,e){if({lo:t,hi:e}=xB(t,e),e<=2097151)return String(Eu*e+t);const n=t&16777215,i=(t>>>24|e<<8)&16777215,r=e>>16&65535;let s=n+i*6777216+r*6710656,o=i+r*8147497,a=r*2;const l=1e7;return s>=l&&(o+=Math.floor(s/l),s%=l),o>=l&&(a+=Math.floor(o/l),o%=l),a.toString()+mS(o)+mS(s)}function xB(t,e){return{lo:t>>>0,hi:e>>>0}}function my(t,e){return{lo:t|0,hi:e|0}}function eR(t,e){return e=~e,t?t=~t+1:e+=1,my(t,e)}const mS=t=>{const e=String(t);return"0000000".slice(e.length)+e};function gS(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function SB(){let t=this.buf[this.pos++],e=t&127;if(!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,!(t&128))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;t&128&&n<10;n++)t=this.buf[this.pos++];if(t&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function TB(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof fS!="object"||fS.BUF_BIGINT_DISABLE!=="1")){const r=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),o=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(l){const c=typeof l=="bigint"?l:BigInt(l);if(c>s||c<r)throw new Error("int64 invalid: ".concat(l));return c},uParse(l){const c=typeof l=="bigint"?l:BigInt(l);if(c>a||c<o)throw new Error("uint64 invalid: ".concat(l));return c},enc(l){return t.setBigInt64(0,this.parse(l),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(l){return t.setBigInt64(0,this.uParse(l),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(l,c){return t.setInt32(0,l,!0),t.setInt32(4,c,!0),t.getBigInt64(0,!0)},uDec(l,c){return t.setInt32(0,l,!0),t.setInt32(4,c,!0),t.getBigUint64(0,!0)}}}const n=r=>Je(/^-?[0-9]+$/.test(r),"int64 invalid: ".concat(r)),i=r=>Je(/^[0-9]+$/.test(r),"uint64 invalid: ".concat(r));return{zero:"0",supported:!1,parse(r){return typeof r!="string"&&(r=r.toString()),n(r),r},uParse(r){return typeof r!="string"&&(r=r.toString()),i(r),r},enc(r){return typeof r!="string"&&(r=r.toString()),n(r),pS(r)},uEnc(r){return typeof r!="string"&&(r=r.toString()),i(r),pS(r)},dec(r,s){return bB(r,s)},uDec(r,s){return ZP(r,s)}}}const Ve=TB();var F;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(F||(F={}));var ls;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(ls||(ls={}));function wr(t,e,n){if(e===n)return!0;if(t==F.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==n[i])return!1;return!0}switch(t){case F.UINT64:case F.FIXED64:case F.INT64:case F.SFIXED64:case F.SINT64:return e==n}return!1}function va(t,e){switch(t){case F.BOOL:return!1;case F.UINT64:case F.FIXED64:case F.INT64:case F.SFIXED64:case F.SINT64:return e==0?Ve.zero:"0";case F.DOUBLE:case F.FLOAT:return 0;case F.BYTES:return new Uint8Array(0);case F.STRING:return"";default:return 0}}function tR(t,e){switch(t){case F.BOOL:return e===!1;case F.STRING:return e==="";case F.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var it;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(it||(it={}));class kB{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let r=0;r<this.chunks.length;r++)e+=this.chunks[r].length;let n=new Uint8Array(e),i=0;for(let r=0;r<this.chunks.length;r++)n.set(this.chunks[r],i),i+=this.chunks[r].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Am(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return Cu(e),gS(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){KP(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){Am(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){Cu(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return Cu(e),e=(e<<1^e>>31)>>>0,gS(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),i=new DataView(n.buffer),r=Ve.enc(e);return i.setInt32(0,r.lo,!0),i.setInt32(4,r.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),i=new DataView(n.buffer),r=Ve.uEnc(e);return i.setInt32(0,r.lo,!0),i.setInt32(4,r.hi,!0),this.raw(n)}int64(e){let n=Ve.enc(e);return jh(n.lo,n.hi,this.buf),this}sint64(e){let n=Ve.enc(e),i=n.hi>>31,r=n.lo<<1^i,s=(n.hi<<1|n.lo>>>31)^i;return jh(r,s,this.buf),this}uint64(e){let n=Ve.uEnc(e);return jh(n.lo,n.hi,this.buf),this}}class wB{constructor(e,n){this.varint64=yB,this.uint32=SB,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,i=e&7;if(n<=0||i<0||i>5)throw new Error("illegal tag: field no "+n+" wire type "+i);return[n,i]}skip(e,n){let i=this.pos;switch(e){case it.Varint:for(;this.buf[this.pos++]&128;);break;case it.Bit64:this.pos+=4;case it.Bit32:this.pos+=4;break;case it.LengthDelimited:let r=this.uint32();this.pos+=r;break;case it.StartGroup:for(;;){const[s,o]=this.tag();if(o===it.EndGroup){if(n!==void 0&&s!==n)throw new Error("invalid end group tag");break}this.skip(o,s)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return Ve.dec(...this.varint64())}uint64(){return Ve.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),i=-(e&1);return e=(e>>>1|(n&1)<<31)^i,n=n>>>1^i,Ve.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Ve.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Ve.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function CB(t,e,n,i){let r;return{typeName:e,extendee:n,get field(){if(!r){const s=typeof i=="function"?i():i;s.name=e.split(".").pop(),s.jsonName="[".concat(e,"]"),r=t.util.newFieldList([s]).list()[0]}return r},runtime:t}}function nR(t){const e=t.field.localName,n=Object.create(null);return n[e]=EB(t),[n,()=>n[e]]}function EB(t){const e=t.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return va(e.T,e.L);case"message":const n=e.T,i=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(i):i;case"map":throw"map fields are not allowed to be extensions"}}function PB(t,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let n=t.length-1;n>=0;--n)if(t[n].no==e.no)return[t[n]];return[]}return t.filter(n=>n.no===e.no)}let nr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),kf=[];for(let t=0;t<nr.length;t++)kf[nr[t].charCodeAt(0)]=t;kf[45]=nr.indexOf("+");kf[95]=nr.indexOf("/");const iR={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),i=0,r=0,s,o=0;for(let a=0;a<t.length;a++){if(s=kf[t.charCodeAt(a)],s===void 0)switch(t[a]){case"=":r=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(r){case 0:o=s,r=1;break;case 1:n[i++]=o<<2|(s&48)>>4,o=s,r=2;break;case 2:n[i++]=(o&15)<<4|(s&60)>>2,o=s,r=3;break;case 3:n[i++]=(o&3)<<6|s,r=0;break}}if(r==1)throw Error("invalid base64 string.");return n.subarray(0,i)},enc(t){let e="",n=0,i,r=0;for(let s=0;s<t.length;s++)switch(i=t[s],n){case 0:e+=nr[i>>2],r=(i&3)<<4,n=1;break;case 1:e+=nr[r|i>>4],r=(i&15)<<2,n=2;break;case 2:e+=nr[r|i>>6],e+=nr[i&63],n=0;break}return n&&(e+=nr[r],e+="=",n==1&&(e+="=")),e}};function RB(t,e,n){sR(e,t);const i=e.runtime.bin.makeReadOptions(n),r=PB(t.getType().runtime.bin.listUnknownFields(t),e.field),[s,o]=nR(e);for(const a of r)e.runtime.bin.readField(s,i.readerFactory(a.data),e.field,a.wireType,i);return o()}function _B(t,e,n,i){sR(e,t);const r=e.runtime.bin.makeReadOptions(i),s=e.runtime.bin.makeWriteOptions(i);if(rR(t,e)){const c=t.getType().runtime.bin.listUnknownFields(t).filter(u=>u.no!=e.field.no);t.getType().runtime.bin.discardUnknownFields(t);for(const u of c)t.getType().runtime.bin.onUnknownField(t,u.no,u.wireType,u.data)}const o=s.writerFactory();let a=e.field;!a.opt&&!a.repeated&&(a.kind=="enum"||a.kind=="scalar")&&(a=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(a,n,o,s);const l=r.readerFactory(o.finish());for(;l.pos<l.len;){const[c,u]=l.tag(),d=l.skip(u,c);t.getType().runtime.bin.onUnknownField(t,c,u,d)}}function rR(t,e){const n=t.getType();return e.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(t).find(i=>i.no==e.field.no)}function sR(t,e){Je(t.extendee.typeName==e.getType().typeName,"extension ".concat(t.typeName," can only be applied to message ").concat(t.extendee.typeName))}function oR(t,e){const n=t.localName;if(t.repeated)return e[n].length>0;if(t.oneof)return e[t.oneof.localName].case===n;switch(t.kind){case"enum":case"scalar":return t.opt||t.req?e[n]!==void 0:t.kind=="enum"?e[n]!==t.T.values[0].no:!tR(t.T,e[n]);case"message":return e[n]!==void 0;case"map":return Object.keys(e[n]).length>0}}function vS(t,e){const n=t.localName,i=!t.opt&&!t.req;if(t.repeated)e[n]=[];else if(t.oneof)e[t.oneof.localName]={case:void 0};else switch(t.kind){case"map":e[n]={};break;case"enum":e[n]=i?t.T.values[0].no:void 0;break;case"scalar":e[n]=i?va(t.T,t.L):void 0;break;case"message":e[n]=void 0;break}}function ir(t,e){if(t===null||typeof t!="object"||!Object.getOwnPropertyNames(py.prototype).every(i=>i in t&&typeof t[i]=="function"))return!1;const n=t.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:e===void 0?!0:n.typeName==e.typeName}function aR(t,e){return ir(e)||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}F.DOUBLE,F.FLOAT,F.INT64,F.UINT64,F.INT32,F.UINT32,F.BOOL,F.STRING,F.BYTES;const yS={ignoreUnknownFields:!1},bS={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function AB(t){return t?Object.assign(Object.assign({},yS),t):yS}function NB(t){return t?Object.assign(Object.assign({},bS),t):bS}const kd=Symbol(),Pu=Symbol();function IB(){return{makeReadOptions:AB,makeWriteOptions:NB,readMessage(t,e,n,i){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error("cannot decode message ".concat(t.typeName," from JSON: ").concat(Ti(e)));i=i??new t;const r=new Map,s=n.typeRegistry;for(const[o,a]of Object.entries(e)){const l=t.fields.findJsonName(o);if(l){if(l.oneof){if(a===null&&l.kind=="scalar")continue;const c=r.get(l.oneof);if(c!==void 0)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: multiple keys for oneof "').concat(l.oneof.name,'" present: "').concat(c,'", "').concat(o,'"'));r.set(l.oneof,o)}xS(i,a,l,n,t)}else{let c=!1;if(s!=null&&s.findExtension&&o.startsWith("[")&&o.endsWith("]")){const u=s.findExtension(o.substring(1,o.length-1));if(u&&u.extendee.typeName==t.typeName){c=!0;const[d,f]=nR(u);xS(d,a,u.field,n,u),_B(i,u,f(),n)}}if(!c&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: key "').concat(o,'" is unknown'))}}return i},writeMessage(t,e){const n=t.getType(),i={};let r;try{for(r of n.fields.byNumber()){if(!oR(r,t)){if(r.req)throw"required field not set";if(!e.emitDefaultValues||!MB(r))continue}const o=r.oneof?t[r.oneof.localName].value:t[r.localName],a=SS(r,o,e);a!==void 0&&(i[e.useProtoFieldName?r.name:r.jsonName]=a)}const s=e.typeRegistry;if(s!=null&&s.findExtensionFor)for(const o of n.runtime.bin.listUnknownFields(t)){const a=s.findExtensionFor(n.typeName,o.no);if(a&&rR(t,a)){const l=RB(t,a,e),c=SS(a.field,l,e);c!==void 0&&(i[a.field.jsonName]=c)}}}catch(s){const o=r?"cannot encode field ".concat(n.typeName,".").concat(r.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),a=s instanceof Error?s.message:String(s);throw new Error(o+(a.length>0?": ".concat(a):""))}return i},readScalar(t,e,n){return kl(t,e,n??ls.BIGINT,!0)},writeScalar(t,e,n){if(e!==void 0&&(n||tR(t,e)))return Ru(t,e)},debug:Ti}}function Ti(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":'"'.concat(t.split('"').join('\\"'),'"');default:return String(t)}}function xS(t,e,n,i,r){let s=n.localName;if(n.repeated){if(Je(n.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Ti(e)));const o=t[s];for(const a of e){if(a===null)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Ti(a)));switch(n.kind){case"message":o.push(n.T.fromJson(a,i));break;case"enum":const l=Fh(n.T,a,i.ignoreUnknownFields,!0);l!==Pu&&o.push(l);break;case"scalar":try{o.push(kl(n.T,a,n.L,!0))}catch(c){let u="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Ti(a));throw c instanceof Error&&c.message.length>0&&(u+=": ".concat(c.message)),new Error(u)}break}}}else if(n.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Ti(e)));const o=t[s];for(const[a,l]of Object.entries(e)){if(l===null)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: map value null"));let c;try{c=OB(n.K,a)}catch(u){let d="cannot decode map key for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Ti(e));throw u instanceof Error&&u.message.length>0&&(d+=": ".concat(u.message)),new Error(d)}switch(n.V.kind){case"message":o[c]=n.V.T.fromJson(l,i);break;case"enum":const u=Fh(n.V.T,l,i.ignoreUnknownFields,!0);u!==Pu&&(o[c]=u);break;case"scalar":try{o[c]=kl(n.V.T,l,ls.BIGINT,!0)}catch(d){let f="cannot decode map value for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Ti(e));throw d instanceof Error&&d.message.length>0&&(f+=": ".concat(d.message)),new Error(f)}break}}}else switch(n.oneof&&(t=t[n.oneof.localName]={case:s},s="value"),n.kind){case"message":const o=n.T;if(e===null&&o.typeName!="google.protobuf.Value")return;let a=t[s];ir(a)?a.fromJson(e,i):(t[s]=a=o.fromJson(e,i),o.fieldWrapper&&!n.oneof&&(t[s]=o.fieldWrapper.unwrapField(a)));break;case"enum":const l=Fh(n.T,e,i.ignoreUnknownFields,!1);switch(l){case kd:vS(n,t);break;case Pu:break;default:t[s]=l;break}break;case"scalar":try{const c=kl(n.T,e,n.L,!1);switch(c){case kd:vS(n,t);break;default:t[s]=c;break}}catch(c){let u="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Ti(e));throw c instanceof Error&&c.message.length>0&&(u+=": ".concat(c.message)),new Error(u)}break}}function OB(t,e){if(t===F.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return kl(t,e,ls.BIGINT,!0).toString()}function kl(t,e,n,i){if(e===null)return i?va(t,n):kd;switch(t){case F.DOUBLE:case F.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const r=Number(e);if(Number.isNaN(r)||!Number.isFinite(r))break;return t==F.FLOAT&&KP(r),r;case F.INT32:case F.FIXED32:case F.SFIXED32:case F.SINT32:case F.UINT32:let s;if(typeof e=="number"?s=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(s=Number(e)),s===void 0)break;return t==F.UINT32||t==F.FIXED32?Am(s):Cu(s),s;case F.INT64:case F.SFIXED64:case F.SINT64:if(typeof e!="number"&&typeof e!="string")break;const o=Ve.parse(e);return n?o.toString():o;case F.FIXED64:case F.UINT64:if(typeof e!="number"&&typeof e!="string")break;const a=Ve.uParse(e);return n?a.toString():a;case F.BOOL:if(typeof e!="boolean")break;return e;case F.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case F.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return iR.dec(e)}throw new Error}function Fh(t,e,n,i){if(e===null)return t.typeName=="google.protobuf.NullValue"?0:i?t.values[0].no:kd;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const r=t.findName(e);if(r!==void 0)return r.no;if(n)return Pu;break}throw new Error("cannot decode enum ".concat(t.typeName," from JSON: ").concat(Ti(e)))}function MB(t){return t.repeated||t.kind=="map"?!0:!(t.oneof||t.kind=="message"||t.opt||t.req)}function SS(t,e,n){if(t.kind=="map"){Je(typeof e=="object"&&e!=null);const i={},r=Object.entries(e);switch(t.V.kind){case"scalar":for(const[o,a]of r)i[o.toString()]=Ru(t.V.T,a);break;case"message":for(const[o,a]of r)i[o.toString()]=a.toJson(n);break;case"enum":const s=t.V.T;for(const[o,a]of r)i[o.toString()]=Uh(s,a,n.enumAsInteger);break}return n.emitDefaultValues||r.length>0?i:void 0}if(t.repeated){Je(Array.isArray(e));const i=[];switch(t.kind){case"scalar":for(let r=0;r<e.length;r++)i.push(Ru(t.T,e[r]));break;case"enum":for(let r=0;r<e.length;r++)i.push(Uh(t.T,e[r],n.enumAsInteger));break;case"message":for(let r=0;r<e.length;r++)i.push(e[r].toJson(n));break}return n.emitDefaultValues||i.length>0?i:void 0}switch(t.kind){case"scalar":return Ru(t.T,e);case"enum":return Uh(t.T,e,n.enumAsInteger);case"message":return aR(t.T,e).toJson(n)}}function Uh(t,e,n){var i;if(Je(typeof e=="number"),t.typeName=="google.protobuf.NullValue")return null;if(n)return e;const r=t.findNumber(e);return(i=r==null?void 0:r.name)!==null&&i!==void 0?i:e}function Ru(t,e){switch(t){case F.INT32:case F.SFIXED32:case F.SINT32:case F.FIXED32:case F.UINT32:return Je(typeof e=="number"),e;case F.FLOAT:case F.DOUBLE:return Je(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case F.STRING:return Je(typeof e=="string"),e;case F.BOOL:return Je(typeof e=="boolean"),e;case F.UINT64:case F.FIXED64:case F.INT64:case F.SFIXED64:case F.SINT64:return Je(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case F.BYTES:return Je(e instanceof Uint8Array),iR.enc(e)}}const uo=Symbol("@bufbuild/protobuf/unknown-fields"),TS={readUnknownFields:!0,readerFactory:t=>new wB(t)},kS={writeUnknownFields:!0,writerFactory:()=>new kB};function DB(t){return t?Object.assign(Object.assign({},TS),t):TS}function LB(t){return t?Object.assign(Object.assign({},kS),t):kS}function jB(){return{makeReadOptions:DB,makeWriteOptions:LB,listUnknownFields(t){var e;return(e=t[uo])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[uo]},writeUnknownFields(t,e){const i=t[uo];if(i)for(const r of i)e.tag(r.no,r.wireType).raw(r.data)},onUnknownField(t,e,n,i){const r=t;Array.isArray(r[uo])||(r[uo]=[]),r[uo].push({no:e,wireType:n,data:i})},readMessage(t,e,n,i,r){const s=t.getType(),o=r?e.len:e.pos+n;let a,l;for(;e.pos<o&&([a,l]=e.tag(),!(r===!0&&l==it.EndGroup));){const c=s.fields.find(a);if(!c){const u=e.skip(l,a);i.readUnknownFields&&this.onUnknownField(t,a,l,u);continue}wS(t,e,c,l,i)}if(r&&(l!=it.EndGroup||a!==n))throw new Error("invalid end group tag")},readField:wS,writeMessage(t,e,n){const i=t.getType();for(const r of i.fields.byNumber()){if(!oR(r,t)){if(r.req)throw new Error("cannot encode field ".concat(i.typeName,".").concat(r.name," to binary: required field not set"));continue}const s=r.oneof?t[r.oneof.localName].value:t[r.localName];CS(r,s,e,n)}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e},writeField(t,e,n,i){e!==void 0&&CS(t,e,n,i)}}}function wS(t,e,n,i,r){let{repeated:s,localName:o}=n;switch(n.oneof&&(t=t[n.oneof.localName],t.case!=o&&delete t.value,t.case=o,o="value"),n.kind){case"scalar":case"enum":const a=n.kind=="enum"?F.INT32:n.T;let l=wd;if(n.kind=="scalar"&&n.L>0&&(l=UB),s){let f=t[o];if(i==it.LengthDelimited&&a!=F.STRING&&a!=F.BYTES){let v=e.uint32()+e.pos;for(;e.pos<v;)f.push(l(e,a))}else f.push(l(e,a))}else t[o]=l(e,a);break;case"message":const c=n.T;s?t[o].push(_u(e,new c,r,n)):ir(t[o])?_u(e,t[o],r,n):(t[o]=_u(e,new c,r,n),c.fieldWrapper&&!n.oneof&&!n.repeated&&(t[o]=c.fieldWrapper.unwrapField(t[o])));break;case"map":let[u,d]=FB(n,e,r);t[o][u]=d;break}}function _u(t,e,n,i){const r=e.getType().runtime.bin,s=i==null?void 0:i.delimited;return r.readMessage(e,t,s?i.no:t.uint32(),n,s),e}function FB(t,e,n){const i=e.uint32(),r=e.pos+i;let s,o;for(;e.pos<r;){const[a]=e.tag();switch(a){case 1:s=wd(e,t.K);break;case 2:switch(t.V.kind){case"scalar":o=wd(e,t.V.T);break;case"enum":o=e.int32();break;case"message":o=_u(e,new t.V.T,n,void 0);break}break}}if(s===void 0&&(s=va(t.K,ls.BIGINT)),typeof s!="string"&&typeof s!="number"&&(s=s.toString()),o===void 0)switch(t.V.kind){case"scalar":o=va(t.V.T,ls.BIGINT);break;case"enum":o=t.V.T.values[0].no;break;case"message":o=new t.V.T;break}return[s,o]}function UB(t,e){const n=wd(t,e);return typeof n=="bigint"?n.toString():n}function wd(t,e){switch(e){case F.STRING:return t.string();case F.BOOL:return t.bool();case F.DOUBLE:return t.double();case F.FLOAT:return t.float();case F.INT32:return t.int32();case F.INT64:return t.int64();case F.UINT64:return t.uint64();case F.FIXED64:return t.fixed64();case F.BYTES:return t.bytes();case F.FIXED32:return t.fixed32();case F.SFIXED32:return t.sfixed32();case F.SFIXED64:return t.sfixed64();case F.SINT64:return t.sint64();case F.UINT32:return t.uint32();case F.SINT32:return t.sint32()}}function CS(t,e,n,i){Je(e!==void 0);const r=t.repeated;switch(t.kind){case"scalar":case"enum":let s=t.kind=="enum"?F.INT32:t.T;if(r)if(Je(Array.isArray(e)),t.packed)VB(n,s,t.no,e);else for(const o of e)wl(n,s,t.no,o);else wl(n,s,t.no,e);break;case"message":if(r){Je(Array.isArray(e));for(const o of e)ES(n,i,t,o)}else ES(n,i,t,e);break;case"map":Je(typeof e=="object"&&e!=null);for(const[o,a]of Object.entries(e))BB(n,i,t,o,a);break}}function BB(t,e,n,i,r){t.tag(n.no,it.LengthDelimited),t.fork();let s=i;switch(n.K){case F.INT32:case F.FIXED32:case F.UINT32:case F.SFIXED32:case F.SINT32:s=Number.parseInt(i);break;case F.BOOL:Je(i=="true"||i=="false"),s=i=="true";break}switch(wl(t,n.K,1,s),n.V.kind){case"scalar":wl(t,n.V.T,2,r);break;case"enum":wl(t,F.INT32,2,r);break;case"message":Je(r!==void 0),t.tag(2,it.LengthDelimited).bytes(r.toBinary(e));break}t.join()}function ES(t,e,n,i){const r=aR(n.T,i);n.delimited?t.tag(n.no,it.StartGroup).raw(r.toBinary(e)).tag(n.no,it.EndGroup):t.tag(n.no,it.LengthDelimited).bytes(r.toBinary(e))}function wl(t,e,n,i){Je(i!==void 0);let[r,s]=lR(e);t.tag(n,r)[s](i)}function VB(t,e,n,i){if(!i.length)return;t.tag(n,it.LengthDelimited).fork();let[,r]=lR(e);for(let s=0;s<i.length;s++)t[r](i[s]);t.join()}function lR(t){let e=it.Varint;switch(t){case F.BYTES:case F.STRING:e=it.LengthDelimited;break;case F.DOUBLE:case F.FIXED64:case F.SFIXED64:e=it.Bit64;break;case F.FIXED32:case F.SFIXED32:case F.FLOAT:e=it.Bit32;break}const n=F[t].toLowerCase();return[e,n]}function zB(){return{setEnumType:QP,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const i of n.fields.byMember()){const r=i.localName,s=e,o=t;if(o[r]!=null)switch(i.kind){case"oneof":const a=o[r].case;if(a===void 0)continue;const l=i.findField(a);let c=o[r].value;l&&l.kind=="message"&&!ir(c,l.T)?c=new l.T(c):l&&l.kind==="scalar"&&l.T===F.BYTES&&(c=$a(c)),s[r]={case:a,value:c};break;case"scalar":case"enum":let u=o[r];i.T===F.BYTES&&(u=i.repeated?u.map($a):$a(u)),s[r]=u;break;case"map":switch(i.V.kind){case"scalar":case"enum":if(i.V.T===F.BYTES)for(const[h,v]of Object.entries(o[r]))s[r][h]=$a(v);else Object.assign(s[r],o[r]);break;case"message":const f=i.V.T;for(const h of Object.keys(o[r])){let v=o[r][h];f.fieldWrapper||(v=new f(v)),s[r][h]=v}break}break;case"message":const d=i.T;if(i.repeated)s[r]=o[r].map(f=>ir(f,d)?f:new d(f));else{const f=o[r];d.fieldWrapper?d.typeName==="google.protobuf.BytesValue"?s[r]=$a(f):s[r]=f:s[r]=ir(f,d)?f:new d(f)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(i=>{const r=e[i.localName],s=n[i.localName];if(i.repeated){if(r.length!==s.length)return!1;switch(i.kind){case"message":return r.every((o,a)=>i.T.equals(o,s[a]));case"scalar":return r.every((o,a)=>wr(i.T,o,s[a]));case"enum":return r.every((o,a)=>wr(F.INT32,o,s[a]))}throw new Error("repeated cannot contain ".concat(i.kind))}switch(i.kind){case"message":let o=r,a=s;return i.T.fieldWrapper&&(o!==void 0&&!ir(o)&&(o=i.T.fieldWrapper.wrapField(o)),a!==void 0&&!ir(a)&&(a=i.T.fieldWrapper.wrapField(a))),i.T.equals(o,a);case"enum":return wr(F.INT32,r,s);case"scalar":return wr(i.T,r,s);case"oneof":if(r.case!==s.case)return!1;const l=i.findField(r.case);if(l===void 0)return!0;switch(l.kind){case"message":return l.T.equals(r.value,s.value);case"enum":return wr(F.INT32,r.value,s.value);case"scalar":return wr(l.T,r.value,s.value)}throw new Error("oneof cannot contain ".concat(l.kind));case"map":const c=Object.keys(r).concat(Object.keys(s));switch(i.V.kind){case"message":const u=i.V.T;return c.every(f=>u.equals(r[f],s[f]));case"enum":return c.every(f=>wr(F.INT32,r[f],s[f]));case"scalar":const d=i.V.T;return c.every(f=>wr(d,r[f],s[f]))}break}})},clone(t){const e=t.getType(),n=new e,i=n;for(const r of e.fields.byMember()){const s=t[r.localName];let o;if(r.repeated)o=s.map(eu);else if(r.kind=="map"){o=i[r.localName];for(const[a,l]of Object.entries(s))o[a]=eu(l)}else r.kind=="oneof"?o=r.findField(s.case)?{case:s.case,value:eu(s.value)}:{case:void 0}:o=eu(s);i[r.localName]=o}for(const r of e.runtime.bin.listUnknownFields(t))e.runtime.bin.onUnknownField(i,r.no,r.wireType,r.data);return n}}}function eu(t){if(t===void 0)return t;if(ir(t))return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function $a(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function $B(t,e,n){return{syntax:t,json:IB(),bin:jB(),util:Object.assign(Object.assign({},zB()),{newFieldList:e,initFields:n}),makeMessageType(i,r,s){return vB(this,i,r,s)},makeEnum:gB,makeEnumType:XP,getEnumType:mB,makeExtension(i,r,s){return CB(this,i,r,s)}}}class WB{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const i of this.list())n[i.jsonName]=n[i.name]=i;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const i of this.list())n[i.no]=i;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const i of this.list())i.oneof?i.oneof!==n&&(n=i.oneof,e.push(n)):e.push(i)}return this.members}}function cR(t,e){const n=uR(t);return e?n:QB(YB(n))}function HB(t){return cR(t,!1)}const qB=uR;function uR(t){let e=!1;const n=[];for(let i=0;i<t.length;i++){let r=t.charAt(i);switch(r){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(r),e=!1;break;default:e&&(e=!1,r=r.toUpperCase()),n.push(r);break}}return n.join("")}const GB=new Set(["constructor","toString","toJSON","valueOf"]),KB=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),dR=t=>"".concat(t,"$"),YB=t=>KB.has(t)?dR(t):t,QB=t=>GB.has(t)?dR(t):t;class XB{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=HB(e)}addField(e){Je(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}function JB(t,e){var n,i,r,s,o,a;const l=[];let c;for(const u of typeof t=="function"?t():t){const d=u;if(d.localName=cR(u.name,u.oneof!==void 0),d.jsonName=(n=u.jsonName)!==null&&n!==void 0?n:qB(u.name),d.repeated=(i=u.repeated)!==null&&i!==void 0?i:!1,u.kind=="scalar"&&(d.L=(r=u.L)!==null&&r!==void 0?r:ls.BIGINT),d.delimited=(s=u.delimited)!==null&&s!==void 0?s:!1,d.req=(o=u.req)!==null&&o!==void 0?o:!1,d.opt=(a=u.opt)!==null&&a!==void 0?a:!1,u.packed===void 0&&(d.packed=u.kind=="enum"||u.kind=="scalar"&&u.T!=F.BYTES&&u.T!=F.STRING),u.oneof!==void 0){const f=typeof u.oneof=="string"?u.oneof:u.oneof.name;(!c||c.name!=f)&&(c=new XB(f)),d.oneof=c,c.addField(d)}l.push(d)}return l}const N=$B("proto3",t=>new WB(t,e=>JB(e)),t=>{for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,i=t;if(e.repeated){i[n]=[];continue}switch(e.kind){case"oneof":i[n]={case:void 0};break;case"enum":i[n]=0;break;case"map":i[n]={};break;case"scalar":i[n]=va(e.T,e.L);break}}});class an extends py{constructor(e){super(),this.seconds=Ve.zero,this.nanos=0,N.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(N.json.debug(e)));const i=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const r=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(r))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Ve.parse(r/1e3),this.nanos=0,i[7]&&(this.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let i="Z";if(this.nanos>0){const r=(this.nanos+1e9).toString().substring(1);r.substring(3)==="000000"?i="."+r.substring(0,3)+"Z":r.substring(6)==="000"?i="."+r.substring(0,6)+"Z":i="."+r+"Z"}return new Date(n).toISOString().replace(".000Z",i)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return an.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new an({seconds:Ve.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new an().fromBinary(e,n)}static fromJson(e,n){return new an().fromJson(e,n)}static fromJsonString(e,n){return new an().fromJsonString(e,n)}static equals(e,n){return N.util.equals(an,e,n)}}an.runtime=N;an.typeName="google.protobuf.Timestamp";an.fields=N.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const ZB=N.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:an},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:eV,repeated:!0},{no:5,name:"events",kind:"message",T:nV,repeated:!0}]),eV=N.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:tV,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),tV=N.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:an},{no:3,name:"value",kind:"scalar",T:2}]),nV=N.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:an},{no:7,name:"normalized_end_timestamp",kind:"message",T:an,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),fR=N.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),ri=N.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),st=N.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),gy=N.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),al=N.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),nc=N.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),oi=N.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),fo=N.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),iV=N.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),mt=N.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),wf=N.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:Cd,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:CR}]),Cd=N.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),rV=N.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:N.getEnumType(st),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),Hs=N.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:N.getEnumType(Ho)},{no:4,name:"tracks",kind:"message",T:Oo,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:rV},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:N.getEnumType(ic)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:N.getEnumType(oi)},{no:18,name:"kind_details",kind:"enum",T:N.getEnumType(sV),repeated:!0}]),Ho=N.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),ic=N.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]),sV=N.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),bn=N.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),oV=N.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:js,repeated:!0}]),Oo=N.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:N.getEnumType(ri)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:N.getEnumType(st)},{no:10,name:"layers",kind:"message",T:js,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:oV,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:N.getEnumType(bn)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:CR},{no:19,name:"audio_features",kind:"enum",T:N.getEnumType(mt),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:N.getEnumType(fR)}]),js=N.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:N.getEnumType(gy)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13},{no:6,name:"spatial_layer",kind:"scalar",T:5},{no:7,name:"rid",kind:"scalar",T:9}]),rn=N.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:N.getEnumType(he)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:pR,oneof:"value"},{no:3,name:"speaker",kind:"message",T:aV,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:mR,oneof:"value"},{no:7,name:"transcription",kind:"message",T:lV,oneof:"value"},{no:8,name:"metrics",kind:"message",T:ZB,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:Nm,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:gR,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:vR,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:yR,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:Om,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:Mm,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:Dm,oneof:"value"},{no:16,name:"sequence",kind:"scalar",T:13},{no:17,name:"participant_sid",kind:"scalar",T:9}]),he=N.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),aV=N.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:hR,repeated:!0}]),hR=N.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),pR=N.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),mR=N.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),lV=N.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:cV,repeated:!0}]),cV=N.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),Nm=N.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),gR=N.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),vR=N.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),yR=N.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:bR,oneof:"value"}]),bR=N.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),xR=N.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),SR=N.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:N.getEnumType(TR)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),TR=N.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),uV=N.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:N.getEnumType(kR)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),kR=N.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"},{no:14,name:"ESP32"}]),wR=N.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:PS},{no:2,name:"screen",kind:"message",T:PS},{no:3,name:"resume_connection",kind:"enum",T:N.getEnumType(nc)},{no:4,name:"disabled_codecs",kind:"message",T:dV},{no:5,name:"force_relay",kind:"enum",T:N.getEnumType(nc)}]),PS=N.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:N.getEnumType(nc)}]),dV=N.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:Cd,repeated:!0},{no:2,name:"publish",kind:"message",T:Cd,repeated:!0}]),CR=N.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),Im=N.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),ER=N.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:N.getEnumType(Im)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),PR=N.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),Om=N.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:N.getEnumType(bn)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:ER,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:PR,oneof:"content_header"}],{localName:"DataStream_Header"}),Mm=N.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),Dm=N.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),si=N.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),Lm=N.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),fV=N.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),hV=N.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:qs,oneof:"message"},{no:2,name:"answer",kind:"message",T:qs,oneof:"message"},{no:3,name:"trickle",kind:"message",T:vy,oneof:"message"},{no:4,name:"add_track",kind:"message",T:Fm,oneof:"message"},{no:5,name:"mute",kind:"message",T:yy,oneof:"message"},{no:6,name:"subscription",kind:"message",T:Cf,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:RR,oneof:"message"},{no:8,name:"leave",kind:"message",T:Ef,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:AR,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:MR,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:DR,oneof:"message"},{no:13,name:"simulate",kind:"message",T:xi,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:NR,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:FR,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:_R,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:yV,oneof:"message"}]),RS=N.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:pV,oneof:"message"},{no:2,name:"answer",kind:"message",T:qs,oneof:"message"},{no:3,name:"offer",kind:"message",T:qs,oneof:"message"},{no:4,name:"trickle",kind:"message",T:vy,oneof:"message"},{no:5,name:"update",kind:"message",T:vV,oneof:"message"},{no:6,name:"track_published",kind:"message",T:by,oneof:"message"},{no:8,name:"leave",kind:"message",T:Ef,oneof:"message"},{no:9,name:"mute",kind:"message",T:yy,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:bV,oneof:"message"},{no:11,name:"room_update",kind:"message",T:xV,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:TV,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:wV,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:EV,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:PV,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:gV,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:mV,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:_V,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:IV,oneof:"message"},{no:22,name:"request_response",kind:"message",T:OV,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:MV,oneof:"message"},{no:24,name:"room_moved",kind:"message",T:RV,oneof:"message"}]),jm=N.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]),Fm=N.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:N.getEnumType(ri)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:N.getEnumType(st)},{no:9,name:"layers",kind:"message",T:js,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:jm,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:N.getEnumType(bn)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:N.getEnumType(fR)},{no:17,name:"audio_features",kind:"enum",T:N.getEnumType(mt),repeated:!0}]),vy=N.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:N.getEnumType(si)},{no:3,name:"final",kind:"scalar",T:8}]),yy=N.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),pV=N.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:wf},{no:2,name:"participant",kind:"message",T:Hs},{no:3,name:"other_participants",kind:"message",T:Hs,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:IR,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:wR},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:SR},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:Cd,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),mV=N.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:IR,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:wR},{no:3,name:"server_info",kind:"message",T:SR},{no:4,name:"last_message_seq",kind:"scalar",T:13}]),by=N.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:Oo}]),gV=N.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),qs=N.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"id",kind:"scalar",T:13}]),vV=N.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:Hs,repeated:!0}]),Cf=N.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:xR,repeated:!0}]),RR=N.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:N.getEnumType(gy)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),_R=N.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:N.getEnumType(mt),repeated:!0}]),yV=N.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),Ef=N.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:N.getEnumType(oi)},{no:3,name:"action",kind:"enum",T:N.getEnumType(qo)},{no:4,name:"regions",kind:"message",T:AV}]),qo=N.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),AR=N.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:js,repeated:!0}]),NR=N.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),IR=N.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),bV=N.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:hR,repeated:!0}]),xV=N.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:wf}]),SV=N.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:N.getEnumType(al)},{no:3,name:"score",kind:"scalar",T:2}]),TV=N.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:SV,repeated:!0}]),kV=N.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:N.getEnumType(Lm)}]),wV=N.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:kV,repeated:!0}]),xy=N.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:N.getEnumType(gy)},{no:2,name:"enabled",kind:"scalar",T:8}]),CV=N.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:xy,repeated:!0}]),EV=N.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:xy,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:CV,repeated:!0}]),OR=N.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),MR=N.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:OR,repeated:!0}]),PV=N.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),RV=N.makeMessageType("livekit.RoomMovedResponse",()=>[{no:1,name:"room",kind:"message",T:wf},{no:2,name:"token",kind:"scalar",T:9},{no:3,name:"participant",kind:"message",T:Hs},{no:4,name:"other_participants",kind:"message",T:Hs,repeated:!0}]),DR=N.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:qs},{no:2,name:"subscription",kind:"message",T:Cf},{no:3,name:"publish_tracks",kind:"message",T:by,repeated:!0},{no:4,name:"data_channels",kind:"message",T:jR,repeated:!0},{no:5,name:"offer",kind:"message",T:qs},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0},{no:7,name:"datachannel_receive_states",kind:"message",T:LR,repeated:!0}]),LR=N.makeMessageType("livekit.DataChannelReceiveState",()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}]),jR=N.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:N.getEnumType(si)}]),xi=N.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:N.getEnumType(fV),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),FR=N.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),_V=N.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),AV=N.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:NV,repeated:!0}]),NV=N.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),IV=N.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:N.getEnumType(iV)}]),OV=N.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:N.getEnumType(Sy)},{no:3,name:"message",kind:"scalar",T:9}]),Sy=N.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"}]),MV=N.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);function DV(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Au={exports:{}},LV=Au.exports,_S;function jV(){return _S||(_S=1,function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(LV,function(){var e=function(){},n="undefined",i=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],s={},o=null;function a(m,b){var p=m[b];if(typeof p.bind=="function")return p.bind(m);try{return Function.prototype.bind.call(p,m)}catch{return function(){return Function.prototype.apply.apply(p,[m,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(m){return m==="debug"&&(m="log"),typeof console===n?!1:m==="trace"&&i?l:console[m]!==void 0?a(console,m):console.log!==void 0?a(console,"log"):e}function u(){for(var m=this.getLevel(),b=0;b<r.length;b++){var p=r[b];this[p]=b<m?e:this.methodFactory(p,m,this.name)}if(this.log=this.debug,typeof console===n&&m<this.levels.SILENT)return"No console available for logging"}function d(m){return function(){typeof console!==n&&(u.call(this),this[m].apply(this,arguments))}}function f(m,b,p){return c(m)||d.apply(this,arguments)}function h(m,b){var p=this,y,S,T,k="loglevel";typeof m=="string"?k+=":"+m:typeof m=="symbol"&&(k=void 0);function w(O){var L=(r[O]||"silent").toUpperCase();if(!(typeof window===n||!k)){try{window.localStorage[k]=L;return}catch{}try{window.document.cookie=encodeURIComponent(k)+"="+L+";"}catch{}}}function E(){var O;if(!(typeof window===n||!k)){try{O=window.localStorage[k]}catch{}if(typeof O===n)try{var L=window.document.cookie,Q=encodeURIComponent(k),z=L.indexOf(Q+"=");z!==-1&&(O=/^([^;]+)/.exec(L.slice(z+Q.length+1))[1])}catch{}return p.levels[O]===void 0&&(O=void 0),O}}function P(){if(!(typeof window===n||!k)){try{window.localStorage.removeItem(k)}catch{}try{window.document.cookie=encodeURIComponent(k)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function _(O){var L=O;if(typeof L=="string"&&p.levels[L.toUpperCase()]!==void 0&&(L=p.levels[L.toUpperCase()]),typeof L=="number"&&L>=0&&L<=p.levels.SILENT)return L;throw new TypeError("log.setLevel() called with invalid level: "+O)}p.name=m,p.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},p.methodFactory=b||f,p.getLevel=function(){return T??S??y},p.setLevel=function(O,L){return T=_(O),L!==!1&&w(T),u.call(p)},p.setDefaultLevel=function(O){S=_(O),E()||p.setLevel(O,!1)},p.resetLevel=function(){T=null,P(),u.call(p)},p.enableAll=function(O){p.setLevel(p.levels.TRACE,O)},p.disableAll=function(O){p.setLevel(p.levels.SILENT,O)},p.rebuild=function(){if(o!==p&&(y=_(o.getLevel())),u.call(p),o===p)for(var O in s)s[O].rebuild()},y=_(o?o.getLevel():"WARN");var A=E();A!=null&&(T=_(A)),u.call(p)}o=new h,o.getLogger=function(b){if(typeof b!="symbol"&&typeof b!="string"||b==="")throw new TypeError("You must supply a name when creating a logger.");var p=s[b];return p||(p=s[b]=new h(b,o.methodFactory)),p};var v=typeof window!==n?window.log:void 0;return o.noConflict=function(){return typeof window!==n&&window.log===o&&(window.log=v),o},o.getLoggers=function(){return s},o.default=o,o})}(Au)),Au.exports}var Pf=jV(),Um;(function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent"})(Um||(Um={}));var fi;(function(t){t.Default="livekit",t.Room="livekit-room",t.Participant="livekit-participant",t.Track="livekit-track",t.Publication="livekit-track-publication",t.Engine="livekit-engine",t.Signal="livekit-signal",t.PCManager="livekit-pc-manager",t.PCTransport="livekit-pc-transport",t.E2EE="lk-e2ee"})(fi||(fi={}));let be=Pf.getLogger("livekit");Object.values(fi).map(t=>Pf.getLogger(t));be.setDefaultLevel(Um.info);function br(t){const e=Pf.getLogger(t);return e.setDefaultLevel(be.getLevel()),e}const FV=Pf.getLogger("lk-e2ee"),Wa=7e3,UV=[0,300,2*2*300,3*3*300,4*4*300,Wa,Wa,Wa,Wa,Wa];class BV{constructor(e){this._retryDelays=e!==void 0?[...e]:UV}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[e.retryCount];return e.retryCount<=1?n:n+Math.random()*1e3}}function VV(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function C(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})}function AS(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function rr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof AS=="function"?AS(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),r(a,l,o.done,o.value)})}}function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}var tu={exports:{}},NS;function zV(){if(NS)return tu.exports;NS=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(k,w,E){return Function.prototype.apply.call(k,w,E)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:n=function(k){return Object.getOwnPropertyNames(k)};function i(T){console&&console.warn&&console.warn(T)}var r=Number.isNaN||function(k){return k!==k};function s(){s.init.call(this)}tu.exports=s,tu.exports.once=p,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(T){if(typeof T!="number"||T<0||r(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");o=T}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||r(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function l(T){return T._maxListeners===void 0?s.defaultMaxListeners:T._maxListeners}s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(k){for(var w=[],E=1;E<arguments.length;E++)w.push(arguments[E]);var P=k==="error",_=this._events;if(_!==void 0)P=P&&_.error===void 0;else if(!P)return!1;if(P){var A;if(w.length>0&&(A=w[0]),A instanceof Error)throw A;var O=new Error("Unhandled error."+(A?" ("+A.message+")":""));throw O.context=A,O}var L=_[k];if(L===void 0)return!1;if(typeof L=="function")e(L,this,w);else for(var Q=L.length,z=v(L,Q),E=0;E<Q;++E)e(z[E],this,w);return!0};function c(T,k,w,E){var P,_,A;if(a(w),_=T._events,_===void 0?(_=T._events=Object.create(null),T._eventsCount=0):(_.newListener!==void 0&&(T.emit("newListener",k,w.listener?w.listener:w),_=T._events),A=_[k]),A===void 0)A=_[k]=w,++T._eventsCount;else if(typeof A=="function"?A=_[k]=E?[w,A]:[A,w]:E?A.unshift(w):A.push(w),P=l(T),P>0&&A.length>P&&!A.warned){A.warned=!0;var O=new Error("Possible EventEmitter memory leak detected. "+A.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");O.name="MaxListenersExceededWarning",O.emitter=T,O.type=k,O.count=A.length,i(O)}return T}s.prototype.addListener=function(k,w){return c(this,k,w,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(k,w){return c(this,k,w,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(T,k,w){var E={fired:!1,wrapFn:void 0,target:T,type:k,listener:w},P=u.bind(E);return P.listener=w,E.wrapFn=P,P}s.prototype.once=function(k,w){return a(w),this.on(k,d(this,k,w)),this},s.prototype.prependOnceListener=function(k,w){return a(w),this.prependListener(k,d(this,k,w)),this},s.prototype.removeListener=function(k,w){var E,P,_,A,O;if(a(w),P=this._events,P===void 0)return this;if(E=P[k],E===void 0)return this;if(E===w||E.listener===w)--this._eventsCount===0?this._events=Object.create(null):(delete P[k],P.removeListener&&this.emit("removeListener",k,E.listener||w));else if(typeof E!="function"){for(_=-1,A=E.length-1;A>=0;A--)if(E[A]===w||E[A].listener===w){O=E[A].listener,_=A;break}if(_<0)return this;_===0?E.shift():m(E,_),E.length===1&&(P[k]=E[0]),P.removeListener!==void 0&&this.emit("removeListener",k,O||w)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(k){var w,E,P;if(E=this._events,E===void 0)return this;if(E.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):E[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete E[k]),this;if(arguments.length===0){var _=Object.keys(E),A;for(P=0;P<_.length;++P)A=_[P],A!=="removeListener"&&this.removeAllListeners(A);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(w=E[k],typeof w=="function")this.removeListener(k,w);else if(w!==void 0)for(P=w.length-1;P>=0;P--)this.removeListener(k,w[P]);return this};function f(T,k,w){var E=T._events;if(E===void 0)return[];var P=E[k];return P===void 0?[]:typeof P=="function"?w?[P.listener||P]:[P]:w?b(P):v(P,P.length)}s.prototype.listeners=function(k){return f(this,k,!0)},s.prototype.rawListeners=function(k){return f(this,k,!1)},s.listenerCount=function(T,k){return typeof T.listenerCount=="function"?T.listenerCount(k):h.call(T,k)},s.prototype.listenerCount=h;function h(T){var k=this._events;if(k!==void 0){var w=k[T];if(typeof w=="function")return 1;if(w!==void 0)return w.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v(T,k){for(var w=new Array(k),E=0;E<k;++E)w[E]=T[E];return w}function m(T,k){for(;k+1<T.length;k++)T[k]=T[k+1];T.pop()}function b(T){for(var k=new Array(T.length),w=0;w<k.length;++w)k[w]=T[w].listener||T[w];return k}function p(T,k){return new Promise(function(w,E){function P(A){T.removeListener(k,_),E(A)}function _(){typeof T.removeListener=="function"&&T.removeListener("error",P),w([].slice.call(arguments))}S(T,k,_,{once:!0}),k!=="error"&&y(T,P,{once:!0})})}function y(T,k,w){typeof T.on=="function"&&S(T,"error",k,w)}function S(T,k,w,E){if(typeof T.on=="function")E.once?T.once(k,w):T.on(k,w);else if(typeof T.addEventListener=="function")T.addEventListener(k,function P(_){E.once&&T.removeEventListener(k,P),w(_)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T)}return tu.exports}var Vi=zV();let UR=!0,BR=!0;function ll(t,e,n){const i=t.match(e);return i&&i.length>=n&&parseFloat(i[n],10)}function Zs(t,e,n){if(!t.RTCPeerConnection)return;const i=t.RTCPeerConnection.prototype,r=i.addEventListener;i.addEventListener=function(o,a){if(o!==e)return r.apply(this,arguments);const l=c=>{const u=n(c);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,l),r.apply(this,[o,l])};const s=i.removeEventListener;i.removeEventListener=function(o,a){if(o!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(a))return s.apply(this,arguments);const l=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,l])},Object.defineProperty(i,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function $V(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(UR=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function WV(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(BR=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function VR(){if(typeof window=="object"){if(UR)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Ty(t,e){BR&&console.warn(t+" is deprecated, please use "+e+" instead.")}function HV(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const i=n.userAgentData.brands.find(r=>r.brand==="Chromium");if(i)return{browser:"chrome",version:parseInt(i.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(ll(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(ll(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(ll(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=ll(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function IS(t){return Object.prototype.toString.call(t)==="[object Object]"}function zR(t){return IS(t)?Object.keys(t).reduce(function(e,n){const i=IS(t[n]),r=i?zR(t[n]):t[n],s=i&&!Object.keys(r).length;return r===void 0||s?e:Object.assign(e,{[n]:r})},{}):t}function Bm(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(i=>{i.endsWith("Id")?Bm(t,t.get(e[i]),n):i.endsWith("Ids")&&e[i].forEach(r=>{Bm(t,t.get(r),n)})}))}function OS(t,e,n){const i=n?"outbound-rtp":"inbound-rtp",r=new Map;if(e===null)return r;const s=[];return t.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&s.push(o)}),s.forEach(o=>{t.forEach(a=>{a.type===i&&a.trackId===o.id&&Bm(t,a,r)})}),r}const MS=VR;function $R(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const i=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const l={};return Object.keys(a).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const u=typeof a[c]=="object"?a[c]:{ideal:a[c]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(f,h){return f?f+h.charAt(0).toUpperCase()+h.slice(1):h==="deviceId"?"sourceId":h};if(u.ideal!==void 0){l.optional=l.optional||[];let f={};typeof u.ideal=="number"?(f[d("min",c)]=u.ideal,l.optional.push(f),f={},f[d("max",c)]=u.ideal,l.optional.push(f)):(f[d("",c)]=u.ideal,l.optional.push(f))}u.exact!==void 0&&typeof u.exact!="number"?(l.mandatory=l.mandatory||{},l.mandatory[d("",c)]=u.exact):["min","max"].forEach(f=>{u[f]!==void 0&&(l.mandatory=l.mandatory||{},l.mandatory[d(f,c)]=u[f])})}),a.advanced&&(l.optional=(l.optional||[]).concat(a.advanced)),l},r=function(a,l){if(e.version>=61)return l(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const c=function(u,d,f){d in u&&!(f in u)&&(u[f]=u[d],delete u[d])};a=JSON.parse(JSON.stringify(a)),c(a.audio,"autoGainControl","googAutoGainControl"),c(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=i(a.audio)}if(a&&typeof a.video=="object"){let c=a.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const u=e.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete a.video.facingMode;let d;if(c.exact==="environment"||c.ideal==="environment"?d=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(f=>{f=f.filter(v=>v.kind==="videoinput");let h=f.find(v=>d.some(m=>v.label.toLowerCase().includes(m)));return!h&&f.length&&d.includes("back")&&(h=f[f.length-1]),h&&(a.video.deviceId=c.exact?{exact:h.deviceId}:{ideal:h.deviceId}),a.video=i(a.video),MS("chrome: "+JSON.stringify(a)),l(a)})}a.video=i(a.video)}return MS("chrome: "+JSON.stringify(a)),l(a)},s=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(a,l,c){r(a,u=>{n.webkitGetUserMedia(u,l,d=>{c&&c(s(d))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(l){return r(l,c=>a(c).then(u=>{if(c.audio&&!u.getAudioTracks().length||c.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(s(u))))}}}function WR(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function HR(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",r=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===r.track.id):s={track:r.track};const o=new Event("track");o.track=r.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[i.stream],this.dispatchEvent(o)}),i.stream.getTracks().forEach(r=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===r.id):s={track:r};const o=new Event("track");o.track=r,o.receiver=s,o.transceiver={receiver:s},o.streams=[i.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Zs(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function qR(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(r,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=r.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:r}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const r=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,l){let c=r.apply(this,arguments);return c||(c=e(this,a),this._senders.push(c)),c};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);const l=this._senders.indexOf(a);l!==-1&&this._senders.splice(l,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],i.apply(this,[s]),s.getTracks().forEach(o=>{const a=this._senders.find(l=>l.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(r=>r._pc=this),i},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function GR(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(o=>o._pc=this),s});const i=t.RTCPeerConnection.prototype.addTrack;i&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=i.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>OS(o,s.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=n.apply(this,[]);return r.forEach(s=>s._pc=this),r}),Zs(t,"track",i=>(i.receiver._pc=i.srcElement,i)),t.RTCRtpReceiver.prototype.getStats=function(){const r=this;return this._pc.getStats().then(s=>OS(s,r.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const i=arguments[0];let r,s,o;return this.getSenders().forEach(a=>{a.track===i&&(r?o=!0:r=a)}),this.getReceivers().forEach(a=>(a.track===i&&(s?o=!0:s=a),a.track===i)),o||r&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):r?r.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function KR(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const l=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(l)===-1&&this._shimmedLocalStreams[a.id].push(l):this._shimmedLocalStreams[a.id]=[a,l],l};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(c=>{if(this.getSenders().find(d=>d.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const l=this.getSenders().filter(c=>a.indexOf(c)===-1);this._shimmedLocalStreams[o.id]=[o].concat(l)};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],i.apply(this,arguments)};const r=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const l=this._shimmedLocalStreams[a].indexOf(o);l!==-1&&this._shimmedLocalStreams[a].splice(l,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),r.apply(this,arguments)}}function YR(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return KR(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const i=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(h=>h.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new t.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}i.apply(this,[u])};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},t.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(m=>m===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(m=>m.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const v=this._streams[d.id];if(v)v.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const m=new t.MediaStream([u]);this._streams[d.id]=m,this._reverseStreams[m.id]=d,this.addStream(m)}return this.getSenders().find(m=>m.track===u)};function s(c,u){let d=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(f=>{const h=c._reverseStreams[f],v=c._streams[h.id];d=d.replace(new RegExp(v.id,"g"),h.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function o(c,u){let d=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(f=>{const h=c._reverseStreams[f],v=c._streams[h.id];d=d.replace(new RegExp(h.id,"g"),v.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(c){const u=t.RTCPeerConnection.prototype[c],d={[c](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[v=>{const m=s(this,v);f[0].apply(null,[m])},v=>{f[1]&&f[1].apply(null,v)},arguments[2]]):u.apply(this,arguments).then(v=>s(this,v))}};t.RTCPeerConnection.prototype[c]=d[c]});const a=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=o(this,arguments[0]),a.apply(this,arguments))};const l=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const c=l.get.apply(this);return c.type===""?c:s(this,c)}}),t.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(h=>{this._streams[h].getTracks().find(m=>u.track===m)&&(f=this._streams[h])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Vm(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const i=t.RTCPeerConnection.prototype[n],r={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=r[n]})}function QR(t,e){Zs(t,"negotiationneeded",n=>{const i=n.target;if(!((e.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")&&i.signalingState!=="stable"))return n})}var DS=Object.freeze({__proto__:null,fixNegotiationNeeded:QR,shimAddTrackRemoveTrack:YR,shimAddTrackRemoveTrackWithNative:KR,shimGetSendersWithDtmf:qR,shimGetUserMedia:$R,shimMediaStream:WR,shimOnTrack:HR,shimPeerConnection:Vm,shimSenderReceiverGetStats:GR});function XR(t,e){const n=t&&t.navigator,i=t&&t.MediaStreamTrack;if(n.getUserMedia=function(r,s,o){Ty("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(r).then(s,o)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const r=function(o,a,l){a in o&&!(l in o)&&(o[l]=o[a],delete o[a])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),r(o.audio,"autoGainControl","mozAutoGainControl"),r(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},i&&i.prototype.getSettings){const o=i.prototype.getSettings;i.prototype.getSettings=function(){const a=o.apply(this,arguments);return r(a,"mozAutoGainControl","autoGainControl"),r(a,"mozNoiseSuppression","noiseSuppression"),a}}if(i&&i.prototype.applyConstraints){const o=i.prototype.applyConstraints;i.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),r(a,"autoGainControl","mozAutoGainControl"),r(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function qV(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(i){if(!(i&&i.video)){const r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return i.video===!0?i.video={mediaSource:e}:i.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(i)})}function JR(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function zm(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const s=t.RTCPeerConnection.prototype[r],o={[r](){return arguments[0]=new(r==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};t.RTCPeerConnection.prototype[r]=o[r]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[s,o,a]=arguments;return i.apply(this,[s||null]).then(l=>{if(e.version<53&&!o)try{l.forEach(c=>{c.type=n[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;l.forEach((u,d)=>{l.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return l}).then(o,a)}}function ZR(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(s=>s._pc=this),r});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const r=n.apply(this,arguments);return r._pc=this,r}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function e_(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=e.apply(this,[]);return i.forEach(r=>r._pc=this),i}),Zs(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function t_(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){Ty("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&n.getTracks().includes(i.track)&&this.removeTrack(i)})})}function n_(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function i_(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const r=i.length>0;r&&i.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(r){const{sender:o}=s,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=i,o.sendEncodings=i,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function r_(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const i=e.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function s_(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function o_(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var LS=Object.freeze({__proto__:null,shimAddTransceiver:i_,shimCreateAnswer:o_,shimCreateOffer:s_,shimGetDisplayMedia:qV,shimGetParameters:r_,shimGetUserMedia:XR,shimOnTrack:JR,shimPeerConnection:zm,shimRTCDataChannel:n_,shimReceiverGetStats:e_,shimRemoveStream:t_,shimSenderGetStats:ZR});function a_(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(r=>e.call(this,r,i)),i.getVideoTracks().forEach(r=>e.call(this,r,i))},t.RTCPeerConnection.prototype.addTrack=function(i){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return s&&s.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(n);if(i===-1)return;this._localStreams.splice(i,1);const r=n.getTracks();this.getSenders().forEach(s=>{r.includes(s.track)&&this.removeTrack(s)})})}}function l_(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(r=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(r))return;this._remoteStreams.push(r);const s=new Event("addstream");s.stream=r,this.dispatchEvent(s)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(r){r.streams.forEach(s=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(s)>=0)return;i._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,i.dispatchEvent(o)})}),e.apply(i,arguments)}}}function c_(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,i=e.createAnswer,r=e.setLocalDescription,s=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(c,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=n.apply(this,[d]);return u?(f.then(c,u),Promise.resolve()):f},e.createAnswer=function(c,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=i.apply(this,[d]);return u?(f.then(c,u),Promise.resolve()):f};let a=function(l,c,u){const d=r.apply(this,[l]);return u?(d.then(c,u),Promise.resolve()):d};e.setLocalDescription=a,a=function(l,c,u){const d=s.apply(this,[l]);return u?(d.then(c,u),Promise.resolve()):d},e.setRemoteDescription=a,a=function(l,c,u){const d=o.apply(this,[l]);return u?(d.then(c,u),Promise.resolve()):d},e.addIceCandidate=a}function u_(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,i=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=r=>i(d_(r))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(i,r,s){e.mediaDevices.getUserMedia(i).then(r,s)}).bind(e))}function d_(t){return t&&t.video!==void 0?Object.assign({},t,{video:zR(t.video)}):t}function f_(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(i,r){if(i&&i.iceServers){const s=[];for(let o=0;o<i.iceServers.length;o++){let a=i.iceServers[o];a.urls===void 0&&a.url?(Ty("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(i.iceServers[o])}i.iceServers=s}return new e(i,r)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function h_(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function p_(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(i){if(i){typeof i.offerToReceiveAudio<"u"&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const r=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&r?r.direction==="sendrecv"?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":r.direction==="recvonly"&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):i.offerToReceiveAudio===!0&&!r&&this.addTransceiver("audio",{direction:"recvonly"}),typeof i.offerToReceiveVideo<"u"&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):i.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function m_(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var jS=Object.freeze({__proto__:null,shimAudioContext:m_,shimCallbacksAPI:c_,shimConstraints:d_,shimCreateOfferLegacy:p_,shimGetUserMedia:u_,shimLocalStreamsAPI:a_,shimRTCIceServerUrls:f_,shimRemoteStreamsAPI:l_,shimTrackEventTransceiver:h_}),Bh={exports:{}},FS;function GV(){return FS||(FS=1,function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(i=>i.trim())},e.splitSections=function(n){return n.split(`
m=`).map((r,s)=>(s>0?"m="+r:r).trim()+`\r
`)},e.getDescription=function(n){const i=e.splitSections(n);return i&&i[0]},e.getMediaSections=function(n){const i=e.splitSections(n);return i.shift(),i},e.matchPrefix=function(n,i){return e.splitLines(n).filter(r=>r.indexOf(i)===0)},e.parseCandidate=function(n){let i;n.indexOf("a=candidate:")===0?i=n.substring(12).split(" "):i=n.substring(10).split(" ");const r={foundation:i[0],component:{1:"rtp",2:"rtcp"}[i[1]]||i[1],protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]};for(let s=8;s<i.length;s+=2)switch(i[s]){case"raddr":r.relatedAddress=i[s+1];break;case"rport":r.relatedPort=parseInt(i[s+1],10);break;case"tcptype":r.tcpType=i[s+1];break;case"ufrag":r.ufrag=i[s+1],r.usernameFragment=i[s+1];break;default:r[i[s]]===void 0&&(r[i[s]]=i[s+1]);break}return r},e.writeCandidate=function(n){const i=[];i.push(n.foundation);const r=n.component;r==="rtp"?i.push(1):r==="rtcp"?i.push(2):i.push(r),i.push(n.protocol.toUpperCase()),i.push(n.priority),i.push(n.address||n.ip),i.push(n.port);const s=n.type;return i.push("typ"),i.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(i.push("raddr"),i.push(n.relatedAddress),i.push("rport"),i.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(i.push("ufrag"),i.push(n.usernameFragment||n.ufrag)),"candidate:"+i.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let i=n.substring(9).split(" ");const r={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),r.name=i[0],r.clockRate=parseInt(i[1],10),r.channels=i.length===3?parseInt(i[2],10):1,r.numChannels=r.channels,r},e.writeRtpMap=function(n){let i=n.payloadType;n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType);const r=n.channels||n.numChannels||1;return"a=rtpmap:"+i+" "+n.name+"/"+n.clockRate+(r!==1?"/"+r:"")+`\r
`},e.parseExtmap=function(n){const i=n.substring(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1],attributes:i.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const i={};let r;const s=n.substring(n.indexOf(" ")+1).split(";");for(let o=0;o<s.length;o++)r=s[o].trim().split("="),i[r[0].trim()]=r[1];return i},e.writeFmtp=function(n){let i="",r=n.payloadType;if(n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(o=>{n.parameters[o]!==void 0?s.push(o+"="+n.parameters[o]):s.push(o)}),i+="a=fmtp:"+r+" "+s.join(";")+`\r
`}return i},e.parseRtcpFb=function(n){const i=n.substring(n.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},e.writeRtcpFb=function(n){let i="",r=n.payloadType;return n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{i+="a=rtcp-fb:"+r+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),i},e.parseSsrcMedia=function(n){const i=n.indexOf(" "),r={ssrc:parseInt(n.substring(7,i),10)},s=n.indexOf(":",i);return s>-1?(r.attribute=n.substring(i+1,s),r.value=n.substring(s+1)):r.attribute=n.substring(i+1),r},e.parseSsrcGroup=function(n){const i=n.substring(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(r=>parseInt(r,10))}},e.getMid=function(n){const i=e.matchPrefix(n,"a=mid:")[0];if(i)return i.substring(6)},e.parseFingerprint=function(n){const i=n.substring(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1].toUpperCase()}},e.getDtlsParameters=function(n,i){return{role:"auto",fingerprints:e.matchPrefix(n+i,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,i){let r="a=setup:"+i+`\r
`;return n.fingerprints.forEach(s=>{r+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),r},e.parseCryptoLine=function(n){const i=n.substring(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const i=n.substring(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,i){return e.matchPrefix(n+i,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,i){const r=e.matchPrefix(n+i,"a=ice-ufrag:")[0],s=e.matchPrefix(n+i,"a=ice-pwd:")[0];return r&&s?{usernameFragment:r.substring(12),password:s.substring(10)}:null},e.writeIceParameters=function(n){let i="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(i+=`a=ice-lite\r
`),i},e.parseRtpParameters=function(n){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=e.splitLines(n)[0].split(" ");i.profile=s[2];for(let a=3;a<s.length;a++){const l=s[a],c=e.matchPrefix(n,"a=rtpmap:"+l+" ")[0];if(c){const u=e.parseRtpMap(c),d=e.matchPrefix(n,"a=fmtp:"+l+" ");switch(u.parameters=d.length?e.parseFmtp(d[0]):{},u.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+l+" ").map(e.parseRtcpFb),i.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(u.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(a=>{i.headerExtensions.push(e.parseExtmap(a))});const o=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return i.codecs.forEach(a=>{o.forEach(l=>{a.rtcpFeedback.find(u=>u.type===l.type&&u.parameter===l.parameter)||a.rtcpFeedback.push(l)})}),i},e.writeRtpDescription=function(n,i){let r="";r+="m="+n+" ",r+=i.codecs.length>0?"9":"0",r+=" "+(i.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=i.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,r+=`c=IN IP4 0.0.0.0\r
`,r+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,i.codecs.forEach(o=>{r+=e.writeRtpMap(o),r+=e.writeFmtp(o),r+=e.writeRtcpFb(o)});let s=0;return i.codecs.forEach(o=>{o.maxptime>s&&(s=o.maxptime)}),s>0&&(r+="a=maxptime:"+s+`\r
`),i.headerExtensions&&i.headerExtensions.forEach(o=>{r+=e.writeExtmap(o)}),r},e.parseRtpEncodingParameters=function(n){const i=[],r=e.parseRtpParameters(n),s=r.fecMechanisms.indexOf("RED")!==-1,o=r.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(n,"a=ssrc:").map(f=>e.parseSsrcMedia(f)).filter(f=>f.attribute==="cname"),l=a.length>0&&a[0].ssrc;let c;const u=e.matchPrefix(n,"a=ssrc-group:FID").map(f=>f.substring(17).split(" ").map(v=>parseInt(v,10)));u.length>0&&u[0].length>1&&u[0][0]===l&&(c=u[0][1]),r.codecs.forEach(f=>{if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){let h={ssrc:l,codecPayloadType:parseInt(f.parameters.apt,10)};l&&c&&(h.rtx={ssrc:c}),i.push(h),s&&(h=JSON.parse(JSON.stringify(h)),h.fec={ssrc:l,mechanism:o?"red+ulpfec":"red"},i.push(h))}}),i.length===0&&l&&i.push({ssrc:l});let d=e.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-50*40*8:d=void 0,i.forEach(f=>{f.maxBitrate=d})),i},e.parseRtcpParameters=function(n){const i={},r=e.matchPrefix(n,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];r&&(i.cname=r.value,i.ssrc=r.ssrc);const s=e.matchPrefix(n,"a=rtcp-rsize");i.reducedSize=s.length>0,i.compound=s.length===0;const o=e.matchPrefix(n,"a=rtcp-mux");return i.mux=o.length>0,i},e.writeRtcpParameters=function(n){let i="";return n.reducedSize&&(i+=`a=rtcp-rsize\r
`),n.mux&&(i+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(i+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),i},e.parseMsid=function(n){let i;const r=e.matchPrefix(n,"a=msid:");if(r.length===1)return i=r[0].substring(7).split(" "),{stream:i[0],track:i[1]};const s=e.matchPrefix(n,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(s.length>0)return i=s[0].value.split(" "),{stream:i[0],track:i[1]}},e.parseSctpDescription=function(n){const i=e.parseMLine(n),r=e.matchPrefix(n,"a=max-message-size:");let s;r.length>0&&(s=parseInt(r[0].substring(19),10)),isNaN(s)&&(s=65536);const o=e.matchPrefix(n,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:i.fmt,maxMessageSize:s};const a=e.matchPrefix(n,"a=sctpmap:");if(a.length>0){const l=a[0].substring(10).split(" ");return{port:parseInt(l[0],10),protocol:l[1],maxMessageSize:s}}},e.writeSctpDescription=function(n,i){let r=[];return n.protocol!=="DTLS/SCTP"?r=["m="+n.kind+" 9 "+n.protocol+" "+i.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+i.port+`\r
`]:r=["m="+n.kind+" 9 "+n.protocol+" "+i.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+i.port+" "+i.protocol+` 65535\r
`],i.maxMessageSize!==void 0&&r.push("a=max-message-size:"+i.maxMessageSize+`\r
`),r.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,i,r){let s;const o=i!==void 0?i:2;return n?s=n:s=e.generateSessionId(),`v=0\r
o=`+(r||"thisisadapterortc")+" "+s+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,i){const r=e.splitLines(n);for(let s=0;s<r.length;s++)switch(r[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[s].substring(2)}return i?e.getDirection(i):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const r=e.splitLines(n)[0].substring(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},e.parseOLine=function(n){const r=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const i=e.splitLines(n);for(let r=0;r<i.length;r++)if(i[r].length<2||i[r].charAt(1)!=="=")return!1;return!0},t.exports=e}(Bh)),Bh.exports}var g_=GV(),Go=DV(g_),KV=aB({__proto__:null,default:Go},[g_]);function Nu(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&(i=JSON.parse(JSON.stringify(i)),i.candidate=i.candidate.substring(2)),i.candidate&&i.candidate.length){const r=new e(i),s=Go.parseCandidate(i.candidate);for(const o in s)o in r||Object.defineProperty(r,o,{value:s[o]});return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new e(i)},t.RTCIceCandidate.prototype=e.prototype,Zs(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function $m(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Zs(t,"icecandidate",e=>{if(e.candidate){const n=Go.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function Iu(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const l=Go.splitSections(a.sdp);return l.shift(),l.some(c=>{const u=Go.parseMLine(c);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},i=function(a){const l=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(l===null||l.length<2)return-1;const c=parseInt(l[1],10);return c!==c?-1:c},r=function(a){let l=65536;return e.browser==="firefox"&&(e.version<57?a===-1?l=16384:l=2147483637:e.version<60?l=e.version===57?65535:65536:l=2147483637),l},s=function(a,l){let c=65536;e.browser==="firefox"&&e.version===57&&(c=65535);const u=Go.matchPrefix(a.sdp,"a=max-message-size:");return u.length>0?c=parseInt(u[0].substring(19),10):e.browser==="firefox"&&l!==-1&&(c=2147483637),c},o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:l}=this.getConfiguration();l==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const l=i(arguments[0]),c=r(l),u=s(arguments[0],l);let d;c===0&&u===0?d=Number.POSITIVE_INFINITY:c===0||u===0?d=Math.max(c,u):d=Math.min(c,u);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return d}}),this._sctp=f}return o.apply(this,arguments)}}function Ou(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(i,r){const s=i.send;i.send=function(){const a=arguments[0],l=a.length||a.size||a.byteLength;if(i.readyState==="open"&&r.sctp&&l>r.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+r.sctp.maxMessageSize+" bytes)");return s.apply(i,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const r=n.apply(this,arguments);return e(r,this),r},Zs(t,"datachannel",i=>(e(i.channel,i.target),i))}function Wm(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const i=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=r=>{const s=r.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",r);s.dispatchEvent(o)}return r},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function Hm(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(r){if(r&&r.sdp&&r.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=r.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&r instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:r.type,sdp:s}):r.sdp=s}return n.apply(this,arguments)}}function Mu(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Du(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let r=arguments[0]||{};if(typeof r!="object"||r.type&&r.sdp)return n.apply(this,arguments);if(r={type:r.type,sdp:r.sdp},!r.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":r.type="offer";break;default:r.type="answer";break}return r.sdp||r.type!=="offer"&&r.type!=="answer"?n.apply(this,[r]):(r.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>n.apply(this,[o]))})}var YV=Object.freeze({__proto__:null,removeExtmapAllowMixed:Hm,shimAddIceCandidateNullOrEmpty:Mu,shimConnectionState:Wm,shimMaxMessageSize:Iu,shimParameterlessSetLocalDescription:Du,shimRTCIceCandidate:Nu,shimRTCIceCandidateRelayProtocol:$m,shimSendThrowTypeError:Ou});function QV(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=VR,i=HV(t),r={browserDetails:i,commonShim:YV,extractVersion:ll,disableLog:$V,disableWarnings:WV,sdp:KV};switch(i.browser){case"chrome":if(!DS||!Vm||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),r;if(i.version===null)return n("Chrome shim can not determine version, not shimming."),r;n("adapter.js shimming chrome."),r.browserShim=DS,Mu(t,i),Du(t),$R(t,i),WR(t),Vm(t,i),HR(t),YR(t,i),qR(t),GR(t),QR(t,i),Nu(t),$m(t),Wm(t),Iu(t,i),Ou(t),Hm(t,i);break;case"firefox":if(!LS||!zm||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),r;n("adapter.js shimming firefox."),r.browserShim=LS,Mu(t,i),Du(t),XR(t,i),zm(t,i),JR(t),t_(t),ZR(t),e_(t),n_(t),i_(t),r_(t),s_(t),o_(t),Nu(t),Wm(t),Iu(t,i),Ou(t);break;case"safari":if(!jS||!e.shimSafari)return n("Safari shim is not included in this adapter release."),r;n("adapter.js shimming safari."),r.browserShim=jS,Mu(t,i),Du(t),f_(t),p_(t),c_(t),a_(t),l_(t),h_(t),u_(t),m_(t),Nu(t),$m(t),Iu(t,i),Ou(t),Hm(t,i);break;default:n("Unsupported browser!");break}return r}QV({window:typeof window>"u"?void 0:window});const XV=10,Ha="lk_e2ee",JV="LKFrameEncryptionKey",ZV={sharedKey:!1,ratchetSalt:JV,ratchetWindowSize:8,failureTolerance:XV,keyringSize:16};var es;(function(t){t.SetKey="setKey",t.RatchetRequest="ratchetRequest",t.KeyRatcheted="keyRatcheted"})(es||(es={}));var US;(function(t){t.KeyRatcheted="keyRatcheted"})(US||(US={}));var Wr;(function(t){t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError"})(Wr||(Wr={}));var BS;(function(t){t.Error="cryptorError"})(BS||(BS={}));function e6(){return t6()||qm()}function qm(){return typeof window.RTCRtpScriptTransform<"u"}function t6(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class n9 extends Vi.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,i,r)=>{be.debug("key ratcheted event received",{ratchetResult:n,participantId:i,keyIndex:r})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},ZV),e),this.on(es.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,n,i){const r={key:e,participantIdentity:n,keyIndex:i};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(i??0),r),this.emit(es.SetKey,r)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,n){this.emit(es.RatchetRequest,e,n)}}class hs extends Error{constructor(e,n){super(n||"an error has occured"),this.name="LiveKitError",this.code=e}}var Se;(function(t){t[t.NotAllowed=0]="NotAllowed",t[t.ServerUnreachable=1]="ServerUnreachable",t[t.InternalError=2]="InternalError",t[t.Cancelled=3]="Cancelled",t[t.LeaveRequest=4]="LeaveRequest",t[t.Timeout=5]="Timeout"})(Se||(Se={}));class _e extends hs{constructor(e,n,i,r){super(1,e),this.name="ConnectionError",this.status=i,this.reason=n,this.context=r,this.reasonName=Se[n]}}class ky extends hs{constructor(e){super(21,e??"device is unsupported"),this.name="DeviceUnsupportedError"}}class sr extends hs{constructor(e){super(20,e??"track is invalid"),this.name="TrackInvalidError"}}class n6 extends hs{constructor(e){super(10,e??"unsupported server"),this.name="UnsupportedServer"}}class ct extends hs{constructor(e){super(12,e??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class Gm extends hs{constructor(e){super(13,e??"unable to negotiate"),this.name="NegotiationError"}}class VS extends hs{constructor(e,n){super(15,e),this.name="PublishTrackError",this.status=n}}class zS extends hs{constructor(e,n){super(15,e),this.reason=n,this.reasonName=typeof n=="string"?n:Sy[n]}}var Ed;(function(t){t.PermissionDenied="PermissionDenied",t.NotFound="NotFound",t.DeviceInUse="DeviceInUse",t.Other="Other"})(Ed||(Ed={}));(function(t){function e(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?t.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?t.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?t.DeviceInUse:t.Other}t.getFailure=e})(Ed||(Ed={}));var $S;(function(t){t[t.InvalidKey=0]="InvalidKey",t[t.MissingKey=1]="MissingKey",t[t.InternalError=2]="InternalError"})($S||($S={}));var B;(function(t){t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ConnectionStateChanged="connectionStateChanged",t.Moved="moved",t.MediaDevicesChanged="mediaDevicesChanged",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalAudioSilenceDetected="localAudioSilenceDetected",t.ActiveSpeakersChanged="activeSpeakersChanged",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.ParticipantAttributesChanged="participantAttributesChanged",t.ParticipantActive="participantActive",t.RoomMetadataChanged="roomMetadataChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.AudioPlaybackStatusChanged="audioPlaybackChanged",t.VideoPlaybackStatusChanged="videoPlaybackChanged",t.MediaDevicesError="mediaDevicesError",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.SignalConnected="signalConnected",t.RecordingStatusChanged="recordingStatusChanged",t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ActiveDeviceChanged="activeDeviceChanged",t.ChatMessage="chatMessage",t.LocalTrackSubscribed="localTrackSubscribed",t.MetricsReceived="metricsReceived"})(B||(B={}));var K;(function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackCpuConstrained="localTrackCpuConstrained",t.LocalSenderCreated="localSenderCreated",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.IsSpeakingChanged="isSpeakingChanged",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.TrackCpuConstrained="trackCpuConstrained",t.MediaDevicesError="mediaDevicesError",t.AudioStreamAcquired="audioStreamAcquired",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.PCTrackAdded="pcTrackAdded",t.AttributesChanged="attributesChanged",t.LocalTrackSubscribed="localTrackSubscribed",t.ChatMessage="chatMessage",t.Active="active"})(K||(K={}));var G;(function(t){t.TransportsCreated="transportsCreated",t.Connected="connected",t.Disconnected="disconnected",t.Resuming="resuming",t.Resumed="resumed",t.Restarting="restarting",t.Restarted="restarted",t.SignalResumed="signalResumed",t.SignalRestarted="signalRestarted",t.Closing="closing",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.DataPacketReceived="dataPacketReceived",t.RTPVideoMapUpdate="rtpVideoMapUpdate",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ParticipantUpdate="participantUpdate",t.RoomUpdate="roomUpdate",t.SpeakersChanged="speakersChanged",t.StreamStateChanged="streamStateChanged",t.ConnectionQualityUpdate="connectionQualityUpdate",t.SubscriptionError="subscriptionError",t.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",t.RemoteMute="remoteMute",t.SubscribedQualityUpdate="subscribedQualityUpdate",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackSubscribed="localTrackSubscribed",t.Offline="offline",t.SignalRequestResponse="signalRequestResponse",t.SignalConnected="signalConnected",t.RoomMoved="roomMoved"})(G||(G={}));var W;(function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.Restarted="restarted",t.Ended="ended",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",t.CpuConstrained="cpuConstrained",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed",t.AudioSilenceDetected="audioSilenceDetected",t.VisibilityChanged="visibilityChanged",t.VideoDimensionsChanged="videoDimensionsChanged",t.VideoPlaybackStarted="videoPlaybackStarted",t.VideoPlaybackFailed="videoPlaybackFailed",t.ElementAttached="elementAttached",t.ElementDetached="elementDetached",t.UpstreamPaused="upstreamPaused",t.UpstreamResumed="upstreamResumed",t.SubscriptionPermissionChanged="subscriptionPermissionChanged",t.SubscriptionStatusChanged="subscriptionStatusChanged",t.SubscriptionFailed="subscriptionFailed",t.TrackProcessorUpdate="trackProcessorUpdate",t.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",t.TranscriptionReceived="transcriptionReceived",t.TimeSyncUpdate="timeSyncUpdate",t.PreConnectBufferFlushed="preConnectBufferFlushed"})(W||(W={}));function i6(t){return typeof t>"u"?t:typeof structuredClone=="function"?typeof t=="object"&&t!==null?structuredClone(Object.assign({},t)):structuredClone(t):JSON.parse(JSON.stringify(t))}const r6=/version\/(\d+(\.?_?\d+)+)/i;let Vh;function En(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if(Vh===void 0||e){const i=s6.find(r=>{let{test:s}=r;return s.test(n)});Vh=i==null?void 0:i.describe(n)}return Vh}const s6=[{test:/firefox|iceweasel|fxios/i,describe(t){return{name:"Firefox",version:Lu(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:zh(t)}}},{test:/chrom|crios|crmo/i,describe(t){return{name:"Chrome",version:Lu(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("crios")?"iOS":void 0,osVersion:zh(t)}}},{test:/safari|applewebkit/i,describe(t){return{name:"Safari",version:Lu(r6,t),os:t.includes("mobile/")?"iOS":"macOS",osVersion:zh(t)}}}];function Lu(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const i=e.match(t);return i&&i.length>=n&&i[n]||""}function zh(t){return t.includes("mac os")?Lu(/\(.+?(\d+_\d+(:?_\d+)?)/,t,1).replace(/_/g,"."):void 0}var o6="2.15.4";const a6=o6,l6=16;class St{}St.setTimeout=function(){return setTimeout(...arguments)};St.setInterval=function(){return setInterval(...arguments)};St.clearTimeout=function(){return clearTimeout(...arguments)};St.clearInterval=function(){return clearInterval(...arguments)};const c6=5e3,qa=[];var Tn;(function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH"})(Tn||(Tn={}));class j extends Vi.EventEmitter{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var r;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=j.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=be,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),c6):this.handleAppVisibilityChanged()},this.log=br((r=i.loggerName)!==null&&r!==void 0?r:fi.Track),this.loggerContextCb=i.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=j.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),ge(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let n="audio";this.kind===j.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===j.Kind.Video&&this.addAppVisibilityListener(),e||(n==="audio"&&(qa.forEach(s=>{s.parentElement===null&&!e&&(e=s)}),e&&qa.splice(qa.indexOf(e),1)),e||(e=document.createElement(n))),this.attachedElements.includes(e)||this.attachedElements.push(e),Mo(this.mediaStreamTrack,e);const i=e.srcObject.getTracks(),r=i.some(s=>s.kind==="audio");return e.play().then(()=>{this.emit(r?W.AudioPlaybackStarted:W.VideoPlaybackStarted)}).catch(s=>{s.name==="NotAllowedError"?this.emit(r?W.AudioPlaybackFailed:W.VideoPlaybackFailed,s):s.name==="AbortError"?be.debug("".concat(r?"audio":"video"," playback aborted, likely due to new play request")):be.warn("could not playback ".concat(r?"audio":"video"),s),r&&e&&i.some(o=>o.kind==="video")&&s.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(W.ElementAttached,e),e}detach(e){try{if(e){Ko(this.mediaStreamTrack,e);const i=this.attachedElements.indexOf(e);return i>=0&&(this.attachedElements.splice(i,1),this.recycleElement(e),this.emit(W.ElementDetached,e)),e}const n=[];return this.attachedElements.forEach(i=>{Ko(this.mediaStreamTrack,i),n.push(i),this.recycleElement(i),this.emit(W.ElementDetached,i)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(e){e.loggerName&&(this.log=br(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let n=!0;e.pause(),qa.forEach(i=>{i.parentElement||(n=!1)}),n&&qa.push(e)}}handleAppVisibilityChanged(){return C(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===j.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(e=>e.play().catch(()=>{})),0)})}addAppVisibilityListener(){cn()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){cn()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function Mo(t,e){let n;e.srcObject instanceof MediaStream?n=e.srcObject:n=new MediaStream;let i;t.kind==="audio"?i=n.getAudioTracks():i=n.getVideoTracks(),i.includes(t)||(i.forEach(r=>{n.removeTrack(r)}),n.addTrack(t)),(!Gs()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=n.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==n&&(e.srcObject=n,(Gs()||ya())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=n,e.play().catch(()=>{})},0))}function Ko(t,e){if(e.srcObject instanceof MediaStream){const n=e.srcObject;n.removeTrack(t),n.getTracks().length>0?e.srcObject=n:e.srcObject=null}}(function(t){let e;(function(c){c.Audio="audio",c.Video="video",c.Unknown="unknown"})(e=t.Kind||(t.Kind={}));let n;(function(c){c.Camera="camera",c.Microphone="microphone",c.ScreenShare="screen_share",c.ScreenShareAudio="screen_share_audio",c.Unknown="unknown"})(n=t.Source||(t.Source={}));let i;(function(c){c.Active="active",c.Paused="paused",c.Unknown="unknown"})(i=t.StreamState||(t.StreamState={}));function r(c){switch(c){case e.Audio:return ri.AUDIO;case e.Video:return ri.VIDEO;default:return ri.DATA}}t.kindToProto=r;function s(c){switch(c){case ri.AUDIO:return e.Audio;case ri.VIDEO:return e.Video;default:return e.Unknown}}t.kindFromProto=s;function o(c){switch(c){case n.Camera:return st.CAMERA;case n.Microphone:return st.MICROPHONE;case n.ScreenShare:return st.SCREEN_SHARE;case n.ScreenShareAudio:return st.SCREEN_SHARE_AUDIO;default:return st.UNKNOWN}}t.sourceToProto=o;function a(c){switch(c){case st.CAMERA:return n.Camera;case st.MICROPHONE:return n.Microphone;case st.SCREEN_SHARE:return n.ScreenShare;case st.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}t.sourceFromProto=a;function l(c){switch(c){case Lm.ACTIVE:return i.Active;case Lm.PAUSED:return i.Paused;default:return i.Unknown}}t.streamStateFromProto=l})(j||(j={}));class Re{constructor(e,n,i,r,s){if(typeof e=="object")this.width=e.width,this.height=e.height,this.aspectRatio=e.aspectRatio,this.encoding={maxBitrate:e.maxBitrate,maxFramerate:e.maxFramerate,priority:e.priority};else if(n!==void 0&&i!==void 0)this.width=e,this.height=n,this.aspectRatio=e/n,this.encoding={maxBitrate:i,maxFramerate:r,priority:s};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const u6=["vp8","h264"],d6=["vp8","h264","vp9","av1","h265"];function f6(t){return!!u6.find(e=>e===t)}var WS;(function(t){t[t.PREFER_REGRESSION=0]="PREFER_REGRESSION",t[t.SIMULCAST=1]="SIMULCAST",t[t.REGRESSION=2]="REGRESSION"})(WS||(WS={}));var Km;(function(t){t.telephone={maxBitrate:12e3},t.speech={maxBitrate:24e3},t.music={maxBitrate:48e3},t.musicStereo={maxBitrate:64e3},t.musicHighQuality={maxBitrate:96e3},t.musicHighQualityStereo={maxBitrate:128e3}})(Km||(Km={}));const rc={h90:new Re(160,90,9e4,20),h180:new Re(320,180,16e4,20),h216:new Re(384,216,18e4,20),h360:new Re(640,360,45e4,20),h540:new Re(960,540,8e5,25),h720:new Re(1280,720,17e5,30),h1080:new Re(1920,1080,3e6,30),h1440:new Re(2560,1440,5e6,30),h2160:new Re(3840,2160,8e6,30)},Ym={h120:new Re(160,120,7e4,20),h180:new Re(240,180,125e3,20),h240:new Re(320,240,14e4,20),h360:new Re(480,360,33e4,20),h480:new Re(640,480,5e5,20),h540:new Re(720,540,6e5,25),h720:new Re(960,720,13e5,30),h1080:new Re(1440,1080,23e5,30),h1440:new Re(1920,1440,38e5,30)},wy={h360fps3:new Re(640,360,2e5,3,"medium"),h360fps15:new Re(640,360,4e5,15,"medium"),h720fps5:new Re(1280,720,8e5,5,"medium"),h720fps15:new Re(1280,720,15e5,15,"medium"),h720fps30:new Re(1280,720,2e6,30,"medium"),h1080fps15:new Re(1920,1080,25e5,15,"medium"),h1080fps30:new Re(1920,1080,5e6,30,"medium"),original:new Re(0,0,7e6,30,"medium")},h6="|",HS="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function p6(t){const e=t.split(h6);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}function hn(t){return C(this,void 0,void 0,function*(){return new Promise(e=>St.setTimeout(e,t))})}function Qm(){return"addTransceiver"in RTCPeerConnection.prototype}function Xm(){return"addTrack"in RTCPeerConnection.prototype}function m6(){if(!("getCapabilities"in RTCRtpSender)||Gs())return!1;const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/AV1"){e=!0;break}}return e}function g6(){if(!("getCapabilities"in RTCRtpSender)||ya())return!1;if(Gs()){const n=En();if(n!=null&&n.version&&Ui(n.version,"16")<0||(n==null?void 0:n.os)==="iOS"&&(n!=null&&n.osVersion)&&Ui(n.osVersion,"16")<0)return!1}const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/VP9"){e=!0;break}}return e}function Ri(t){return t==="av1"||t==="vp9"}function Jm(t){return!document||Pd()?!1:(t||(t=document.createElement("audio")),"setSinkId"in t)}function v6(){return typeof RTCPeerConnection>"u"?!1:Qm()||Xm()}function ya(){var t;return((t=En())===null||t===void 0?void 0:t.name)==="Firefox"}function Gs(){var t;return((t=En())===null||t===void 0?void 0:t.name)==="Safari"}function Pd(){const t=En();return(t==null?void 0:t.name)==="Safari"||(t==null?void 0:t.os)==="iOS"}function y6(){const t=En();return(t==null?void 0:t.name)==="Safari"&&t.version.startsWith("17.")||(t==null?void 0:t.os)==="iOS"&&!!(t!=null&&t.osVersion)&&Ui(t.osVersion,"17")>=0}function b6(t){return t||(t=En()),(t==null?void 0:t.name)==="Safari"&&Ui(t.version,"18.3")>0||(t==null?void 0:t.os)==="iOS"&&!!(t!=null&&t.osVersion)&&Ui(t.osVersion,"18.3")>0}function v_(){var t,e;return cn()?(e=(t=navigator.userAgentData)===null||t===void 0?void 0:t.mobile)!==null&&e!==void 0?e:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function x6(){const t=En(),e="17.2";if(t)return t.name!=="Safari"&&t.os!=="iOS"||t.os==="iOS"&&t.osVersion&&Ui(e,t.osVersion)>=0?!0:t.name==="Safari"&&Ui(e,t.version)>=0}function cn(){return typeof document<"u"}function Fi(){return navigator.product=="ReactNative"}function Zm(t){return t.hostname.endsWith(".livekit.cloud")||t.hostname.endsWith(".livekit.run")}function y_(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function b_(){if(!Fi())return;let t=y_();if(t)return t.platform}function qS(){if(cn())return window.devicePixelRatio;if(Fi()){let t=y_();if(t)return t.devicePixelRatio}return 1}function Ui(t,e){const n=t.split("."),i=e.split("."),r=Math.min(n.length,i.length);for(let s=0;s<r;++s){const o=parseInt(n[s],10),a=parseInt(i[s],10);if(o>a)return 1;if(o<a)return-1;if(s===r-1&&o===a)return 0}return t===""&&e!==""?-1:e===""?1:n.length==i.length?0:n.length<i.length?-1:1}function S6(t){for(const e of t)e.target.handleResize(e)}function T6(t){for(const e of t)e.target.handleVisibilityChanged(e)}let $h=null;const GS=()=>($h||($h=new ResizeObserver(S6)),$h);let Wh=null;const KS=()=>(Wh||(Wh=new IntersectionObserver(T6,{root:null,rootMargin:"0px"})),Wh);function k6(){var t;const e=new uV({sdk:kR.JS,protocol:l6,version:a6});return Fi()&&(e.os=(t=b_())!==null&&t!==void 0?t:""),e}function YS(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const r=document.createElement("canvas");r.width=t,r.height=e;const s=r.getContext("2d");s==null||s.fillRect(0,0,r.width,r.height),i&&s&&(s.beginPath(),s.arc(t/2,e/2,50,0,Math.PI*2,!0),s.closePath(),s.fillStyle="grey",s.fill());const o=r.captureStream(),[a]=o.getTracks();if(!a)throw Error("Could not get empty media stream video track");return a.enabled=n,a}let Ga;function Hh(){if(!Ga){const t=new AudioContext,e=t.createOscillator(),n=t.createGain();n.gain.setValueAtTime(0,0);const i=t.createMediaStreamDestination();if(e.connect(n),n.connect(i),e.start(),[Ga]=i.stream.getAudioTracks(),!Ga)throw Error("Could not get empty media stream audio track");Ga.enabled=!1}return Ga.clone()}class Do{get isResolved(){return this._isResolved}constructor(e,n){this._isResolved=!1,this.onFinally=n,this.promise=new Promise((i,r)=>C(this,void 0,void 0,function*(){this.resolve=i,this.reject=r,e&&(yield e(i,r))})).finally(()=>{var i;this._isResolved=!0,(i=this.onFinally)===null||i===void 0||i.call(this)})}}function w6(t){return d6.includes(t)}function ts(t){if(typeof t=="string"||typeof t=="number")return t;if(Array.isArray(t))return t[0];if(t.exact)return Array.isArray(t.exact)?t.exact[0]:t.exact;if(t.ideal)return Array.isArray(t.ideal)?t.ideal[0]:t.ideal;throw Error("could not unwrap constraint")}function C6(t){return t.startsWith("http")?t.replace(/^(http)/,"ws"):t}function eg(t){return t.startsWith("ws")?t.replace(/^(ws)/,"http"):t}function E6(t,e){return t.segments.map(n=>{let{id:i,text:r,language:s,startTime:o,endTime:a,final:l}=n;var c;const u=(c=e.get(i))!==null&&c!==void 0?c:Date.now(),d=Date.now();return l?e.delete(i):e.set(i,u),{id:i,text:r,startTime:Number.parseInt(o.toString()),endTime:Number.parseInt(a.toString()),final:l,language:s,firstReceivedTime:u,lastReceivedTime:d}})}function P6(t){const{id:e,timestamp:n,message:i,editTimestamp:r}=t;return{id:e,timestamp:Number.parseInt(n.toString()),editTimestamp:r?Number.parseInt(r.toString()):void 0,message:i}}function QS(t){switch(t.reason){case Se.LeaveRequest:return t.context;case Se.Cancelled:return oi.CLIENT_INITIATED;case Se.NotAllowed:return oi.USER_REJECTED;case Se.ServerUnreachable:return oi.JOIN_FAILURE;default:return oi.UNKNOWN_REASON}}function ju(t){return t!==void 0?Number(t):void 0}function Ts(t){return t!==void 0?BigInt(t):void 0}function Yo(t){return!!t&&!(t instanceof MediaStreamTrack)&&t.isLocal}function Di(t){return!!t&&t.kind==j.Kind.Audio}function eo(t){return!!t&&t.kind==j.Kind.Video}function Cr(t){return Yo(t)&&eo(t)}function Qi(t){return Yo(t)&&Di(t)}function tg(t){return!!t&&!t.isLocal}function R6(t){return!!t&&!t.isLocal}function qh(t){return tg(t)&&eo(t)}function _6(t){return t.isLocal}function A6(t,e){const n=[];let i=new TextEncoder().encode(t);for(;i.length>e;){let r=e;for(;r>0;){const s=i[r];if(s!==void 0&&(s&192)!==128)break;r--}n.push(i.slice(0,r)),i=i.slice(r)}return i.length>0&&n.push(i),n}function x_(t,e,n){var i,r,s,o;const{optionsWithoutProcessor:a,audioProcessor:l,videoProcessor:c}=k_(t??{}),u=e==null?void 0:e.processor,d=n==null?void 0:n.processor,f=a??{};return f.audio===!0&&(f.audio={}),f.video===!0&&(f.video={}),f.audio&&(ng(f.audio,e),(i=(s=f.audio).deviceId)!==null&&i!==void 0||(s.deviceId={ideal:"default"}),(l||u)&&(f.audio.processor=l??u)),f.video&&(ng(f.video,n),(r=(o=f.video).deviceId)!==null&&r!==void 0||(o.deviceId={ideal:"default"}),(c||d)&&(f.video.processor=c??d)),f}function ng(t,e){return Object.keys(e).forEach(n=>{t[n]===void 0&&(t[n]=e[n])}),t}function Cy(t){var e,n,i,r;const s={};if(t.video)if(typeof t.video=="object"){const o={},a=o,l=t.video;Object.keys(l).forEach(c=>{switch(c){case"resolution":ng(a,l.resolution);break;default:a[c]=l[c]}}),s.video=o,(e=(i=s.video).deviceId)!==null&&e!==void 0||(i.deviceId={ideal:"default"})}else s.video=t.video?{deviceId:{ideal:"default"}}:!1;else s.video=!1;return t.audio?typeof t.audio=="object"?(s.audio=t.audio,(n=(r=s.audio).deviceId)!==null&&n!==void 0||(r.deviceId={ideal:"default"})):s.audio={deviceId:{ideal:"default"}}:s.audio=!1,s}function S_(t){return C(this,arguments,void 0,function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return function*(){const i=T_();if(i){const r=i.createAnalyser();r.fftSize=2048;const s=r.frequencyBinCount,o=new Uint8Array(s);i.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(r),yield hn(n),r.getByteTimeDomainData(o);const l=o.some(c=>c!==128&&c!==0);return i.close(),!l}return!1}()})}function T_(){var t;const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e){const n=new e({latencyHint:"interactive"});if(n.state==="suspended"&&typeof window<"u"&&(!((t=window.document)===null||t===void 0)&&t.body)){const i=()=>C(this,void 0,void 0,function*(){var r;try{n.state==="suspended"&&(yield n.resume())}catch(s){console.warn("Error trying to auto-resume audio context",s)}(r=window.document.body)===null||r===void 0||r.removeEventListener("click",i)});window.document.body.addEventListener("click",i)}return n}}function N6(t){return t==="audioinput"?j.Source.Microphone:t==="videoinput"?j.Source.Camera:j.Source.Unknown}function ig(t){return t===j.Source.Microphone?"audioinput":t===j.Source.Camera?"videoinput":void 0}function I6(t){var e,n;let i=(e=t.video)!==null&&e!==void 0?e:!0;return t.resolution&&t.resolution.width>0&&t.resolution.height>0&&(i=typeof i=="boolean"?{}:i,Gs()?i=Object.assign(Object.assign({},i),{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}):i=Object.assign(Object.assign({},i),{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate})),{audio:(n=t.audio)!==null&&n!==void 0?n:!1,video:i,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio,preferCurrentTab:t.preferCurrentTab}}function Fu(t){return t.split("/")[1].toLowerCase()}function O6(t){const e=[];return t.forEach(n=>{n.track!==void 0&&e.push(new by({cid:n.track.mediaStreamID,track:n.trackInfo}))}),e}function ge(t){return"mediaStreamTrack"in t?{trackID:t.sid,source:t.source,muted:t.isMuted,enabled:t.mediaStreamTrack.enabled,kind:t.kind,streamID:t.mediaStreamID,streamTrackID:t.mediaStreamTrack.id}:{trackID:t.trackSid,enabled:t.isEnabled,muted:t.isMuted,trackInfo:Object.assign({mimeType:t.mimeType,name:t.trackName,encrypted:t.isEncrypted,kind:t.kind,source:t.source},t.track?ge(t.track):{})}}function M6(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function D6(t,e){var n;t===void 0&&(t={}),e===void 0&&(e={});const i=[...Object.keys(e),...Object.keys(t)],r={};for(const s of i)t[s]!==e[s]&&(r[s]=(n=e[s])!==null&&n!==void 0?n:"");return r}function k_(t){const e=Object.assign({},t);let n,i;return typeof e.audio=="object"&&e.audio.processor&&(n=e.audio.processor,e.audio=Object.assign(Object.assign({},e.audio),{processor:void 0})),typeof e.video=="object"&&e.video.processor&&(i=e.video.processor,e.video=Object.assign(Object.assign({},e.video),{processor:void 0})),{audioProcessor:n,videoProcessor:i,optionsWithoutProcessor:i6(e)}}function L6(t){switch(t){case st.CAMERA:return j.Source.Camera;case st.MICROPHONE:return j.Source.Microphone;case st.SCREEN_SHARE:return j.Source.ScreenShare;case st.SCREEN_SHARE_AUDIO:return j.Source.ScreenShareAudio;default:return j.Source.Unknown}}function XS(t,e){return t.width*t.height<e.width*e.height}function j6(t,e){var n;return(n=t.layers)===null||n===void 0?void 0:n.find(i=>i.quality===e)}class F6 extends Vi.EventEmitter{constructor(e){super(),this.onWorkerMessage=n=>{var i,r;const{kind:s,data:o}=n.data;switch(s){case"error":be.error(o.error.message),this.emit(Wr.EncryptionError,o.error);break;case"initAck":o.enabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)});break;case"enable":if(o.enabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)}),this.encryptionEnabled!==o.enabled&&o.participantIdentity===((i=this.room)===null||i===void 0?void 0:i.localParticipant.identity))this.emit(Wr.ParticipantEncryptionStatusChanged,o.enabled,this.room.localParticipant),this.encryptionEnabled=o.enabled;else if(o.participantIdentity){const a=(r=this.room)===null||r===void 0?void 0:r.getParticipantByIdentity(o.participantIdentity);if(!a)throw TypeError("couldn't set encryption status, participant not found".concat(o.participantIdentity));this.emit(Wr.ParticipantEncryptionStatusChanged,o.enabled,a)}break;case"ratchetKey":this.keyProvider.emit(es.KeyRatcheted,o.ratchetResult,o.participantIdentity,o.keyIndex);break}},this.onWorkerError=n=>{be.error("e2ee worker encountered an error:",{error:n.error}),this.emit(Wr.EncryptionError,n.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1}setup(e){if(!e6())throw new ky("tried to setup end-to-end encryption on an unsupported browser");if(be.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:FV.getLevel()}};this.worker&&(be.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(e,n){be.debug("set e2ee to ".concat(e," for participant ").concat(n)),this.postEnable(e,n)}setSifTrailer(e){!e||e.length===0?be.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(G.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(e,n){e.on(B.TrackPublished,(i,r)=>this.setParticipantCryptorEnabled(i.trackInfo.encryption!==bn.NONE,r.identity)),e.on(B.ConnectionStateChanged,i=>{i===we.Connected&&e.remoteParticipants.forEach(r=>{r.trackPublications.forEach(s=>{this.setParticipantCryptorEnabled(s.trackInfo.encryption!==bn.NONE,r.identity)})})}).on(B.TrackUnsubscribed,(i,r,s)=>{var o;const a={kind:"removeTransform",data:{participantIdentity:s.identity,trackId:i.mediaStreamID}};(o=this.worker)===null||o===void 0||o.postMessage(a)}).on(B.TrackSubscribed,(i,r,s)=>{this.setupE2EEReceiver(i,s.identity,r.trackInfo)}).on(B.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");n.getKeys().forEach(i=>{this.postKey(i)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),e.localParticipant.on(K.LocalSenderCreated,(i,r)=>C(this,void 0,void 0,function*(){this.setupE2EESender(r,i)})),n.on(es.SetKey,i=>this.postKey(i)).on(es.RatchetRequest,(i,r)=>this.postRatchetRequest(i,r))}postRatchetRequest(e,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const i={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:n}};this.worker.postMessage(i)}postKey(e){let{key:n,participantIdentity:i,keyIndex:r}=e;var s;if(!this.worker)throw Error("could not set key, worker is missing");const o={kind:"setKey",data:{participantIdentity:i,isPublisher:i===((s=this.room)===null||s===void 0?void 0:s.localParticipant.identity),key:n,keyIndex:r}};this.worker.postMessage(o)}postEnable(e,n){if(this.worker){const i={kind:"enable",data:{enabled:e,participantIdentity:n}};this.worker.postMessage(i)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const i={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(i)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(n)}setupE2EEReceiver(e,n,i){if(e.receiver){if(!(i!=null&&i.mimeType)||i.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,n,e.kind==="video"?Fu(i.mimeType):void 0)}}setupE2EESender(e,n){if(!Yo(e)||!n){n||be.warn("early return because sender is not ready");return}this.handleSender(n,e.mediaStreamID,void 0)}handleReceiver(e,n,i,r){return C(this,void 0,void 0,function*(){if(this.worker){if(qm()){const s={kind:"decode",participantIdentity:i,trackId:n,codec:r};e.transform=new RTCRtpScriptTransform(this.worker,s)}else{if(Ha in e&&r){const l={kind:"updateCodec",data:{trackId:n,codec:r,participantIdentity:i}};this.worker.postMessage(l);return}let s=e.writableStream,o=e.readableStream;if(!s||!o){const l=e.createEncodedStreams();e.writableStream=l.writable,s=l.writable,e.readableStream=l.readable,o=l.readable}const a={kind:"decode",data:{readableStream:o,writableStream:s,trackId:n,codec:r,participantIdentity:i,isReuse:Ha in e}};this.worker.postMessage(a,[o,s])}e[Ha]=!0}})}handleSender(e,n,i){var r;if(!(Ha in e||!this.worker)){if(!(!((r=this.room)===null||r===void 0)&&r.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(qm()){be.info("initialize script transform");const s={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,s)}else{be.info("initialize encoded streams");const s=e.createEncodedStreams(),o={kind:"encode",data:{readableStream:s.readable,writableStream:s.writable,codec:i,trackId:n,participantIdentity:this.room.localParticipant.identity,isReuse:!1}};this.worker.postMessage(o,[s.readable,s.writable])}e[Ha]=!0}}}const Gh="default";class gt{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new gt),this.instance}get previousDevices(){return this._previousDevices}getDevices(e){return C(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var s;if(((s=gt.userMediaPromiseMap)===null||s===void 0?void 0:s.size)>0){be.debug("awaiting getUserMedia promise");try{n?yield gt.userMediaPromiseMap.get(n):yield Promise.all(gt.userMediaPromiseMap.values())}catch{be.warn("error waiting for media permissons")}}let o=yield navigator.mediaDevices.enumerateDevices();if(r&&!(Gs()&&i.hasDeviceInUse(n))&&(o.filter(l=>l.kind===n).length===0||o.some(l=>{const c=l.label==="",u=n?l.kind===n:!0;return c&&u}))){const l={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"&&{deviceId:{ideal:"default"}}},c=yield navigator.mediaDevices.getUserMedia(l);o=yield navigator.mediaDevices.enumerateDevices(),c.getTracks().forEach(u=>{u.stop()})}return i._previousDevices=o,n&&(o=o.filter(a=>a.kind===n)),o}()})}normalizeDeviceId(e,n,i){return C(this,void 0,void 0,function*(){if(n!==Gh)return n;const r=yield this.getDevices(e),s=r.find(a=>a.deviceId===Gh);if(!s){be.warn("could not reliably determine default device");return}const o=r.find(a=>a.deviceId!==Gh&&a.groupId===(i??s.groupId));if(!o){be.warn("could not reliably determine default device");return}return o==null?void 0:o.deviceId})}hasDeviceInUse(e){return e?gt.userMediaPromiseMap.has(e):gt.userMediaPromiseMap.size>0}}gt.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];gt.userMediaPromiseMap=new Map;var Cl;(function(t){t[t.WAITING=0]="WAITING",t[t.RUNNING=1]="RUNNING",t[t.COMPLETED=2]="COMPLETED"})(Cl||(Cl={}));class U6{constructor(){this.pendingTasks=new Map,this.taskMutex=new Ht,this.nextTaskIndex=0}run(e){return C(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:Cl.WAITING};this.pendingTasks.set(n.id,n);const i=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=Cl.RUNNING,yield e()}finally{n.status=Cl.COMPLETED,this.pendingTasks.delete(n.id),i()}})}flush(){return C(this,void 0,void 0,function*(){return this.run(()=>C(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}function B6(t,e){const n=new URL(C6(t));return e.forEach((i,r)=>{n.searchParams.set(r,i)}),w_(n,"rtc")}function V6(t){const e=new URL(eg(t));return w_(e,"validate")}function z6(t){return t.endsWith("/")?t:"".concat(t,"/")}function w_(t,e){return t.pathname="".concat(z6(t.pathname)).concat(e),t.toString()}const $6=["syncState","trickle","offer","answer","simulate","leave"];function W6(t){const e=$6.indexOf(t.case)>=0;return be.trace("request allowed to bypass queue:",{canPass:e,req:t}),e}var De;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.CONNECTED=1]="CONNECTED",t[t.RECONNECTING=2]="RECONNECTING",t[t.DISCONNECTING=3]="DISCONNECTING",t[t.DISCONNECTED=4]="DISCONNECTED"})(De||(De={}));class Ey{get currentState(){return this.state}get isDisconnected(){return this.state===De.DISCONNECTING||this.state===De.DISCONNECTED}get isEstablishingConnection(){return this.state===De.CONNECTING||this.state===De.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i;this.rtt=0,this.state=De.DISCONNECTED,this.log=be,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=br((i=n.loggerName)!==null&&i!==void 0?i:fi.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=e,this.requestQueue=new U6,this.queuedRequests=[],this.closingLock=new Ht,this.connectionLock=new Ht,this.state=De.DISCONNECTED}get logContext(){var e,n;return(n=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:{}}join(e,n,i,r){return C(this,void 0,void 0,function*(){return this.state=De.CONNECTING,this.options=i,yield this.connect(e,n,i,r)})}reconnect(e,n,i,r){return C(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=De.RECONNECTING,this.clearPingInterval(),yield this.connect(e,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:i,reconnectReason:r}))})}connect(e,n,i,r){this.connectOptions=i;const s=k6(),o=H6(n,s,i),a=B6(e,o),l=V6(a);return new Promise((c,u)=>C(this,void 0,void 0,function*(){const d=yield this.connectionLock.lock();try{const f=()=>C(this,void 0,void 0,function*(){this.close(),clearTimeout(h),u(new _e("room connection has been cancelled (signal)",Se.Cancelled))}),h=setTimeout(()=>{this.close(),u(new _e("room connection has timed out (signal)",Se.ServerUnreachable))},i.websocketTimeout);r!=null&&r.aborted&&f(),r==null||r.addEventListener("abort",f);const v=new URL(a);v.searchParams.has("access_token")&&v.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(v),Object.assign({reconnect:i.reconnect,reconnectReason:i.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(a),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(h)},this.ws.onerror=m=>C(this,void 0,void 0,function*(){if(this.state!==De.CONNECTED){this.state=De.DISCONNECTED,clearTimeout(h);try{const b=yield fetch(l);if(b.status.toFixed(0).startsWith("4")){const p=yield b.text();u(new _e(p,Se.NotAllowed,b.status))}else u(new _e("Encountered unknown websocket error during connection: ".concat(m.toString()),Se.InternalError,b.status))}catch(b){u(new _e(b instanceof Error?b.message:"server was not reachable",Se.ServerUnreachable))}return}this.handleWSError(m)}),this.ws.onmessage=m=>C(this,void 0,void 0,function*(){var b,p,y;let S;if(typeof m.data=="string"){const T=JSON.parse(m.data);S=RS.fromJson(T,{ignoreUnknownFields:!0})}else if(m.data instanceof ArrayBuffer)S=RS.fromBinary(new Uint8Array(m.data));else{this.log.error("could not decode websocket message: ".concat(typeof m.data),this.logContext);return}if(this.state!==De.CONNECTED){let T=!1;if(((b=S.message)===null||b===void 0?void 0:b.case)==="join"?(this.state=De.CONNECTED,r==null||r.removeEventListener("abort",f),this.pingTimeoutDuration=S.message.value.pingTimeout,this.pingIntervalDuration=S.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),c(S.message.value)):this.state===De.RECONNECTING&&S.message.case!=="leave"?(this.state=De.CONNECTED,r==null||r.removeEventListener("abort",f),this.startPingInterval(),((p=S.message)===null||p===void 0?void 0:p.case)==="reconnect"?c(S.message.value):(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),c(void 0),T=!0)):this.isEstablishingConnection&&S.message.case==="leave"?u(new _e("Received leave request while trying to (re)connect",Se.LeaveRequest,void 0,S.message.value.reason)):i.reconnect||u(new _e("did not receive join response, got ".concat((y=S.message)===null||y===void 0?void 0:y.case," instead"),Se.InternalError)),!T)return}this.signalLatency&&(yield hn(this.signalLatency)),this.handleSignalResponse(S)}),this.ws.onclose=m=>{this.isEstablishingConnection&&u(new _e("Websocket got closed during a (re)connection attempt",Se.InternalError)),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:m.reason,code:m.code,wasClean:m.wasClean,state:this.state})),this.handleOnClose(m.reason)}}finally{d()}}))}close(){return C(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){const i=yield e.closingLock.lock();try{if(e.clearPingInterval(),n&&(e.state=De.DISCONNECTING),e.ws){e.ws.onmessage=null,e.ws.onopen=null,e.ws.onclose=null;const r=new Promise(s=>{e.ws?e.ws.onclose=()=>{s()}:s()});e.ws.readyState<e.ws.CLOSING&&(e.ws.close(),yield Promise.race([r,hn(250)])),e.ws=void 0}}finally{n&&(e.state=De.DISCONNECTED),i()}}()})}sendOffer(e,n){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:Rd(e,n)})}sendAnswer(e,n){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:Rd(e,n)})}sendIceCandidate(e,n){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new vy({candidateInit:JSON.stringify(e),target:n})})}sendMuteTrack(e,n){return this.sendRequest({case:"mute",value:new yy({sid:e,muted:n})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,n){return C(this,arguments,void 0,function(i,r){var s=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){const a=s.getNextRequestId();return yield s.sendRequest({case:"updateMetadata",value:new NR({requestId:a,metadata:i,name:r,attributes:o})}),a}()})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,n){return this.sendRequest({case:"updateLayers",value:new AR({trackSid:e,layers:n})})}sendUpdateSubscriptionPermissions(e,n){return this.sendRequest({case:"subscriptionPermission",value:new MR({allParticipants:e,trackPermissions:n})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:Ve.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new FR({timestamp:Ve.parse(Date.now()),rtt:Ve.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(e,n){return this.sendRequest({case:"updateAudioTrack",value:new _R({trackSid:e,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new Ef({reason:oi.CLIENT_INITIATED,action:qo.DISCONNECT})})}sendRequest(e){return C(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function*(){if(!r&&!W6(n)&&i.state===De.RECONNECTING){i.queuedRequests.push(()=>C(i,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(r||(yield i.requestQueue.flush()),i.signalLatency&&(yield hn(i.signalLatency)),i.isDisconnected){i.log.debug("skipping signal request (type: ".concat(n.case,") - SignalClient disconnected"));return}if(!i.ws||i.ws.readyState!==i.ws.OPEN){i.log.error("cannot send signal request before connected, type: ".concat(n==null?void 0:n.case),i.logContext);return}const o=new hV({message:n});try{i.useJSON?i.ws.send(o.toJsonString()):i.ws.send(o.toBinary())}catch(a){i.log.error("error sending signal message",Object.assign(Object.assign({},i.logContext),{error:a}))}}()})}handleSignalResponse(e){var n,i;const r=e.message;if(r==null){this.log.debug("received unsupported message",this.logContext);return}let s=!1;if(r.case==="answer"){const o=JS(r.value);this.onAnswer&&this.onAnswer(o,r.value.id)}else if(r.case==="offer"){const o=JS(r.value);this.onOffer&&this.onOffer(o,r.value.id)}else if(r.case==="trickle"){const o=JSON.parse(r.value.candidateInit);this.onTrickle&&this.onTrickle(o,r.value.target)}else r.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=r.value.participants)!==null&&n!==void 0?n:[]):r.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(r.value):r.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((i=r.value.speakers)!==null&&i!==void 0?i:[]):r.case==="leave"?this.onLeave&&this.onLeave(r.value):r.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(r.value.sid,r.value.muted):r.case==="roomUpdate"?this.onRoomUpdate&&r.value.room&&this.onRoomUpdate(r.value.room):r.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(r.value):r.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(r.value):r.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(r.value):r.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(r.value):r.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(r.value):r.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(r.value):r.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(r.value):r.case==="pong"||(r.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(r.value.lastPingTimestamp.toString()),this.resetPingTimeout(),s=!0):r.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(r.value):r.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(r.value.trackSid):r.case==="roomMoved"?(this.onTokenRefresh&&this.onTokenRefresh(r.value.token),this.onRoomMoved&&this.onRoomMoved(r.value)):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:r.case})));s||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return C(this,void 0,void 0,function*(){if(this.state===De.DISCONNECTED)return;const n=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),n&&n(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=St.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&St.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=St.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&St.clearInterval(this.pingInterval)}}function JS(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function Rd(t,e){return new qs({sdp:t.sdp,type:t.type,id:e})}function H6(t,e,n){var i;const r=new URLSearchParams;return r.set("access_token",t),n.reconnect&&(r.set("reconnect","1"),n.sid&&r.set("sid",n.sid)),r.set("auto_subscribe",n.autoSubscribe?"1":"0"),r.set("sdk",Fi()?"reactnative":"js"),r.set("version",e.version),r.set("protocol",e.protocol.toString()),e.deviceModel&&r.set("device_model",e.deviceModel),e.os&&r.set("os",e.os),e.osVersion&&r.set("os_version",e.osVersion),e.browser&&r.set("browser",e.browser),e.browserVersion&&r.set("browser_version",e.browserVersion),n.adaptiveStream&&r.set("adaptive_stream","1"),n.reconnectReason&&r.set("reconnect_reason",n.reconnectReason.toString()),!((i=navigator.connection)===null||i===void 0)&&i.type&&r.set("network",navigator.connection.type),r}class ZS{constructor(){this.buffer=[],this._totalSize=0}push(e){this.buffer.push(e),this._totalSize+=e.data.byteLength}pop(){const e=this.buffer.shift();return e&&(this._totalSize-=e.data.byteLength),e}getAll(){return this.buffer.slice()}popToSequence(e){for(;this.buffer.length>0&&this.buffer[0].sequence<=e;)this.pop()}alignBufferedAmount(e){for(;this.buffer.length>0;){const n=this.buffer[0];if(this._totalSize-n.data.byteLength<=e)break;this.pop()}}get length(){return this.buffer.length}}class q6{constructor(e){this._map=new Map,this._lastCleanup=0,this.ttl=e}set(e,n){const i=Date.now();i-this._lastCleanup>this.ttl/2&&this.cleanup();const r=i+this.ttl;return this._map.set(e,{value:n,expiresAt:r}),this}get(e){const n=this._map.get(e);if(n){if(n.expiresAt<Date.now()){this._map.delete(e);return}return n.value}}has(e){const n=this._map.get(e);return n?n.expiresAt<Date.now()?(this._map.delete(e),!1):!0:!1}delete(e){return this._map.delete(e)}clear(){this._map.clear()}cleanup(){const e=Date.now();for(const[n,i]of this._map.entries())i.expiresAt<e&&this._map.delete(n);this._lastCleanup=e}get size(){return this.cleanup(),this._map.size}forEach(e){this.cleanup();for(const[n,i]of this._map.entries())i.expiresAt>=Date.now()&&e(i.value,n,this.asValueMap())}map(e){this.cleanup();const n=[],i=this.asValueMap();for(const[r,s]of i.entries())n.push(e(s,r,i));return n}asValueMap(){const e=new Map;for(const[n,i]of this._map.entries())i.expiresAt>=Date.now()&&e.set(n,i.value);return e}}var Gn={},Kh={},Yh={exports:{}},eT;function Py(){if(eT)return Yh.exports;eT=1;var t=Yh.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var n="candidate:%s %d %s %d %s %d typ %s";return n+=e.raddr!=null?" raddr %s rport %d":"%v%v",n+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(n+=" generation %d"),n+=e["network-id"]!=null?" network-id %d":"%v",n+=e["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var n="ssrc:%d";return e.attribute!=null&&(n+=" %s",e.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var n="mediaclk:";return n+=e.id!=null?"id=%s %s":"%v%s",n+=e.mediaClockValue!=null?"=%s":"",n+=e.rateNumerator!=null?" rate=%s":"",n+=e.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(t).forEach(function(e){var n=t[e];n.forEach(function(i){i.reg||(i.reg=/(.*)/),i.format||(i.format="%s")})}),Yh.exports}var tT;function G6(){return tT||(tT=1,function(t){var e=function(a){return String(Number(a))===a?Number(a):a},n=function(a,l,c,u){if(u&&!c)l[u]=e(a[1]);else for(var d=0;d<c.length;d+=1)a[d+1]!=null&&(l[c[d]]=e(a[d+1]))},i=function(a,l,c){var u=a.name&&a.names;a.push&&!l[a.push]?l[a.push]=[]:u&&!l[a.name]&&(l[a.name]={});var d=a.push?{}:u?l[a.name]:l;n(c.match(a.reg),d,a.names,a.name),a.push&&l[a.push].push(d)},r=Py(),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(a){var l={},c=[],u=l;return a.split(/(\r\n|\r|\n)/).filter(s).forEach(function(d){var f=d[0],h=d.slice(2);f==="m"&&(c.push({rtp:[],fmtp:[]}),u=c[c.length-1]);for(var v=0;v<(r[f]||[]).length;v+=1){var m=r[f][v];if(m.reg.test(h))return i(m,u,h)}}),l.media=c,l};var o=function(a,l){var c=l.split(/=(.+)/,2);return c.length===2?a[c[0]]=e(c[1]):c.length===1&&l.length>1&&(a[c[0]]=void 0),a};t.parseParams=function(a){return a.split(/;\s?/).reduce(o,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(a){return a.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(a){for(var l=[],c=a.split(" ").map(e),u=0;u<c.length;u+=3)l.push({component:c[u],ip:c[u+1],port:c[u+2]});return l},t.parseImageAttributes=function(a){return a.split(" ").map(function(l){return l.substring(1,l.length-1).split(",").reduce(o,{})})},t.parseSimulcastStreamList=function(a){return a.split(";").map(function(l){return l.split(",").map(function(c){var u,d=!1;return c[0]!=="~"?u=e(c):(u=e(c.substring(1,c.length)),d=!0),{scid:u,paused:d}})})}}(Kh)),Kh}var Qh,nT;function K6(){if(nT)return Qh;nT=1;var t=Py(),e=/%[sdv%]/g,n=function(o){var a=1,l=arguments,c=l.length;return o.replace(e,function(u){if(a>=c)return u;var d=l[a];switch(a+=1,u){case"%%":return"%";case"%s":return String(d);case"%d":return Number(d);case"%v":return""}})},i=function(o,a,l){var c=a.format instanceof Function?a.format(a.push?l:l[a.name]):a.format,u=[o+"="+c];if(a.names)for(var d=0;d<a.names.length;d+=1){var f=a.names[d];a.name?u.push(l[a.name][f]):u.push(l[a.names[d]])}else u.push(l[a.name]);return n.apply(null,u)},r=["v","o","s","i","u","e","p","c","b","t","r","z","a"],s=["i","c","b","a"];return Qh=function(o,a){a=a||{},o.version==null&&(o.version=0),o.name==null&&(o.name=" "),o.media.forEach(function(d){d.payloads==null&&(d.payloads="")});var l=a.outerOrder||r,c=a.innerOrder||s,u=[];return l.forEach(function(d){t[d].forEach(function(f){f.name in o&&o[f.name]!=null?u.push(i(d,f,o)):f.push in o&&o[f.push]!=null&&o[f.push].forEach(function(h){u.push(i(d,f,h))})})}),o.media.forEach(function(d){u.push(i("m",t.m[0],d)),c.forEach(function(f){t[f].forEach(function(h){h.name in d&&d[h.name]!=null?u.push(i(f,h,d)):h.push in d&&d[h.push]!=null&&d[h.push].forEach(function(v){u.push(i(f,h,v))})})})}),u.join(`\r
`)+`\r
`},Qh}var iT;function Y6(){if(iT)return Gn;iT=1;var t=G6(),e=K6(),n=Py();return Gn.grammar=n,Gn.write=e,Gn.parse=t.parse,Gn.parseParams=t.parseParams,Gn.parseFmtpConfig=t.parseFmtpConfig,Gn.parsePayloads=t.parsePayloads,Gn.parseRemoteCandidates=t.parseRemoteCandidates,Gn.parseImageAttributes=t.parseImageAttributes,Gn.parseSimulcastStreamList=t.parseSimulcastStreamList,Gn}var _r=Y6();function Ry(t,e,n){var i,r,s;e===void 0&&(e=50),n===void 0&&(n={});var o=(i=n.isImmediate)!=null&&i,a=(r=n.callback)!=null&&r,l=n.maxWait,c=Date.now(),u=[];function d(){if(l!==void 0){var h=Date.now()-c;if(h+e>=l)return l-h}return e}var f=function(){var h=[].slice.call(arguments),v=this;return new Promise(function(m,b){var p=o&&s===void 0;if(s!==void 0&&clearTimeout(s),s=setTimeout(function(){if(s=void 0,c=Date.now(),!o){var S=t.apply(v,h);a&&a(S),u.forEach(function(T){return(0,T.resolve)(S)}),u=[]}},d()),p){var y=t.apply(v,h);return a&&a(y),m(y)}u.push({resolve:m,reject:b})})};return f.cancel=function(h){s!==void 0&&clearTimeout(s),u.forEach(function(v){return(0,v.reject)(h)}),u=[]},f}const Q6=.7,X6=20,Qo={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class rT extends Vi.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i;super(),this.log=be,this.ddExtID=0,this.latestOfferId=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=Ry(r=>C(this,void 0,void 0,function*(){this.emit(Qo.NegotiationStarted);try{yield this.createAndSendOffer()}catch(s){if(r)r(s);else throw s}}),X6),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=br((i=n.loggerName)!==null&&i!==void 0?i:fi.PCTransport),this.loggerOptions=n,this.config=e,this._pc=this.createPC(),this.offerLock=new Ht}createPC(){const e=new RTCPeerConnection(this.config);return e.onicecandidate=n=>{var i;n.candidate&&((i=this.onIceCandidate)===null||i===void 0||i.call(this,n.candidate))},e.onicecandidateerror=n=>{var i;(i=this.onIceCandidateError)===null||i===void 0||i.call(this,n)},e.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,e.connectionState)},e.ondatachannel=n=>{var i;(i=this.onDataChannel)===null||i===void 0||i.call(this,n)},e.ontrack=n=>{var i;(i=this.onTrack)===null||i===void 0||i.call(this,n)},e}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return C(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e,n){return C(this,void 0,void 0,function*(){var i;if(e.type==="answer"&&this.latestOfferId>0&&n>0&&n!==this.latestOfferId)return this.log.warn("ignoring answer for old offer",Object.assign(Object.assign({},this.logContext),{offerId:n,latestOfferId:this.latestOfferId})),!1;let r;if(e.type==="offer"){let{stereoMids:s,nackMids:o}=J6(e);this.remoteStereoMids=s,this.remoteNackMids=o}else if(e.type==="answer"){const s=_r.parse((i=e.sdp)!==null&&i!==void 0?i:"");s.media.forEach(o=>{o.type==="audio"&&this.trackBitrates.some(a=>{if(!a.transceiver||o.mid!=a.transceiver.mid)return!1;let l=0;if(o.rtp.some(u=>u.codec.toUpperCase()===a.codec.toUpperCase()?(l=u.payload,!0):!1),l===0)return!0;let c=!1;for(const u of o.fmtp)if(u.payload===l){u.config=u.config.split(";").filter(d=>!d.includes("maxaveragebitrate")).join(";"),a.maxbr>0&&(u.config+=";maxaveragebitrate=".concat(a.maxbr*1e3)),c=!0;break}return c||a.maxbr>0&&o.fmtp.push({payload:l,config:"maxaveragebitrate=".concat(a.maxbr*1e3)}),!0})}),r=_r.write(s)}return yield this.setMungedSDP(e,r,!0),this.pendingCandidates.forEach(s=>{this.pc.addIceCandidate(s)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(Qo.NegotiationComplete),e.sdp&&_r.parse(e.sdp).media.forEach(o=>{o.type==="video"&&this.emit(Qo.RTPVideoPayloadTypes,o.rtp)})),!0})}createAndSendOffer(e){return C(this,void 0,void 0,function*(){var n;const i=yield this.offerLock.lock();try{if(this.onOffer===void 0)return;if(e!=null&&e.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const a=this._pc.remoteDescription;if(e!=null&&e.iceRestart&&a)yield this._pc.setRemoteDescription(a);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const r=this.latestOfferId+1;this.latestOfferId=r;const s=yield this.pc.createOffer(e);this.log.debug("original offer",Object.assign({sdp:s.sdp},this.logContext));const o=_r.parse((n=s.sdp)!==null&&n!==void 0?n:"");if(o.media.forEach(a=>{oT(a),a.type==="audio"?sT(a,[],[]):a.type==="video"&&this.trackBitrates.some(l=>{if(!a.msid||!l.cid||!a.msid.includes(l.cid))return!1;let c=0;if(a.rtp.some(d=>d.codec.toUpperCase()===l.codec.toUpperCase()?(c=d.payload,!0):!1),c===0||(Ri(l.codec)&&!Gs()&&this.ensureVideoDDExtensionForSVC(a,o),l.codec!=="av1"))return!0;const u=Math.round(l.maxbr*Q6);for(const d of a.fmtp)if(d.payload===c){d.config.includes("x-google-start-bitrate")||(d.config+=";x-google-start-bitrate=".concat(u));break}return!0})}),this.latestOfferId>r){this.log.warn("latestOfferId mismatch",Object.assign(Object.assign({},this.logContext),{latestOfferId:this.latestOfferId,offerId:r}));return}yield this.setMungedSDP(s,_r.write(o)),this.onOffer(s,this.latestOfferId)}finally{i()}})}createAndSetAnswer(){return C(this,void 0,void 0,function*(){var e;const n=yield this.pc.createAnswer(),i=_r.parse((e=n.sdp)!==null&&e!==void 0?e:"");return i.media.forEach(r=>{oT(r),r.type==="audio"&&sT(r,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,_r.write(i)),n})}createDataChannel(e,n){return this.pc.createDataChannel(e,n)}addTransceiver(e,n){return this.pc.addTransceiver(e,n)}addTrack(e){if(!this._pc)throw new ct("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var n;if(!this._pc)throw new ct("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(e)}getConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return C(this,void 0,void 0,function*(){var e;if(!this._pc)return;let n="";const i=new Map,r=new Map;if((yield this._pc.getStats()).forEach(a=>{switch(a.type){case"transport":n=a.selectedCandidatePairId;break;case"candidate-pair":n===""&&a.selected&&(n=a.id),i.set(a.id,a);break;case"remote-candidate":r.set(a.id,"".concat(a.address,":").concat(a.port));break}}),n==="")return;const o=(e=i.get(n))===null||e===void 0?void 0:e.remoteCandidateId;if(o!==void 0)return r.get(o)})}setMungedSDP(e,n,i){return C(this,void 0,void 0,function*(){if(n){const r=e.sdp;e.sdp=n;try{this.log.debug("setting munged ".concat(i?"remote":"local"," description"),this.logContext),i?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(s){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:s,sdp:n})),e.sdp=r}}try{i?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(r){let s="unknown error";r instanceof Error?s=r.message:typeof r=="string"&&(s=r);const o={error:s,sdp:e.sdp};throw!i&&this.pc.remoteDescription&&(o.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:o})),new Gm(s)}})}ensureVideoDDExtensionForSVC(e,n){var i,r;if(!((i=e.ext)===null||i===void 0?void 0:i.some(o=>o.uri===HS))){if(this.ddExtID===0){let o=0;n.media.forEach(a=>{var l;a.type==="video"&&((l=a.ext)===null||l===void 0||l.forEach(c=>{c.value>o&&(o=c.value)}))}),this.ddExtID=o+1}(r=e.ext)===null||r===void 0||r.push({value:this.ddExtID,uri:HS})}}}function sT(t,e,n){let i=0;t.rtp.some(r=>r.codec==="opus"?(i=r.payload,!0):!1),i>0&&(t.rtcpFb||(t.rtcpFb=[]),n.includes(t.mid)&&!t.rtcpFb.some(r=>r.payload===i&&r.type==="nack")&&t.rtcpFb.push({payload:i,type:"nack"}),e.includes(t.mid)&&t.fmtp.some(r=>r.payload===i?(r.config.includes("stereo=1")||(r.config+=";stereo=1"),!0):!1))}function J6(t){var e;const n=[],i=[],r=_r.parse((e=t.sdp)!==null&&e!==void 0?e:"");let s=0;return r.media.forEach(o=>{var a;o.type==="audio"&&(o.rtp.some(l=>l.codec==="opus"?(s=l.payload,!0):!1),!((a=o.rtcpFb)===null||a===void 0)&&a.some(l=>l.payload===s&&l.type==="nack")&&i.push(o.mid),o.fmtp.some(l=>l.payload===s?(l.config.includes("sprop-stereo=1")&&n.push(o.mid),!0):!1))}),{stereoMids:n,nackMids:i}}function oT(t){if(t.connection){const e=t.connection.ip.indexOf(":")>=0;(t.connection.version===4&&e||t.connection.version===6&&!e)&&(t.connection.ip="0.0.0.0",t.connection.version=4)}}const rg="vp8",Z6={audioPreset:Km.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:wy.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:rg,backupCodec:!0,preConnectBuffer:!1},C_={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},E_={deviceId:{ideal:"default"},resolution:rc.h720.resolution},ez={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new BV,disconnectOnPageLeave:!0,webAudioMix:!1},_y={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var Qe;(function(t){t[t.NEW=0]="NEW",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.FAILED=3]="FAILED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"})(Qe||(Qe={}));class tz{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,n,i){var r;this.peerConnectionTimeout=_y.peerConnectionTimeout,this.log=be,this.updateState=()=>{var s;const o=this.state,a=this.requiredTransports.map(l=>l.getConnectionState());a.every(l=>l==="connected")?this.state=Qe.CONNECTED:a.some(l=>l==="failed")?this.state=Qe.FAILED:a.some(l=>l==="connecting")?this.state=Qe.CONNECTING:a.every(l=>l==="closed")?this.state=Qe.CLOSED:a.some(l=>l==="closed")?this.state=Qe.CLOSING:a.every(l=>l==="new")&&(this.state=Qe.NEW),o!==this.state&&(this.log.debug("pc state change: from ".concat(Qe[o]," to ").concat(Qe[this.state]),this.logContext),(s=this.onStateChange)===null||s===void 0||s.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=br((r=i.loggerName)!==null&&r!==void 0?r:fi.PCManager),this.loggerOptions=i,this.isPublisherConnectionRequired=!n,this.isSubscriberConnectionRequired=n,this.publisher=new rT(e,i),this.subscriber=new rT(e,i),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=s=>{var o;(o=this.onIceCandidate)===null||o===void 0||o.call(this,s,si.PUBLISHER)},this.subscriber.onIceCandidate=s=>{var o;(o=this.onIceCandidate)===null||o===void 0||o.call(this,s,si.SUBSCRIBER)},this.subscriber.onDataChannel=s=>{var o;(o=this.onDataChannel)===null||o===void 0||o.call(this,s)},this.subscriber.onTrack=s=>{var o;(o=this.onTrack)===null||o===void 0||o.call(this,s)},this.publisher.onOffer=(s,o)=>{var a;(a=this.onPublisherOffer)===null||a===void 0||a.call(this,s,o)},this.state=Qe.NEW,this.connectionLock=new Ht,this.remoteOfferLock=new Ht}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}requireSubscriber(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e,n){return this.publisher.setRemoteDescription(e,n)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return C(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const e=this.publisher;for(const n of e.getSenders())try{e.canRemoveTrack()&&e.removeTrack(n)}catch(i){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:i}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return C(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,n){return C(this,void 0,void 0,function*(){n===si.PUBLISHER?yield this.publisher.addIceCandidate(e):yield this.subscriber.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e,n){return C(this,void 0,void 0,function*(){this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:this.subscriber.getSignallingState().toString()}));const i=yield this.remoteOfferLock.lock();try{return(yield this.subscriber.setRemoteDescription(e,n))?yield this.subscriber.createAndSetAnswer():void 0}finally{i()}})}updateConfiguration(e,n){this.publisher.setConfiguration(e),this.subscriber.setConfiguration(e),n&&this.triggerIceRestart()}ensurePCTransportConnection(e,n){return C(this,void 0,void 0,function*(){var i;const r=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((i=this.requiredTransports)===null||i===void 0?void 0:i.map(s=>this.ensureTransportConnected(s,e,n)))}finally{r()}})}negotiate(e){return C(this,void 0,void 0,function*(){return new Promise((n,i)=>C(this,void 0,void 0,function*(){const r=setTimeout(()=>{i("negotiation timed out")},this.peerConnectionTimeout),s=()=>{clearTimeout(r),i("negotiation aborted")};e.signal.addEventListener("abort",s),this.publisher.once(Qo.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(Qo.NegotiationComplete,()=>{clearTimeout(r),n()})}),yield this.publisher.negotiate(o=>{clearTimeout(r),i(o)})}))})}addPublisherTransceiver(e,n){return this.publisher.addTransceiver(e,n)}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,n){return this.publisher.createDataChannel(e,n)}getConnectedAddress(e){return e===si.PUBLISHER?this.publisher.getConnectedAddress():e===si.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&e.push(this.subscriber),e}ensureTransportConnected(e,n){return C(this,arguments,void 0,function(i,r){var s=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return function*(){if(i.getConnectionState()!=="connected")return new Promise((l,c)=>C(s,void 0,void 0,function*(){const u=()=>{this.log.warn("abort transport connection",this.logContext),St.clearTimeout(d),c(new _e("room connection has been cancelled",Se.Cancelled))};r!=null&&r.signal.aborted&&u(),r==null||r.signal.addEventListener("abort",u);const d=St.setTimeout(()=>{r==null||r.signal.removeEventListener("abort",u),c(new _e("could not establish pc connection",Se.InternalError))},o);for(;this.state!==Qe.CONNECTED;)if(yield hn(50),r!=null&&r.signal.aborted){c(new _e("room connection has been cancelled",Se.Cancelled));return}St.clearTimeout(d),r==null||r.signal.removeEventListener("abort",u),l()}))}()})}}class Ze extends Error{constructor(e,n,i){super(n),this.code=e,this.message=aT(n,Ze.MAX_MESSAGE_BYTES),this.data=i?aT(i,Ze.MAX_DATA_BYTES):void 0}static fromProto(e){return new Ze(e.code,e.message,e.data)}toProto(){return new bR({code:this.code,message:this.message,data:this.data})}static builtIn(e,n){return new Ze(Ze.ErrorCode[e],Ze.ErrorMessage[e],n)}}Ze.MAX_MESSAGE_BYTES=256;Ze.MAX_DATA_BYTES=15360;Ze.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404};Ze.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const P_=15360;function Ay(t){return new TextEncoder().encode(t).length}function aT(t,e){if(Ay(t)<=e)return t;let n=0,i=t.length;const r=new TextEncoder;for(;n<i;){const s=Math.floor((n+i+1)/2);r.encode(t.slice(0,s)).length<=e?n=s:i=s-1}return t.slice(0,n)}const Ny=2e3;function Rf(t,e){if(!e)return 0;let n,i;return"bytesReceived"in t?(n=t.bytesReceived,i=e.bytesReceived):"bytesSent"in t&&(n=t.bytesSent,i=e.bytesSent),n===void 0||i===void 0||t.timestamp===void 0||e.timestamp===void 0?0:(n-i)*8*1e3/(t.timestamp-e.timestamp)}const Iy=typeof MediaRecorder<"u";class nz{constructor(){throw new Error("MediaRecorder is not available in this environment")}}const iz=Iy?MediaRecorder:nz;class rz extends iz{constructor(e,n){if(!Iy)throw new Error("MediaRecorder is not available in this environment");super(new MediaStream([e.mediaStreamTrack]),n);let i,r;const s=()=>r===void 0,o=()=>{this.removeEventListener("dataavailable",i),this.removeEventListener("stop",o),this.removeEventListener("error",a),r==null||r.close(),r=void 0},a=l=>{r==null||r.error(l),this.removeEventListener("dataavailable",i),this.removeEventListener("stop",o),this.removeEventListener("error",a),r=void 0};this.byteStream=new ReadableStream({start:l=>{r=l,i=c=>C(this,void 0,void 0,function*(){let u;if(c.data.arrayBuffer){const d=yield c.data.arrayBuffer();u=new Uint8Array(d)}else if(c.data.byteArray)u=c.data.byteArray;else throw new Error("no data available!");s()||l.enqueue(u)}),this.addEventListener("dataavailable",i)},cancel:()=>{o()}}),this.addEventListener("stop",o),this.addEventListener("error",a)}}function sz(){return Iy}const oz=1e3,az=1e4;class R_ extends j{get sender(){return this._sender}set sender(e){this._sender=e}get constraints(){return this._constraints}get hasPreConnectBuffer(){return!!this.localTrackRecorder}constructor(e,n,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=arguments.length>4?arguments[4]:void 0;super(e,n,s),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=Ry(()=>C(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>C(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(W.Ended,this)},this.reacquireTrack=!1,this.providedByUser=r,this.muteLock=new Ht,this.pauseUpstreamLock=new Ht,this.processorLock=new Ht,this.restartLock=new Ht,this.setMediaStreamTrack(e,!0),this._constraints=e.getConstraints(),i&&(this._constraints=i)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==j.Kind.Video)return;const{width:e,height:n}=this._mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,n;return(n=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(e,n){return C(this,void 0,void 0,function*(){var i;if(e===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(s=>{Ko(this._mediaStreamTrack,s)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let r;if(this.processor&&e){const s=yield this.processorLock.lock();try{if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(Mo(e,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),r=this.processor.processedTrack}finally{s()}}this.sender&&((i=this.sender.transport)===null||i===void 0?void 0:i.state)!=="closed"&&(yield this.sender.replaceTrack(r??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(s=>{Mo(r??e,s)}))})}waitForDimensions(){return C(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:oz;return function*(){var i;if(e.kind===j.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((i=En())===null||i===void 0?void 0:i.os)==="iOS"&&(yield hn(10));const r=Date.now();for(;Date.now()-r<n;){const s=e.dimensions;if(s)return s;yield hn(50)}throw new sr("unable to get track dimensions after timeout")}()})}setDeviceId(e){return C(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===ts(e)||(this._constraints.deviceId=e,this.isMuted)?!0:(yield this.restartTrack(),ts(e)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return C(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){if(e.source===j.Source.ScreenShare)return;const{deviceId:i,groupId:r}=e._mediaStreamTrack.getSettings(),s=e.kind===j.Kind.Audio?"audioinput":"videoinput";return n?gt.getInstance().normalizeDeviceId(s,i,r):i}()})}mute(){return C(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return C(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e,n){return C(this,void 0,void 0,function*(){if(!this.sender)throw new sr("unable to replace an unpublished track");let i,r;return typeof n=="boolean"?i=n:n!==void 0&&(i=n.userProvidedTrack,r=n.stopProcessor),this.providedByUser=i??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),r&&this.processor&&(yield this.stopProcessor()),this})}restart(e){return C(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.restartLock.lock();try{e||(e=this._constraints);const{deviceId:i,facingMode:r}=e,s=VV(e,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const o={audio:!1,video:!1};this.kind===j.Kind.Video?o.video=i||r?{deviceId:i,facingMode:r}:!0:o.audio=i?{deviceId:i}:!0,this.attachedElements.forEach(c=>{Ko(this.mediaStreamTrack,c)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const l=(yield navigator.mediaDevices.getUserMedia(o)).getTracks()[0];return yield l.applyConstraints(s),l.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(l),this._constraints=e,this.emit(W.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?W.Muted:W.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return C(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),v_()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return C(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(W.UpstreamPaused,this);const i=En();if((i==null?void 0:i.name)==="Safari"&&Ui(i.version,"12.0")<0)throw new ky("pauseUpstream is not supported on Safari < 12.");((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{n()}})}resumeUpstream(){return C(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(W.UpstreamResumed,this),((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{n()}})}getRTCStatsReport(){return C(this,void 0,void 0,function*(){var e;return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){return C(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var s;const o=yield i.processorLock.lock();try{i.log.debug("setting up processor",i.logContext);const a=document.createElement(i.kind),l={kind:i.kind,track:i._mediaStreamTrack,element:a,audioContext:i.audioContext};if(yield n.init(l),i.log.debug("processor initialized",i.logContext),i.processor&&(yield i.stopProcessor()),i.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(Mo(i._mediaStreamTrack,a),a.muted=!0,a.play().catch(c=>{c instanceof DOMException&&c.name==="AbortError"?(i.log.warn("failed to play processor element, retrying",Object.assign(Object.assign({},i.logContext),{error:c})),setTimeout(()=>{a.play().catch(u=>{i.log.error("failed to play processor element",Object.assign(Object.assign({},i.logContext),{err:u}))})},100)):i.log.error("failed to play processor element",Object.assign(Object.assign({},i.logContext),{error:c}))}),i.processor=n,i.processorElement=a,i.processor.processedTrack){for(const c of i.attachedElements)c!==i.processorElement&&r&&(Ko(i._mediaStreamTrack,c),Mo(i.processor.processedTrack,c));yield(s=i.sender)===null||s===void 0?void 0:s.replaceTrack(i.processor.processedTrack)}i.emit(W.TrackProcessorUpdate,i.processor)}finally{o()}}()})}getProcessor(){return this.processor}stopProcessor(){return C(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var i,r;e.processor&&(e.log.debug("stopping processor",e.logContext),(i=e.processor.processedTrack)===null||i===void 0||i.stop(),yield e.processor.destroy(),e.processor=void 0,n||((r=e.processorElement)===null||r===void 0||r.remove(),e.processorElement=void 0),yield e._mediaStreamTrack.applyConstraints(e._constraints),yield e.setMediaStreamTrack(e._mediaStreamTrack,!0),e.emit(W.TrackProcessorUpdate))}()})}startPreConnectBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;if(!sz()){this.log.warn("MediaRecorder is not available, cannot start preconnect buffer",this.logContext);return}if(this.localTrackRecorder){this.log.warn("preconnect buffer already started");return}else{let n="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(n)||(n="video/mp4"),this.localTrackRecorder=new rz(this,{mimeType:n})}this.localTrackRecorder.start(e),this.autoStopPreConnectBuffer=setTimeout(()=>{this.log.warn("preconnect buffer timed out, stopping recording automatically",this.logContext),this.stopPreConnectBuffer()},az)}stopPreConnectBuffer(){clearTimeout(this.autoStopPreConnectBuffer),this.localTrackRecorder&&(this.localTrackRecorder.stop(),this.localTrackRecorder=void 0)}getPreConnectBuffer(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.byteStream}getPreConnectBufferMimeType(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.mimeType}}class _d extends R_{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;super(e,j.Kind.Audio,n,i,s),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>C(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let o;try{o=yield this.getSenderStats()}catch(a){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:a}));return}o&&this.prevStats&&(this._currentBitrate=Rf(o,this.prevStats)),this.prevStats=o}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(W.AudioTrackFeatureUpdate,this,mt.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(W.AudioTrackFeatureUpdate,this,mt.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=r,this.checkForSilence()}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return C(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===j.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return C(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const i=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==ts(this._constraints.deviceId);return this.source===j.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||i)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}restartTrack(e){return C(this,void 0,void 0,function*(){let n;if(e){const i=Cy({audio:e});typeof i.audio!="boolean"&&(n=i.audio)}yield this.restart(n)})}restart(e){const n=Object.create(null,{restart:{get:()=>super.restart}});return C(this,void 0,void 0,function*(){const i=yield n.restart.call(this,e);return this.checkForSilence(),i})}startMonitor(){cn()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},Ny)))}setProcessor(e){return C(this,void 0,void 0,function*(){var n;const i=yield this.processorLock.lock();try{if(!Fi()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.stopProcessor());const r={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(r),this.processor=e,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(W.TrackProcessorUpdate,this.processor)}finally{i()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){return C(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const n=yield this.sender.getStats();let i;return n.forEach(r=>{r.type==="outbound-rtp"&&(i={type:"audio",streamId:r.id,packetsSent:r.packetsSent,packetsLost:r.packetsLost,bytesSent:r.bytesSent,timestamp:r.timestamp,roundTripTime:r.roundTripTime,jitter:r.jitter})}),i})}checkForSilence(){return C(this,void 0,void 0,function*(){const e=yield S_(this);return e&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(W.AudioSilenceDetected)),e})}}function lz(t,e,n){switch(t.kind){case"audio":return new _d(t,e,!1,void 0,n);case"video":return new Ad(t,e,!1,n);default:throw new sr("unsupported track type: ".concat(t.kind))}}const cz=Object.values(rc),uz=Object.values(Ym),dz=Object.values(wy),fz=[rc.h180,rc.h360],hz=[Ym.h180,Ym.h360],pz=t=>[{scaleResolutionDownBy:2,fps:t.encoding.maxFramerate}].map(n=>{var i,r;return new Re(Math.floor(t.width/n.scaleResolutionDownBy),Math.floor(t.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(t.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((i=t.encoding.maxFramerate)!==null&&i!==void 0?i:30)/((r=n.fps)!==null&&r!==void 0?r:30))))),n.fps,t.encoding.priority)}),sg=["q","h","f"];function og(t,e,n,i){var r,s;let o=i==null?void 0:i.videoEncoding;t&&(o=i==null?void 0:i.screenShareEncoding);const a=i==null?void 0:i.simulcast,l=i==null?void 0:i.scalabilityMode,c=i==null?void 0:i.videoCodec;if(!o&&!a&&!l||!e||!n)return[{}];o||(o=gz(t,e,n,c),be.debug("using video encoding",o));const u=o.maxFramerate,d=new Re(e,n,o.maxBitrate,o.maxFramerate,o.priority);if(l&&Ri(c)){const v=new __(l),m=[];if(v.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(l));const b=En();if(Pd()||Fi()||(b==null?void 0:b.name)==="Chrome"&&Ui(b==null?void 0:b.version,"113")<0){const p=v.suffix=="h"?2:3,y=b6(b);for(let S=0;S<v.spatial;S+=1)m.push({rid:sg[2-S],maxBitrate:o.maxBitrate/Math.pow(p,S),maxFramerate:d.encoding.maxFramerate,scaleResolutionDownBy:y?Math.pow(2,S):void 0});m[0].scalabilityMode=l}else m.push({maxBitrate:o.maxBitrate,maxFramerate:d.encoding.maxFramerate,scalabilityMode:l});return d.encoding.priority&&(m[0].priority=d.encoding.priority,m[0].networkPriority=d.encoding.priority),be.debug("using svc encoding",{encodings:m}),m}if(!a)return[o];let f=[];t?f=(r=cT(i==null?void 0:i.screenShareSimulcastLayers))!==null&&r!==void 0?r:lT(t,d):f=(s=cT(i==null?void 0:i.videoSimulcastLayers))!==null&&s!==void 0?s:lT(t,d);let h;if(f.length>0){const v=f[0];f.length>1&&([,h]=f);const m=Math.max(e,n);if(m>=960&&h)return Xh(e,n,[v,h,d],u);if(m>=480)return Xh(e,n,[v,d],u)}return Xh(e,n,[d])}function mz(t,e,n){var i,r,s,o;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;e!==n.backupCodec.codec&&be.warn("requested a different codec than specified as backup",{serverRequested:e,backup:n.backupCodec.codec}),n.videoCodec=e,n.videoEncoding=n.backupCodec.encoding;const a=t.mediaStreamTrack.getSettings(),l=(i=a.width)!==null&&i!==void 0?i:(r=t.dimensions)===null||r===void 0?void 0:r.width,c=(s=a.height)!==null&&s!==void 0?s:(o=t.dimensions)===null||o===void 0?void 0:o.height;return t.source===j.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),og(t.source===j.Source.ScreenShare,l,c,n)}function gz(t,e,n,i){const r=vz(t,e,n);let{encoding:s}=r[0];const o=Math.max(e,n);for(let a=0;a<r.length;a+=1){const l=r[a];if(s=l.encoding,l.width>=o)break}if(i)switch(i){case"av1":case"h265":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.7;break;case"vp9":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.85;break}return s}function vz(t,e,n){if(t)return dz;const i=e>n?e/n:n/e;return Math.abs(i-16/9)<Math.abs(i-4/3)?cz:uz}function lT(t,e){if(t)return pz(e);const{width:n,height:i}=e,r=n>i?n/i:i/n;return Math.abs(r-16/9)<Math.abs(r-4/3)?fz:hz}function Xh(t,e,n,i){const r=[];if(n.forEach((s,o)=>{if(o>=sg.length)return;const a=Math.min(t,e),c={rid:sg[o],scaleResolutionDownBy:Math.max(1,a/Math.min(s.width,s.height)),maxBitrate:s.encoding.maxBitrate},u=i&&s.encoding.maxFramerate?Math.min(i,s.encoding.maxFramerate):s.encoding.maxFramerate;u&&(c.maxFramerate=u);const d=ya()||o===0;s.encoding.priority&&d&&(c.priority=s.encoding.priority,c.networkPriority=s.encoding.priority),r.push(c)}),Fi()&&b_()==="ios"){let s;r.forEach(a=>{s?a.maxFramerate&&a.maxFramerate>s&&(s=a.maxFramerate):s=a.maxFramerate});let o=!0;r.forEach(a=>{var l;a.maxFramerate!=s&&(o&&(o=!1,be.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),be.info('Setting framerate of encoding "'.concat((l=a.rid)!==null&&l!==void 0?l:"",'" to ').concat(s)),a.maxFramerate=s)})}return r}function cT(t){if(t)return t.sort((e,n)=>{const{encoding:i}=e,{encoding:r}=n;return i.maxBitrate>r.maxBitrate?1:i.maxBitrate<r.maxBitrate?-1:i.maxBitrate===r.maxBitrate&&i.maxFramerate&&r.maxFramerate?i.maxFramerate>r.maxFramerate?1:-1:0})}class __{constructor(e){const n=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}function yz(t){return t.source===j.Source.ScreenShare||t.constraints.height&&ts(t.constraints.height)>=1080?"maintain-resolution":"balanced"}const bz=5e3;class Ad extends R_{get sender(){return this._sender}set sender(e){this._sender=e,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3?arguments[3]:void 0;super(e,j.Kind.Video,n,i,r),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.isCpuConstrained=!1,this.optimizeForPerformance=!1,this.monitorSender=()=>C(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let s;try{s=yield this.getSenderStats()}catch(l){this.log.error("could not get video sender stats",Object.assign(Object.assign({},this.logContext),{error:l}));return}const o=new Map(s.map(l=>[l.rid,l])),a=s.some(l=>l.qualityLimitationReason==="cpu");if(a!==this.isCpuConstrained&&(this.isCpuConstrained=a,this.isCpuConstrained&&this.emit(W.CpuConstrained)),this.prevStats){let l=0;o.forEach((c,u)=>{var d;const f=(d=this.prevStats)===null||d===void 0?void 0:d.get(u);l+=Rf(c,f)}),this._currentBitrate=l}this.prevStats=o}),this.senderLock=new Ht}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var n;if(this.signalClient=e,!cn())return;const i=(n=this.sender)===null||n===void 0?void 0:n.getParameters();i&&(this.encodings=i.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},Ny))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return C(this,void 0,void 0,function*(){var n,i,r,s,o;yield e.pauseUpstream.call(this);try{for(var a=!0,l=rr(this.simulcastCodecs.values()),c;c=yield l.next(),n=c.done,!n;a=!0)s=c.value,a=!1,yield(o=s.sender)===null||o===void 0?void 0:o.replaceTrack(null)}catch(u){i={error:u}}finally{try{!a&&!n&&(r=l.return)&&(yield r.call(l))}finally{if(i)throw i.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return C(this,void 0,void 0,function*(){var n,i,r,s,o;yield e.resumeUpstream.call(this);try{for(var a=!0,l=rr(this.simulcastCodecs.values()),c;c=yield l.next(),n=c.done,!n;a=!0){s=c.value,a=!1;const u=s;yield(o=u.sender)===null||o===void 0?void 0:o.replaceTrack(u.mediaStreamTrack)}}catch(u){i={error:u}}finally{try{!a&&!n&&(r=l.return)&&(yield r.call(l))}finally{if(i)throw i.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return C(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===j.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return C(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===j.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(e){super.setTrackMuted(e);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!e}getSenderStats(){return C(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const n=[],i=yield this.sender.getStats();return i.forEach(r=>{var s;if(r.type==="outbound-rtp"){const o={type:"video",streamId:r.id,frameHeight:r.frameHeight,frameWidth:r.frameWidth,framesPerSecond:r.framesPerSecond,framesSent:r.framesSent,firCount:r.firCount,pliCount:r.pliCount,nackCount:r.nackCount,packetsSent:r.packetsSent,bytesSent:r.bytesSent,qualityLimitationReason:r.qualityLimitationReason,qualityLimitationDurations:r.qualityLimitationDurations,qualityLimitationResolutionChanges:r.qualityLimitationResolutionChanges,rid:(s=r.rid)!==null&&s!==void 0?s:r.id,retransmittedPacketsSent:r.retransmittedPacketsSent,targetBitrate:r.targetBitrate,timestamp:r.timestamp},a=i.get(r.remoteId);a&&(o.jitter=a.jitter,o.packetsLost=a.packetsLost,o.roundTripTime=a.roundTripTime),n.push(o)}}),n.sort((r,s)=>{var o,a;return((o=s.frameWidth)!==null&&o!==void 0?o:0)-((a=r.frameWidth)!==null&&a!==void 0?a:0)}),n})}setPublishingQuality(e){const n=[];for(let i=Tn.LOW;i<=Tn.HIGH;i+=1)n.push(new xy({quality:i,enabled:i<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(Ri(this.codec),n)}restartTrack(e){return C(this,void 0,void 0,function*(){var n,i,r,s,o;let a;if(e){const d=Cy({video:e});typeof d.video!="boolean"&&(a=d.video)}yield this.restart(a),this.isCpuConstrained=!1;try{for(var l=!0,c=rr(this.simulcastCodecs.values()),u;u=yield c.next(),n=u.done,!n;l=!0){s=u.value,l=!1;const d=s;d.sender&&((o=d.sender.transport)===null||o===void 0?void 0:o.state)!=="closed"&&(d.mediaStreamTrack=this.mediaStreamTrack.clone(),yield d.sender.replaceTrack(d.mediaStreamTrack))}}catch(d){i={error:d}}finally{try{!l&&!n&&(r=c.return)&&(yield r.call(c))}finally{if(i)throw i.error}}})}setProcessor(e){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return C(this,arguments,void 0,function(i){var r=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var o,a,l,c,u,d;if(yield n.setProcessor.call(r,i,s),!((u=r.processor)===null||u===void 0)&&u.processedTrack)try{for(var f=!0,h=rr(r.simulcastCodecs.values()),v;v=yield h.next(),o=v.done,!o;f=!0)c=v.value,f=!1,yield(d=c.sender)===null||d===void 0?void 0:d.replaceTrack(r.processor.processedTrack)}catch(m){a={error:m}}finally{try{!f&&!o&&(l=h.return)&&(yield l.call(h))}finally{if(a)throw a.error}}}()})}setDegradationPreference(e){return C(this,void 0,void 0,function*(){if(this.degradationPreference=e,this.sender)try{this.log.debug("setting degradationPreference to ".concat(e),this.logContext);const n=this.sender.getParameters();n.degradationPreference=e,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(e,n){if(this.simulcastCodecs.has(e)){this.log.error("".concat(e," already added, skipping adding simulcast codec"),this.logContext);return}const i={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(e,i),i}setSimulcastTrackSender(e,n){const i=this.simulcastCodecs.get(e);i&&(i.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},bz))}setPublishingCodecs(e){return C(this,void 0,void 0,function*(){var n,i,r,s,o,a,l;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(Ri(e[0].codec),e[0].qualities),[];this.subscribedCodecs=e;const c=[];try{for(n=!0,i=rr(e);r=yield i.next(),s=r.done,!s;n=!0){l=r.value,n=!1;const u=l;if(!this.codec||this.codec===u.codec)yield this.setPublishingLayers(Ri(u.codec),u.qualities);else{const d=this.simulcastCodecs.get(u.codec);if(this.log.debug("try setPublishingCodec for ".concat(u.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:d})),!d||!d.sender){for(const f of u.qualities)if(f.enabled){c.push(u.codec);break}}else d.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(u.codec),this.logContext),yield uT(d.sender,d.encodings,u.qualities,this.senderLock,Ri(u.codec),this.log,this.logContext))}}}catch(u){o={error:u}}finally{try{!n&&!s&&(a=i.return)&&(yield a.call(i))}finally{if(o)throw o.error}}return c})}setPublishingLayers(e,n){return C(this,void 0,void 0,function*(){if(this.optimizeForPerformance){this.log.info("skipping setPublishingLayers due to optimized publishing performance",Object.assign(Object.assign({},this.logContext),{qualities:n}));return}this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:n})),!(!this.sender||!this.encodings)&&(yield uT(this.sender,this.encodings,n,this.senderLock,e,this.log,this.logContext))})}prioritizePerformance(){return C(this,void 0,void 0,function*(){if(!this.sender)throw new Error("sender not found");const e=yield this.senderLock.lock();try{this.optimizeForPerformance=!0;const n=this.sender.getParameters();n.encodings=n.encodings.map((i,r)=>{var s;return Object.assign(Object.assign({},i),{active:r===0,scaleResolutionDownBy:Math.max(1,Math.ceil(((s=this.mediaStreamTrack.getSettings().height)!==null&&s!==void 0?s:360)/360)),scalabilityMode:r===0&&Ri(this.codec)?"L1T3":void 0,maxFramerate:r===0?15:0,maxBitrate:r===0?i.maxBitrate:0})}),this.log.debug("setting performance optimised encodings",Object.assign(Object.assign({},this.logContext),{encodings:n.encodings})),this.encodings=n.encodings,yield this.sender.setParameters(n)}catch(n){this.log.error("failed to set performance optimised encodings",Object.assign(Object.assign({},this.logContext),{error:n})),this.optimizeForPerformance=!1}finally{e()}})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return C(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),v_()&&this.isInBackground&&this.source===j.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function uT(t,e,n,i,r,s,o){return C(this,void 0,void 0,function*(){const a=yield i.lock();s.debug("setPublishingLayersForSender",Object.assign(Object.assign({},o),{sender:t,qualities:n,senderEncodings:e}));try{const l=t.getParameters(),{encodings:c}=l;if(!c)return;if(c.length!==e.length){s.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},o),{encodings:c,senderEncodings:e}));return}let u=!1;!1&&c[0].scalabilityMode||(r&&n.some(h=>h.enabled)&&n.forEach(h=>h.enabled=!0),c.forEach((f,h)=>{var v;let m=(v=f.rid)!==null&&v!==void 0?v:"";m===""&&(m="q");const b=A_(m),p=n.find(y=>y.quality===b);p&&f.active!==p.enabled&&(u=!0,f.active=p.enabled,s.debug("setting layer ".concat(p.quality," to ").concat(f.active?"enabled":"disabled"),o),ya()&&(p.enabled?(f.scaleResolutionDownBy=e[h].scaleResolutionDownBy,f.maxBitrate=e[h].maxBitrate,f.maxFrameRate=e[h].maxFrameRate):(f.scaleResolutionDownBy=4,f.maxBitrate=10,f.maxFrameRate=2)))})),u&&(l.encodings=c,s.debug("setting encodings",Object.assign(Object.assign({},o),{encodings:l.encodings})),yield t.setParameters(l))}finally{a()}})}function A_(t){switch(t){case"f":return Tn.HIGH;case"h":return Tn.MEDIUM;case"q":return Tn.LOW;default:return Tn.HIGH}}function dT(t,e,n,i){if(!n)return[new js({quality:Tn.HIGH,width:t,height:e,bitrate:0,ssrc:0})];if(i){const r=n[0].scalabilityMode,s=new __(r),o=[],a=s.suffix=="h"?1.5:2,l=s.suffix=="h"?2:3;for(let c=0;c<s.spatial;c+=1)o.push(new js({quality:Math.min(Tn.HIGH,s.spatial-1)-c,width:Math.ceil(t/Math.pow(a,c)),height:Math.ceil(e/Math.pow(a,c)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(l,c)):0,ssrc:0}));return o}return n.map(r=>{var s,o,a;const l=(s=r.scaleResolutionDownBy)!==null&&s!==void 0?s:1;let c=A_((o=r.rid)!==null&&o!==void 0?o:"");return new js({quality:c,width:Math.ceil(t/l),height:Math.ceil(e/l),bitrate:(a=r.maxBitrate)!==null&&a!==void 0?a:0,ssrc:0})})}const fT="_lossy",hT="_reliable",xz=2*1e3,Jh="leave-reconnect",Sz=3e4;var Yn;(function(t){t[t.New=0]="New",t[t.Connected=1]="Connected",t[t.Disconnected=2]="Disconnected",t[t.Reconnecting=3]="Reconnecting",t[t.Closed=4]="Closed"})(Yn||(Yn={}));class Tz extends Vi.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(e){var n;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=_y.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.latestRemoteOfferId=0,this.subscriberPrimary=!1,this.pcState=Yn.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=be,this.reliableDataSequence=1,this.reliableMessageBuffer=new ZS,this.reliableReceivedState=new q6(Sz),this.handleDataChannel=i=>C(this,[i],void 0,function(r){var s=this;let{channel:o}=r;return function*(){if(o){if(o.label===hT)s.reliableDCSub=o;else if(o.label===fT)s.lossyDCSub=o;else return;s.log.debug("on data channel ".concat(o.id,", ").concat(o.label),s.logContext),o.onmessage=s.handleDataMessage}}()}),this.handleDataMessage=i=>C(this,void 0,void 0,function*(){var r,s;const o=yield this.dataProcessLock.lock();try{let a;if(i.data instanceof ArrayBuffer)a=i.data;else if(i.data instanceof Blob)a=yield i.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:i.data}));return}const l=rn.fromBinary(new Uint8Array(a));if(l.sequence>0&&l.participantSid!==""){const c=this.reliableReceivedState.get(l.participantSid);if(c&&l.sequence<=c)return;this.reliableReceivedState.set(l.participantSid,l.sequence)}((r=l.value)===null||r===void 0?void 0:r.case)==="speaker"?this.emit(G.ActiveSpeakersUpdate,l.value.value.speakers):(((s=l.value)===null||s===void 0?void 0:s.case)==="user"&&wz(l,l.value.value),this.emit(G.DataPacketReceived,l))}finally{o()}}),this.handleDataError=i=>{const s=i.currentTarget.maxRetransmits===0?"lossy":"reliable";if(i instanceof ErrorEvent&&i.error){const{error:o}=i.error;this.log.error("DataChannel error on ".concat(s,": ").concat(i.message),Object.assign(Object.assign({},this.logContext),{error:o}))}else this.log.error("Unknown DataChannel error on ".concat(s),Object.assign(Object.assign({},this.logContext),{event:i}))},this.handleBufferedAmountLow=i=>{const s=i.currentTarget.maxRetransmits===0?he.LOSSY:he.RELIABLE;this.updateAndEmitDCBufferStatus(s)},this.handleDisconnect=(i,r)=>{if(this._isClosed)return;this.log.warn("".concat(i," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const s=l=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(l,"ms. giving up"),this.logContext),this.emit(G.Disconnected),this.close()},o=Date.now()-this.reconnectStart;let a=this.getNextRetryDelay({elapsedMs:o,retryCount:this.reconnectAttempts});if(a===null){s(o);return}i===Jh&&(a=0),this.log.debug("reconnecting in ".concat(a,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=St.setTimeout(()=>this.attemptReconnect(r).finally(()=>this.reconnectTimeout=void 0),a)},this.waitForRestarted=()=>new Promise((i,r)=>{this.pcState===Yn.Connected&&i();const s=()=>{this.off(G.Disconnected,o),i()},o=()=>{this.off(G.Restarted,s),r()};this.once(G.Restarted,s),this.once(G.Disconnected,o)}),this.updateAndEmitDCBufferStatus=i=>{const r=this.isBufferStatusLow(i);typeof r<"u"&&r!==this.dcBufferStatus.get(i)&&(this.dcBufferStatus.set(i,r),this.emit(G.DCBufferStatusChanged,r,i))},this.isBufferStatusLow=i=>{const r=this.dataChannelForKind(i);if(r)return i===he.RELIABLE&&this.reliableMessageBuffer.alignBufferedAmount(r.bufferedAmount),r.bufferedAmount<=r.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===De.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(fo.RR_SIGNAL_DISCONNECTED))},this.log=br((n=e.loggerName)!==null&&n!==void 0?n:fi.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new Ey(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new Ht,this.dataProcessLock=new Ht,this.dcBufferStatus=new Map([[he.LOSSY,!0],[he.RELIABLE,!0]]),this.client.onParticipantUpdate=i=>this.emit(G.ParticipantUpdate,i),this.client.onConnectionQuality=i=>this.emit(G.ConnectionQualityUpdate,i),this.client.onRoomUpdate=i=>this.emit(G.RoomUpdate,i),this.client.onSubscriptionError=i=>this.emit(G.SubscriptionError,i),this.client.onSubscriptionPermissionUpdate=i=>this.emit(G.SubscriptionPermissionUpdate,i),this.client.onSpeakersChanged=i=>this.emit(G.SpeakersChanged,i),this.client.onStreamStateUpdate=i=>this.emit(G.StreamStateChanged,i),this.client.onRequestResponse=i=>this.emit(G.SignalRequestResponse,i)}get logContext(){var e,n,i,r,s,o;return{room:(n=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||n===void 0?void 0:n.name,roomID:(r=(i=this.latestJoinResponse)===null||i===void 0?void 0:i.room)===null||r===void 0?void 0:r.sid,participant:(o=(s=this.latestJoinResponse)===null||s===void 0?void 0:s.participant)===null||o===void 0?void 0:o.identity,pID:this.participantSid}}join(e,n,i,r){return C(this,void 0,void 0,function*(){this.url=e,this.token=n,this.signalOpts=i,this.maxJoinAttempts=i.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const s=yield this.client.join(e,n,i,r);return this._isClosed=!1,this.latestJoinResponse=s,this.subscriberPrimary=s.subscriberPrimary,this.pcManager||(yield this.configure(s)),(!this.subscriberPrimary||s.fastPublish)&&this.negotiate(),this.clientConfiguration=s.clientConfiguration,this.emit(G.SignalConnected,s),s}catch(s){if(s instanceof _e&&s.reason===Se.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,n,i,r);throw s}})}close(){return C(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(G.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){return C(this,void 0,void 0,function*(){var e;yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const n=i=>{i&&(i.close(),i.onbufferedamountlow=null,i.onclose=null,i.onclosing=null,i.onerror=null,i.onmessage=null,i.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0,this.reliableMessageBuffer=new ZS,this.reliableDataSequence=1,this.reliableReceivedState.clear()})}cleanupClient(){return C(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new sr("a track with the same ID has already been published");return new Promise((n,i)=>{const r=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],i(new _e("publication of local track timed out, no response from server",Se.Timeout))},1e4);this.pendingTrackResolvers[e.cid]={resolve:s=>{clearTimeout(r),n(s)},reject:()=>{clearTimeout(r),i(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:n}=this.pendingTrackResolvers[e.track.id];n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(e,n){this.client.sendMuteTrack(e,n)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){return C(this,void 0,void 0,function*(){var e;return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){return C(this,void 0,void 0,function*(){var n,i;if(this.pcManager&&this.pcManager.currentState!==Qe.NEW)return;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid;const r=this.makeRTCConfiguration(e);this.pcManager=new tz(r,e.subscriberPrimary,this.loggerOptions),this.emit(G.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(s,o)=>{this.client.sendIceCandidate(s,o)},this.pcManager.onPublisherOffer=(s,o)=>{this.client.sendOffer(s,o)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(s,o,a)=>C(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(s),this.logContext),["closed","disconnected","failed"].includes(o)&&(this.publisherConnectionPromise=void 0),s===Qe.CONNECTED){const u=this.pcState===Yn.New;this.pcState=Yn.Connected,u&&this.emit(G.Connected,e)}else s===Qe.FAILED&&this.pcState===Yn.Connected&&(this.pcState=Yn.Disconnected,this.handleDisconnect("peerconnection failed",a==="failed"?fo.RR_SUBSCRIBER_FAILED:fo.RR_PUBLISHER_FAILED));const l=this.client.isDisconnected||this.client.currentState===De.RECONNECTING,c=[Qe.FAILED,Qe.CLOSING,Qe.CLOSED].includes(s);l&&c&&!this._isClosed&&this.emit(G.Offline)}),this.pcManager.onTrack=s=>{this.emit(G.MediaTrackAdded,s.track,s.streams[0],s.receiver)},kz((i=e.serverInfo)===null||i===void 0?void 0:i.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=(e,n)=>C(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type})),yield this.pcManager.setPublisherAnswer(e,n))}),this.client.onTrickle=(e,n)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:n})),this.pcManager.addIceCandidate(e,n))},this.client.onOffer=(e,n)=>C(this,void 0,void 0,function*(){if(this.latestRemoteOfferId=n,!this.pcManager)return;const i=yield this.pcManager.createSubscriberAnswerFromOffer(e,n);i&&this.client.sendAnswer(i,n)}),this.client.onLocalTrackPublished=e=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(n=e.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:i}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],i(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(G.LocalTrackUnpublished,e)},this.client.onLocalTrackSubscribed=e=>{this.emit(G.LocalTrackSubscribed,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,n)=>{this.emit(G.RemoteMute,e,n)},this.client.onSubscribedQualityUpdate=e=>{this.emit(G.SubscribedQualityUpdate,e)},this.client.onRoomMoved=e=>{var n;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid,this.latestJoinResponse&&(this.latestJoinResponse.room=e.room),this.emit(G.RoomMoved,e)},this.client.onClose=()=>{this.handleDisconnect("signal",fo.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e==null?void 0:e.reason})),e.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(e.regions)),e.action){case qo.DISCONNECT:this.emit(G.Disconnected,e==null?void 0:e.reason),this.close();break;case qo.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(Jh);break;case qo.RESUME:this.handleDisconnect(Jh)}}}makeRTCConfiguration(e){var n;const i=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),i.encodedInsertableStreams=!0),e.iceServers&&!i.iceServers){const r=[];e.iceServers.forEach(s=>{const o={urls:s.urls};s.username&&(o.username=s.username),s.credential&&(o.credential=s.credential),r.push(o)}),i.iceServers=r}return e.clientConfiguration&&e.clientConfiguration.forceRelay===nc.ENABLED&&(i.iceTransportPolicy="relay"),i.sdpSemantics="unified-plan",i.continualGatheringPolicy="gather_continually",i}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(fT,{ordered:!1,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(hT,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(e,n,i){return C(this,void 0,void 0,function*(){if(Qm())return yield this.createTransceiverRTCRtpSender(e,n,i);if(Xm())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new ct("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,n,i,r){return C(this,void 0,void 0,function*(){if(Qm())return this.createSimulcastTransceiverSender(e,n,i,r);if(Xm())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new ct("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,n,i){return C(this,void 0,void 0,function*(){if(!this.pcManager)throw new ct("publisher is closed");const r=[];e.mediaStream&&r.push(e.mediaStream),eo(e)&&(e.codec=n.videoCodec);const s={direction:"sendonly",streams:r};return i&&(s.sendEncodings=i),(yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,s)).sender})}createSimulcastTransceiverSender(e,n,i,r){return C(this,void 0,void 0,function*(){if(!this.pcManager)throw new ct("publisher is closed");const s={direction:"sendonly"};r&&(s.sendEncodings=r);const o=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,s);if(i.videoCodec)return e.setSimulcastTrackSender(i.videoCodec,o.sender),o.sender})}createRTCRtpSender(e){return C(this,void 0,void 0,function*(){if(!this.pcManager)throw new ct("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){return C(this,void 0,void 0,function*(){var n,i,r;if(!this._isClosed){if(this.attemptingReconnect){be.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===nc.DISABLED||((r=(i=this.pcManager)===null||i===void 0?void 0:i.currentState)!==null&&r!==void 0?r:Qe.NEW)===Qe.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(s){this.reconnectAttempts+=1;let o=!0;s instanceof ct?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:s})),o=!1):s instanceof ho||(this.fullReconnectOnNext=!0),o?this.handleDisconnect("reconnect",fo.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(G.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(e){return C(this,void 0,void 0,function*(){var n,i,r;try{if(!this.url||!this.token)throw new ct("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(G.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let s;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new ho;s=yield this.join(e??this.url,this.token,this.signalOpts)}catch(o){throw o instanceof _e&&o.reason===Se.NotAllowed?new ct("could not reconnect, token might be expired"):new ho}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(G.SignalRestarted,s),yield this.waitForPCReconnected(),this.client.currentState!==De.CONNECTED)throw new ho("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(G.Restarted)}catch(s){const o=yield(i=this.regionUrlProvider)===null||i===void 0?void 0:i.getNextBestRegionUrl();if(o){yield this.restartConnection(o);return}else throw(r=this.regionUrlProvider)===null||r===void 0||r.resetAttempts(),s}})}resumeConnection(e){return C(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new ct("could not reconnect, url or token not saved");if(!this.pcManager)throw new ct("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(G.Resuming);let i;try{this.setupSignalClientCallbacks(),i=yield this.client.reconnect(this.url,this.token,this.participantSid,e)}catch(r){let s="";throw r instanceof Error&&(s=r.message,this.log.error(r.message,Object.assign(Object.assign({},this.logContext),{error:r}))),r instanceof _e&&r.reason===Se.NotAllowed?new ct("could not reconnect, token might be expired"):r instanceof _e&&r.reason===Se.LeaveRequest?r:new ho(s)}if(this.emit(G.SignalResumed),i){const r=this.makeRTCConfiguration(i);this.pcManager.updateConfiguration(r),this.latestJoinResponse&&(this.latestJoinResponse.serverInfo=i.serverInfo)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==De.CONNECTED)throw new ho("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),i!=null&&i.lastMessageSeq&&this.resendReliableMessagesForResume(i.lastMessageSeq),this.emit(G.Resumed)})}waitForPCInitialConnection(e,n){return C(this,void 0,void 0,function*(){if(!this.pcManager)throw new ct("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,e)})}waitForPCReconnected(){return C(this,void 0,void 0,function*(){this.pcState=Yn.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield hn(xz),!this.pcManager)throw new ct("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=Yn.Connected}catch(e){throw this.pcState=Yn.Disconnected,new _e("could not establish PC connection, ".concat(e.message),Se.InternalError)}})}publishRpcResponse(e,n,i,r){return C(this,void 0,void 0,function*(){const s=new rn({destinationIdentities:[e],kind:he.RELIABLE,value:{case:"rpcResponse",value:new yR({requestId:n,value:r?{case:"error",value:r.toProto()}:{case:"payload",value:i??""}})}});yield this.sendDataPacket(s,he.RELIABLE)})}publishRpcAck(e,n){return C(this,void 0,void 0,function*(){const i=new rn({destinationIdentities:[e],kind:he.RELIABLE,value:{case:"rpcAck",value:new vR({requestId:n})}});yield this.sendDataPacket(i,he.RELIABLE)})}sendDataPacket(e,n){return C(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(n),n===he.RELIABLE&&(e.sequence=this.reliableDataSequence,this.reliableDataSequence+=1);const i=e.toBinary(),r=this.dataChannelForKind(n);if(r){if(n===he.RELIABLE&&this.reliableMessageBuffer.push({data:i,sequence:e.sequence}),this.attemptingReconnect)return;r.send(i)}this.updateAndEmitDCBufferStatus(n)})}resendReliableMessagesForResume(e){return C(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(he.RELIABLE);const n=this.dataChannelForKind(he.RELIABLE);n&&(this.reliableMessageBuffer.popToSequence(e),this.reliableMessageBuffer.getAll().forEach(i=>{n.send(i.data)})),this.updateAndEmitDCBufferStatus(he.RELIABLE)})}waitForBufferStatusLow(e){return new Promise((n,i)=>C(this,void 0,void 0,function*(){if(this.isBufferStatusLow(e))n();else{const r=()=>i("Engine closed");for(this.once(G.Closing,r);!this.dcBufferStatus.get(e);)yield hn(10);this.off(G.Closing,r),n()}}))}ensureDataTransportConnected(e){return C(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return function*(){var s;if(!i.pcManager)throw new ct("PC manager is closed");const o=r?i.pcManager.subscriber:i.pcManager.publisher,a=r?"Subscriber":"Publisher";if(!o)throw new _e("".concat(a," connection not set"),Se.InternalError);let l=!1;!r&&!i.dataChannelForKind(n,r)&&(i.createDataChannels(),l=!0),!l&&!r&&!i.pcManager.publisher.isICEConnected&&i.pcManager.publisher.getICEConnectionState()!=="checking"&&(l=!0),l&&i.negotiate();const c=i.dataChannelForKind(n,r);if((c==null?void 0:c.readyState)==="open")return;const u=new Date().getTime()+i.peerConnectionTimeout;for(;new Date().getTime()<u;){if(o.isICEConnected&&((s=i.dataChannelForKind(n,r))===null||s===void 0?void 0:s.readyState)==="open")return;yield hn(50)}throw new _e("could not establish ".concat(a," connection, state: ").concat(o.getICEConnectionState()),Se.InternalError)}()})}ensurePublisherConnected(e){return C(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(e,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==Qe.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return C(this,void 0,void 0,function*(){return new Promise((e,n)=>C(this,void 0,void 0,function*(){if(!this.pcManager){n(new Gm("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const i=new AbortController,r=()=>{i.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(G.Closing,r),this.pcManager.publisher.once(Qo.RTPVideoPayloadTypes,s=>{const o=new Map;s.forEach(a=>{const l=a.codec.toLowerCase();w6(l)&&o.set(a.payload,l)}),this.emit(G.RTPVideoMapUpdate,o)});try{yield this.pcManager.negotiate(i),e()}catch(s){s instanceof Gm&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",fo.RR_UNKNOWN),n(s)}finally{this.off(G.Closing,r)}}))})}dataChannelForKind(e,n){if(n){if(e===he.LOSSY)return this.lossyDCSub;if(e===he.RELIABLE)return this.reliableDCSub}else{if(e===he.LOSSY)return this.lossyDC;if(e===he.RELIABLE)return this.reliableDC}}sendSyncState(e,n){var i,r;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const s=this.pcManager.subscriber.getLocalDescription(),o=this.pcManager.subscriber.getRemoteDescription(),a=(r=(i=this.signalOpts)===null||i===void 0?void 0:i.autoSubscribe)!==null&&r!==void 0?r:!0,l=new Array,c=new Array;e.forEach(u=>{u.isDesired!==a&&l.push(u.trackSid),u.isEnabled||c.push(u.trackSid)}),this.client.sendSyncState(new DR({answer:s?Rd({sdp:s.sdp,type:s.type}):void 0,offer:o?Rd({sdp:o.sdp,type:o.type}):void 0,subscription:new Cf({trackSids:l,subscribe:!a,participantTracks:[]}),publishTracks:O6(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:c,datachannelReceiveStates:this.reliableReceivedState.map((u,d)=>new LR({publisherSid:d,lastSeq:u}))}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],n=(i,r)=>{(i==null?void 0:i.id)!==void 0&&i.id!==null&&e.push(new jR({label:i.label,id:i.id,target:r}))};return n(this.dataChannelForKind(he.LOSSY),si.PUBLISHER),n(this.dataChannelForKind(he.RELIABLE),si.PUBLISHER),n(this.dataChannelForKind(he.LOSSY,!0),si.SUBSCRIBER),n(this.dataChannelForKind(he.RELIABLE,!0),si.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&St.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){cn()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){cn()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class ho extends Error{}function kz(t){return t!==void 0&&t>13}function wz(t,e){const n=t.participantIdentity?t.participantIdentity:e.participantIdentity;t.participantIdentity=n,e.participantIdentity=n;const i=t.destinationIdentities.length!==0?t.destinationIdentities:e.destinationIdentities;t.destinationIdentities=i,e.destinationIdentities=i}class ag{constructor(e,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=n}updateToken(e){this.token=e}isCloud(){return Zm(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return C(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const n=this.regionSettings.regions.filter(i=>!this.attemptedRegions.find(r=>r.url===i.url));if(n.length>0){const i=n[0];return this.attemptedRegions.push(i),be.debug("next region: ".concat(i.region)),i.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return C(this,void 0,void 0,function*(){const n=yield fetch("".concat(Cz(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});if(n.ok){const i=yield n.json();return this.lastUpdateAt=Date.now(),i}else throw new _e("Could not fetch region settings: ".concat(n.statusText),n.status===401?Se.NotAllowed:Se.InternalError,n.status)})}setServerReportedRegions(e){this.regionSettings=e,this.lastUpdateAt=Date.now()}}function Cz(t){return"".concat(t.protocol.replace("ws","http"),"//").concat(t.host,"/settings")}class N_{get info(){return this._info}constructor(e,n,i){this.reader=n,this.totalByteSize=i,this._info=e,this.bytesReceived=0}}class Ez extends N_{handleChunkReceived(e){var n;this.bytesReceived+=e.content.byteLength;const i=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,i)}[Symbol.asyncIterator](){const e=this.reader.getReader();return{next:()=>C(this,void 0,void 0,function*(){try{const{done:n,value:i}=yield e.read();return n?{done:!0,value:void 0}:(this.handleChunkReceived(i),{done:!1,value:i.content})}catch{return{done:!0,value:void 0}}}),return(){return C(this,void 0,void 0,function*(){return e.releaseLock(),{done:!0,value:void 0}})}}}readAll(){return C(this,void 0,void 0,function*(){var e,n,i,r;let s=new Set;try{for(var o=!0,a=rr(this),l;l=yield a.next(),e=l.done,!e;o=!0){r=l.value,o=!1;const c=r;s.add(c)}}catch(c){n={error:c}}finally{try{!o&&!e&&(i=a.return)&&(yield i.call(a))}finally{if(n)throw n.error}}return Array.from(s)})}}class Pz extends N_{constructor(e,n,i){super(e,n,i),this.receivedChunks=new Map}handleChunkReceived(e){var n;const i=ju(e.chunkIndex),r=this.receivedChunks.get(i);if(r&&r.version>e.version)return;this.receivedChunks.set(i,e),this.bytesReceived+=e.content.byteLength;const s=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,s)}[Symbol.asyncIterator](){const e=this.reader.getReader(),n=new TextDecoder;return{next:()=>C(this,void 0,void 0,function*(){try{const{done:i,value:r}=yield e.read();return i?{done:!0,value:void 0}:(this.handleChunkReceived(r),{done:!1,value:n.decode(r.content)})}catch{return{done:!0,value:void 0}}}),return(){return C(this,void 0,void 0,function*(){return e.releaseLock(),{done:!0,value:void 0}})}}}readAll(){return C(this,void 0,void 0,function*(){var e,n,i,r;let s="";try{for(var o=!0,a=rr(this),l;l=yield a.next(),e=l.done,!e;o=!0)r=l.value,o=!1,s+=r}catch(c){n={error:c}}finally{try{!o&&!e&&(i=a.return)&&(yield i.call(a))}finally{if(n)throw n.error}}return s})}}class I_{constructor(e,n,i){this.writableStream=e,this.defaultWriter=e.getWriter(),this.onClose=i,this.info=n}write(e){return this.defaultWriter.write(e)}close(){return C(this,void 0,void 0,function*(){var e;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(e=this.onClose)===null||e===void 0||e.call(this)})}}class Rz extends I_{}class _z extends I_{}class O_ extends j{constructor(e,n,i,r,s){super(e,i,s),this.sid=n,this.receiver=r}get isLocal(){return!1}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?W.Muted:W.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const n=i=>{i.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(W.Ended,this))};e.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return C(this,void 0,void 0,function*(){var e;return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(e){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=e:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),Ny)),M6()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const e=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>e());const i=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(i){const{timestamp:r,rtpTimestamp:s}=i;s&&this.rtpTimestamp!==s&&(this.emit(W.TimeSyncUpdate,{timestamp:r,rtpTimestamp:s}),this.rtpTimestamp=s)}};e()}}class Az extends O_{constructor(e,n,i,r,s,o){super(e,n,j.Kind.Audio,i,o),this.monitorReceiver=()=>C(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const a=yield this.getReceiverStats();a&&this.prevStats&&this.receiver&&(this._currentBitrate=Rf(a,this.prevStats)),this.prevStats=a}),this.audioContext=r,this.webAudioPluginNodes=[],s&&(this.sinkId=s.deviceId)}setVolume(e){var n;for(const i of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(e,0,.1):i.volume=e;Fi()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(Fi())return 1;let e=0;return this.attachedElements.forEach(n=>{n.volume>e&&(e=n.volume)}),e}setSinkId(e){return C(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(n=>{if(Jm(n))return n.setSinkId(e)}))})}attach(e){const n=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&Jm(e)&&e.setSinkId(this.sinkId).catch(i=>{this.log.error("Failed to set sink id on remote audio track",i,this.logContext)}),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let n;return e?(n=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,n){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(n.srcObject);let i=this.sourceNode;this.webAudioPluginNodes.forEach(r=>{i.connect(r),i=r}),this.gainNode=e.createGain(),i.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(W.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(r=>{this.emit(W.AudioPlaybackFailed,r)})}disconnectWebAudio(){var e,n;(e=this.gainNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return C(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n;return e.forEach(i=>{i.type==="inbound-rtp"&&(n={type:"audio",streamId:i.id,timestamp:i.timestamp,jitter:i.jitter,bytesReceived:i.bytesReceived,concealedSamples:i.concealedSamples,concealmentEvents:i.concealmentEvents,silentConcealedSamples:i.silentConcealedSamples,silentConcealmentEvents:i.silentConcealmentEvents,totalAudioEnergy:i.totalAudioEnergy,totalSamplesDuration:i.totalSamplesDuration})}),n})}}const Zh=100;class Nz extends O_{constructor(e,n,i,r,s){super(e,n,j.Kind.Video,i,s),this.elementInfos=[],this.monitorReceiver=()=>C(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const o=yield this.getReceiverStats();o&&this.prevStats&&this.receiver&&(this._currentBitrate=Rf(o,this.prevStats)),this.prevStats=o}),this.debouncedHandleResize=Ry(()=>{this.updateDimensions()},Zh),this.adaptiveStreamSettings=r}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(n=>{e?Ko(this._mediaStreamTrack,n):Mo(this._mediaStreamTrack,n)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===e)===void 0){const n=new Iz(e);this.observeElementInfo(n)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(i=>i===e);for(const i of n)i.stopObserving();this.elementInfos=this.elementInfos.filter(i=>i!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let n=[];if(e)return this.stopObservingElement(e),super.detach(e);n=super.detach();for(const i of n)this.stopObservingElement(i);return n}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return C(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n,i="",r=new Map;return e.forEach(s=>{s.type==="inbound-rtp"?(i=s.codecId,n={type:"video",streamId:s.id,framesDecoded:s.framesDecoded,framesDropped:s.framesDropped,framesReceived:s.framesReceived,packetsReceived:s.packetsReceived,packetsLost:s.packetsLost,frameWidth:s.frameWidth,frameHeight:s.frameHeight,pliCount:s.pliCount,firCount:s.firCount,nackCount:s.nackCount,jitter:s.jitter,timestamp:s.timestamp,bytesReceived:s.bytesReceived,decoderImplementation:s.decoderImplementation}):s.type==="codec"&&r.set(s.id,s)}),n&&i!==""&&r.get(i)&&(n.mimeType=r.get(i).mimeType),n})}stopObservingElement(e){const n=this.elementInfos.filter(i=>i.element===e);for(const i of n)this.stopObservingElementInfo(i)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return C(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var e,n;const i=this.elementInfos.reduce((a,l)=>Math.max(a,l.visibilityChangedAt||0),0),r=!((n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pauseVideoInBackground)!==null&&n!==void 0)||n?this.isInBackground:!1,s=this.elementInfos.some(a=>a.pictureInPicture),o=this.elementInfos.some(a=>a.visible)&&!r||s;if(this.lastVisible!==o){if(!o&&Date.now()-i<Zh){St.setTimeout(()=>{this.updateVisibility()},Zh);return}this.lastVisible=o,this.emit(W.VisibilityChanged,o,this)}}updateDimensions(){var e,n;let i=0,r=0;const s=this.getPixelDensity();for(const o of this.elementInfos){const a=o.width()*s,l=o.height()*s;a+l>i+r&&(i=a,r=l)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===i&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===r||(this.lastDimensions={width:i,height:r},this.emit(W.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return n==="screen"?qS():n||(qS()>2?2:1)}}class Iz{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,n){this.onVisibilityChanged=i=>{var r;const{target:s,isIntersecting:o}=i;s===this.element&&(this.isIntersecting=o,this.isPiP=Ka(this.element),this.visibilityChangedAt=Date.now(),(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this))},this.onEnterPiP=()=>{var i,r,s;(r=(i=window.documentPictureInPicture)===null||i===void 0?void 0:i.window)===null||r===void 0||r.addEventListener("pagehide",this.onLeavePiP),this.isPiP=Ka(this.element),(s=this.handleVisibilityChanged)===null||s===void 0||s.call(this)},this.onLeavePiP=()=>{var i;this.isPiP=Ka(this.element),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this)},this.element=e,this.isIntersecting=n??lg(e),this.isPiP=cn()&&Ka(e),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var e,n,i;this.isIntersecting=lg(this.element),this.isPiP=Ka(this.element),this.element.handleResize=()=>{var r;(r=this.handleResize)===null||r===void 0||r.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,KS().observe(this.element),GS().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(e=window.documentPictureInPicture)===null||e===void 0||e.addEventListener("enter",this.onEnterPiP),(i=(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window)===null||i===void 0||i.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var e,n,i,r,s;(e=KS())===null||e===void 0||e.unobserve(this.element),(n=GS())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(i=window.documentPictureInPicture)===null||i===void 0||i.removeEventListener("enter",this.onEnterPiP),(s=(r=window.documentPictureInPicture)===null||r===void 0?void 0:r.window)===null||s===void 0||s.removeEventListener("pagehide",this.onLeavePiP)}}function Ka(t){var e,n;return document.pictureInPictureElement===t?!0:!((e=window.documentPictureInPicture)===null||e===void 0)&&e.window?lg(t,(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window):!1}function lg(t,e){const n=e||window;let i=t.offsetTop,r=t.offsetLeft;const s=t.offsetWidth,o=t.offsetHeight,{hidden:a}=t,{display:l}=getComputedStyle(t);for(;t.offsetParent;)t=t.offsetParent,i+=t.offsetTop,r+=t.offsetLeft;return i<n.pageYOffset+n.innerHeight&&r<n.pageXOffset+n.innerWidth&&i+o>n.pageYOffset&&r+s>n.pageXOffset&&!a&&l!=="none"}class er extends Vi.EventEmitter{constructor(e,n,i,r){var s;super(),this.metadataMuted=!1,this.encryption=bn.NONE,this.log=be,this.handleMuted=()=>{this.emit(W.Muted)},this.handleUnmuted=()=>{this.emit(W.Unmuted)},this.log=br((s=r==null?void 0:r.loggerName)!==null&&s!==void 0?s:fi.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=n,this.trackName=i,this.source=j.Source.Unknown}setTrack(e){this.track&&(this.track.off(W.Muted,this.handleMuted),this.track.off(W.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(W.Muted,this.handleMuted),e.on(W.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),ge(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==bn.NONE}get audioTrack(){if(Di(this.track))return this.track}get videoTrack(){if(eo(this.track))return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=j.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===j.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(t){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(t.SubscriptionStatus||(t.SubscriptionStatus={})),function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"}(t.PermissionStatus||(t.PermissionStatus={}))})(er||(er={}));class cg extends er{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,n,i,r){super(e,n.sid,n.name,r),this.track=void 0,this.handleTrackEnded=()=>{this.emit(W.Ended)},this.handleCpuConstrained=()=>{this.track&&eo(this.track)&&this.emit(W.CpuConstrained,this.track)},this.updateInfo(n),this.setTrack(i)}setTrack(e){this.track&&(this.track.off(W.Ended,this.handleTrackEnded),this.track.off(W.CpuConstrained,this.handleCpuConstrained)),super.setTrack(e),e&&(e.on(W.Ended,this.handleTrackEnded),e.on(W.CpuConstrained,this.handleCpuConstrained))}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return C(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){return C(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){return C(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){return C(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}getTrackFeatures(){var e;if(Di(this.track)){const n=this.track.getSourceTrackSettings(),i=new Set;return n.autoGainControl&&i.add(mt.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&i.add(mt.TF_ECHO_CANCELLATION),n.noiseSuppression&&i.add(mt.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&i.add(mt.TF_STEREO),!((e=this.options)===null||e===void 0)&&e.dtx||i.add(mt.TF_NO_DTX),this.track.enhancedNoiseCancellation&&i.add(mt.TF_ENHANCED_NOISE_CANCELLATION),Array.from(i.values())}else return[]}}function _f(t,e){return C(this,void 0,void 0,function*(){t??(t={});let n=!1;const{audioProcessor:i,videoProcessor:r,optionsWithoutProcessor:s}=k_(t);let o=s.audio,a=s.video;if(i&&typeof s.audio=="object"&&(s.audio.processor=i),r&&typeof s.video=="object"&&(s.video.processor=r),t.audio&&typeof s.audio=="object"&&typeof s.audio.deviceId=="string"){const d=s.audio.deviceId;s.audio.deviceId={exact:d},n=!0,o=Object.assign(Object.assign({},s.audio),{deviceId:{ideal:d}})}if(s.video&&typeof s.video=="object"&&typeof s.video.deviceId=="string"){const d=s.video.deviceId;s.video.deviceId={exact:d},n=!0,a=Object.assign(Object.assign({},s.video),{deviceId:{ideal:d}})}(s.audio===!0||typeof s.audio=="object"&&!s.audio.deviceId)&&(s.audio={deviceId:"default"}),s.video===!0?s.video={deviceId:"default"}:typeof s.video=="object"&&!s.video.deviceId&&(s.video.deviceId="default");const l=x_(s,C_,E_),c=Cy(l),u=navigator.mediaDevices.getUserMedia(c);s.audio&&(gt.userMediaPromiseMap.set("audioinput",u),u.catch(()=>gt.userMediaPromiseMap.delete("audioinput"))),s.video&&(gt.userMediaPromiseMap.set("videoinput",u),u.catch(()=>gt.userMediaPromiseMap.delete("videoinput")));try{const d=yield u;return yield Promise.all(d.getTracks().map(f=>C(this,void 0,void 0,function*(){const h=f.kind==="audio";let v=h?l.audio:l.video;(typeof v=="boolean"||!v)&&(v={});let m;const b=h?c.audio:c.video;typeof b!="boolean"&&(m=b);const p=f.getSettings().deviceId;m!=null&&m.deviceId&&ts(m.deviceId)!==p?m.deviceId=p:m||(m={deviceId:p});const y=lz(f,m,e);return y.kind===j.Kind.Video?y.source=j.Source.Camera:y.kind===j.Kind.Audio&&(y.source=j.Source.Microphone),y.mediaStream=d,Di(y)&&i?yield y.setProcessor(i):eo(y)&&r&&(yield y.setProcessor(r)),y})))}catch(d){if(!n)throw d;return _f(Object.assign(Object.assign({},t),{audio:o,video:a}),e)}})}function Oz(t){return C(this,void 0,void 0,function*(){return(yield _f({audio:!1,video:!0}))[0]})}function Mz(t){return C(this,void 0,void 0,function*(){return(yield _f({audio:!0,video:!1}))[0]})}var Dr;(function(t){t.Excellent="excellent",t.Good="good",t.Poor="poor",t.Lost="lost",t.Unknown="unknown"})(Dr||(Dr={}));function Dz(t){switch(t){case al.EXCELLENT:return Dr.Excellent;case al.GOOD:return Dr.Good;case al.POOR:return Dr.Poor;case al.LOST:return Dr.Lost;default:return Dr.Unknown}}class M_ extends Vi.EventEmitter{get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(e=>e.isEncrypted)}get isAgent(){var e;return((e=this.permissions)===null||e===void 0?void 0:e.agent)||this.kind===ic.AGENT}get isActive(){var e;return((e=this.participantInfo)===null||e===void 0?void 0:e.state)===Ho.ACTIVE}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(e,n,i,r,s,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:ic.STANDARD;var l;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=Dr.Unknown,this.log=be,this.log=br((l=o==null?void 0:o.loggerName)!==null&&l!==void 0?l:fi.Participant),this.loggerOptions=o,this.setMaxListeners(100),this.sid=e,this.identity=n,this.name=i,this.metadata=r,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=a,this._attributes=s??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(e){for(const[,n]of this.trackPublications)if(n.source===e)return n}getTrackPublicationByName(e){for(const[,n]of this.trackPublications)if(n.trackName===e)return n}waitUntilActive(){return this.isActive?Promise.resolve():this.activeFuture?this.activeFuture.promise:(this.activeFuture=new Do,this.once(K.Active,()=>{var e,n;(n=(e=this.activeFuture)===null||e===void 0?void 0:e.resolve)===null||n===void 0||n.call(e),this.activeFuture=void 0}),this.activeFuture.promise)}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const n=this.getTrackPublication(j.Source.Camera);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const n=this.getTrackPublication(j.Source.Microphone);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrackPublication(j.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){var n;return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),this._setAttributes(e.attributes),e.state===Ho.ACTIVE&&((n=this.participantInfo)===null||n===void 0?void 0:n.state)!==Ho.ACTIVE&&this.emit(K.Active),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,!0)}_setMetadata(e){const n=this.metadata!==e,i=this.metadata;this.metadata=e,n&&this.emit(K.ParticipantMetadataChanged,i)}_setName(e){const n=this.name!==e;this.name=e,n&&this.emit(K.ParticipantNameChanged,e)}_setAttributes(e){const n=D6(this.attributes,e);this._attributes=e,Object.keys(n).length>0&&this.emit(K.AttributesChanged,n)}setPermissions(e){var n,i,r,s,o,a;const l=this.permissions,c=e.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||e.canSubscribe!==((i=this.permissions)===null||i===void 0?void 0:i.canSubscribe)||e.canPublishData!==((r=this.permissions)===null||r===void 0?void 0:r.canPublishData)||e.hidden!==((s=this.permissions)===null||s===void 0?void 0:s.hidden)||e.recorder!==((o=this.permissions)===null||o===void 0?void 0:o.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((u,d)=>{var f;return u!==((f=this.permissions)===null||f===void 0?void 0:f.canPublishSources[d])})||e.canSubscribeMetrics!==((a=this.permissions)===null||a===void 0?void 0:a.canSubscribeMetrics);return this.permissions=e,c&&this.emit(K.ParticipantPermissionsChanged,l),c}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(K.IsSpeakingChanged,e))}setConnectionQuality(e){const n=this._connectionQuality;this._connectionQuality=Dz(e),n!==this._connectionQuality&&this.emit(K.ConnectionQualityChanged,this._connectionQuality)}setDisconnected(){var e,n;this.activeFuture&&((n=(e=this.activeFuture).reject)===null||n===void 0||n.call(e,new Error("Participant disconnected")),this.activeFuture=void 0)}setAudioContext(e){this.audioContext=e,this.audioTrackPublications.forEach(n=>Di(n.track)&&n.track.setAudioContext(e))}addTrackPublication(e){e.on(W.Muted,()=>{this.emit(K.TrackMuted,e)}),e.on(W.Unmuted,()=>{this.emit(K.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.trackPublications.set(e.trackSid,e),e.kind){case j.Kind.Audio:this.audioTrackPublications.set(e.trackSid,e);break;case j.Kind.Video:this.videoTrackPublications.set(e.trackSid,e);break}}}function Lz(t){var e,n,i;if(!t.participantSid&&!t.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new OR({participantIdentity:(e=t.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(n=t.participantSid)!==null&&n!==void 0?n:"",allTracks:(i=t.allowAll)!==null&&i!==void 0?i:!1,trackSids:t.allowedTrackSids||[]})}const pT=15e3;class jz extends M_{constructor(e,n,i,r,s){super(e,n,void 0,void 0,void 0,{loggerName:r.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=bn.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new Do)},this.handleReconnected=()=>{var o,a;(a=(o=this.reconnectFuture)===null||o===void 0?void 0:o.resolve)===null||a===void 0||a.call(o),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleClosing=()=>{var o,a,l,c,u,d;this.reconnectFuture&&(this.reconnectFuture.promise.catch(f=>this.log.warn(f.message,this.logContext)),(a=(o=this.reconnectFuture)===null||o===void 0?void 0:o.reject)===null||a===void 0||a.call(o,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0),this.signalConnectedFuture&&((c=(l=this.signalConnectedFuture).reject)===null||c===void 0||c.call(l,"Got disconnected without signal connected"),this.signalConnectedFuture=void 0),(d=(u=this.activeAgentFuture)===null||u===void 0?void 0:u.reject)===null||d===void 0||d.call(u,"Got disconnected without active agent present"),this.activeAgentFuture=void 0,this.firstActiveAgent=void 0},this.handleSignalConnected=o=>{var a,l;o.participant&&this.updateInfo(o.participant),this.signalConnectedFuture||(this.signalConnectedFuture=new Do),(l=(a=this.signalConnectedFuture).resolve)===null||l===void 0||l.call(a)},this.handleSignalRequestResponse=o=>{const{requestId:a,reason:l,message:c}=o,u=this.pendingSignalRequests.get(a);u&&(l!==Sy.OK&&u.reject(new zS(c,l)),this.pendingSignalRequests.delete(a))},this.handleDataPacket=o=>{switch(o.value.case){case"rpcResponse":let a=o.value.value,l=null,c=null;a.value.case==="payload"?l=a.value.value:a.value.case==="error"&&(c=Ze.fromProto(a.value.value)),this.handleIncomingRpcResponse(a.requestId,l,c);break;case"rpcAck":let u=o.value.value;this.handleIncomingRpcAck(u.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(o=>Lz(o)))},this.onTrackUnmuted=o=>{this.onTrackMuted(o,o.isUpstreamPaused)},this.onTrackMuted=(o,a)=>{if(a===void 0&&(a=!0),!o.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),ge(o)));return}this.engine.updateMuteStatus(o.sid,a)},this.onTrackUpstreamPaused=o=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),ge(o))),this.onTrackMuted(o,!0)},this.onTrackUpstreamResumed=o=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),ge(o))),this.onTrackMuted(o,o.isMuted)},this.onTrackFeatureUpdate=o=>{const a=this.audioTrackPublications.get(o.sid);if(!a){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(o.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(a.trackSid,a.getTrackFeatures())},this.onTrackCpuConstrained=(o,a)=>{this.log.debug("track cpu constrained",Object.assign(Object.assign({},this.logContext),ge(a))),this.emit(K.LocalTrackCpuConstrained,o,a)},this.handleSubscribedQualityUpdate=o=>C(this,void 0,void 0,function*(){var a,l,c,u,d;if(!(!((d=this.roomOptions)===null||d===void 0)&&d.dynacast))return;const f=this.videoTrackPublications.get(o.trackSid);if(!f){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}if(!f.videoTrack)return;const h=yield f.videoTrack.setPublishingCodecs(o.subscribedCodecs);try{for(var v=!0,m=rr(h),b;b=yield m.next(),a=b.done,!a;v=!0){u=b.value,v=!1;const p=u;f6(p)&&(this.log.debug("publish ".concat(p," for ").concat(f.videoTrack.sid),Object.assign(Object.assign({},this.logContext),ge(f))),yield this.publishAdditionalCodecForTrack(f.videoTrack,p,f.options))}}catch(p){l={error:p}}finally{try{!v&&!a&&(c=m.return)&&(yield c.call(m))}finally{if(l)throw l.error}}}),this.handleLocalTrackUnpublished=o=>{const a=this.trackPublications.get(o.trackSid);if(!a){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}this.unpublishTrack(a.track)},this.handleTrackEnded=o=>C(this,void 0,void 0,function*(){if(o.source===j.Source.ScreenShare||o.source===j.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),ge(o))),this.unpublishTrack(o);else if(o.isUserProvided)yield o.mute();else if(Qi(o)||Cr(o))try{if(cn())try{const a=yield navigator==null?void 0:navigator.permissions.query({name:o.source===j.Source.Camera?"camera":"microphone"});if(a&&a.state==="denied")throw this.log.warn("user has revoked access to ".concat(o.source),Object.assign(Object.assign({},this.logContext),ge(o))),a.onchange=()=>{a.state!=="denied"&&(o.isMuted||o.restartTrack(),a.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}o.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),ge(o))),Qi(o)?yield o.restartTrack({deviceId:"default"}):yield o.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),ge(o))),yield o.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=i,this.roomOptions=r,this.setupEngine(i),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=s}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==bn.NONE}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setupEngine(e){var n;this.engine=e,this.engine.on(G.RemoteMute,(i,r)=>{const s=this.trackPublications.get(i);!s||!s.track||(r?s.mute():s.unmute())}),!((n=this.signalConnectedFuture)===null||n===void 0)&&n.isResolved&&(this.signalConnectedFuture=void 0),this.engine.on(G.Connected,this.handleReconnected).on(G.SignalConnected,this.handleSignalConnected).on(G.SignalRestarted,this.handleReconnected).on(G.SignalResumed,this.handleReconnected).on(G.Restarting,this.handleReconnecting).on(G.Resuming,this.handleReconnecting).on(G.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(G.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(G.Closing,this.handleClosing).on(G.SignalRequestResponse,this.handleSignalRequestResponse).on(G.DataPacketReceived,this.handleDataPacket)}setMetadata(e){return C(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:e})})}setName(e){return C(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:e})})}setAttributes(e){return C(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:e})})}requestMetadataUpdate(e){return C(this,arguments,void 0,function(n){var i=this;let{metadata:r,name:s,attributes:o}=n;return function*(){return new Promise((a,l)=>C(i,void 0,void 0,function*(){var c,u;try{let d=!1;const f=yield this.engine.client.sendUpdateLocalMetadata((c=r??this.metadata)!==null&&c!==void 0?c:"",(u=s??this.name)!==null&&u!==void 0?u:"",o),h=performance.now();for(this.pendingSignalRequests.set(f,{resolve:a,reject:v=>{l(v),d=!0},values:{name:s,metadata:r,attributes:o}});performance.now()-h<5e3&&!d;){if((!s||this.name===s)&&(!r||this.metadata===r)&&(!o||Object.entries(o).every(v=>{let[m,b]=v;return this.attributes[m]===b||b===""&&!this.attributes[m]}))){this.pendingSignalRequests.delete(f),a();return}yield hn(50)}l(new zS("Request to update local metadata timed out","TimeoutError"))}catch(d){d instanceof Error&&l(d)}}))}()})}setCameraEnabled(e,n,i){return this.setTrackEnabled(j.Source.Camera,e,n,i)}setMicrophoneEnabled(e,n,i){return this.setTrackEnabled(j.Source.Microphone,e,n,i)}setScreenShareEnabled(e,n,i){return this.setTrackEnabled(j.Source.ScreenShare,e,n,i)}setPermissions(e){const n=this.permissions,i=super.setPermissions(e);return i&&n&&this.emit(K.ParticipantPermissionsChanged,n),i}setE2EEEnabled(e){return C(this,void 0,void 0,function*(){this.encryptionType=e?bn.GCM:bn.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,n,i,r){return C(this,void 0,void 0,function*(){var s,o;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:n})),this.republishPromise&&(yield this.republishPromise);let a=this.getTrackPublication(e);if(n)if(a)yield a.unmute();else{let l;if(this.pendingPublishing.has(e)){const c=yield this.waitForPendingPublicationOfSource(e);return c||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e})),yield c==null?void 0:c.unmute(),c}this.pendingPublishing.add(e);try{switch(e){case j.Source.Camera:l=yield this.createTracks({video:(s=i)!==null&&s!==void 0?s:!0});break;case j.Source.Microphone:l=yield this.createTracks({audio:(o=i)!==null&&o!==void 0?o:!0});break;case j.Source.ScreenShare:l=yield this.createScreenTracks(Object.assign({},i));break;default:throw new sr(e)}}catch(c){throw l==null||l.forEach(u=>{u.stop()}),c instanceof Error&&this.emit(K.MediaDevicesError,c,ig(e)),this.pendingPublishing.delete(e),c}for(const c of l){const u=Object.assign(Object.assign({},this.roomOptions.publishDefaults),i);e===j.Source.Microphone&&Di(c)&&u.preConnectBuffer&&(this.log.info("starting preconnect buffer for microphone",Object.assign({},this.logContext)),c.startPreConnectBuffer())}try{const c=[];for(const d of l)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),ge(d))),c.push(this.publishTrack(d,r));[a]=yield Promise.all(c)}catch(c){throw l==null||l.forEach(u=>{u.stop()}),c}finally{this.pendingPublishing.delete(e)}}else if(!(a!=null&&a.track)&&this.pendingPublishing.has(e)&&(a=yield this.waitForPendingPublicationOfSource(e),a||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e}))),a&&a.track)if(e===j.Source.ScreenShare){a=yield this.unpublishTrack(a.track);const l=this.getTrackPublication(j.Source.ScreenShareAudio);l&&l.track&&this.unpublishTrack(l.track)}else yield a.mute();return a})}enableCameraAndMicrophone(){return C(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(j.Source.Camera)||this.pendingPublishing.has(j.Source.Microphone))){this.pendingPublishing.add(j.Source.Camera),this.pendingPublishing.add(j.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(j.Source.Camera),this.pendingPublishing.delete(j.Source.Microphone)}}})}createTracks(e){return C(this,void 0,void 0,function*(){var n,i;e??(e={});const r=x_(e,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(i=this.roomOptions)===null||i===void 0?void 0:i.videoCaptureDefaults);try{return(yield _f(r,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext})).map(a=>(Di(a)&&(this.microphoneError=void 0,a.setAudioContext(this.audioContext),a.source=j.Source.Microphone,this.emit(K.AudioStreamAcquired)),eo(a)&&(this.cameraError=void 0,a.source=j.Source.Camera),a))}catch(s){throw s instanceof Error&&(e.audio&&(this.microphoneError=s),e.video&&(this.cameraError=s)),s}})}createScreenTracks(e){return C(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new ky("getDisplayMedia not supported");e.resolution===void 0&&!y6()&&(e.resolution=wy.h1080fps30.resolution);const n=I6(e),i=yield navigator.mediaDevices.getDisplayMedia(n),r=i.getVideoTracks();if(r.length===0)throw new sr("no video track found");const s=new Ad(r[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});s.source=j.Source.ScreenShare,e.contentHint&&(s.mediaStreamTrack.contentHint=e.contentHint);const o=[s];if(i.getAudioTracks().length>0){this.emit(K.AudioStreamAcquired);const a=new _d(i.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});a.source=j.Source.ScreenShareAudio,o.push(a)}return o})}publishTrack(e,n){return C(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(e,n)})}publishOrRepublishTrack(e,n){return C(this,arguments,void 0,function(i,r){var s=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function*(){var a,l,c,u;Qi(i)&&i.setAudioContext(s.audioContext),yield(a=s.reconnectFuture)===null||a===void 0?void 0:a.promise,s.republishPromise&&!o&&(yield s.republishPromise),Yo(i)&&s.pendingPublishPromises.has(i)&&(yield s.pendingPublishPromises.get(i));let d;if(i instanceof MediaStreamTrack)d=i.getConstraints();else{d=i.constraints;let p;switch(i.source){case j.Source.Microphone:p="audioinput";break;case j.Source.Camera:p="videoinput"}p&&s.activeDeviceMap.has(p)&&(d=Object.assign(Object.assign({},d),{deviceId:s.activeDeviceMap.get(p)}))}if(i instanceof MediaStreamTrack)switch(i.kind){case"audio":i=new _d(i,d,!0,s.audioContext,{loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});break;case"video":i=new Ad(i,d,!0,{loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});break;default:throw new sr("unsupported MediaStreamTrack kind ".concat(i.kind))}else i.updateLoggerOptions({loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});let f;if(s.trackPublications.forEach(p=>{p.track&&p.track===i&&(f=p)}),f)return s.log.warn("track has already been published, skipping",Object.assign(Object.assign({},s.logContext),ge(f))),f;const h="channelCount"in i.mediaStreamTrack.getSettings()&&i.mediaStreamTrack.getSettings().channelCount===2||i.mediaStreamTrack.getConstraints().channelCount===2,v=(l=r==null?void 0:r.forceStereo)!==null&&l!==void 0?l:h;v&&(r||(r={}),r.dtx===void 0&&s.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},s.logContext),ge(i))),r.red===void 0&&s.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(c=r.dtx)!==null&&c!==void 0||(r.dtx=!1),(u=r.red)!==null&&u!==void 0||(r.red=!1));const m=Object.assign(Object.assign({},s.roomOptions.publishDefaults),r);!x6()&&s.roomOptions.e2ee&&(s.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},s.logContext)),m.simulcast=!1),m.source&&(i.source=m.source);const b=new Promise((p,y)=>C(s,void 0,void 0,function*(){try{if(this.engine.client.currentState!==De.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:ge(i)}));const S=setTimeout(()=>{y(new VS("publishing rejected as engine not connected within timeout",408))},15e3);yield this.waitUntilEngineConnected(),clearTimeout(S);const T=yield this.publish(i,m,v);p(T)}else try{const S=yield this.publish(i,m,v);p(S)}catch(S){y(S)}}catch(S){y(S)}}));s.pendingPublishPromises.set(i,b);try{return yield b}catch(p){throw p}finally{s.pendingPublishPromises.delete(i)}}()})}waitUntilEngineConnected(){return this.signalConnectedFuture||(this.signalConnectedFuture=new Do),this.signalConnectedFuture.promise}hasPermissionsToPublish(e){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),ge(e))),!1;const{canPublish:n,canPublishSources:i}=this.permissions;return n&&(i.length===0||i.map(r=>L6(r)).includes(e.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),ge(e))),!1)}publish(e,n,i){return C(this,void 0,void 0,function*(){var r,s,o,a,l,c,u,d,f,h;if(!this.hasPermissionsToPublish(e))throw new VS("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find(_=>Yo(e)&&_.source===e.source)&&e.source!==j.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),ge(e))),n.stopMicTrackOnMute&&Di(e)&&(e.stopOnMute=!0),e.source===j.Source.ScreenShare&&ya()&&(n.simulcast=!1),n.videoCodec==="av1"&&!m6()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!g6()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=rg),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(_=>n.videoCodec===Fu(_.mime))||(n.videoCodec=Fu(this.enabledPublishVideoCodecs[0].mime)));const m=n.videoCodec;e.on(W.Muted,this.onTrackMuted),e.on(W.Unmuted,this.onTrackUnmuted),e.on(W.Ended,this.handleTrackEnded),e.on(W.UpstreamPaused,this.onTrackUpstreamPaused),e.on(W.UpstreamResumed,this.onTrackUpstreamResumed),e.on(W.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const b=[],p=!(!((r=n.dtx)!==null&&r!==void 0)||r),y=e.getSourceTrackSettings();y.autoGainControl&&b.push(mt.TF_AUTO_GAIN_CONTROL),y.echoCancellation&&b.push(mt.TF_ECHO_CANCELLATION),y.noiseSuppression&&b.push(mt.TF_NOISE_SUPPRESSION),y.channelCount&&y.channelCount>1&&b.push(mt.TF_STEREO),p&&b.push(mt.TF_NO_DTX),Qi(e)&&e.hasPreConnectBuffer&&b.push(mt.TF_PRECONNECT_BUFFER);const S=new Fm({cid:e.mediaStreamTrack.id,name:n.name,type:j.kindToProto(e.kind),muted:e.isMuted,source:j.sourceToProto(e.source),disableDtx:p,encryption:this.encryptionType,stereo:i,disableRed:this.isE2EEEnabled||!(!((s=n.red)!==null&&s!==void 0)||s),stream:n==null?void 0:n.stream,backupCodecPolicy:n==null?void 0:n.backupCodecPolicy,audioFeatures:b});let T;if(e.kind===j.Kind.Video){let _={width:0,height:0};try{_=yield e.waitForDimensions()}catch{const O=(a=(o=this.roomOptions.videoCaptureDefaults)===null||o===void 0?void 0:o.resolution)!==null&&a!==void 0?a:rc.h720.resolution;_={width:O.width,height:O.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),ge(e)),{dims:_}))}S.width=_.width,S.height=_.height,Cr(e)&&(Ri(m)&&(e.source===j.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in e.mediaStreamTrack&&(e.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),ge(e))))),n.scalabilityMode=(l=n.scalabilityMode)!==null&&l!==void 0?l:"L3T3_KEY"),S.simulcastCodecs=[new jm({codec:m,cid:e.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:rg}),n.backupCodec&&m!==n.backupCodec.codec&&S.encryption===bn.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),S.simulcastCodecs.push(new jm({codec:n.backupCodec.codec,cid:""})))),T=og(e.source===j.Source.ScreenShare,S.width,S.height,n),S.layers=dT(S.width,S.height,T,Ri(n.videoCodec))}else e.kind===j.Kind.Audio&&(T=[{maxBitrate:(c=n.audioPreset)===null||c===void 0?void 0:c.maxBitrate,priority:(d=(u=n.audioPreset)===null||u===void 0?void 0:u.priority)!==null&&d!==void 0?d:"high",networkPriority:(h=(f=n.audioPreset)===null||f===void 0?void 0:f.priority)!==null&&h!==void 0?h:"high"}]);if(!this.engine||this.engine.isClosed)throw new ct("cannot publish track when not connected");const k=()=>C(this,void 0,void 0,function*(){var _,A,O;if(!this.engine.pcManager)throw new ct("pcManager is not ready");if(e.sender=yield this.engine.createSender(e,n,T),this.emit(K.LocalSenderCreated,e.sender,e),Cr(e)&&((_=n.degradationPreference)!==null&&_!==void 0||(n.degradationPreference=yz(e)),e.setDegradationPreference(n.degradationPreference)),T)if(ya()&&e.kind===j.Kind.Audio){let L;for(const Q of this.engine.pcManager.publisher.getTransceivers())if(Q.sender===e.sender){L=Q;break}L&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:L,codec:"opus",maxbr:!((A=T[0])===null||A===void 0)&&A.maxBitrate?T[0].maxBitrate/1e3:0})}else e.codec&&Ri(e.codec)&&(!((O=T[0])===null||O===void 0)&&O.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:S.cid,codec:e.codec,maxbr:T[0].maxBitrate/1e3});yield this.engine.negotiate()});let w;const E=new Promise((_,A)=>C(this,void 0,void 0,function*(){var O;try{w=yield this.engine.addTrack(S),_(w)}catch(L){e.sender&&(!((O=this.engine.pcManager)===null||O===void 0)&&O.publisher)&&(this.engine.pcManager.publisher.removeTrack(e.sender),yield this.engine.negotiate().catch(Q=>{this.log.error("failed to negotiate after removing track due to failed add track request",Object.assign(Object.assign(Object.assign({},this.logContext),ge(e)),{error:Q}))})),A(L)}}));if(this.enabledPublishVideoCodecs.length>0)w=(yield Promise.all([E,k()]))[0];else{w=yield E;let _;if(w.codecs.forEach(A=>{_===void 0&&(_=A.mimeType)}),_&&e.kind===j.Kind.Video){const A=Fu(_);A!==m&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),ge(e)),{codec:A})),n.videoCodec=A,T=og(e.source===j.Source.ScreenShare,S.width,S.height,n))}yield k()}const P=new cg(e.kind,w,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(P.on(W.CpuConstrained,_=>this.onTrackCpuConstrained(_,P)),P.options=n,e.sid=w.sid,this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:T,trackInfo:w})),Cr(e)?e.startMonitor(this.engine.client):Qi(e)&&e.startMonitor(),this.addTrackPublication(P),this.emit(K.LocalTrackPublished,P),Qi(e)&&w.audioFeatures.includes(mt.TF_PRECONNECT_BUFFER)){const _=e.getPreConnectBuffer(),A=e.getPreConnectBufferMimeType();this.on(K.LocalTrackSubscribed,O=>{if(O.trackSid===w.sid){if(!e.hasPreConnectBuffer){this.log.warn("subscribe event came to late, buffer already closed",this.logContext);return}this.log.debug("finished recording preconnect buffer",Object.assign(Object.assign({},this.logContext),ge(e))),e.stopPreConnectBuffer()}}),_&&new Promise((L,Q)=>C(this,void 0,void 0,function*(){var z,oe,ae,X,I,M;try{this.log.debug("waiting for agent",Object.assign(Object.assign({},this.logContext),ge(e)));const ee=setTimeout(()=>{Q(new Error("agent not active within 10 seconds"))},1e4),ue=yield this.waitUntilActiveAgentPresent();clearTimeout(ee),this.log.debug("sending preconnect buffer",Object.assign(Object.assign({},this.logContext),ge(e)));const ce=yield this.streamBytes({name:"preconnect-buffer",mimeType:A,topic:"lk.agent.pre-connect-audio-buffer",destinationIdentities:[ue.identity],attributes:{trackId:P.trackSid,sampleRate:String((I=y.sampleRate)!==null&&I!==void 0?I:"48000"),channels:String((M=y.channelCount)!==null&&M!==void 0?M:"1")}});try{for(var q=!0,Y=rr(_),ne;ne=yield Y.next(),z=ne.done,!z;q=!0){X=ne.value,q=!1;const Ce=X;yield ce.write(Ce)}}catch(Ce){oe={error:Ce}}finally{try{!q&&!z&&(ae=Y.return)&&(yield ae.call(Y))}finally{if(oe)throw oe.error}}yield ce.close(),L()}catch(ee){Q(ee)}})).then(()=>{this.log.debug("preconnect buffer sent successfully",Object.assign(Object.assign({},this.logContext),ge(e)))}).catch(L=>{this.log.error("error sending preconnect buffer",Object.assign(Object.assign(Object.assign({},this.logContext),ge(e)),{error:L}))})}return P})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,n,i){return C(this,void 0,void 0,function*(){var r;if(this.encryptionType!==bn.NONE)return;let s;if(this.trackPublications.forEach(h=>{h.track&&h.track===e&&(s=h)}),!s)throw new sr("track is not published");if(!Cr(e))throw new sr("track is not a video track");const o=Object.assign(Object.assign({},(r=this.roomOptions)===null||r===void 0?void 0:r.publishDefaults),i),a=mz(e,n,o);if(!a){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),ge(e)));return}const l=e.addSimulcastTrack(n,a);if(!l)return;const c=new Fm({cid:l.mediaStreamTrack.id,type:j.kindToProto(e.kind),muted:e.isMuted,source:j.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:o.videoCodec,cid:l.mediaStreamTrack.id}]});if(c.layers=dT(c.width,c.height,a),!this.engine||this.engine.isClosed)throw new ct("cannot publish track when not connected");const u=()=>C(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(e,l,o,a),yield this.engine.negotiate()}),f=(yield Promise.all([this.engine.addTrack(c),u()]))[0];this.log.debug("published ".concat(n," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:a,trackInfo:f}))})}unpublishTrack(e,n){return C(this,void 0,void 0,function*(){var i,r;if(Yo(e)){const c=this.pendingPublishPromises.get(e);c&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),ge(e))),yield c)}const s=this.getPublicationForTrack(e),o=s?ge(s):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),o)),!s||!s.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),o));return}e=s.track,e.off(W.Muted,this.onTrackMuted),e.off(W.Unmuted,this.onTrackUnmuted),e.off(W.Ended,this.handleTrackEnded),e.off(W.UpstreamPaused,this.onTrackUpstreamPaused),e.off(W.UpstreamResumed,this.onTrackUpstreamResumed),e.off(W.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(r=(i=this.roomOptions)===null||i===void 0?void 0:i.stopLocalTrackOnUnpublish)!==null&&r!==void 0?r:!0),n?e.stop():e.stopMonitor();let a=!1;const l=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<Qe.FAILED&&l)try{for(const c of this.engine.pcManager.publisher.getTransceivers())c.sender===l&&(c.direction="inactive",a=!0);if(this.engine.removeTrack(l)&&(a=!0),Cr(e)){for(const[,c]of e.simulcastCodecs)c.sender&&(this.engine.removeTrack(c.sender)&&(a=!0),c.sender=void 0);e.simulcastCodecs.clear()}}catch(c){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),o),{error:c}))}switch(this.trackPublications.delete(s.trackSid),s.kind){case j.Kind.Audio:this.audioTrackPublications.delete(s.trackSid);break;case j.Kind.Video:this.videoTrackPublications.delete(s.trackSid);break}return this.emit(K.LocalTrackUnpublished,s),s.setTrack(void 0),a&&(yield this.engine.negotiate()),s})}unpublishTracks(e){return C(this,void 0,void 0,function*(){return(yield Promise.all(e.map(i=>this.unpublishTrack(i)))).filter(i=>!!i)})}republishAllTracks(e){return C(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){i.republishPromise&&(yield i.republishPromise),i.republishPromise=new Promise((s,o)=>C(i,void 0,void 0,function*(){try{const a=[];this.trackPublications.forEach(l=>{l.track&&(n&&(l.options=Object.assign(Object.assign({},l.options),n)),a.push(l))}),yield Promise.all(a.map(l=>C(this,void 0,void 0,function*(){const c=l.track;yield this.unpublishTrack(c,!1),r&&!c.isMuted&&c.source!==j.Source.ScreenShare&&c.source!==j.Source.ScreenShareAudio&&(Qi(c)||Cr(c))&&!c.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:l.trackSid})),yield c.restartTrack()),yield this.publishOrRepublishTrack(c,l.options,!0)}))),s()}catch(a){o(a)}finally{this.republishPromise=void 0}})),yield i.republishPromise}()})}publishData(e){return C(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const s=r.reliable?he.RELIABLE:he.LOSSY,o=r.destinationIdentities,a=r.topic,l=new rn({kind:s,value:{case:"user",value:new pR({participantIdentity:i.identity,payload:n,destinationIdentities:o,topic:a})}});yield i.engine.sendDataPacket(l,s)}()})}publishDtmf(e,n){return C(this,void 0,void 0,function*(){const i=new rn({kind:he.RELIABLE,value:{case:"sipDtmf",value:new mR({code:e,digit:n})}});yield this.engine.sendDataPacket(i,he.RELIABLE)})}sendChatMessage(e,n){return C(this,void 0,void 0,function*(){const i={id:crypto.randomUUID(),message:e,timestamp:Date.now(),attachedFiles:n==null?void 0:n.attachments},r=new rn({value:{case:"chatMessage",value:new Nm(Object.assign(Object.assign({},i),{timestamp:Ve.parse(i.timestamp)}))}});return yield this.engine.sendDataPacket(r,he.RELIABLE),this.emit(K.ChatMessage,i),i})}editChatMessage(e,n){return C(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},n),{message:e,editTimestamp:Date.now()}),r=new rn({value:{case:"chatMessage",value:new Nm(Object.assign(Object.assign({},i),{timestamp:Ve.parse(i.timestamp),editTimestamp:Ve.parse(i.editTimestamp)}))}});return yield this.engine.sendDataPacket(r,he.RELIABLE),this.emit(K.ChatMessage,i),i})}sendText(e,n){return C(this,void 0,void 0,function*(){var i;const r=crypto.randomUUID(),o=new TextEncoder().encode(e).byteLength,a=(i=n==null?void 0:n.attachments)===null||i===void 0?void 0:i.map(()=>crypto.randomUUID()),l=new Array(a?a.length+1:1).fill(0),c=(d,f)=>{var h;l[f]=d;const v=l.reduce((m,b)=>m+b,0);(h=n==null?void 0:n.onProgress)===null||h===void 0||h.call(n,v)},u=yield this.streamText({streamId:r,totalSize:o,destinationIdentities:n==null?void 0:n.destinationIdentities,topic:n==null?void 0:n.topic,attachedStreamIds:a,attributes:n==null?void 0:n.attributes});return yield u.write(e),c(1,0),yield u.close(),n!=null&&n.attachments&&a&&(yield Promise.all(n.attachments.map((d,f)=>C(this,void 0,void 0,function*(){return this._sendFile(a[f],d,{topic:n.topic,mimeType:d.type,onProgress:h=>{c(h,f+1)}})})))),u.info})}streamText(e){return C(this,void 0,void 0,function*(){var n,i;const r=(n=e==null?void 0:e.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),s={id:r,mimeType:"text/plain",timestamp:Date.now(),topic:(i=e==null?void 0:e.topic)!==null&&i!==void 0?i:"",size:e==null?void 0:e.totalSize,attributes:e==null?void 0:e.attributes},o=new Om({streamId:r,mimeType:s.mimeType,topic:s.topic,timestamp:Ts(s.timestamp),totalLength:Ts(e==null?void 0:e.totalSize),attributes:s.attributes,contentHeader:{case:"textHeader",value:new ER({version:e==null?void 0:e.version,attachedStreamIds:e==null?void 0:e.attachedStreamIds,replyToStreamId:e==null?void 0:e.replyToStreamId,operationType:(e==null?void 0:e.type)==="update"?Im.UPDATE:Im.CREATE})}}),a=e==null?void 0:e.destinationIdentities,l=new rn({destinationIdentities:a,value:{case:"streamHeader",value:o}});yield this.engine.sendDataPacket(l,he.RELIABLE);let c=0;const u=this,d=new WritableStream({write(v){return C(this,void 0,void 0,function*(){for(const m of A6(v,pT)){yield u.engine.waitForBufferStatusLow(he.RELIABLE);const b=new Mm({content:m,streamId:r,chunkIndex:Ts(c)}),p=new rn({destinationIdentities:a,value:{case:"streamChunk",value:b}});yield u.engine.sendDataPacket(p,he.RELIABLE),c+=1}})},close(){return C(this,void 0,void 0,function*(){const v=new Dm({streamId:r}),m=new rn({destinationIdentities:a,value:{case:"streamTrailer",value:v}});yield u.engine.sendDataPacket(m,he.RELIABLE)})},abort(v){console.log("Sink error:",v)}});let f=()=>C(this,void 0,void 0,function*(){yield h.close()});u.engine.once(G.Closing,f);const h=new Rz(d,s,()=>this.engine.off(G.Closing,f));return h})}sendFile(e,n){return C(this,void 0,void 0,function*(){const i=crypto.randomUUID();return yield this._sendFile(i,e,n),{id:i}})}_sendFile(e,n,i){return C(this,void 0,void 0,function*(){var r;const s=yield this.streamBytes({streamId:e,totalSize:n.size,name:n.name,mimeType:(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:n.type,topic:i==null?void 0:i.topic,destinationIdentities:i==null?void 0:i.destinationIdentities}),o=n.stream().getReader();for(;;){const{done:a,value:l}=yield o.read();if(a)break;yield s.write(l)}return yield s.close(),s.info})}streamBytes(e){return C(this,void 0,void 0,function*(){var n,i,r,s,o;const a=(n=e==null?void 0:e.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),l=e==null?void 0:e.destinationIdentities,c={id:a,mimeType:(i=e==null?void 0:e.mimeType)!==null&&i!==void 0?i:"application/octet-stream",topic:(r=e==null?void 0:e.topic)!==null&&r!==void 0?r:"",timestamp:Date.now(),attributes:e==null?void 0:e.attributes,size:e==null?void 0:e.totalSize,name:(s=e==null?void 0:e.name)!==null&&s!==void 0?s:"unknown"},u=new Om({totalLength:Ts((o=c.size)!==null&&o!==void 0?o:0),mimeType:c.mimeType,streamId:a,topic:c.topic,timestamp:Ts(Date.now()),attributes:c.attributes,contentHeader:{case:"byteHeader",value:new PR({name:c.name})}}),d=new rn({destinationIdentities:l,value:{case:"streamHeader",value:u}});yield this.engine.sendDataPacket(d,he.RELIABLE);let f=0;const h=new Ht,v=this.engine,m=this.log,b=new WritableStream({write(y){return C(this,void 0,void 0,function*(){const S=yield h.lock();let T=0;try{for(;T<y.byteLength;){const k=y.slice(T,T+pT);yield v.waitForBufferStatusLow(he.RELIABLE);const w=new rn({destinationIdentities:l,value:{case:"streamChunk",value:new Mm({content:k,streamId:a,chunkIndex:Ts(f)})}});yield v.sendDataPacket(w,he.RELIABLE),f+=1,T+=k.byteLength}}finally{S()}})},close(){return C(this,void 0,void 0,function*(){const y=new Dm({streamId:a}),S=new rn({destinationIdentities:l,value:{case:"streamTrailer",value:y}});yield v.sendDataPacket(S,he.RELIABLE)})},abort(y){m.error("Sink error:",y)}});return new _z(b,c)})}performRpc(e){return C(this,arguments,void 0,function(n){var i=this;let{destinationIdentity:r,method:s,payload:o,responseTimeout:a=1e4}=n;return function*(){return new Promise((c,u)=>C(i,void 0,void 0,function*(){var d,f,h,v;if(Ay(o)>P_){u(Ze.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((f=(d=this.engine.latestJoinResponse)===null||d===void 0?void 0:d.serverInfo)===null||f===void 0)&&f.version&&Ui((v=(h=this.engine.latestJoinResponse)===null||h===void 0?void 0:h.serverInfo)===null||v===void 0?void 0:v.version,"1.8.0")<0){u(Ze.builtIn("UNSUPPORTED_SERVER"));return}const m=crypto.randomUUID();yield this.publishRpcRequest(r,m,s,o,a-2e3);const b=setTimeout(()=>{this.pendingAcks.delete(m),u(Ze.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(m),clearTimeout(p)},2e3);this.pendingAcks.set(m,{resolve:()=>{clearTimeout(b)},participantIdentity:r});const p=setTimeout(()=>{this.pendingResponses.delete(m),u(Ze.builtIn("RESPONSE_TIMEOUT"))},a);this.pendingResponses.set(m,{resolve:(y,S)=>{clearTimeout(p),this.pendingAcks.has(m)&&(console.warn("RPC response received before ack",m),this.pendingAcks.delete(m),clearTimeout(b)),S?u(S):c(y??"")},participantIdentity:r})}))}()})}registerRpcMethod(e,n){this.rpcHandlers.has(e)&&this.log.warn("you're overriding the RPC handler for method ".concat(e,", in the future this will throw an error")),this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setTrackSubscriptionPermissions(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(e){const n=this.pendingAcks.get(e);n?(n.resolve(),this.pendingAcks.delete(e)):console.error("Ack received for unexpected RPC request",e)}handleIncomingRpcResponse(e,n,i){const r=this.pendingResponses.get(e);r?(r.resolve(n,i),this.pendingResponses.delete(e)):console.error("Response received for unexpected RPC request",e)}publishRpcRequest(e,n,i,r,s){return C(this,void 0,void 0,function*(){const o=new rn({destinationIdentities:[e],kind:he.RELIABLE,value:{case:"rpcRequest",value:new gR({id:n,method:i,payload:r,responseTimeoutMs:s,version:1})}});yield this.engine.sendDataPacket(o,he.RELIABLE)})}handleParticipantDisconnected(e){for(const[n,{participantIdentity:i}]of this.pendingAcks)i===e&&this.pendingAcks.delete(n);for(const[n,{participantIdentity:i,resolve:r}]of this.pendingResponses)i===e&&(r(null,Ze.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(n))}setEnabledPublishCodecs(e){this.enabledPublishVideoCodecs=e.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(e){return super.updateInfo(e)?(e.tracks.forEach(n=>{var i,r;const s=this.trackPublications.get(n.sid);if(s){const o=s.isMuted||((r=(i=s.track)===null||i===void 0?void 0:i.isUpstreamPaused)!==null&&r!==void 0?r:!1);o!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),ge(s)),{mutedOnServer:o})),this.engine.client.sendMuteTrack(n.sid,o))}}),!0):!1}setActiveAgent(e){var n,i,r,s;this.firstActiveAgent=e,e&&!this.firstActiveAgent&&(this.firstActiveAgent=e),e?(i=(n=this.activeAgentFuture)===null||n===void 0?void 0:n.resolve)===null||i===void 0||i.call(n,e):(s=(r=this.activeAgentFuture)===null||r===void 0?void 0:r.reject)===null||s===void 0||s.call(r,"Agent disconnected"),this.activeAgentFuture=void 0}waitUntilActiveAgentPresent(){return this.firstActiveAgent?Promise.resolve(this.firstActiveAgent):(this.activeAgentFuture||(this.activeAgentFuture=new Do),this.activeAgentFuture.promise)}getPublicationForTrack(e){let n;return this.trackPublications.forEach(i=>{const r=i.track;r&&(e instanceof MediaStreamTrack?(Qi(r)||Cr(r))&&r.mediaStreamTrack===e&&(n=i):e===r&&(n=i))}),n}waitForPendingPublicationOfSource(e){return C(this,void 0,void 0,function*(){const i=Date.now();for(;Date.now()<i+1e4;){const r=Array.from(this.pendingPublishPromises.entries()).find(s=>{let[o]=s;return o.source===e});if(r)return r[1];yield hn(20)}})}}class Fz extends er{constructor(e,n,i,r){super(e,n.sid,n.name,r),this.track=void 0,this.allowed=!0,this.requestedDisabled=void 0,this.visible=!0,this.handleEnded=s=>{this.setTrack(void 0),this.emit(W.Ended,s)},this.handleVisibilityChange=s=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(s),this.logContext),this.visible=s,this.emitTrackUpdate()},this.handleVideoDimensionsChange=s=>{this.log.debug("adaptivestream video dimensions ".concat(s.width,"x").concat(s.height),this.logContext),this.videoDimensionsAdaptiveStream=s,this.emitTrackUpdate()},this.subscribed=i,this.updateInfo(n)}setSubscribed(e){const n=this.subscriptionStatus,i=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const r=new Cf({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new xR({participantSid:"",trackSids:[this.trackSid]})]});this.emit(W.UpdateSubscription,r),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(i)}get subscriptionStatus(){return this.subscribed===!1?er.SubscriptionStatus.Unsubscribed:super.isSubscribed?er.SubscriptionStatus.Subscribed:er.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?er.PermissionStatus.Allowed:er.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return this.requestedDisabled!==void 0?!this.requestedDisabled:this.isAdaptiveStream?this.visible:!0}get isLocal(){return!1}setEnabled(e){!this.isManualOperationAllowed()||this.requestedDisabled===!e||(this.requestedDisabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.requestedMaxQuality===e||(this.requestedMaxQuality=e,this.requestedVideoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var n,i;this.isManualOperationAllowed()&&(((n=this.requestedVideoDimensions)===null||n===void 0?void 0:n.width)===e.width&&((i=this.requestedVideoDimensions)===null||i===void 0?void 0:i.height)===e.height||(qh(this.track)&&(this.requestedVideoDimensions=e),this.requestedMaxQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&qh(this.track)&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){var e;return(e=this.requestedMaxQuality)!==null&&e!==void 0?e:Tn.HIGH}setTrack(e){const n=this.subscriptionStatus,i=this.permissionStatus,r=this.track;r!==e&&(r&&(r.off(W.VideoDimensionsChanged,this.handleVideoDimensionsChange),r.off(W.VisibilityChanged,this.handleVisibilityChange),r.off(W.Ended,this.handleEnded),r.detach(),r.stopMonitor(),this.emit(W.Unsubscribed,r)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(W.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(W.VisibilityChanged,this.handleVisibilityChange),e.on(W.Ended,this.handleEnded),this.emit(W.Subscribed,e)),this.emitPermissionUpdateIfChanged(i),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(e){const n=this.subscriptionStatus,i=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(i),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(e){this.emit(W.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const n=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):n!==e.muted&&this.emit(e.muted?W.Muted:W.Unmuted)}emitSubscriptionUpdateIfChanged(e){const n=this.subscriptionStatus;e!==n&&this.emit(W.SubscriptionStatusChanged,n,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(W.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return qh(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new RR({trackSids:[this.trackSid],disabled:!this.isEnabled,fps:this.fps});if(this.kind===j.Kind.Video){let n=this.requestedVideoDimensions;if(this.videoDimensionsAdaptiveStream!==void 0)if(n)XS(this.videoDimensionsAdaptiveStream,n)&&(this.log.debug("using adaptive stream dimensions instead of requested",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream);else if(this.requestedMaxQuality!==void 0&&this.trackInfo){const i=j6(this.trackInfo,this.requestedMaxQuality);i&&XS(this.videoDimensionsAdaptiveStream,i)&&(this.log.debug("using adaptive stream dimensions instead of max quality layer",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream)}else this.log.debug("using adaptive stream dimensions",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream;n?(e.width=Math.ceil(n.width),e.height=Math.ceil(n.height)):this.requestedMaxQuality!==void 0?(this.log.debug("using requested max quality",Object.assign(Object.assign({},this.logContext),{quality:this.requestedMaxQuality})),e.quality=this.requestedMaxQuality):(this.log.debug("using default quality",Object.assign(Object.assign({},this.logContext),{quality:Tn.HIGH})),e.quality=Tn.HIGH)}this.emit(W.UpdateSettings,e)}}class Nd extends M_{static fromParticipantInfo(e,n,i){return new Nd(e,n.sid,n.identity,n.name,n.metadata,n.attributes,i,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(e,n,i,r,s,o,a){let l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:ic.STANDARD;super(n,i||"",r,s,o,a,l),this.signalClient=e,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(W.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign(Object.assign({},this.logContext),ge(e)),{settings:n})),this.signalClient.sendUpdateTrackSettings(n)}),e.on(W.UpdateSubscription,n=>{n.participantTracks.forEach(i=>{i.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),e.on(W.SubscriptionPermissionChanged,n=>{this.emit(K.TrackSubscriptionPermissionChanged,e,n)}),e.on(W.SubscriptionStatusChanged,n=>{this.emit(K.TrackSubscriptionStatusChanged,e,n)}),e.on(W.Subscribed,n=>{this.emit(K.TrackSubscribed,n,e)}),e.on(W.Unsubscribed,n=>{this.emit(K.TrackUnsubscribed,n,e)}),e.on(W.SubscriptionFailed,n=>{this.emit(K.TrackSubscriptionFailed,e.trackSid,n)})}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setVolume(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:j.Source.Microphone;this.volumeMap.set(n,e);const i=this.getTrackPublication(n);i&&i.track&&i.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:j.Source.Microphone;const n=this.getTrackPublication(e);return n&&n.track?n.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,n,i,r,s,o){let a=this.getTrackPublicationBySid(n);if(a||n.startsWith("TR")||this.trackPublications.forEach(u=>{!a&&e.kind===u.kind.toString()&&(a=u)}),!a){if(o===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(K.TrackSubscriptionFailed,n);return}o===void 0&&(o=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,i,r,s,o-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),ge(a))),this.emit(K.TrackSubscriptionFailed,n);return}const l=e.kind==="video";let c;return l?c=new Nz(e,n,r,s):c=new Az(e,n,r,this.audioContext,this.audioOutput),c.source=a.source,c.isMuted=a.isMuted,c.setMediaStream(i),c.start(),a.setTrack(c),this.volumeMap.has(a.source)&&tg(c)&&Di(c)&&c.setVolume(this.volumeMap.get(a.source)),a}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(e){return this.trackPublications.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const n=new Map,i=new Map;return e.tracks.forEach(r=>{var s,o;let a=this.getTrackPublicationBySid(r.sid);if(a)a.updateInfo(r);else{const l=j.kindFromProto(r.type);if(!l)return;a=new Fz(l,r,(s=this.signalClient.connectOptions)===null||s===void 0?void 0:s.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(o=this.loggerOptions)===null||o===void 0?void 0:o.loggerName}),a.updateInfo(r),i.set(r.sid,a);const c=Array.from(this.trackPublications.values()).find(u=>u.source===(a==null?void 0:a.source));c&&a.source!==j.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(a.source),Object.assign(Object.assign({},this.logContext),{oldTrack:ge(c),newTrack:ge(a)})),this.addTrackPublication(a)}n.set(r.sid,a)}),this.trackPublications.forEach(r=>{n.has(r.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),ge(r))),this.unpublishTrack(r.trackSid,!0))}),i.forEach(r=>{this.emit(K.TrackPublished,r)}),!0}unpublishTrack(e,n){const i=this.trackPublications.get(e);if(!i)return;const{track:r}=i;switch(r&&(r.stop(),i.setTrack(void 0)),this.trackPublications.delete(e),i.kind){case j.Kind.Audio:this.audioTrackPublications.delete(e);break;case j.Kind.Video:this.videoTrackPublications.delete(e);break}n&&this.emit(K.TrackUnpublished,i)}setAudioOutput(e){return C(this,void 0,void 0,function*(){this.audioOutput=e;const n=[];this.audioTrackPublications.forEach(i=>{var r;Di(i.track)&&tg(i.track)&&n.push(i.track.setSinkId((r=e.deviceId)!==null&&r!==void 0?r:"default"))}),yield Promise.all(n)})}emit(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:i})),super.emit(e,...i)}}var we;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting"})(we||(we={}));const Uz=4*1e3;class ba extends Vi.EventEmitter{constructor(e){var n,i,r,s;if(super(),n=this,this.state=we.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=be,this.bufferedEvents=[],this.isResuming=!1,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map,this.rpcHandlers=new Map,this.connect=(o,a,l)=>C(this,void 0,void 0,function*(){var c;if(!v6())throw Fi()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const u=yield this.disconnectLock.lock();if(this.state===we.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),u(),Promise.resolve();if(this.connectFuture)return u(),this.connectFuture.promise;this.setAndEmitConnectionState(we.Connecting),((c=this.regionUrlProvider)===null||c===void 0?void 0:c.getServerUrl().toString())!==o&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),Zm(new URL(o))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new ag(o,a):this.regionUrlProvider.updateToken(a),this.regionUrlProvider.fetchRegionSettings().then(h=>{var v;(v=this.regionUrlProvider)===null||v===void 0||v.setServerReportedRegions(h)}).catch(h=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:h}))}));const d=(h,v,m)=>C(this,void 0,void 0,function*(){var b,p;this.abortController&&this.abortController.abort();const y=new AbortController;this.abortController=y,u==null||u();try{yield this.attemptConnection(m??o,a,l,y),this.abortController=void 0,h()}catch(S){if(this.regionUrlProvider&&S instanceof _e&&S.reason!==Se.Cancelled&&S.reason!==Se.NotAllowed){let T=null;try{T=yield this.regionUrlProvider.getNextBestRegionUrl((b=this.abortController)===null||b===void 0?void 0:b.signal)}catch(k){if(k instanceof _e&&(k.status===401||k.reason===Se.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),v(k);return}}T&&!(!((p=this.abortController)===null||p===void 0)&&p.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(S.message,". Retrying with another region: ").concat(T),this.logContext),this.recreateEngine(),yield d(h,v,T)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,QS(S)),v(S))}else{let T=oi.UNKNOWN_REASON;S instanceof _e&&(T=QS(S)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,T),v(S)}}}),f=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new Do((h,v)=>{d(h,v,f)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(o,a,l,c,u,d)=>C(this,void 0,void 0,function*(){var f,h,v;const m=yield l.join(o,a,{autoSubscribe:c.autoSubscribe,adaptiveStream:typeof u.adaptiveStream=="object"?!0:u.adaptiveStream,maxRetries:c.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:c.websocketTimeout},d.signal);let b=m.serverInfo;if(b||(b={version:m.serverVersion,region:m.serverRegion}),this.serverInfo=b,this.log.debug("connected to Livekit Server ".concat(Object.entries(b).map(p=>{let[y,S]=p;return"".concat(y,": ").concat(S)}).join(", ")),{room:(f=m.room)===null||f===void 0?void 0:f.name,roomSid:(h=m.room)===null||h===void 0?void 0:h.sid,identity:(v=m.participant)===null||v===void 0?void 0:v.identity}),!b.version)throw new n6("unknown server version");return b.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),u.dynacast=!1),m}),this.applyJoinResponse=o=>{const a=o.participant;if(this.localParticipant.sid=a.sid,this.localParticipant.identity=a.identity,this.localParticipant.setEnabledPublishCodecs(o.enabledPublishCodecs),this.options.e2ee&&this.e2eeManager)try{this.e2eeManager.setSifTrailer(o.sifTrailer)}catch(l){this.log.error(l instanceof Error?l.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:l}))}this.handleParticipantUpdates([a,...o.otherParticipants]),o.room&&this.handleRoomUpdate(o.room)},this.attemptConnection=(o,a,l,c)=>C(this,void 0,void 0,function*(){var u,d;this.state===we.Reconnecting||this.isResuming||!((u=this.engine)===null||u===void 0)&&u.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((d=this.regionUrlProvider)===null||d===void 0)&&d.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},_y),l),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const f=yield this.connectSignal(o,a,this.engine,this.connOptions,this.options,c);this.applyJoinResponse(f),this.setupLocalParticipantEvents(),this.emit(B.SignalConnected)}catch(f){yield this.engine.close(),this.recreateEngine();const h=new _e("could not establish signal connection",Se.ServerUnreachable);throw f instanceof Error&&(h.message="".concat(h.message,": ").concat(f.message)),f instanceof _e&&(h.reason=f.reason,h.status=f.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:f})),h}if(c.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new _e("Connection attempt aborted",Se.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,c)}catch(f){throw yield this.engine.close(),this.recreateEngine(),f}cn()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),cn()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(we.Connected),this.emit(B.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return C(n,[...a],void 0,function(){var c=this;let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var d,f,h,v;const m=yield c.disconnectLock.lock();try{if(c.state===we.Disconnected){c.log.debug("already disconnected",c.logContext);return}c.log.info("disconnect from room",Object.assign({},c.logContext)),(c.state===we.Connecting||c.state===we.Reconnecting||c.isResuming)&&(c.log.warn("abort connection attempt",c.logContext),(d=c.abortController)===null||d===void 0||d.abort(),(h=(f=c.connectFuture)===null||f===void 0?void 0:f.reject)===null||h===void 0||h.call(f,new _e("Client initiated disconnect",Se.Cancelled)),c.connectFuture=void 0),!((v=c.engine)===null||v===void 0)&&v.client.isDisconnected||(yield c.engine.client.sendLeave()),c.engine&&(yield c.engine.close()),c.handleDisconnect(u,oi.CLIENT_INITIATED),c.engine=void 0}finally{m()}}()})},this.onPageLeave=()=>C(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>C(this,void 0,void 0,function*(){const o=[],a=En();if(a&&a.os==="iOS"){const l="livekit-dummy-audio-el";let c=document.getElementById(l);if(!c){c=document.createElement("audio"),c.id=l,c.autoplay=!0,c.hidden=!0;const u=Hh();u.enabled=!0;const d=new MediaStream([u]);c.srcObject=d,document.addEventListener("visibilitychange",()=>{c&&(c.srcObject=document.hidden?null:d,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(c),this.once(B.Disconnected,()=>{c==null||c.remove(),c=null})}o.push(c)}this.remoteParticipants.forEach(l=>{l.audioTrackPublications.forEach(c=>{c.track&&c.track.attachedElements.forEach(u=>{o.push(u)})})});try{yield Promise.all([this.acquireAudioContext(),...o.map(l=>(l.muted=!1,l.play()))]),this.handleAudioPlaybackStarted()}catch(l){throw this.handleAudioPlaybackFailed(l),l}}),this.startVideo=()=>C(this,void 0,void 0,function*(){const o=[];for(const a of this.remoteParticipants.values())a.videoTrackPublications.forEach(l=>{var c;(c=l.track)===null||c===void 0||c.attachedElements.forEach(u=>{o.includes(u)||o.push(u)})});yield Promise.all(o.map(a=>a.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(a=>{a.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const o of this.remoteParticipants.values())this.handleParticipantDisconnected(o.identity,o);this.setAndEmitConnectionState(we.Reconnecting)&&this.emit(B.Reconnecting)},this.handleSignalRestarted=o=>C(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(o.serverRegion),Object.assign(Object.assign({},this.logContext),{region:o.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(o);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(a){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:a}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:o.serverRegion}))}catch{return}this.setAndEmitConnectionState(we.Connected),this.emit(B.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=o=>{o.forEach(a=>{var l;if(a.identity===this.localParticipant.identity){this.localParticipant.updateInfo(a);return}a.identity===""&&(a.identity=(l=this.sidToIdentity.get(a.sid))!==null&&l!==void 0?l:"");let c=this.remoteParticipants.get(a.identity);a.state===Ho.DISCONNECTED?this.handleParticipantDisconnected(a.identity,c):c=this.getOrCreateParticipant(a.identity,a)})},this.handleActiveSpeakersUpdate=o=>{const a=[],l={};o.forEach(c=>{if(l[c.sid]=!0,c.sid===this.localParticipant.sid)this.localParticipant.audioLevel=c.level,this.localParticipant.setIsSpeaking(!0),a.push(this.localParticipant);else{const u=this.getRemoteParticipantBySid(c.sid);u&&(u.audioLevel=c.level,u.setIsSpeaking(!0),a.push(u))}}),l[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(c=>{l[c.sid]||(c.audioLevel=0,c.setIsSpeaking(!1))}),this.activeSpeakers=a,this.emitWhenConnected(B.ActiveSpeakersChanged,a)},this.handleSpeakersChanged=o=>{const a=new Map;this.activeSpeakers.forEach(c=>{const u=this.remoteParticipants.get(c.identity);u&&u.sid!==c.sid||a.set(c.sid,c)}),o.forEach(c=>{let u=this.getRemoteParticipantBySid(c.sid);c.sid===this.localParticipant.sid&&(u=this.localParticipant),u&&(u.audioLevel=c.level,u.setIsSpeaking(c.active),c.active?a.set(c.sid,u):a.delete(c.sid))});const l=Array.from(a.values());l.sort((c,u)=>u.audioLevel-c.audioLevel),this.activeSpeakers=l,this.emitWhenConnected(B.ActiveSpeakersChanged,l)},this.handleStreamStateUpdate=o=>{o.streamStates.forEach(a=>{const l=this.getRemoteParticipantBySid(a.participantSid);if(!l)return;const c=l.getTrackPublicationBySid(a.trackSid);if(!c||!c.track)return;const u=j.streamStateFromProto(a.state);u!==c.track.streamState&&(c.track.streamState=u,l.emit(K.TrackStreamStateChanged,c,c.track.streamState),this.emitWhenConnected(B.TrackStreamStateChanged,c,c.track.streamState,l))})},this.handleSubscriptionPermissionUpdate=o=>{const a=this.getRemoteParticipantBySid(o.participantSid);if(!a)return;const l=a.getTrackPublicationBySid(o.trackSid);l&&l.setAllowed(o.allowed)},this.handleSubscriptionError=o=>{const a=Array.from(this.remoteParticipants.values()).find(c=>c.trackPublications.has(o.trackSid));if(!a)return;const l=a.getTrackPublicationBySid(o.trackSid);l&&l.setSubscriptionError(o.err)},this.handleDataPacket=o=>{const a=this.remoteParticipants.get(o.participantIdentity);if(o.value.case==="user")this.handleUserPacket(a,o.value.value,o.kind);else if(o.value.case==="transcription")this.handleTranscription(a,o.value.value);else if(o.value.case==="sipDtmf")this.handleSipDtmf(a,o.value.value);else if(o.value.case==="chatMessage")this.handleChatMessage(a,o.value.value);else if(o.value.case==="metrics")this.handleMetrics(o.value.value,a);else if(o.value.case==="streamHeader")this.handleStreamHeader(o.value.value,o.participantIdentity);else if(o.value.case==="streamChunk")this.handleStreamChunk(o.value.value);else if(o.value.case==="streamTrailer")this.handleStreamTrailer(o.value.value);else if(o.value.case==="rpcRequest"){const l=o.value.value;this.handleIncomingRpcRequest(o.participantIdentity,l.id,l.method,l.payload,l.responseTimeoutMs,l.version)}},this.handleUserPacket=(o,a,l)=>{this.emit(B.DataReceived,a.payload,o,l,a.topic),o==null||o.emit(K.DataReceived,a.payload,l)},this.handleSipDtmf=(o,a)=>{this.emit(B.SipDTMFReceived,a,o),o==null||o.emit(K.SipDTMFReceived,a)},this.bufferedSegments=new Map,this.handleTranscription=(o,a)=>{const l=a.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(a.transcribedParticipantIdentity),c=l==null?void 0:l.trackPublications.get(a.trackId),u=E6(a,this.transcriptionReceivedTimes);c==null||c.emit(W.TranscriptionReceived,u),l==null||l.emit(K.TranscriptionReceived,u,c),this.emit(B.TranscriptionReceived,u,l,c)},this.handleChatMessage=(o,a)=>{const l=P6(a);this.emit(B.ChatMessage,l,o)},this.handleMetrics=(o,a)=>{this.emit(B.MetricsReceived,o,a)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(B.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=o=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:o})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(B.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(B.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(B.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>C(this,void 0,void 0,function*(){var o;((o=En())===null||o===void 0?void 0:o.os)!=="iOS"&&(yield this.selectDefaultDevices()),this.emit(B.MediaDevicesChanged)}),this.handleRoomUpdate=o=>{const a=this.roomInfo;this.roomInfo=o,a&&a.metadata!==o.metadata&&this.emitWhenConnected(B.RoomMetadataChanged,o.metadata),(a==null?void 0:a.activeRecording)!==o.activeRecording&&this.emitWhenConnected(B.RecordingStatusChanged,o.activeRecording)},this.handleConnectionQualityUpdate=o=>{o.updates.forEach(a=>{if(a.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(a.quality);return}const l=this.getRemoteParticipantBySid(a.participantSid);l&&l.setConnectionQuality(a.quality)})},this.onLocalParticipantMetadataChanged=o=>{this.emit(B.ParticipantMetadataChanged,o,this.localParticipant)},this.onLocalParticipantNameChanged=o=>{this.emit(B.ParticipantNameChanged,o,this.localParticipant)},this.onLocalAttributesChanged=o=>{this.emit(B.ParticipantAttributesChanged,o,this.localParticipant)},this.onLocalTrackMuted=o=>{this.emit(B.TrackMuted,o,this.localParticipant)},this.onLocalTrackUnmuted=o=>{this.emit(B.TrackUnmuted,o,this.localParticipant)},this.onTrackProcessorUpdate=o=>{var a;(a=o==null?void 0:o.onPublish)===null||a===void 0||a.call(o,this)},this.onLocalTrackPublished=o=>C(this,void 0,void 0,function*(){var a,l,c,u,d,f;(a=o.track)===null||a===void 0||a.on(W.TrackProcessorUpdate,this.onTrackProcessorUpdate),(l=o.track)===null||l===void 0||l.on(W.Restarted,this.onLocalTrackRestarted),(d=(u=(c=o.track)===null||c===void 0?void 0:c.getProcessor())===null||u===void 0?void 0:u.onPublish)===null||d===void 0||d.call(u,this),this.emit(B.LocalTrackPublished,o,this.localParticipant),Qi(o.track)&&(yield o.track.checkForSilence())&&this.emit(B.LocalAudioSilenceDetected,o);const h=yield(f=o.track)===null||f===void 0?void 0:f.getDeviceId(!1),v=ig(o.source);v&&h&&h!==this.localParticipant.activeDeviceMap.get(v)&&(this.localParticipant.activeDeviceMap.set(v,h),this.emit(B.ActiveDeviceChanged,v,h))}),this.onLocalTrackUnpublished=o=>{var a,l;(a=o.track)===null||a===void 0||a.off(W.TrackProcessorUpdate,this.onTrackProcessorUpdate),(l=o.track)===null||l===void 0||l.off(W.Restarted,this.onLocalTrackRestarted),this.emit(B.LocalTrackUnpublished,o,this.localParticipant)},this.onLocalTrackRestarted=o=>C(this,void 0,void 0,function*(){const a=yield o.getDeviceId(!1),l=ig(o.source);l&&a&&a!==this.localParticipant.activeDeviceMap.get(l)&&(this.log.debug("local track restarted, setting ".concat(l," ").concat(a," active"),this.logContext),this.localParticipant.activeDeviceMap.set(l,a),this.emit(B.ActiveDeviceChanged,l,a))}),this.onLocalConnectionQualityChanged=o=>{this.emit(B.ConnectionQualityChanged,o,this.localParticipant)},this.onMediaDevicesError=(o,a)=>{this.emit(B.MediaDevicesError,o,a)},this.onLocalParticipantPermissionsChanged=o=>{this.emit(B.ParticipantPermissionsChanged,o,this.localParticipant)},this.onLocalChatMessageSent=o=>{this.emit(B.ChatMessage,o,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},ez),e),this.log=br((i=this.options.loggerName)!==null&&i!==void 0?i:fi.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},C_),e==null?void 0:e.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},E_),e==null?void 0:e.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},Z6),e==null?void 0:e.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new Ht,this.localParticipant=new jz("","",this.engine,this.options,this.rpcHandlers),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",ts(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",ts(this.options.audioCaptureDefaults.deviceId)),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&this.switchActiveDevice("audiooutput",ts(this.options.audioOutput.deviceId)).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),this.options.e2ee&&this.setupE2EE(),cn()){const o=new AbortController;(s=navigator.mediaDevices)===null||s===void 0||s.addEventListener("devicechange",this.handleDeviceChange,{signal:o.signal}),ba.cleanupRegistry&&ba.cleanupRegistry.register(this,()=>{o.abort()})}}registerTextStreamHandler(e,n){if(this.textStreamHandlers.has(e))throw new TypeError('A text stream handler for topic "'.concat(e,'" has already been set.'));this.textStreamHandlers.set(e,n)}unregisterTextStreamHandler(e){this.textStreamHandlers.delete(e)}registerByteStreamHandler(e,n){if(this.byteStreamHandlers.has(e))throw new TypeError('A byte stream handler for topic "'.concat(e,'" has already been set.'));this.byteStreamHandlers.set(e,n)}unregisterByteStreamHandler(e){this.byteStreamHandlers.delete(e)}registerRpcMethod(e,n){if(this.rpcHandlers.has(e))throw Error("RPC handler already registered for method ".concat(e,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}handleIncomingRpcRequest(e,n,i,r,s,o){return C(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(e,n),o!==1){yield this.engine.publishRpcResponse(e,n,null,Ze.builtIn("UNSUPPORTED_VERSION"));return}const a=this.rpcHandlers.get(i);if(!a){yield this.engine.publishRpcResponse(e,n,null,Ze.builtIn("UNSUPPORTED_METHOD"));return}let l=null,c=null;try{const u=yield a({requestId:n,callerIdentity:e,payload:r,responseTimeout:s});Ay(u)>P_?(l=Ze.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(i))):c=u}catch(u){u instanceof Ze?l=u:(console.warn("Uncaught error returned by RPC handler for ".concat(i,". Returning APPLICATION_ERROR instead."),u),l=Ze.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(e,n,c,l)})}setE2EEEnabled(e){return C(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;this.options.e2ee&&("e2eeManager"in this.options.e2ee?this.e2eeManager=this.options.e2ee.e2eeManager:this.e2eeManager=new F6(this.options.e2ee),this.e2eeManager.on(Wr.ParticipantEncryptionStatusChanged,(n,i)=>{_6(i)&&(this.isE2EEEnabled=n),this.emit(B.ParticipantEncryptionStatusChanged,n,i)}),this.e2eeManager.on(Wr.EncryptionError,n=>this.emit(B.EncryptionError,n)),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){var e;return{room:this.name,roomID:(e=this.roomInfo)===null||e===void 0?void 0:e.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return C(this,void 0,void 0,function*(){return this.state===we.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((e,n)=>{const i=r=>{r.sid!==""&&(this.engine.off(G.RoomUpdate,i),e(r.sid))};this.engine.on(G.RoomUpdate,i),this.once(B.Disconnected,()=>{this.engine.off(G.RoomUpdate,i),n("Room disconnected before room server id was available")})})})}get name(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new Tz(this.options),this.engine.on(G.ParticipantUpdate,this.handleParticipantUpdates).on(G.RoomUpdate,this.handleRoomUpdate).on(G.SpeakersChanged,this.handleSpeakersChanged).on(G.StreamStateChanged,this.handleStreamStateUpdate).on(G.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(G.SubscriptionError,this.handleSubscriptionError).on(G.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(G.MediaTrackAdded,(e,n,i)=>{this.onTrackAdded(e,n,i)}).on(G.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(G.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(G.DataPacketReceived,this.handleDataPacket).on(G.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(we.SignalReconnecting)&&this.emit(B.SignalReconnecting)}).on(G.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(we.Connected)&&this.emit(B.Reconnected)}).on(G.SignalResumed,()=>{this.bufferedEvents=[],(this.state===we.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(G.Restarting,this.handleRestarting).on(G.SignalRestarted,this.handleSignalRestarted).on(G.Offline,()=>{this.setAndEmitConnectionState(we.Reconnecting)&&this.emit(B.Reconnecting)}).on(G.DCBufferStatusChanged,(e,n)=>{this.emit(B.DCBufferStatusChanged,e,n)}).on(G.LocalTrackSubscribed,e=>{const n=this.localParticipant.getTrackPublications().find(i=>{let{trackSid:r}=i;return r===e});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(K.LocalTrackSubscribed,n),this.emitWhenConnected(B.LocalTrackSubscribed,n,this.localParticipant)}).on(G.RoomMoved,e=>{this.log.debug("room moved",e),e.room&&this.handleRoomUpdate(e.room),this.remoteParticipants.forEach((n,i)=>{this.handleParticipantDisconnected(i,n)}),this.emit(B.Moved,e.room.name),e.participant?this.handleParticipantUpdates([e.participant,...e.otherParticipants]):this.handleParticipantUpdates(e.otherParticipants)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return gt.getInstance().getDevices(e,n)}prepareConnection(e,n){return C(this,void 0,void 0,function*(){if(this.state===we.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(Zm(new URL(e))&&n){this.regionUrlProvider=new ag(e,n);const i=yield this.regionUrlProvider.getNextBestRegionUrl();i&&this.state===we.Disconnected&&(this.regionUrl=i,yield fetch(eg(i),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(i),this.logContext))}else yield fetch(eg(e),{method:"HEAD"})}catch(i){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:i}))}}})}getParticipantByIdentity(e){return this.localParticipant.identity===e?this.localParticipant:this.remoteParticipants.get(e)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,n){return C(this,void 0,void 0,function*(){let i=()=>{},r;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":r=new xi({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":r=new xi({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":r=new xi({scenario:{case:"serverLeave",value:!0}});break;case"migration":r=new xi({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":i=()=>C(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),r=new xi({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":i=()=>C(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),r=new xi({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":r=new xi({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),i=()=>C(this,void 0,void 0,function*(){const s=this.engine.client.onLeave;s&&s(new Ef({reason:oi.CLIENT_INITIATED,action:qo.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");r=new xi({scenario:{case:"subscriberBandwidth",value:Ts(n)}});break;case"leave-full-reconnect":r=new xi({scenario:{case:"leaveRequestFullReconnect",value:!0}})}r&&(yield this.engine.client.sendSimulateScenario(r),yield i())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,n){return C(this,arguments,void 0,function(i,r){var s=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return function*(){var a,l,c,u,d,f,h;let v=!0,m=!1;const b=o?{exact:r}:r;if(i==="audioinput"){m=s.localParticipant.audioTrackPublications.size===0;const p=(a=s.getActiveDevice(i))!==null&&a!==void 0?a:s.options.audioCaptureDefaults.deviceId;s.options.audioCaptureDefaults.deviceId=b;const y=Array.from(s.localParticipant.audioTrackPublications.values()).filter(T=>T.source===j.Source.Microphone);try{v=(yield Promise.all(y.map(T=>{var k;return(k=T.audioTrack)===null||k===void 0?void 0:k.setDeviceId(b)}))).every(T=>T===!0)}catch(T){throw s.options.audioCaptureDefaults.deviceId=p,T}const S=y.some(T=>{var k,w;return(w=(k=T.track)===null||k===void 0?void 0:k.isMuted)!==null&&w!==void 0?w:!1});v&&S&&(m=!0)}else if(i==="videoinput"){m=s.localParticipant.videoTrackPublications.size===0;const p=(l=s.getActiveDevice(i))!==null&&l!==void 0?l:s.options.videoCaptureDefaults.deviceId;s.options.videoCaptureDefaults.deviceId=b;const y=Array.from(s.localParticipant.videoTrackPublications.values()).filter(T=>T.source===j.Source.Camera);try{v=(yield Promise.all(y.map(T=>{var k;return(k=T.videoTrack)===null||k===void 0?void 0:k.setDeviceId(b)}))).every(T=>T===!0)}catch(T){throw s.options.videoCaptureDefaults.deviceId=p,T}const S=y.some(T=>{var k,w;return(w=(k=T.track)===null||k===void 0?void 0:k.isMuted)!==null&&w!==void 0?w:!1});v&&S&&(m=!0)}else if(i==="audiooutput"){if(m=!0,!Jm()&&!s.options.webAudioMix||s.options.webAudioMix&&s.audioContext&&!("setSinkId"in s.audioContext))throw new Error("cannot switch audio output, the current browser does not support it");s.options.webAudioMix&&(r=(c=yield gt.getInstance().normalizeDeviceId("audiooutput",r))!==null&&c!==void 0?c:""),(u=(h=s.options).audioOutput)!==null&&u!==void 0||(h.audioOutput={});const p=(d=s.getActiveDevice(i))!==null&&d!==void 0?d:s.options.audioOutput.deviceId;s.options.audioOutput.deviceId=r;try{s.options.webAudioMix&&((f=s.audioContext)===null||f===void 0||f.setSinkId(r)),yield Promise.all(Array.from(s.remoteParticipants.values()).map(y=>y.setAudioOutput({deviceId:r})))}catch(y){throw s.options.audioOutput.deviceId=p,y}}return m&&(s.localParticipant.activeDeviceMap.set(i,r),s.emit(B.ActiveDeviceChanged,i,r)),v}()})}setupLocalParticipantEvents(){this.localParticipant.on(K.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(K.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(K.AttributesChanged,this.onLocalAttributesChanged).on(K.TrackMuted,this.onLocalTrackMuted).on(K.TrackUnmuted,this.onLocalTrackUnmuted).on(K.LocalTrackPublished,this.onLocalTrackPublished).on(K.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(K.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(K.MediaDevicesError,this.onMediaDevicesError).on(K.AudioStreamAcquired,this.startAudio).on(K.ChatMessage,this.onLocalChatMessageSent).on(K.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,n,i){if(this.state===we.Connecting||this.state===we.Reconnecting){const u=()=>{this.onTrackAdded(e,n,i),d()},d=()=>{this.off(B.Reconnected,u),this.off(B.Connected,u),this.off(B.Disconnected,d)};this.once(B.Reconnected,u),this.once(B.Connected,u),this.once(B.Disconnected,d);return}if(this.state===we.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if(e.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const r=p6(n.id),s=r[0];let o=r[1],a=e.id;if(o&&o.startsWith("TR")&&(a=o),s===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const l=Array.from(this.remoteParticipants.values()).find(u=>u.sid===s);if(!l){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(s),this.logContext);return}let c;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?c=this.options.adaptiveStream:c={}),l.addSubscribedMediaTrack(e,a,n,i,c)}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var i;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.state!==we.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(r=>{r.trackPublications.forEach(s=>{r.unpublishTrack(s.trackSid)})}),this.localParticipant.trackPublications.forEach(r=>{var s,o,a;r.track&&this.localParticipant.unpublishTrack(r.track,e),e?((s=r.track)===null||s===void 0||s.detach(),(o=r.track)===null||o===void 0||o.stop()):(a=r.track)===null||a===void 0||a.stopMonitor()}),this.localParticipant.off(K.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(K.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(K.AttributesChanged,this.onLocalAttributesChanged).off(K.TrackMuted,this.onLocalTrackMuted).off(K.TrackUnmuted,this.onLocalTrackUnmuted).off(K.LocalTrackPublished,this.onLocalTrackPublished).off(K.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(K.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(K.MediaDevicesError,this.onMediaDevicesError).off(K.AudioStreamAcquired,this.startAudio).off(K.ChatMessage,this.onLocalChatMessageSent).off(K.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),cn()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(i=navigator.mediaDevices)===null||i===void 0||i.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(we.Disconnected),this.emit(B.Disconnected,n)}}}handleParticipantDisconnected(e,n){var i;this.remoteParticipants.delete(e),n&&(n.trackPublications.forEach(r=>{n.unpublishTrack(r.trackSid,!0)}),this.emit(B.ParticipantDisconnected,n),n.setDisconnected(),(i=this.localParticipant)===null||i===void 0||i.handleParticipantDisconnected(n.identity))}handleStreamHeader(e,n){return C(this,void 0,void 0,function*(){var i;if(e.contentHeader.case==="byteHeader"){const r=this.byteStreamHandlers.get(e.topic);if(!r){this.log.debug("ignoring incoming byte stream due to no handler for topic",e.topic);return}let s;const o={id:e.streamId,name:(i=e.contentHeader.value.name)!==null&&i!==void 0?i:"unknown",mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:ju(e.timestamp),attributes:e.attributes},a=new ReadableStream({start:l=>{s=l,this.byteStreamControllers.set(e.streamId,{info:o,controller:s,startTime:Date.now()})}});r(new Ez(o,a,ju(e.totalLength)),{identity:n})}else if(e.contentHeader.case==="textHeader"){const r=this.textStreamHandlers.get(e.topic);if(!r){this.log.debug("ignoring incoming text stream due to no handler for topic",e.topic);return}let s;const o={id:e.streamId,mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Number(e.timestamp),attributes:e.attributes},a=new ReadableStream({start:l=>{s=l,this.textStreamControllers.set(e.streamId,{info:o,controller:s,startTime:Date.now()})}});r(new Pz(o,a,ju(e.totalLength)),{identity:n})}})}handleStreamChunk(e){const n=this.byteStreamControllers.get(e.streamId);n&&e.content.length>0&&n.controller.enqueue(e);const i=this.textStreamControllers.get(e.streamId);i&&e.content.length>0&&i.controller.enqueue(e)}handleStreamTrailer(e){const n=this.textStreamControllers.get(e.streamId);n&&(n.info.attributes=Object.assign(Object.assign({},n.info.attributes),e.attributes),n.controller.close(),this.textStreamControllers.delete(e.streamId));const i=this.byteStreamControllers.get(e.streamId);i&&(i.info.attributes=Object.assign(Object.assign({},i.info.attributes),e.attributes),i.controller.close(),this.byteStreamControllers.delete(e.streamId))}selectDefaultDevices(){return C(this,void 0,void 0,function*(){var e,n,i;const r=gt.getInstance().previousDevices,s=yield gt.getInstance().getDevices(void 0,!1),o=En();if((o==null?void 0:o.name)==="Chrome"&&o.os!=="iOS")for(let l of s){const c=r.find(u=>u.deviceId===l.deviceId);c&&c.label!==""&&c.kind===l.kind&&c.label!==l.label&&this.getActiveDevice(l.kind)==="default"&&this.emit(B.ActiveDeviceChanged,l.kind,l.deviceId)}const a=["audiooutput","audioinput","videoinput"];for(let l of a){const c=N6(l),u=this.localParticipant.getTrackPublication(c);if(u&&(!((e=u.track)===null||e===void 0)&&e.isUserProvided))continue;const d=s.filter(h=>h.kind===l),f=this.getActiveDevice(l);if(f===((n=r.filter(h=>h.kind===l)[0])===null||n===void 0?void 0:n.deviceId)&&d.length>0&&((i=d[0])===null||i===void 0?void 0:i.deviceId)!==f){yield this.switchActiveDevice(l,d[0].deviceId);continue}l==="audioinput"&&!Pd()||l==="videoinput"||d.length>0&&!d.find(h=>h.deviceId===this.getActiveDevice(l))&&(l!=="audiooutput"||!Pd())&&(yield this.switchActiveDevice(l,d[0].deviceId))}})}acquireAudioContext(){return C(this,void 0,void 0,function*(){var e,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=T_())!==null&&e!==void 0?e:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(r=>r.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),hn(200)])}catch(r){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:r}))}const i=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";i!==this.canPlaybackAudio&&(this.audioEnabled=i,this.emit(B.AudioPlaybackStatusChanged,i))})}createParticipant(e,n){var i;let r;return n?r=Nd.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):r=new Nd(this.engine.client,"",e,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&r.setAudioContext(this.audioContext),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&r.setAudioOutput(this.options.audioOutput).catch(s=>this.log.warn("Could not set audio output: ".concat(s.message),this.logContext)),r}getOrCreateParticipant(e,n){if(this.remoteParticipants.has(e)){const r=this.remoteParticipants.get(e);return n&&r.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),r}const i=this.createParticipant(e,n);return this.remoteParticipants.set(e,i),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(B.ParticipantConnected,i),i.on(K.TrackPublished,r=>{this.emitWhenConnected(B.TrackPublished,r,i)}).on(K.TrackSubscribed,(r,s)=>{r.kind===j.Kind.Audio?(r.on(W.AudioPlaybackStarted,this.handleAudioPlaybackStarted),r.on(W.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):r.kind===j.Kind.Video&&(r.on(W.VideoPlaybackFailed,this.handleVideoPlaybackFailed),r.on(W.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(B.TrackSubscribed,r,s,i)}).on(K.TrackUnpublished,r=>{this.emit(B.TrackUnpublished,r,i)}).on(K.TrackUnsubscribed,(r,s)=>{this.emit(B.TrackUnsubscribed,r,s,i)}).on(K.TrackMuted,r=>{this.emitWhenConnected(B.TrackMuted,r,i)}).on(K.TrackUnmuted,r=>{this.emitWhenConnected(B.TrackUnmuted,r,i)}).on(K.ParticipantMetadataChanged,r=>{this.emitWhenConnected(B.ParticipantMetadataChanged,r,i)}).on(K.ParticipantNameChanged,r=>{this.emitWhenConnected(B.ParticipantNameChanged,r,i)}).on(K.AttributesChanged,r=>{this.emitWhenConnected(B.ParticipantAttributesChanged,r,i)}).on(K.ConnectionQualityChanged,r=>{this.emitWhenConnected(B.ConnectionQualityChanged,r,i)}).on(K.ParticipantPermissionsChanged,r=>{this.emitWhenConnected(B.ParticipantPermissionsChanged,r,i)}).on(K.TrackSubscriptionStatusChanged,(r,s)=>{this.emitWhenConnected(B.TrackSubscriptionStatusChanged,r,s,i)}).on(K.TrackSubscriptionFailed,(r,s)=>{this.emit(B.TrackSubscriptionFailed,r,i,s)}).on(K.TrackSubscriptionPermissionChanged,(r,s)=>{this.emitWhenConnected(B.TrackSubscriptionPermissionChanged,r,s,i)}).on(K.Active,()=>{this.emitWhenConnected(B.ParticipantActive,i),i.kind===ic.AGENT&&this.localParticipant.setActiveAgent(i)}),n&&i.updateInfo(n),i}sendSyncState(){const e=Array.from(this.remoteParticipants.values()).reduce((i,r)=>(i.push(...r.getTrackPublications()),i),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(e,n)}updateSubscriptions(){for(const e of this.remoteParticipants.values())for(const n of e.videoTrackPublications.values())n.isSubscribed&&R6(n)&&n.emitTrackUpdate()}getRemoteParticipantBySid(e){const n=this.sidToIdentity.get(e);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=St.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,oi.STATE_MISMATCH))):e=0},Uz)}clearConnectionReconcile(){this.connectionReconcileInterval&&St.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(B.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[n,i]=e;this.emit(n,...i)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(this.state===we.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([e,i]);else if(this.state===we.Connected)return this.emit(e,...i);return!1}simulateParticipants(e){return C(this,void 0,void 0,function*(){var n,i;const r=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),s=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new wf({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:Ve.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new Hs({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(B.SignalConnected),this.emit(B.Connected),this.setAndEmitConnectionState(we.Connected),r.video){const o=new cg(j.Kind.Video,new Oo({source:st.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:ri.AUDIO,name:"video-dummy"}),new Ad(r.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:YS(160*((n=s.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(o),this.localParticipant.emit(K.LocalTrackPublished,o)}if(r.audio){const o=new cg(j.Kind.Audio,new Oo({source:st.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:ri.AUDIO}),new _d(r.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:Hh(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(o),this.localParticipant.emit(K.LocalTrackPublished,o)}for(let o=0;o<s.count-1;o+=1){let a=new Hs({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(o),state:Ho.ACTIVE,tracks:[],joinedAt:Ve.parse(Date.now())});const l=this.getOrCreateParticipant(a.identity,a);if(s.video){const c=YS(160*((i=s.aspectRatios[o%s.aspectRatios.length])!==null&&i!==void 0?i:1),160,!1,!0),u=new Oo({source:st.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:ri.AUDIO});l.addSubscribedMediaTrack(c,u.sid,new MediaStream([c]),new RTCRtpReceiver),a.tracks=[...a.tracks,u]}if(s.audio){const c=Hh(),u=new Oo({source:st.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:ri.AUDIO});l.addSubscribedMediaTrack(c,u.sid,new MediaStream([c]),new RTCRtpReceiver),a.tracks=[...a.tracks,u]}l.updateInfo(a)}})}emit(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(e!==B.ActiveSpeakersChanged&&e!==B.TranscriptionReceived){const s=D_(i).filter(o=>o!==void 0);this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:s}))}return super.emit(e,...i)}}ba.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(t=>{t()});function D_(t){return t.map(e=>{if(e)return Array.isArray(e)?D_(e):typeof e=="object"?"logContext"in e?e.logContext:void 0:e})}var ni;(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.SKIPPED=2]="SKIPPED",t[t.SUCCESS=3]="SUCCESS",t[t.FAILED=4]="FAILED"})(ni||(ni={}));class ps extends Vi.EventEmitter{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=ni.IDLE,this.logs=[],this.options={},this.url=e,this.token=n,this.name=this.constructor.name,this.room=new ba(i.roomOptions),this.connectOptions=i.connectOptions,this.options=i}run(e){return C(this,void 0,void 0,function*(){if(this.status!==ni.IDLE)throw Error("check is running already");this.setStatus(ni.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==ni.SKIPPED&&this.setStatus(this.isSuccess()?ni.SUCCESS:ni.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(e){return C(this,void 0,void 0,function*(){return this.room.state===we.Connected?this.room:(e||(e=this.url),yield this.room.connect(e,this.token,this.connectOptions),this.room)})}disconnect(){return C(this,void 0,void 0,function*(){this.room&&this.room.state!==we.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(ni.SKIPPED)}switchProtocol(e){return C(this,void 0,void 0,function*(){let n=!1,i=!1;if(this.room.on(B.Reconnecting,()=>{n=!0}),this.room.once(B.Reconnected,()=>{i=!0}),this.room.simulateScenario("force-".concat(e)),yield new Promise(s=>setTimeout(s,1e3)),!n)return;const r=Date.now()+1e4;for(;Date.now()<r;){if(i)return;yield hn(100)}throw new Error("Could not reconnect using ".concat(e," protocol after 10 seconds"))})}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class Bz extends ps{get description(){return"Cloud regions"}perform(){return C(this,void 0,void 0,function*(){const e=new ag(this.url,this.token);if(!e.isCloud()){this.skip();return}const n=[],i=new Set;for(let s=0;s<3;s++){const o=yield e.getNextBestRegionUrl();if(!o)break;if(i.has(o))continue;i.add(o);const a=yield this.checkCloudRegion(o);this.appendMessage("".concat(a.region," RTT: ").concat(a.rtt,"ms, duration: ").concat(a.duration,"ms")),n.push(a)}n.sort((s,o)=>(s.duration-o.duration)*.5+(s.rtt-o.rtt)*.5);const r=n[0];this.bestStats=r,this.appendMessage("best Cloud region: ".concat(r.region))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkCloudRegion(e){return C(this,void 0,void 0,function*(){var n,i;yield this.connect(e),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const r=(n=this.room.serverInfo)===null||n===void 0?void 0:n.region;if(!r)throw new Error("Region not found");const s=yield this.room.localParticipant.streamText({topic:"test"}),o=1e3,l=1e6/o,c="A".repeat(o),u=Date.now();for(let v=0;v<l;v++)yield s.write(c);yield s.close();const d=Date.now(),f=yield(i=this.room.engine.pcManager)===null||i===void 0?void 0:i.publisher.getStats(),h={region:r,rtt:1e4,duration:d-u};return f==null||f.forEach(v=>{v.type==="candidate-pair"&&v.nominated&&(h.rtt=v.currentRoundTripTime*1e3)}),yield this.disconnect(),h})}}const ep=1e4;class Vz extends ps{get description(){return"Connection via UDP vs TCP"}perform(){return C(this,void 0,void 0,function*(){const e=yield this.checkConnectionProtocol("udp"),n=yield this.checkConnectionProtocol("tcp");this.bestStats=e,e.qualityLimitationDurations.bandwidth-n.qualityLimitationDurations.bandwidth>.5||(e.packetsLost-n.packetsLost)/e.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=n):this.appendMessage("best connection quality via udp");const i=this.bestStats;this.appendMessage("upstream bitrate: ".concat((i.bitrateTotal/i.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((i.rttTotal/i.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((i.jitterTotal/i.count*1e3).toFixed(2)," ms")),i.packetsLost>0&&this.appendWarning("packets lost: ".concat((i.packetsLost/i.packetsSent*100).toFixed(2),"%")),i.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((i.qualityLimitationDurations.bandwidth/(ep/1e3)*100).toFixed(2),"%")),i.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((i.qualityLimitationDurations.cpu/(ep/1e3)*100).toFixed(2),"%"))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkConnectionProtocol(e){return C(this,void 0,void 0,function*(){yield this.connect(),e==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const n=document.createElement("canvas");n.width=1280,n.height=720;const i=n.getContext("2d");if(!i)throw new Error("Could not get canvas context");let r=0;const s=()=>{r=(r+1)%360,i.fillStyle="hsl(".concat(r,", 100%, 50%)"),i.fillRect(0,0,n.width,n.height),requestAnimationFrame(s)};s();const a=n.captureStream(30).getVideoTracks()[0],c=(yield this.room.localParticipant.publishTrack(a,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,u={protocol:e,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},d=setInterval(()=>C(this,void 0,void 0,function*(){const f=yield c.getRTCStatsReport();f==null||f.forEach(h=>{h.type==="outbound-rtp"?(u.packetsSent=h.packetsSent,u.qualityLimitationDurations=h.qualityLimitationDurations,u.bitrateTotal+=h.targetBitrate,u.count++):h.type==="remote-inbound-rtp"&&(u.packetsLost=h.packetsLost,u.rttTotal+=h.roundTripTime,u.jitterTotal+=h.jitter)})}),1e3);return yield new Promise(f=>setTimeout(f,ep)),clearInterval(d),a.stop(),n.remove(),yield this.disconnect(),u})}}class zz extends ps{get description(){return"Can publish audio"}perform(){return C(this,void 0,void 0,function*(){var e;const n=yield this.connect(),i=yield Mz();if(yield S_(i,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),n.localParticipant.publishTrack(i),yield new Promise(a=>setTimeout(a,3e3));const s=yield(e=i.sender)===null||e===void 0?void 0:e.getStats();if(!s)throw new Error("Could not get RTCStats");let o=0;if(s.forEach(a=>{a.type==="outbound-rtp"&&(a.kind==="audio"||!a.kind&&a.mediaType==="audio")&&(o=a.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," audio packets"))})}}class $z extends ps{get description(){return"Can publish video"}perform(){return C(this,void 0,void 0,function*(){var e;const n=yield this.connect(),i=yield Oz();yield this.checkForVideo(i.mediaStreamTrack),n.localParticipant.publishTrack(i),yield new Promise(o=>setTimeout(o,5e3));const r=yield(e=i.sender)===null||e===void 0?void 0:e.getStats();if(!r)throw new Error("Could not get RTCStats");let s=0;if(r.forEach(o=>{o.type==="outbound-rtp"&&(o.kind==="video"||!o.kind&&o.mediaType==="video")&&(s+=o.packetsSent)}),s===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(s," video packets"))})}checkForVideo(e){return C(this,void 0,void 0,function*(){const n=new MediaStream;n.addTrack(e.clone());const i=document.createElement("video");i.srcObject=n,i.muted=!0,yield new Promise(r=>{i.onplay=()=>{setTimeout(()=>{var s,o,a,l;const c=document.createElement("canvas"),u=e.getSettings(),d=(o=(s=u.width)!==null&&s!==void 0?s:i.videoWidth)!==null&&o!==void 0?o:1280,f=(l=(a=u.height)!==null&&a!==void 0?a:i.videoHeight)!==null&&l!==void 0?l:720;c.width=d,c.height=f;const h=c.getContext("2d");h.drawImage(i,0,0);const m=h.getImageData(0,0,c.width,c.height).data;let b=!0;for(let p=0;p<m.length;p+=4)if(m[p]!==0||m[p+1]!==0||m[p+2]!==0){b=!1;break}b?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),r()},1e3)},i.play()}),n.getTracks().forEach(r=>r.stop()),i.remove()})}}class Wz extends ps{get description(){return"Resuming connection after interruption"}perform(){return C(this,void 0,void 0,function*(){var e;const n=yield this.connect();let i=!1,r=!1,s;const o=new Promise(c=>{setTimeout(c,5e3),s=c}),a=()=>{i=!0};n.on(B.SignalReconnecting,a).on(B.Reconnecting,a).on(B.Reconnected,()=>{r=!0,s(!0)}),(e=n.engine.client.ws)===null||e===void 0||e.close();const l=n.engine.client.onClose;if(l&&l(""),yield o,i){if(!r||n.state!==we.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class Hz extends ps{get description(){return"Can connect via TURN"}perform(){return C(this,void 0,void 0,function*(){var e,n;const i=new Ey,r=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let s=!1,o=!1,a=!1;for(let l of r.iceServers)for(let c of l.urls)c.startsWith("turn:")?(o=!0,a=!0):c.startsWith("turns:")&&(o=!0,a=!0,s=!0),c.startsWith("stun:")&&(a=!0);a?o&&!s&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield i.close(),!((n=(e=this.connectOptions)===null||e===void 0?void 0:e.rtcConfig)===null||n===void 0)&&n.iceServers||o?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(l=>setTimeout(l,0)))})}}class qz extends ps{get description(){return"Establishing WebRTC connection"}perform(){return C(this,void 0,void 0,function*(){let e=!1,n=!1;this.room.on(B.SignalConnected,()=>{const i=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(r,s)=>{if(r.candidate){const o=new RTCIceCandidate(r);let a="".concat(o.protocol," ").concat(o.address,":").concat(o.port," ").concat(o.type);o.address&&(Gz(o.address)?a+=" (private)":o.protocol==="tcp"&&o.tcpType==="passive"?(e=!0,a+=" (passive)"):o.protocol==="udp"&&(n=!0)),this.appendMessage(a)}i&&i(r,s)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=r=>{r instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(r.errorCode," ").concat(r.errorText," ").concat(r.url))})});try{yield this.connect(),be.info("now the room is connected")}catch(i){throw this.appendWarning("ports need to be open on firewall in order to connect."),i}e||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function Gz(t){const e=t.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const n=parseInt(e[1],10);if(n>=16&&n<=31)return!0}}return!1}class Kz extends ps{get description(){return"Connecting to signal connection via WebSocket"}perform(){return C(this,void 0,void 0,function*(){var e,n,i;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let r=new Ey;const s=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(s.serverVersion,".")),((e=s.serverInfo)===null||e===void 0?void 0:e.edition)===TR.Cloud&&(!((n=s.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((i=s.serverInfo)===null||i===void 0?void 0:i.region)),yield r.close()})}}class i9 extends Vi.EventEmitter{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=e,this.token=n,this.options=i}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:ni.IDLE,name:"",description:""}),e}updateCheck(e,n){this.checkResults.set(e,n),this.emit("checkUpdate",e,n)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==ni.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return C(this,void 0,void 0,function*(){const n=this.getNextCheckId(),i=new e(this.url,this.token,this.options),r=o=>{this.updateCheck(n,o)};i.on("update",r);const s=yield i.run();return i.off("update",r),s})}checkWebsocket(){return C(this,void 0,void 0,function*(){return this.createAndRunCheck(Kz)})}checkWebRTC(){return C(this,void 0,void 0,function*(){return this.createAndRunCheck(qz)})}checkTURN(){return C(this,void 0,void 0,function*(){return this.createAndRunCheck(Hz)})}checkReconnect(){return C(this,void 0,void 0,function*(){return this.createAndRunCheck(Wz)})}checkPublishAudio(){return C(this,void 0,void 0,function*(){return this.createAndRunCheck(zz)})}checkPublishVideo(){return C(this,void 0,void 0,function*(){return this.createAndRunCheck($z)})}checkConnectionProtocol(){return C(this,void 0,void 0,function*(){const e=yield this.createAndRunCheck(Vz);if(e.data&&"protocol"in e.data){const n=e.data;this.options.protocol=n.protocol}return e})}checkCloudRegion(){return C(this,void 0,void 0,function*(){return this.createAndRunCheck(Bz)})}}function sc(){return sc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},sc.apply(null,arguments)}const mT=new Uint8Array(0);let oc=class{static getFullOptions(e){return sc({clientTools:{},onConnect:()=>{},onDebug:()=>{},onDisconnect:()=>{},onError:()=>{},onMessage:()=>{},onAudio:()=>{},onModeChange:()=>{},onStatusChange:()=>{},onCanSendFeedbackChange:()=>{}},e)}constructor(e,n){var i=this;this.options=void 0,this.connection=void 0,this.lastInterruptTimestamp=0,this.mode="listening",this.status="connecting",this.volume=1,this.currentEventId=1,this.lastFeedbackEventId=1,this.canSendFeedback=!1,this.endSessionWithDetails=async function(r){i.status!=="connected"&&i.status!=="connecting"||(i.updateStatus("disconnecting"),await i.handleEndSession(),i.updateStatus("disconnected"),i.options.onDisconnect(r))},this.onMessage=async function(r){switch(r.type){case"interruption":return void i.handleInterruption(r);case"agent_response":return void i.handleAgentResponse(r);case"user_transcript":return void i.handleUserTranscript(r);case"internal_tentative_agent_response":return void i.handleTentativeAgentResponse(r);case"client_tool_call":return void await i.handleClientToolCall(r);case"audio":return void i.handleAudio(r);case"ping":return void i.connection.sendMessage({type:"pong",event_id:r.ping_event.event_id});default:return void i.options.onDebug(r)}},this.setVolume=({volume:r})=>{this.volume=r},this.options=e,this.connection=n,this.options.onConnect({conversationId:n.conversationId}),this.connection.onMessage(this.onMessage),this.connection.onDisconnect(this.endSessionWithDetails),this.connection.onModeChange(r=>this.updateMode(r)),this.updateStatus("connected")}endSession(){return this.endSessionWithDetails({reason:"user"})}async handleEndSession(){this.connection.close()}updateMode(e){e!==this.mode&&(this.mode=e,this.options.onModeChange({mode:e}))}updateStatus(e){e!==this.status&&(this.status=e,this.options.onStatusChange({status:e}))}updateCanSendFeedback(){const e=this.currentEventId!==this.lastFeedbackEventId;this.canSendFeedback!==e&&(this.canSendFeedback=e,this.options.onCanSendFeedbackChange({canSendFeedback:e}))}handleInterruption(e){e.interruption_event&&(this.lastInterruptTimestamp=e.interruption_event.event_id)}handleAgentResponse(e){this.options.onMessage({source:"ai",message:e.agent_response_event.agent_response})}handleUserTranscript(e){this.options.onMessage({source:"user",message:e.user_transcription_event.user_transcript})}handleTentativeAgentResponse(e){this.options.onDebug({type:"tentative_agent_response",response:e.tentative_agent_response_internal_event.tentative_agent_response})}async handleClientToolCall(e){if(Object.prototype.hasOwnProperty.call(this.options.clientTools,e.client_tool_call.tool_name))try{var n;const i=(n=await this.options.clientTools[e.client_tool_call.tool_name](e.client_tool_call.parameters))!=null?n:"Client tool execution successful.",r=typeof i=="object"?JSON.stringify(i):String(i);this.connection.sendMessage({type:"client_tool_result",tool_call_id:e.client_tool_call.tool_call_id,result:r,is_error:!1})}catch(i){this.onError(`Client tool execution failed with following error: ${i==null?void 0:i.message}`,{clientToolName:e.client_tool_call.tool_name}),this.connection.sendMessage({type:"client_tool_result",tool_call_id:e.client_tool_call.tool_call_id,result:`Client tool execution failed: ${i==null?void 0:i.message}`,is_error:!0})}else{if(this.options.onUnhandledClientToolCall)return void this.options.onUnhandledClientToolCall(e.client_tool_call);this.onError(`Client tool with name ${e.client_tool_call.tool_name} is not defined on client`,{clientToolName:e.client_tool_call.tool_name}),this.connection.sendMessage({type:"client_tool_result",tool_call_id:e.client_tool_call.tool_call_id,result:`Client tool with name ${e.client_tool_call.tool_name} is not defined on client`,is_error:!0})}}handleAudio(e){}onError(e,n){console.error(e,n),this.options.onError(e,n)}getId(){return this.connection.conversationId}isOpen(){return this.status==="connected"}setMicMuted(e){this.connection.setMicMuted(e)}getInputByteFrequencyData(){return mT}getOutputByteFrequencyData(){return mT}getInputVolume(){return 0}getOutputVolume(){return 0}sendFeedback(e){this.canSendFeedback?(this.connection.sendMessage({type:"feedback",score:e?"like":"dislike",event_id:this.currentEventId}),this.lastFeedbackEventId=this.currentEventId,this.updateCanSendFeedback()):console.warn(this.lastFeedbackEventId===0?"Cannot send feedback: the conversation has not started yet.":"Cannot send feedback: feedback has already been sent for the current response.")}sendContextualUpdate(e){this.connection.sendMessage({type:"contextual_update",text:e})}sendUserMessage(e){this.connection.sendMessage({type:"user_message",text:e})}sendUserActivity(){this.connection.sendMessage({type:"user_activity"})}sendMCPToolApprovalResult(e,n){this.connection.sendMessage({type:"mcp_tool_approval_result",tool_call_id:e,is_approved:n})}};class L_{constructor(e={}){this.queue=[],this.disconnectionDetails=null,this.onDisconnectCallback=null,this.onMessageCallback=null,this.onModeChangeCallback=null,this.onDebug=void 0,this.onDebug=e.onDebug}debug(e){this.onDebug&&this.onDebug(e)}onMessage(e){this.onMessageCallback=e;const n=this.queue;this.queue=[],n.length>0&&queueMicrotask(()=>{n.forEach(e)})}onDisconnect(e){this.onDisconnectCallback=e;const n=this.disconnectionDetails;n&&queueMicrotask(()=>{e(n)})}onModeChange(e){this.onModeChangeCallback=e}updateMode(e){var n;(n=this.onModeChangeCallback)==null||n.call(this,e)}disconnect(e){var n;this.disconnectionDetails||(this.disconnectionDetails=e,(n=this.onDisconnectCallback)==null||n.call(this,e))}handleMessage(e){this.onMessageCallback?this.onMessageCallback(e):this.queue.push(e)}}function Id(t){const[e,n]=t.split("_");if(!["pcm","ulaw"].includes(e))throw new Error(`Invalid format: ${t}`);const i=Number.parseInt(n);if(Number.isNaN(i))throw new Error(`Invalid sample rate: ${n}`);return{format:e,sampleRate:i}}const j_="0.4.4";function ug(t){return!!t.type}const F_="conversation_initiation_client_data";function U_(t){var e;const n={type:F_};var i,r,s,o,a;return t.overrides&&(n.conversation_config_override={agent:{prompt:(i=t.overrides.agent)==null?void 0:i.prompt,first_message:(r=t.overrides.agent)==null?void 0:r.firstMessage,language:(s=t.overrides.agent)==null?void 0:s.language},tts:{voice_id:(o=t.overrides.tts)==null?void 0:o.voiceId},conversation:{text_only:(a=t.overrides.conversation)==null?void 0:a.textOnly}}),t.customLlmExtraBody&&(n.custom_llm_extra_body=t.customLlmExtraBody),t.dynamicVariables&&(n.dynamic_variables=t.dynamicVariables),t.userId&&(n.user_id=t.userId),(e=t.overrides)!=null&&e.client&&(n.source_info={source:t.overrides.client.source,version:t.overrides.client.version}),n}class Oy extends L_{constructor(e,n,i,r){super(),this.socket=void 0,this.conversationId=void 0,this.inputFormat=void 0,this.outputFormat=void 0,this.socket=e,this.conversationId=n,this.inputFormat=i,this.outputFormat=r,this.socket.addEventListener("error",s=>{setTimeout(()=>this.disconnect({reason:"error",message:"The connection was closed due to a socket error.",context:s}),0)}),this.socket.addEventListener("close",s=>{this.disconnect(s.code===1e3?{reason:"agent",context:s}:{reason:"error",message:s.reason||"The connection was closed by the server.",context:s})}),this.socket.addEventListener("message",s=>{try{const o=JSON.parse(s.data);if(!ug(o))return;this.handleMessage(o)}catch{}})}static async create(e){let n=null;try{var i,r,s;const a=(i=e.origin)!=null?i:"wss://api.elevenlabs.io";let l;const c=((r=e.overrides)==null||(r=r.client)==null?void 0:r.version)||j_,u=((s=e.overrides)==null||(s=s.client)==null?void 0:s.source)||"js_sdk";if(e.signedUrl){const y=e.signedUrl.includes("?")?"&":"?";l=`${e.signedUrl}${y}source=${u}&version=${c}`}else l=`${a}/v1/convai/conversation?agent_id=${e.agentId}&source=${u}&version=${c}`;const d=["convai"];e.authorization&&d.push(`bearer.${e.authorization}`),n=new WebSocket(l,d);const f=await new Promise((y,S)=>{n.addEventListener("open",()=>{var T;const k=U_(e);(T=n)==null||T.send(JSON.stringify(k))},{once:!0}),n.addEventListener("error",T=>{setTimeout(()=>S(T),0)}),n.addEventListener("close",S),n.addEventListener("message",T=>{const k=JSON.parse(T.data);ug(k)&&(k.type==="conversation_initiation_metadata"?y(k.conversation_initiation_metadata_event):console.warn("First received message is not conversation metadata."))},{once:!0})}),{conversation_id:h,agent_output_audio_format:v,user_input_audio_format:m}=f,b=Id(m??"pcm_16000"),p=Id(v);return new Oy(n,h,b,p)}catch(a){var o;throw(o=n)==null||o.close(),a}}close(){this.socket.close()}sendMessage(e){this.socket.send(JSON.stringify(e))}async setMicMuted(e){console.warn(`WebSocket connection setMicMuted called with ${e}, but this is handled by VoiceConversation`)}}class Af extends L_{constructor(e,n,i,r,s={}){super(s),this.conversationId=void 0,this.inputFormat=void 0,this.outputFormat=void 0,this.room=void 0,this.isConnected=!1,this.room=e,this.conversationId=n,this.inputFormat=i,this.outputFormat=r,this.setupRoomEventListeners()}static async create(e){let n;if("conversationToken"in e&&e.conversationToken)n=e.conversationToken;else{if(!("agentId"in e)||!e.agentId)throw new Error("Either conversationToken or agentId is required for WebRTC connection");try{var i,r,s;const l=((i=e.overrides)==null||(i=i.client)==null?void 0:i.version)||j_,c=((r=e.overrides)==null||(r=r.client)==null?void 0:r.source)||"js_sdk",u=`${o=(s=e.origin)!=null?s:"https://api.elevenlabs.io",o.replace(/^wss:\/\//,"https://")}/v1/convai/conversation/token?agent_id=${e.agentId}&source=${c}&version=${l}`,d=await fetch(u);if(!d.ok)throw new Error(`ElevenLabs API returned ${d.status} ${d.statusText}`);if(n=(await d.json()).token,!n)throw new Error("No conversation token received from API")}catch(l){let c=l instanceof Error?l.message:String(l);throw l instanceof Error&&l.message.includes("401")&&(c="Your agent has authentication enabled, but no signed URL or conversation token was provided."),new Error(`Failed to fetch conversation token for agent ${e.agentId}: ${c}`)}}var o;const a=new ba;try{const l=`webrtc-${Date.now()}`,c=Id("pcm_48000"),u=Id("pcm_48000"),d=new Af(a,l,c,u,e),f=e.livekitUrl||"wss://livekit.rtc.elevenlabs.io";await a.connect(f,n),await new Promise(v=>{if(d.isConnected)v();else{const m=()=>{a.off(B.Connected,m),v()};a.on(B.Connected,m)}}),a.name&&(d.conversationId=a.name),await a.localParticipant.setMicrophoneEnabled(!0);const h=U_(e);return d.debug({type:F_,message:h}),await d.sendMessage(h),d}catch(l){throw await a.disconnect(),l}}setupRoomEventListeners(){var e=this;this.room.on(B.Connected,async function(){e.isConnected=!0,console.info("WebRTC room connected")}),this.room.on(B.Disconnected,n=>{this.isConnected=!1,this.disconnect({reason:"agent",context:new CloseEvent("close",{reason:n==null?void 0:n.toString()})})}),this.room.on(B.ConnectionStateChanged,n=>{n===we.Disconnected&&(this.isConnected=!1,this.disconnect({reason:"error",message:`LiveKit connection state changed to ${n}`,context:new Event("connection_state_changed")}))}),this.room.on(B.DataReceived,(n,i)=>{try{const r=JSON.parse(new TextDecoder().decode(n));if(r.type==="audio")return;ug(r)?this.handleMessage(r):console.warn("Invalid socket event received:",r)}catch(r){console.warn("Failed to parse incoming data message:",r),console.warn("Raw payload:",new TextDecoder().decode(n))}}),this.room.on(B.TrackSubscribed,async function(n,i,r){if(n.kind===j.Kind.Audio&&r.identity.includes("agent")){const s=n.attach();s.autoplay=!0,s.controls=!1,s.style.display="none",document.body.appendChild(s)}}),this.room.on(B.ActiveSpeakersChanged,async function(n){n.length>0?n[0].identity.includes("agent")&&e.updateMode("speaking"):e.updateMode("listening")})}close(){this.isConnected&&this.room.disconnect()}async sendMessage(e){if(this.isConnected&&this.room.localParticipant){if(!("user_audio_chunk"in e))try{const n=new TextEncoder().encode(JSON.stringify(e));await this.room.localParticipant.publishData(n,{reliable:!0})}catch(n){this.debug({type:"send_message_error",message:{message:e,error:n}}),console.error("Failed to send message via WebRTC:",n)}}else console.warn("Cannot send message: room not connected or no local participant")}getRoom(){return this.room}async setMicMuted(e){if(!this.isConnected||!this.room.localParticipant)return void console.warn("Cannot set microphone muted: room not connected or no local participant");const n=this.room.localParticipant.getTrackPublication(j.Source.Microphone);if(n!=null&&n.track)try{e?await n.track.mute():await n.track.unmute()}catch{await this.room.localParticipant.setMicrophoneEnabled(!e)}else await this.room.localParticipant.setMicrophoneEnabled(!e)}}async function B_(t){const e=function(n){return n.connectionType?n.connectionType:"conversationToken"in n&&n.conversationToken?"webrtc":"websocket"}(t);switch(e){case"websocket":return Oy.create(t);case"webrtc":return Af.create(t);default:throw new Error(`Unknown connection type: ${e}`)}}function V_(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}async function z_(t={default:0,android:3e3}){let e=t.default;var n;if(/android/i.test(navigator.userAgent))e=(n=t.android)!=null?n:e;else if(V_()){var i;e=(i=t.ios)!=null?i:e}e>0&&await new Promise(r=>setTimeout(r,e))}class My extends oc{static async startSession(e){const n=oc.getFullOptions(e);n.onStatusChange({status:"connecting"}),n.onCanSendFeedbackChange({canSendFeedback:!1});let i=null;try{return await z_(n.connectionDelay),i=await B_(e),new My(n,i)}catch(s){var r;throw n.onStatusChange({status:"disconnected"}),(r=i)==null||r.close(),s}}}function Yz(t){const e=new Uint8Array(t);return window.btoa(String.fromCharCode(...e))}function Qz(t){const e=window.atob(t),n=e.length,i=new Uint8Array(n);for(let r=0;r<n;r++)i[r]=e.charCodeAt(r);return i.buffer}const tp=new Map;function $_(t,e){return async n=>{const i=tp.get(t);if(i)return n.addModule(i);const r=new Blob([e],{type:"application/javascript"}),s=URL.createObjectURL(r);try{return await n.addModule(s),void tp.set(t,s)}catch{URL.revokeObjectURL(s)}try{const o=`data:application/javascript;base64,${btoa(e)}`;await n.addModule(o),tp.set(t,o)}catch{throw new Error(`Failed to load the ${t} worklet module. Make sure the browser supports AudioWorklets.`)}}}const Xz=$_("raw-audio-processor",`
const BIAS = 0x84;
const CLIP = 32635;
const encodeTable = [
  0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,
  4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
  5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,
  5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7
];

function encodeSample(sample) {
  let sign;
  let exponent;
  let mantissa;
  let muLawSample;
  sign = (sample >> 8) & 0x80;
  if (sign !== 0) sample = -sample;
  sample = sample + BIAS;
  if (sample > CLIP) sample = CLIP;
  exponent = encodeTable[(sample>>7) & 0xFF];
  mantissa = (sample >> (exponent+3)) & 0x0F;
  muLawSample = ~(sign | (exponent << 4) | mantissa);
  
  return muLawSample;
}

class RawAudioProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
              
    this.port.onmessage = ({ data }) => {
      switch (data.type) {
        case "setFormat":
          this.isMuted = false;
          this.buffer = []; // Initialize an empty buffer
          this.bufferSize = data.sampleRate / 4;
          this.format = data.format;

          if (globalThis.LibSampleRate && sampleRate !== data.sampleRate) {
            globalThis.LibSampleRate.create(1, sampleRate, data.sampleRate).then(resampler => {
              this.resampler = resampler;
            });
          }
          break;
        case "setMuted":
          this.isMuted = data.isMuted;
          break;
      }
    };
  }
  process(inputs) {
    if (!this.buffer) {
      return true;
    }
    
    const input = inputs[0]; // Get the first input node
    if (input.length > 0) {
      let channelData = input[0]; // Get the first channel's data

      // Resample the audio if necessary
      if (this.resampler) {
        channelData = this.resampler.full(channelData);
      }

      // Add channel data to the buffer
      this.buffer.push(...channelData);
      // Get max volume 
      let sum = 0.0;
      for (let i = 0; i < channelData.length; i++) {
        sum += channelData[i] * channelData[i];
      }
      const maxVolume = Math.sqrt(sum / channelData.length);
      // Check if buffer size has reached or exceeded the threshold
      if (this.buffer.length >= this.bufferSize) {
        const float32Array = this.isMuted 
          ? new Float32Array(this.buffer.length)
          : new Float32Array(this.buffer);

        let encodedArray = this.format === "ulaw"
          ? new Uint8Array(float32Array.length)
          : new Int16Array(float32Array.length);

        // Iterate through the Float32Array and convert each sample to PCM16
        for (let i = 0; i < float32Array.length; i++) {
          // Clamp the value to the range [-1, 1]
          let sample = Math.max(-1, Math.min(1, float32Array[i]));

          // Scale the sample to the range [-32768, 32767]
          let value = sample < 0 ? sample * 32768 : sample * 32767;
          if (this.format === "ulaw") {
            value = encodeSample(Math.round(value));
          }

          encodedArray[i] = value;
        }

        // Send the buffered data to the main script
        this.port.postMessage([encodedArray, maxVolume]);

        // Clear the buffer after sending
        this.buffer = [];
      }
    }
    return true; // Continue processing
  }
}
registerProcessor("raw-audio-processor", RawAudioProcessor);
`);class Dy{static async create({sampleRate:e,format:n,preferHeadphonesForIosDevices:i}){let r=null,s=null;try{const l={sampleRate:{ideal:e},echoCancellation:!0,noiseSuppression:!0};if(V_()&&i){const v=(await window.navigator.mediaDevices.enumerateDevices()).find(m=>m.kind==="audioinput"&&["airpod","headphone","earphone"].find(b=>m.label.toLowerCase().includes(b)));v&&(l.deviceId={ideal:v.deviceId})}const c=navigator.mediaDevices.getSupportedConstraints().sampleRate;r=new window.AudioContext(c?{sampleRate:e}:{});const u=r.createAnalyser();c||await r.audioWorklet.addModule("https://cdn.jsdelivr.net/npm/@alexanderolsen/libsamplerate-js@2.1.2/dist/libsamplerate.worklet.js"),await Xz(r.audioWorklet);const d=sc({voiceIsolation:!0},l);s=await navigator.mediaDevices.getUserMedia({audio:d});const f=r.createMediaStreamSource(s),h=new AudioWorkletNode(r,"raw-audio-processor");return h.port.postMessage({type:"setFormat",format:n,sampleRate:e}),f.connect(u),u.connect(h),await r.resume(),new Dy(r,u,h,s)}catch(l){var o,a;throw(o=s)==null||o.getTracks().forEach(c=>c.stop()),(a=r)==null||a.close(),l}}constructor(e,n,i,r){this.context=void 0,this.analyser=void 0,this.worklet=void 0,this.inputStream=void 0,this.context=e,this.analyser=n,this.worklet=i,this.inputStream=r}async close(){this.inputStream.getTracks().forEach(e=>e.stop()),await this.context.close()}setMuted(e){this.worklet.port.postMessage({type:"setMuted",isMuted:e})}}const Jz=$_("audio-concat-processor",`
const decodeTable = [0,132,396,924,1980,4092,8316,16764];

export function decodeSample(muLawSample) {
  let sign;
  let exponent;
  let mantissa;
  let sample;
  muLawSample = ~muLawSample;
  sign = (muLawSample & 0x80);
  exponent = (muLawSample >> 4) & 0x07;
  mantissa = muLawSample & 0x0F;
  sample = decodeTable[exponent] + (mantissa << (exponent+3));
  if (sign !== 0) sample = -sample;

  return sample;
}

class AudioConcatProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.buffers = []; // Initialize an empty buffer
    this.cursor = 0;
    this.currentBuffer = null;
    this.wasInterrupted = false;
    this.finished = false;
    
    this.port.onmessage = ({ data }) => {
      switch (data.type) {
        case "setFormat":
          this.format = data.format;
          break;
        case "buffer":
          this.wasInterrupted = false;
          this.buffers.push(
            this.format === "ulaw"
              ? new Uint8Array(data.buffer)
              : new Int16Array(data.buffer)
          );
          break;
        case "interrupt":
          this.wasInterrupted = true;
          break;
        case "clearInterrupted":
          if (this.wasInterrupted) {
            this.wasInterrupted = false;
            this.buffers = [];
            this.currentBuffer = null;
          }
      }
    };
  }
  process(_, outputs) {
    let finished = false;
    const output = outputs[0][0];
    for (let i = 0; i < output.length; i++) {
      if (!this.currentBuffer) {
        if (this.buffers.length === 0) {
          finished = true;
          break;
        }
        this.currentBuffer = this.buffers.shift();
        this.cursor = 0;
      }

      let value = this.currentBuffer[this.cursor];
      if (this.format === "ulaw") {
        value = decodeSample(value);
      }
      output[i] = value / 32768;
      this.cursor++;

      if (this.cursor >= this.currentBuffer.length) {
        this.currentBuffer = null;
      }
    }

    if (this.finished !== finished) {
      this.finished = finished;
      this.port.postMessage({ type: "process", finished });
    }

    return true; // Continue processing
  }
}

registerProcessor("audio-concat-processor", AudioConcatProcessor);
`);class Ly{static async create({sampleRate:e,format:n}){let i=null;try{i=new AudioContext({sampleRate:e});const s=i.createAnalyser(),o=i.createGain();o.connect(s),s.connect(i.destination),await Jz(i.audioWorklet);const a=new AudioWorkletNode(i,"audio-concat-processor");return a.port.postMessage({type:"setFormat",format:n}),a.connect(o),await i.resume(),new Ly(i,s,o,a)}catch(s){var r;throw(r=i)==null||r.close(),s}}constructor(e,n,i,r){this.context=void 0,this.analyser=void 0,this.gain=void 0,this.worklet=void 0,this.context=e,this.analyser=n,this.gain=i,this.worklet=r}async close(){await this.context.close()}}class jy extends oc{static async startSession(e){var n;const i=oc.getFullOptions(e);i.onStatusChange({status:"connecting"}),i.onCanSendFeedbackChange({canSendFeedback:!1});let r=null,s=null,o=null,a=null,l=null;if((n=e.useWakeLock)==null||n)try{l=await navigator.wakeLock.request("screen")}catch{}try{var c;return a=await navigator.mediaDevices.getUserMedia({audio:!0}),await z_(i.connectionDelay),s=await B_(e),[r,o]=await Promise.all([Dy.create(sc({},s.inputFormat,{preferHeadphonesForIosDevices:e.preferHeadphonesForIosDevices})),Ly.create(s.outputFormat)]),(c=a)==null||c.getTracks().forEach(m=>m.stop()),a=null,new jy(i,s,r,o,l)}catch(m){var u,d,f,h;i.onStatusChange({status:"disconnected"}),(u=a)==null||u.getTracks().forEach(b=>b.stop()),(d=s)==null||d.close(),await((f=r)==null?void 0:f.close()),await((h=o)==null?void 0:h.close());try{var v;await((v=l)==null?void 0:v.release()),l=null}catch{}throw m}}constructor(e,n,i,r,s){super(e,n),this.input=void 0,this.output=void 0,this.wakeLock=void 0,this.inputFrequencyData=void 0,this.outputFrequencyData=void 0,this.onInputWorkletMessage=o=>{this.status==="connected"&&this.connection.sendMessage({user_audio_chunk:Yz(o.data[0].buffer)})},this.onOutputWorkletMessage=({data:o})=>{o.type==="process"&&this.updateMode(o.finished?"listening":"speaking")},this.addAudioBase64Chunk=o=>{this.output.gain.gain.value=this.volume,this.output.worklet.port.postMessage({type:"clearInterrupted"}),this.output.worklet.port.postMessage({type:"buffer",buffer:Qz(o)})},this.fadeOutAudio=()=>{this.updateMode("listening"),this.output.worklet.port.postMessage({type:"interrupt"}),this.output.gain.gain.exponentialRampToValueAtTime(1e-4,this.output.context.currentTime+2),setTimeout(()=>{this.output.gain.gain.value=this.volume,this.output.worklet.port.postMessage({type:"clearInterrupted"})},2e3)},this.calculateVolume=o=>{if(o.length===0)return 0;let a=0;for(let l=0;l<o.length;l++)a+=o[l]/255;return a/=o.length,a<0?0:a>1?1:a},this.input=i,this.output=r,this.wakeLock=s,this.input.worklet.port.onmessage=this.onInputWorkletMessage,this.output.worklet.port.onmessage=this.onOutputWorkletMessage}async handleEndSession(){await super.handleEndSession();try{var e;await((e=this.wakeLock)==null?void 0:e.release()),this.wakeLock=null}catch{}await this.input.close(),await this.output.close()}handleInterruption(e){super.handleInterruption(e),this.fadeOutAudio()}handleAudio(e){this.lastInterruptTimestamp<=e.audio_event.event_id&&(this.options.onAudio(e.audio_event.audio_base_64),this.addAudioBase64Chunk(e.audio_event.audio_base_64),this.currentEventId=e.audio_event.event_id,this.updateCanSendFeedback(),this.updateMode("speaking"))}setMicMuted(e){this.connection instanceof Af?this.connection.setMicMuted(e):this.input.setMuted(e)}getInputByteFrequencyData(){return this.inputFrequencyData!=null||(this.inputFrequencyData=new Uint8Array(this.input.analyser.frequencyBinCount)),this.input.analyser.getByteFrequencyData(this.inputFrequencyData),this.inputFrequencyData}getOutputByteFrequencyData(){return this.outputFrequencyData!=null||(this.outputFrequencyData=new Uint8Array(this.output.analyser.frequencyBinCount)),this.output.analyser.getByteFrequencyData(this.outputFrequencyData),this.outputFrequencyData}getInputVolume(){return this.calculateVolume(this.getInputByteFrequencyData())}getOutputVolume(){return this.calculateVolume(this.getOutputByteFrequencyData())}}class Zz extends oc{static startSession(e){return e.textOnly?My.startSession(e):jy.startSession(e)}}function El(){return El=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},El.apply(null,arguments)}const e8=["micMuted","volume","serverLocation"];function t8(t="us"){switch(t){case"eu-residency":case"in-residency":case"us":case"global":return t;default:return console.warn(`[ConversationalAI] Invalid server-location: ${t}. Defaulting to "us"`),"us"}}function n8(t){return{us:"wss://api.elevenlabs.io","eu-residency":"wss://api.eu.residency.elevenlabs.io","in-residency":"wss://api.in.residency.elevenlabs.io",global:"wss://api.elevenlabs.io"}[t]}function i8(t={}){const{micMuted:e,volume:n,serverLocation:i}=t,r=function(h,v){if(h==null)return{};var m={};for(var b in h)if({}.hasOwnProperty.call(h,b)){if(v.indexOf(b)!==-1)continue;m[b]=h[b]}return m}(t,e8),s=x.useRef(null),o=x.useRef(null),[a,l]=x.useState("disconnected"),[c,u]=x.useState(!1),[d,f]=x.useState("listening");return x.useEffect(()=>{var h;e!==void 0&&(s==null||(h=s.current)==null||h.setMicMuted(e))},[e]),x.useEffect(()=>{var h;n!==void 0&&(s==null||(h=s.current)==null||h.setVolume({volume:n}))},[n]),x.useEffect(()=>()=>{var h;(h=s.current)==null||h.endSession()},[]),{startSession:async h=>{var v;if((v=s.current)!=null&&v.isOpen())return s.current.getId();if(o.current)return(await o.current).getId();try{var m,b,p,y,S,T,k,w,E,P;const _=n8(t8((h==null?void 0:h.serverLocation)||i));return o.current=Zz.startSession(El({},r??{},h??{},{origin:_,overrides:El({},(m=r==null?void 0:r.overrides)!=null?m:{},(b=h==null?void 0:h.overrides)!=null?b:{},{client:El({},(p=r==null||(y=r.overrides)==null?void 0:y.client)!=null?p:{},(S=h==null||(T=h.overrides)==null?void 0:T.client)!=null?S:{},{source:(h==null||(k=h.overrides)==null||(k=k.client)==null?void 0:k.source)||(r==null||(w=r.overrides)==null||(w=w.client)==null?void 0:w.source)||"react_sdk",version:(h==null||(E=h.overrides)==null||(E=E.client)==null?void 0:E.version)||(r==null||(P=r.overrides)==null||(P=P.client)==null?void 0:P.version)||"0.4.5"})}),onConnect:(h==null?void 0:h.onConnect)||(r==null?void 0:r.onConnect),onDisconnect:(h==null?void 0:h.onDisconnect)||(r==null?void 0:r.onDisconnect),onError:(h==null?void 0:h.onError)||(r==null?void 0:r.onError),onMessage:(h==null?void 0:h.onMessage)||(r==null?void 0:r.onMessage),onAudio:(h==null?void 0:h.onAudio)||(r==null?void 0:r.onAudio),onDebug:(h==null?void 0:h.onDebug)||(r==null?void 0:r.onDebug),onUnhandledClientToolCall:(h==null?void 0:h.onUnhandledClientToolCall)||(r==null?void 0:r.onUnhandledClientToolCall),onModeChange:({mode:A})=>{f(A)},onStatusChange:({status:A})=>{l(A)},onCanSendFeedbackChange:({canSendFeedback:A})=>{u(A)}})),s.current=await o.current,e!==void 0&&s.current.setMicMuted(e),n!==void 0&&s.current.setVolume({volume:n}),s.current.getId()}finally{o.current=null}},endSession:async()=>{const h=s.current;s.current=null,await(h==null?void 0:h.endSession())},setVolume:({volume:h})=>{var v;(v=s.current)==null||v.setVolume({volume:h})},getInputByteFrequencyData:()=>{var h;return(h=s.current)==null?void 0:h.getInputByteFrequencyData()},getOutputByteFrequencyData:()=>{var h;return(h=s.current)==null?void 0:h.getOutputByteFrequencyData()},getInputVolume:()=>{var h,v;return(h=(v=s.current)==null?void 0:v.getInputVolume())!=null?h:0},getOutputVolume:()=>{var h,v;return(h=(v=s.current)==null?void 0:v.getOutputVolume())!=null?h:0},sendFeedback:h=>{var v;(v=s.current)==null||v.sendFeedback(h)},getId:()=>{var h;return(h=s.current)==null?void 0:h.getId()},sendContextualUpdate:h=>{var v;(v=s.current)==null||v.sendContextualUpdate(h)},sendUserMessage:h=>{var v;(v=s.current)==null||v.sendUserMessage(h)},sendUserActivity:()=>{var h;(h=s.current)==null||h.sendUserActivity()},sendMCPToolApprovalResult:(h,v)=>{var m;(m=s.current)==null||m.sendMCPToolApprovalResult(h,v)},status:a,canSendFeedback:c,micMuted:e,isSpeaking:d==="speaking"}}const r8="/assets/BrainAI-DzHyo-iw.png";function s8(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function o8({text:t}){const[e,n]=x.useState("");return x.useEffect(()=>{let i=0;const r=setInterval(()=>{n(t.slice(0,++i)),i>=t.length&&clearInterval(r)},20);return()=>clearInterval(r)},[t]),g.jsx("span",{children:e})}const a8=12e4;const l8=({language:t})=>{const[e,n]=x.useState(-1),[i,r]=x.useState([]),[s,o]=x.useState(null),[a,l]=x.useState("voice"),[c,u]=x.useState(!1),[d]=x.useState(()=>{const U=localStorage.getItem("convId");if(U)return U;const J=s8();return localStorage.setItem("convId",J),J}),[f,h]=x.useState(!1),[v,m]=x.useState(()=>localStorage.getItem("consent")==="yes"),[b,p]=x.useState(""),[y,S]=x.useState(!1),[T,k]=x.useState(!1),[w,E]=x.useState(()=>localStorage.getItem("contactDone")==="yes"),[P,_]=x.useState(!1),[A,O]=x.useState(""),[L,Q]=x.useState("idle"),[z,oe]=x.useState(null),[ae,X]=x.useState(!1),[I,M]=x.useState(!1),q=x.useRef(!1),Y=x.useRef(),ne=x.useRef(0),ee=x.useRef(null),ue=x.useRef(null),ce=x.useRef(null),Ce=x.useRef(!1),pe=x.useRef(null),Xt=x.useRef(null),Ge=x.useRef(null),jt=x.useRef([]);x.useEffect(()=>{jt.current=i},[i]),x.useEffect(()=>{q.current=I},[I]),x.useEffect(()=>{const U=()=>k(!0);return window.addEventListener("openContactModal",U),()=>window.removeEventListener("openContactModal",U)},[]);function pn(U){if(!q.current)try{const J=pe.current??new(window.AudioContext||window.webkitAudioContext)({sampleRate:48e3});if(pe.current=J,!(U instanceof ArrayBuffer))return;J.decodeAudioData(U.slice(0)).then(ie=>{const xe=J.createBufferSource();xe.buffer=ie,xe.connect(J.destination),xe.start()}).catch(ie=>{console.warn("[decodeAudioError]",ie)})}catch(J){console.error("[playAudio failed]",J)}}const Ft=U=>{if(a==="chat")return;let J=null;if(U instanceof ArrayBuffer)J=U;else if(typeof U=="object"&&U!==null&&"audio"in U&&typeof U.audio=="string"){const ie=atob(U.audio),xe=new Uint8Array(ie.length);for(let Pe=0;Pe<ie.length;Pe++)xe[Pe]=ie.charCodeAt(Pe);J=xe.buffer}J&&(`${J.byteLength}`,pn(J))},{startSession:Ct,sendUserMessage:Jt,sendUserActivity:zi}=i8({onMessage:async U=>{o(null),Q(ie=>ie==="intro"&&U.source==="user"?"collect":ie),oe(U.source==="user"?"user":"agent");const J={role:U.source==="user"?"user":"assistant",text:U.message,time:new Date().toLocaleTimeString()};r(ie=>[...ie,J]),jt.current.length+1;try{const ie=await fetch("/api/agent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversationId:d,role:U.source==="user"?"user":"assistant",text:U.message,phase:L,mode:a})});if(!ie.ok){const Pe=await ie.text();throw new Error(`API error ${ie.status}: ${Pe}`)}const xe=await ie.json()}catch(ie){console.error("Agent API request failed",ie)}},onDebug:U=>{U.type==="tentative_agent_response"&&U.response&&o({role:"assistant",text:U.response,time:new Date().toLocaleTimeString()}),U.type==="tentative_user_transcript"&&U.response&&o({role:"user",text:U.response,time:new Date().toLocaleTimeString()})},onAudio:Ft,onConnect:()=>Q("collect"),onDisconnect:()=>{oe(null)},onError:U=>console.error("[conversation-error]",U),clientTools:{openContactConfirm:()=>new Promise(U=>{Ge.current=U,k(!0)})}});async function pi(){if(Ce.current)return;Ce.current=!0;const U=jt.current.map(J=>`${J.role==="user"?"User":"Agent"}: ${J.text}`).join(`
`);try{const J=await fetch("/api/summary",{method:"POST",headers:{"Content-Type":"application/json","x-conversation-id":d},body:JSON.stringify({transcript:U,language:t})});if(!J.ok){console.error("Summary API error",J.status,J.statusText),dh.error("Greka pri saimanju");return}const{summary:ie}=await J.json(),xe=await fetch("/api/solution",{method:"POST",headers:{"Content-Type":"application/json","x-conversation-id":d},body:JSON.stringify({summary:ie,language:t})});if(!xe.ok){console.error("Solution API error",xe.status,xe.statusText),dh.error("Greka pri rjeenju");return}const Pe=await xe.json();if(!Pe.solutionText||!Pe.cta){console.error("Solution API invalid response",Pe),dh.error("Greka pri rjeenju");return}const yt=`${Pe.solutionText}
${Pe.cta}`;Xt.current&&await fetch("/api/sendEmail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:Xt.current.email,phone:Xt.current.phone,painPoints:[],proposal:yt})}),O(yt),_(!0);{const Ut=await fetch("/api/agent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversationId:d,role:"assistant",text:yt,phase:"closing",mode:"voice"})});if(!Ut.ok){const en=await Ut.text();throw new Error(`API error ${Ut.status}: ${en}`)}const $n=await Ut.json()}r(Ut=>[...Ut,{role:"assistant",text:yt,time:new Date().toLocaleTimeString()}]),jt.current.length+1;const Wi=await(await fetch("/api/tts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:yt})})).blob(),Hi=URL.createObjectURL(Wi);new Audio(Hi).play();{const Ut=await fetch("/api/agent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversationId:d,role:"system",text:"CONVO_END",phase:"ended"})});if(!Ut.ok){const en=await Ut.text();throw new Error(`API error ${Ut.status}: ${en}`)}const $n=await Ut.json()}localStorage.removeItem("convId"),Q("ended"),oe(null)}catch(J){console.error("finalize failed",J)}}const Et={hr:{title:"U 90 sekundi do JEDNOG AI rjeenja za vau tvrtku.",subtitle:"Mi smo tim specijaliziran za AI savjetovanje i izgradnju konkretnih rjeenja. Ovaj agent je samo uvod  pokazuje, na svom primjeru, kako umjetna inteligencija moe olakati poslovanje. Prikazana rjeenja su brza, okvirna i slue za orijentaciju; za detaljne prijedloge preporuujemo izravan kontakt. Prvi odgovor na svaki upit, e-potom, potpuno je besplatan.",startCall:"Pokreni razgovor",switchToChat:"Prebaci na chat",mute:"Mute",privacy:g.jsxs(g.Fragment,{children:["Razgovor se snima i transkribira radi poboljanja usluge; podaci se uvaju ifrirano i usklaeni su s GDPR-om."," ",g.jsx("a",{className:"relative z-20 underline text-white cursor-pointer",href:"/privacy",target:"_blank",rel:"noopener noreferrer",children:"Detalji o obradi podataka"}),"."]}),steps:["Uvod","Pitanja","Rjeenje"]},en:{title:"ONE AI solution for your company in 90 seconds.",subtitle:"We are a team specialized in AI consulting and building concrete solutions. This agent is only an introduction  it demonstrates, through its own example, how artificial intelligence can simplify business operations. The presented solutions are quick, approximate, and serve for orientation; for detailed proposals we recommend direct contact. The first reply to every inquiry, by email, is completely free.",startCall:"Start conversation",switchToChat:"Switch to chat",mute:"Mute",privacy:g.jsxs(g.Fragment,{children:["Conversation is recorded and transcribed to improve the service; data is stored encrypted and compliant with GDPR."," ",g.jsx("a",{className:"relative z-20 underline text-white cursor-pointer",href:"/privacy",target:"_blank",rel:"noopener noreferrer",children:"Details about data processing"}),"."]}),steps:["Intro","Questions","Solution"]}}[t];x.useEffect(()=>{switch(L){case"intro":n(0);break;case"collect":n(1);break;case"closing":case"ended":n(2);break}},[L]),x.useEffect(()=>{const U=ee.current;U&&(U.scrollTop=U.scrollHeight)},[i,s]),x.useEffect(()=>()=>{Y.current&&clearTimeout(Y.current)},[]),x.useEffect(()=>()=>{var U,J;(J=(U=pe.current)==null?void 0:U.close)==null||J.call(U)},[]),x.useEffect(()=>{L==="closing"&&!w&&k(!0)},[L,w]),x.useEffect(()=>{if(L!=="collect")return;const U=new oB;ce.current=U;const J=(window.location.protocol==="https:"?"wss://":"ws://")+window.location.host+"/api/evi",ie=new WebSocket(J);return ue.current=ie,ie.onmessage=xe=>{var Pe;try{const yt=JSON.parse(xe.data);(Pe=yt.audio_output)!=null&&Pe.data&&(oe("agent"),U.enqueueBase64(yt.audio_output.data)),yt.event==="user_interruption"&&U.stop()}catch(yt){console.error("Failed to parse EVI message",yt)}},ie.onclose=()=>{U.stop()},()=>{ie.close(),U.stop()}},[L]);async function Zt(){if(!v){h(!0);return}const U=await fetch("/api/agent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversationId:d,role:"user",text:"[CALL_STARTED]",phase:"intro",mode:"voice"})});if(!U.ok){const J=await U.text();throw new Error(`API error ${U.status}: ${J}`)}await U.json(),oe("user"),Q("intro"),ne.current=Date.now();try{await navigator.mediaDevices.getUserMedia({audio:!0}),await Ct({agentId:"agent_9201k1dshf3xexg8w6cj7vwncj62",connectionType:"websocket"}),u(!0),Y.current=setTimeout(()=>{Q("closing"),pi()},a8)}catch{alert("Nemogue pokrenuti glasovni razgovor  vidi konzolu."),Q("idle")}}function ms(){var U,J,ie;(U=ue.current)==null||U.close(),(ie=(J=ce.current)==null?void 0:J.stop)==null||ie.call(J),u(!1),oe(null),Q("idle")}async function mi(){m(!0),localStorage.setItem("consent","yes"),h(!1);const U=await fetch("/api/agent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversationId:d,role:"system",text:"CONSENT_GIVEN"})});if(!U.ok){const J=await U.text();throw new Error(`API error ${U.status}: ${J}`)}await U.json(),Zt()}async function to(U,J){var xe;(xe=Ge.current)==null||xe.call(Ge,{email:U,phone:J}),Ge.current=null,Xt.current={email:U,phone:J};const ie=await fetch("/api/agent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversationId:d,role:"user",text:`CONTACT::${U}|${J}`})});if(!ie.ok){const Pe=await ie.text();throw new Error(`API error ${ie.status}: ${Pe}`)}await ie.json(),localStorage.setItem("contactDone","yes"),E(!0),k(!1)}async function mn(U){if(!U.trim())return;S(!0);const J=new Date().toLocaleTimeString();if(r(ie=>[...ie,{role:"user",text:U,time:J}]),a==="voice")await $i(),Jt(U);else{const ie=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:U})}).then(xe=>xe.json());r(xe=>[...xe,{role:"assistant",text:ie.answer,time:new Date().toLocaleTimeString()}])}S(!1)}async function $i(){!c&&a==="voice"&&(await Ct({agentId:"agent_9201k1dshf3xexg8w6cj7vwncj62",connectionType:"websocket"}),u(!0))}const gi=L!=="idle",et=z==="agent",zn=z==="user"||ae,no=()=>v?Zt():h(!0),io=()=>X(U=>(U&&oe(null),!U)),vi=()=>M(U=>{var ie,xe;const J=!U;return J&&((xe=(ie=ce.current)==null?void 0:ie.stop)==null||xe.call(ie)),J}),ro=()=>{ms(),X(!1),window.location.reload()};return g.jsxs("div",{className:"relative rounded-3xl overflow-hidden p-8 h-full bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white",children:[g.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[g.jsx(rt.div,{className:"absolute -top-1/2 -left-1/2 w-full h-full bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-full",animate:{rotate:360},transition:{duration:30,repeat:1/0,ease:"linear"}}),g.jsx(rt.div,{className:"absolute -bottom-1/2 -right-1/2 w-full h-full bg-gradient-to-l from-pink-500/10 to-blue-500/10 rounded-full",animate:{rotate:-360},transition:{duration:25,repeat:1/0,ease:"linear"}})]}),g.jsxs("div",{className:"relative z-10 grid grid-cols-1 lg:grid-cols-2 gap-8 h-full",children:[g.jsx(sB,{title:Et.title,subtitle:Et.subtitle,startLabel:Et.startCall,isChatActive:gi,isSpeaking:et,isListening:zn,isMuted:I,onStartChat:no,onMicToggle:io,onMuteToggle:vi,onEndChat:ro}),g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsx("div",{className:"relative h-80 lg:h-96",children:g.jsx(bu,{mode:"wait",children:L==="idle"?g.jsx(rt.div,{initial:{opacity:1,scale:1},exit:{opacity:0,scale:1.1},transition:{duration:.5,ease:"easeInOut"},className:"absolute inset-0 rounded-2xl overflow-hidden",children:g.jsx("img",{src:r8,alt:"BrainAI",className:"w-full h-full object-contain"})},"placeholder-image"):g.jsxs(rt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.5,ease:"easeInOut"},className:"absolute inset-0 overflow-y-auto rounded-2xl bg-white/10 backdrop-blur-lg p-4 border border-white/20",ref:ee,children:[i.map((U,J)=>g.jsx("p",{className:`text-sm mb-1 ${U.role==="user"?"text-blue-300":"text-white"}`,children:g.jsx(o8,{text:U.text})},J)),s&&g.jsx("p",{className:"text-xs italic text-slate-300",children:s.text})]},"transcript")})}),a==="chat"&&g.jsxs("form",{onSubmit:U=>{U.preventDefault(),b.trim()&&(mn(b.trim()),p(""))},className:"mt-4 flex items-center space-x-2",children:[g.jsx("input",{className:"w-full bg-white/60 rounded-lg px-4 py-3 text-sm text-black placeholder:text-slate-500",placeholder:t==="hr"?"Napiite poruku...":"Type a message...",value:b,onChange:U=>{p(U.target.value),zi()},disabled:a!=="chat"||y}),g.jsx("button",{type:"submit",className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg px-4 py-3 text-sm font-medium disabled:opacity-50",disabled:!b.trim()||y,children:"Send"})]}),g.jsxs("div",{className:"mt-4",children:[g.jsx("div",{className:"flex items-center justify-between mb-2",children:Et.steps.map((U,J)=>g.jsx("span",{className:`text-xs font-medium px-3 py-1 rounded-full transition-smooth ${J===e?"bg-blue-600 text-white":J<e?"bg-purple-600 text-white":"bg-white/30 text-slate-300"}`,children:U},J))}),g.jsx("div",{className:"w-full bg-white/30 rounded-full h-2",children:g.jsx("div",{className:"h-2 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full transition-all duration-1000 ease-in-out",style:{width:`${(e+1)/3*100}%`}})})]})]})]}),g.jsx("div",{className:"relative z-10 text-xs text-slate-300 mt-6 text-center",children:g.jsx("p",{className:"mb-1",children:Et.privacy})}),g.jsx(tB,{open:f,onAccept:mi,onClose:()=>h(!1)}),g.jsx(nB,{open:T,onSave:to,onClose:()=>k(!1),onDecline:()=>{var U;(U=Ge.current)==null||U.call(Ge),Ge.current=null,localStorage.setItem("contactDone","yes"),E(!0),k(!1)}}),g.jsx(iB,{open:P,solution:A,language:t,onClose:()=>_(!1)})]})},c8=({isOpen:t,onClose:e,language:n})=>{const[i,r]=x.useState({firstName:"",lastName:"",email:"",company:"",industry:"",teamSize:"",repetitiveTask:"",aiUsage:"",question:"",wantResponse:!1,newsletter:!1}),[s,o]=x.useState(!1),[a,l]=x.useState(1),[c,u]=x.useState(!1),f={hr:{title:"Postavite pitanje",subtitle:"Odgovoramo u roku od 24 sata",firstName:"Ime",lastName:"Prezime",email:"E-mail adresa",company:"Tvrtka (opcionalno)",industry:"Djelatnost",teamSize:"Veliina tima",repetitiveTask:"Najvei repetitivni zadatak",aiUsage:"Trenutna razina AI koritenja",question:"Vae pitanje",wantResponse:"elim povratni e-mail s odgovorom",newsletter:"elim primati newsletter",submit:"Poaljite pitanje",next:"Dalje",back:"Nazad",step:"Korak",submitting:"alje se...",successTitle:"Hvala na pitanju!",successMessage:"Odgovor ete dobiti u roku od 24 sata na navedenu e-mail adresu.",close:"Zatvori",required:"Obavezno polje",industries:["Odaberite djelatnost","Trgovina","Usluge","Proizvodnja","IT/Tehnologija","Zdravstvo","Obrazovanje","Finance","Drugo"],teamSizes:["Odaberite veliinu","1-3 osobe","4-10 osoba","11-50 osoba","50+ osoba"],aiUsageLevels:["Ne koristimo AI","Oko 10% poslova","25% i vie","50% i vie"]},en:{title:"Ask a Question",subtitle:"We respond within 24 hours",firstName:"First Name",lastName:"Last Name",email:"Email Address",company:"Company (optional)",industry:"Industry",teamSize:"Team Size",repetitiveTask:"Biggest Repetitive Task",aiUsage:"Current AI Usage Level",question:"Your Question",wantResponse:"I want an email response",newsletter:"I want to receive newsletter",submit:"Send Question",next:"Next",back:"Back",step:"Step",submitting:"Sending...",successTitle:"Thank you for your question!",successMessage:"You will receive a response within 24 hours at the provided email address.",close:"Close",required:"Required field",industries:["Select industry","Retail","Services","Manufacturing","IT/Technology","Healthcare","Education","Finance","Other"],teamSizes:["Select size","1-3 people","4-10 people","11-50 people","50+ people"],aiUsageLevels:["No AI usage","Around 10% of work","25% and more","50% and more"]}}[n],h=async p=>{if(p.preventDefault(),!(!i.firstName||!i.lastName||!i.email||!i.question)){u(!0);try{(await fetch("/api/question",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...i,language:n})})).ok?o(!0):console.error("Question submission failed")}catch(y){console.error("Question submission error:",y)}finally{u(!1)}}},v=(p,y)=>{r(S=>({...S,[p]:y}))},m=()=>{!i.firstName||!i.lastName||!i.email||l(2)},b=()=>l(1);return t?g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{background:"linear-gradient(135deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.7) 100%)",backdropFilter:"blur(8px)"},children:g.jsx("div",{className:"w-full max-w-2xl rounded-3xl shadow-2xl overflow-hidden",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 25px 50px -12px rgba(0,0,0,0.25), 0 0 0 1px rgba(255,255,255,0.1) inset"},children:g.jsx("div",{className:"p-8",children:s?g.jsxs("div",{className:"text-center py-12",children:[g.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse",style:{background:"linear-gradient(135deg, #10b981 0%, #3b82f6 100%)",boxShadow:"0 10px 30px rgba(16,185,129,0.3)"},children:g.jsx(NO,{className:"w-10 h-10 text-white"})}),g.jsx("h3",{className:"text-3xl font-bold mb-4",style:{color:"#ffffff"},children:f.successTitle}),g.jsx("p",{className:"text-lg mb-8 max-w-md mx-auto",style:{color:"rgba(255,255,255,0.8)"},children:f.successMessage}),g.jsx("button",{onClick:e,className:"px-8 py-4 rounded-xl font-semibold text-white transition-all duration-300 hover:scale-[1.02] hover:shadow-2xl",style:{background:"linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%)",boxShadow:"0 10px 30px rgba(59,130,246,0.3)"},children:f.close})]}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex items-center justify-between mb-8",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-3xl font-bold mb-2",style:{color:"#ffffff"},children:f.title}),g.jsx("p",{className:"text-lg",style:{color:"rgba(255,255,255,0.8)"},children:f.subtitle})]}),g.jsx("button",{onClick:e,className:"p-3 rounded-full transition-all duration-300 hover:scale-110",style:{background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"#ffffff"},onMouseEnter:p=>{p.currentTarget.style.background="rgba(255,255,255,0.2)"},onMouseLeave:p=>{p.currentTarget.style.background="rgba(255,255,255,0.1)"},"aria-label":f.close,children:g.jsx(wa,{className:"w-6 h-6"})})]}),g.jsxs("div",{className:"mb-8",children:[g.jsx("div",{className:"flex items-center justify-between mb-3",children:g.jsxs("span",{className:"text-sm font-semibold",style:{color:"rgba(255,255,255,0.9)"},children:[f.step," ",a,"/2"]})}),g.jsx("div",{className:"w-full h-2 rounded-full overflow-hidden",style:{background:"rgba(255,255,255,0.1)"},children:g.jsx("div",{className:"h-2 rounded-full transition-all duration-500 ease-out",style:{width:a===1?"50%":"100%",background:"linear-gradient(90deg, #3b82f6 0%, #8b5cf6 100%)"}})})]}),g.jsx("form",{onSubmit:h,className:"space-y-6",children:a===1?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-semibold mb-2",style:{color:"#ffffff"},children:[f.firstName," *"]}),g.jsx("input",{type:"text",required:!0,value:i.firstName,onChange:p=>v("firstName",p.target.value),className:"w-full px-4 py-3 rounded-xl transition-all duration-300 focus:scale-[1.02]",style:{background:"rgba(255,255,255,0.15)",border:"1px solid rgba(255,255,255,0.2)",color:"#ffffff",backdropFilter:"blur(10px)"},onFocus:p=>{p.currentTarget.style.background="rgba(255,255,255,0.25)",p.currentTarget.style.borderColor="rgba(59,130,246,0.5)",p.currentTarget.style.boxShadow="0 0 0 3px rgba(59,130,246,0.1)"},onBlur:p=>{p.currentTarget.style.background="rgba(255,255,255,0.15)",p.currentTarget.style.borderColor="rgba(255,255,255,0.2)",p.currentTarget.style.boxShadow="none"}})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-semibold mb-2",style:{color:"#ffffff"},children:[f.lastName," *"]}),g.jsx("input",{type:"text",required:!0,value:i.lastName,onChange:p=>v("lastName",p.target.value),className:"w-full px-4 py-3 rounded-xl transition-all duration-300 focus:scale-[1.02]",style:{background:"rgba(255,255,255,0.15)",border:"1px solid rgba(255,255,255,0.2)",color:"#ffffff",backdropFilter:"blur(10px)"},onFocus:p=>{p.currentTarget.style.background="rgba(255,255,255,0.25)",p.currentTarget.style.borderColor="rgba(59,130,246,0.5)",p.currentTarget.style.boxShadow="0 0 0 3px rgba(59,130,246,0.1)"},onBlur:p=>{p.currentTarget.style.background="rgba(255,255,255,0.15)",p.currentTarget.style.borderColor="rgba(255,255,255,0.2)",p.currentTarget.style.boxShadow="none"}})]})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-semibold mb-2",style:{color:"#ffffff"},children:[f.email," *"]}),g.jsx("input",{type:"email",required:!0,value:i.email,onChange:p=>v("email",p.target.value),className:"w-full px-4 py-3 rounded-xl transition-all duration-300 focus:scale-[1.02]",style:{background:"rgba(255,255,255,0.15)",border:"1px solid rgba(255,255,255,0.2)",color:"#ffffff",backdropFilter:"blur(10px)"},onFocus:p=>{p.currentTarget.style.background="rgba(255,255,255,0.25)",p.currentTarget.style.borderColor="rgba(59,130,246,0.5)",p.currentTarget.style.boxShadow="0 0 0 3px rgba(59,130,246,0.1)"},onBlur:p=>{p.currentTarget.style.background="rgba(255,255,255,0.15)",p.currentTarget.style.borderColor="rgba(255,255,255,0.2)",p.currentTarget.style.boxShadow="none"}})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"#ffffff"},children:f.company}),g.jsx("input",{type:"text",value:i.company,onChange:p=>v("company",p.target.value),className:"w-full px-4 py-3 rounded-xl transition-all duration-300 focus:scale-[1.02]",style:{background:"rgba(255,255,255,0.15)",border:"1px solid rgba(255,255,255,0.2)",color:"#ffffff",backdropFilter:"blur(10px)"},onFocus:p=>{p.currentTarget.style.background="rgba(255,255,255,0.25)",p.currentTarget.style.borderColor="rgba(59,130,246,0.5)",p.currentTarget.style.boxShadow="0 0 0 3px rgba(59,130,246,0.1)"},onBlur:p=>{p.currentTarget.style.background="rgba(255,255,255,0.15)",p.currentTarget.style.borderColor="rgba(255,255,255,0.2)",p.currentTarget.style.boxShadow="none"}})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"#ffffff"},children:f.industry}),g.jsx("select",{value:i.industry,onChange:p=>v("industry",p.target.value),className:"w-full px-4 py-3 rounded-xl transition-all duration-300 focus:scale-[1.02]",style:{background:"rgba(255,255,255,0.15)",border:"1px solid rgba(255,255,255,0.2)",color:"#ffffff",backdropFilter:"blur(10px)"},onFocus:p=>{p.currentTarget.style.background="rgba(255,255,255,0.25)",p.currentTarget.style.borderColor="rgba(59,130,246,0.5)",p.currentTarget.style.boxShadow="0 0 0 3px rgba(59,130,246,0.1)"},onBlur:p=>{p.currentTarget.style.background="rgba(255,255,255,0.15)",p.currentTarget.style.borderColor="rgba(255,255,255,0.2)",p.currentTarget.style.boxShadow="none"},children:f.industries.map((p,y)=>g.jsx("option",{value:y===0?"":p,style:{background:"#1f2937",color:"#ffffff"},children:p},y))})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"#ffffff"},children:f.teamSize}),g.jsx("select",{value:i.teamSize,onChange:p=>v("teamSize",p.target.value),className:"w-full px-4 py-3 rounded-xl transition-all duration-300 focus:scale-[1.02]",style:{background:"rgba(255,255,255,0.15)",border:"1px solid rgba(255,255,255,0.2)",color:"#ffffff",backdropFilter:"blur(10px)"},onFocus:p=>{p.currentTarget.style.background="rgba(255,255,255,0.25)",p.currentTarget.style.borderColor="rgba(59,130,246,0.5)",p.currentTarget.style.boxShadow="0 0 0 3px rgba(59,130,246,0.1)"},onBlur:p=>{p.currentTarget.style.background="rgba(255,255,255,0.15)",p.currentTarget.style.borderColor="rgba(255,255,255,0.2)",p.currentTarget.style.boxShadow="none"},children:f.teamSizes.map((p,y)=>g.jsx("option",{value:y===0?"":p,style:{background:"#1f2937",color:"#ffffff"},children:p},y))})]})]}),g.jsx("button",{type:"button",onClick:m,className:"w-full py-4 rounded-xl font-semibold text-white transition-all duration-300 hover:scale-[1.02] hover:shadow-2xl",style:{background:"linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%)",boxShadow:"0 10px 30px rgba(59,130,246,0.3)"},children:f.next})]}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"#ffffff"},children:f.repetitiveTask}),g.jsx("input",{type:"text",value:i.repetitiveTask,onChange:p=>v("repetitiveTask",p.target.value),className:"w-full px-4 py-3 rounded-xl transition-all duration-300 focus:scale-[1.02]",style:{background:"rgba(255,255,255,0.15)",border:"1px solid rgba(255,255,255,0.2)",color:"#ffffff",backdropFilter:"blur(10px)"},placeholder:"npr. kreiranje ponuda, unos rauna...",onFocus:p=>{p.currentTarget.style.background="rgba(255,255,255,0.25)",p.currentTarget.style.borderColor="rgba(59,130,246,0.5)",p.currentTarget.style.boxShadow="0 0 0 3px rgba(59,130,246,0.1)"},onBlur:p=>{p.currentTarget.style.background="rgba(255,255,255,0.15)",p.currentTarget.style.borderColor="rgba(255,255,255,0.2)",p.currentTarget.style.boxShadow="none"}})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold mb-3",style:{color:"#ffffff"},children:f.aiUsage}),g.jsx("div",{className:"space-y-3",children:f.aiUsageLevels.map((p,y)=>g.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-3 rounded-xl transition-all duration-300 hover:scale-[1.02]",style:{background:i.aiUsage===p?"rgba(59,130,246,0.2)":"rgba(255,255,255,0.05)",border:`1px solid ${i.aiUsage===p?"rgba(59,130,246,0.5)":"rgba(255,255,255,0.1)"}`},children:[g.jsx("input",{type:"radio",name:"aiUsage",value:p,checked:i.aiUsage===p,onChange:S=>v("aiUsage",S.target.value),className:"w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500"}),g.jsx("span",{className:"text-sm font-medium",style:{color:"#ffffff"},children:p})]},y))})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-semibold mb-2",style:{color:"#ffffff"},children:[f.question," *"]}),g.jsx("textarea",{required:!0,rows:4,value:i.question,onChange:p=>v("question",p.target.value),className:"w-full px-4 py-3 rounded-xl transition-all duration-300 focus:scale-[1.02] resize-none",style:{background:"rgba(255,255,255,0.15)",border:"1px solid rgba(255,255,255,0.2)",color:"#ffffff",backdropFilter:"blur(10px)"},placeholder:"Opiite svoj izazov ili pitanje...",onFocus:p=>{p.currentTarget.style.background="rgba(255,255,255,0.25)",p.currentTarget.style.borderColor="rgba(59,130,246,0.5)",p.currentTarget.style.boxShadow="0 0 0 3px rgba(59,130,246,0.1)"},onBlur:p=>{p.currentTarget.style.background="rgba(255,255,255,0.15)",p.currentTarget.style.borderColor="rgba(255,255,255,0.2)",p.currentTarget.style.boxShadow="none"}})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-3 rounded-xl transition-all duration-300 hover:scale-[1.02]",style:{background:i.wantResponse?"rgba(59,130,246,0.15)":"rgba(255,255,255,0.05)",border:`1px solid ${i.wantResponse?"rgba(59,130,246,0.3)":"rgba(255,255,255,0.1)"}`},children:[g.jsx("input",{type:"checkbox",checked:i.wantResponse,onChange:p=>v("wantResponse",p.target.checked),className:"w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500 rounded"}),g.jsx("span",{className:"text-sm font-medium",style:{color:"#ffffff"},children:f.wantResponse})]}),g.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-3 rounded-xl transition-all duration-300 hover:scale-[1.02]",style:{background:i.newsletter?"rgba(59,130,246,0.15)":"rgba(255,255,255,0.05)",border:`1px solid ${i.newsletter?"rgba(59,130,246,0.3)":"rgba(255,255,255,0.1)"}`},children:[g.jsx("input",{type:"checkbox",checked:i.newsletter,onChange:p=>v("newsletter",p.target.checked),className:"w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500 rounded"}),g.jsx("span",{className:"text-sm font-medium",style:{color:"#ffffff"},children:f.newsletter})]})]}),g.jsxs("div",{className:"flex items-center justify-between space-x-4 pt-4",children:[g.jsx("button",{type:"button",onClick:b,className:"px-6 py-3 rounded-xl font-semibold transition-all duration-300 hover:scale-[1.02]",style:{background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"#ffffff"},onMouseEnter:p=>{p.currentTarget.style.background="rgba(255,255,255,0.2)"},onMouseLeave:p=>{p.currentTarget.style.background="rgba(255,255,255,0.1)"},children:f.back}),g.jsxs("button",{type:"submit",disabled:c,"data-evt":"question_submit",className:"flex-1 py-4 rounded-xl font-semibold text-white transition-all duration-300 hover:scale-[1.02] hover:shadow-2xl flex items-center justify-center space-x-2 disabled:opacity-70 disabled:cursor-not-allowed",style:{background:c?"rgba(107,114,128,0.8)":"linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%)",boxShadow:"0 10px 30px rgba(59,130,246,0.3)"},children:[g.jsx(UO,{className:"w-5 h-5"}),g.jsx("span",{children:c?f.submitting:f.submit})]})]})]})})]})})})}):null},Fy=({title:t,excerpt:e,slug:n,thumbnail:i,featured:r=!1})=>{const s=()=>{window.location.href=`/articles/${n}`};return g.jsxs("article",{onClick:s,"data-evt":"article_click",className:`glass rounded-2xl overflow-hidden shadow-soft hover:shadow-medium transition-smooth cursor-pointer group ${r?"border-2 border-primary/30":""}`,children:[g.jsxs("div",{className:"relative overflow-hidden h-48 bg-gradient-subtle",children:[i?g.jsx("img",{src:i,alt:t,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}):g.jsx("div",{className:"w-full h-full bg-gradient-primary flex items-center justify-center",children:g.jsx("div",{className:"text-white text-4xl font-bold opacity-20",children:"AI"})}),r&&g.jsx("div",{className:"absolute top-4 right-4",children:g.jsx("span",{className:"bg-primary text-primary-foreground text-xs font-bold px-2 py-1 rounded-full",children:"FEATURED"})})]}),g.jsxs("div",{className:"p-6",children:[g.jsx("h3",{className:"text-lg font-bold text-foreground mb-3 leading-tight group-hover:text-primary transition-colors",children:t}),g.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed mb-4 line-clamp-3",children:e}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"text-primary text-sm font-medium group-hover:underline",children:"itaj vie"}),g.jsx(RO,{className:"w-4 h-4 text-primary group-hover:translate-x-1 transition-transform"})]})]})]})},gT="/assets/Intro-7sUad5TC.mp3";function vT({text:t}){const[e,n]=x.useState("");return x.useEffect(()=>{let i=0;const r=setInterval(()=>{n(t.slice(0,++i)),i>=t.length&&clearInterval(r)},15);return()=>clearInterval(r)},[t]),g.jsx("span",{children:e})}const u8=({language:t,isVisible:e,onClose:n})=>{const[i,r]=x.useState(!1),s=x.useRef(null),a={hr:{mainText:"Kako bismo vam osigurali vrhunsko korisniko iskustvo, preporuujemo koritenje slualica.",subText:"Na taj e nain na sustav besprijekorno prepoznati va glas, bez ometanja zbog povratnog zvuka iz zvunika.",closeButton:"ZATVORI",playIntro:"POKRENI INTRO"},en:{mainText:"For the best user experience, we recommend using headphones.",subText:"This way our system will flawlessly recognize your voice, without interference from feedback sound from the speakers.",closeButton:"CLOSE",playIntro:"PLAY INTRO"}}[t];x.useEffect(()=>{if(e&&!s.current&&(s.current=new Audio(gT),s.current.muted=!0),e){const c=setTimeout(()=>{r(!0)},500);return()=>clearTimeout(c)}},[e]);const l=()=>{s.current||(s.current=new Audio(gT),s.current.muted=!0),s.current.play().then(()=>{s.current&&(s.current.muted=!1)}).catch(c=>{console.log("Audio playback failed:",c)})};return e?g.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{background:"linear-gradient(135deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.7) 100%)",backdropFilter:"blur(8px)"},children:[g.jsx("div",{className:"w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 25px 50px -12px rgba(0,0,0,0.25), 0 0 0 1px rgba(255,255,255,0.1) inset",animation:"fadeInScale 0.5s ease-out"},children:g.jsxs("div",{className:"p-8 text-center",children:[g.jsx("div",{className:"flex justify-end mb-4",children:g.jsx("button",{onClick:n,className:"p-2 rounded-full transition-all duration-300 hover:scale-110",style:{background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"#ffffff"},onMouseEnter:c=>{c.currentTarget.style.background="rgba(255,255,255,0.2)"},onMouseLeave:c=>{c.currentTarget.style.background="rgba(255,255,255,0.1)"},children:g.jsx(wa,{className:"w-5 h-5"})})}),g.jsxs("div",{className:"mb-8",children:[g.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-6 leading-tight min-h-[120px]",style:{color:"#ffffff"},children:i&&g.jsx(vT,{text:a.mainText})}),g.jsx("p",{className:"text-lg mb-8 leading-relaxed max-w-md mx-auto min-h-[96px]",style:{color:"rgba(255,255,255,0.8)"},children:i&&g.jsx(vT,{text:a.subText})})]}),g.jsxs("div",{className:"mb-8",children:[g.jsx("div",{className:"w-24 h-24 mx-auto rounded-full flex items-center justify-center mb-4",style:{background:"linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%)",boxShadow:"0 10px 30px rgba(59,130,246,0.3)",animation:"bounce 2s infinite"},children:g.jsx(OO,{className:"w-12 h-12 text-white"})}),g.jsx("div",{className:"flex justify-center space-x-2",children:[0,1,2].map(c=>g.jsx("div",{className:"w-2 h-2 rounded-full",style:{background:"rgba(255,255,255,0.6)",animation:`pulse 1.5s infinite ${c*.2}s`}},c))})]}),g.jsx("button",{onClick:l,className:"px-8 py-4 rounded-xl font-semibold text-white transition-all duration-300 hover:scale-[1.02] hover:shadow-2xl text-lg mb-4",style:{background:"linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%)",boxShadow:"0 10px 30px rgba(59,130,246,0.3)"},children:a.playIntro}),g.jsx("button",{onClick:n,className:"px-8 py-4 rounded-xl font-semibold text-white transition-all duration-300 hover:scale-[1.02] hover:shadow-2xl text-lg",style:{background:"linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%)",boxShadow:"0 10px 30px rgba(59,130,246,0.3)"},children:a.closeButton})]})}),g.jsx("style",{children:`
        @keyframes fadeInScale {
          from {
            opacity: 0;
            transform: scale(0.9);
          }
          to {
            opacity: 1;
            transform: scale(1);
          }
        }

        @keyframes bounce {
          0%, 20%, 50%, 80%, 100% {
            transform: translateY(0);
          }
          40% {
            transform: translateY(-10px);
          }
          60% {
            transform: translateY(-5px);
          }
        }

        @keyframes pulse {
          0%, 100% {
            opacity: 0.6;
            transform: scale(1);
          }
          50% {
            opacity: 1;
            transform: scale(1.2);
          }
        }
      `})]}):null},d8=()=>{const[t,e]=x.useState("hr"),[n,i]=x.useState(!1),[r,s]=x.useState(!0),[o,a]=x.useState(0);x.useEffect(()=>{const y=()=>i(!0);return window.addEventListener("openQuestionModal",y),()=>window.removeEventListener("openQuestionModal",y)},[]);const c={hr:{blogSectionTitle:"AI RJEENJA ZA VAU BRANU",blogSectionSubtitle:"Konkretni primjeri implementacije AI-ja u razliitim industrijama",additionalArticles:"Dodatni lanci",filterBy:"Filtriraj po kategoriji:",allCategories:"Sve kategorije",loadError:"Pogreka pri uitavanju lanaka. Pokuajte ponovno kasnije."},en:{blogSectionTitle:"AI SOLUTIONS FOR YOUR INDUSTRY",blogSectionSubtitle:"Concrete examples of AI implementation in different industries",additionalArticles:"Additional Articles",filterBy:"Filter by category:",allCategories:"All categories",loadError:"Failed to load articles. Please try again later."}}[t],[u,d]=x.useState([]),[f,h]=x.useState(!1);x.useEffect(()=>{fetch("/api/articles").then(y=>y.ok?y.json():Promise.reject(new Error(y.statusText))).then(d).catch(y=>{console.error(y),h(!0)})},[]),u.filter(y=>y.featured);const v=u.filter(y=>!y.featured),m=Array.from(new Set(u.map(y=>y.category[t]))),b=[t==="hr"?"Sve kategorije":"All categories",...m];o===0||v.filter(y=>y.category[t]===b[o]);const p=()=>{s(!1)};return g.jsxs("div",{className:"min-h-screen bg-gradient-subtle",children:[g.jsx(cf,{language:t,onLanguageChange:e}),g.jsx("section",{className:"container mx-auto px-4 py-8",children:g.jsx("div",{className:"max-w-7xl mx-auto",children:g.jsx(l8,{language:t})})}),g.jsx("section",{className:"container mx-auto px-4 pb-16",children:g.jsx("div",{className:"max-w-7xl mx-auto",children:g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:f?g.jsx("p",{className:"col-span-full text-center text-muted-foreground",children:c.loadError}):u.map(y=>g.jsx(Fy,{title:y.title[t],excerpt:y.excerpt[t],slug:y.slug,featured:y.featured,thumbnail:y.thumbnail},y.id))})})}),g.jsx("footer",{className:"bg-white/20 border-t border-white/20 py-8",children:g.jsx("div",{className:"container mx-auto px-4",children:g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[g.jsx("div",{className:"text-center md:text-left",children:g.jsxs("p",{className:"text-sm text-muted-foreground",children:[" 2024 Neurobiz. ",t==="hr"?"Sva prava pridrana.":"All rights reserved."]})}),g.jsxs("div",{className:"flex items-center space-x-6",children:[g.jsx("a",{href:"mailto:info@neurobiz.me",className:"text-sm text-muted-foreground hover:text-primary transition-colors",children:"info@neurobiz.me"}),g.jsx("a",{href:"/privacy",className:"text-sm text-muted-foreground hover:text-primary transition-colors",children:t==="hr"?"Privatnost":"Privacy"}),g.jsx("a",{href:"/terms",className:"text-sm text-muted-foreground hover:text-primary transition-colors",children:t==="hr"?"Uvjeti":"Terms"}),g.jsx("a",{href:"/admin",className:"text-xs text-muted-foreground/50 hover:text-primary transition-colors",children:"admin"})]})]})})}),g.jsx(u8,{language:t,isVisible:r,onClose:p}),g.jsx(c8,{isOpen:n,onClose:()=>i(!1),language:t})]})};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:W_,setPrototypeOf:yT,isFrozen:f8,getPrototypeOf:h8,getOwnPropertyDescriptor:p8}=Object;let{freeze:Gt,seal:Bn,create:H_}=Object,{apply:dg,construct:fg}=typeof Reflect<"u"&&Reflect;Gt||(Gt=function(e){return e});Bn||(Bn=function(e){return e});dg||(dg=function(e,n,i){return e.apply(n,i)});fg||(fg=function(e,n){return new e(...n)});const nu=Kt(Array.prototype.forEach),m8=Kt(Array.prototype.lastIndexOf),bT=Kt(Array.prototype.pop),Ya=Kt(Array.prototype.push),g8=Kt(Array.prototype.splice),Uu=Kt(String.prototype.toLowerCase),np=Kt(String.prototype.toString),xT=Kt(String.prototype.match),Qa=Kt(String.prototype.replace),v8=Kt(String.prototype.indexOf),y8=Kt(String.prototype.trim),Qn=Kt(Object.prototype.hasOwnProperty),Vt=Kt(RegExp.prototype.test),Xa=b8(TypeError);function Kt(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return dg(t,e,i)}}function b8(t){return function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return fg(t,n)}}function me(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Uu;yT&&yT(t,null);let i=e.length;for(;i--;){let r=e[i];if(typeof r=="string"){const s=n(r);s!==r&&(f8(e)||(e[i]=s),r=s)}t[r]=!0}return t}function x8(t){for(let e=0;e<t.length;e++)Qn(t,e)||(t[e]=null);return t}function Xi(t){const e=H_(null);for(const[n,i]of W_(t))Qn(t,n)&&(Array.isArray(i)?e[n]=x8(i):i&&typeof i=="object"&&i.constructor===Object?e[n]=Xi(i):e[n]=i);return e}function Ja(t,e){for(;t!==null;){const i=p8(t,e);if(i){if(i.get)return Kt(i.get);if(typeof i.value=="function")return Kt(i.value)}t=h8(t)}function n(){return null}return n}const ST=Gt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ip=Gt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),rp=Gt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),S8=Gt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),sp=Gt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),T8=Gt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),TT=Gt(["#text"]),kT=Gt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),op=Gt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),wT=Gt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),iu=Gt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),k8=Bn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),w8=Bn(/<%[\w\W]*|[\w\W]*%>/gm),C8=Bn(/\$\{[\w\W]*/gm),E8=Bn(/^data-[\-\w.\u00B7-\uFFFF]+$/),P8=Bn(/^aria-[\-\w]+$/),q_=Bn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),R8=Bn(/^(?:\w+script|data):/i),_8=Bn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),G_=Bn(/^html$/i),A8=Bn(/^[a-z][.\w]*(-[.\w]+)+$/i);var CT=Object.freeze({__proto__:null,ARIA_ATTR:P8,ATTR_WHITESPACE:_8,CUSTOM_ELEMENT:A8,DATA_ATTR:E8,DOCTYPE_NAME:G_,ERB_EXPR:w8,IS_ALLOWED_URI:q_,IS_SCRIPT_OR_DATA:R8,MUSTACHE_EXPR:k8,TMPLIT_EXPR:C8});const Za={element:1,text:3,progressingInstruction:7,comment:8,document:9},N8=function(){return typeof window>"u"?null:window},I8=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const r="data-tt-policy-suffix";n&&n.hasAttribute(r)&&(i=n.getAttribute(r));const s="dompurify"+(i?"#"+i:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},ET=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function K_(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N8();const e=se=>K_(se);if(e.version="3.2.6",e.removed=[],!t||!t.document||t.document.nodeType!==Za.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const i=n,r=i.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:h}=t,v=l.prototype,m=Ja(v,"cloneNode"),b=Ja(v,"remove"),p=Ja(v,"nextSibling"),y=Ja(v,"childNodes"),S=Ja(v,"parentNode");if(typeof o=="function"){const se=n.createElement("template");se.content&&se.content.ownerDocument&&(n=se.content.ownerDocument)}let T,k="";const{implementation:w,createNodeIterator:E,createDocumentFragment:P,getElementsByTagName:_}=n,{importNode:A}=i;let O=ET();e.isSupported=typeof W_=="function"&&typeof S=="function"&&w&&w.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:L,ERB_EXPR:Q,TMPLIT_EXPR:z,DATA_ATTR:oe,ARIA_ATTR:ae,IS_SCRIPT_OR_DATA:X,ATTR_WHITESPACE:I,CUSTOM_ELEMENT:M}=CT;let{IS_ALLOWED_URI:q}=CT,Y=null;const ne=me({},[...ST,...ip,...rp,...sp,...TT]);let ee=null;const ue=me({},[...kT,...op,...wT,...iu]);let ce=Object.seal(H_(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ce=null,pe=null,Xt=!0,Ge=!0,jt=!1,pn=!0,Ft=!1,Ct=!0,Jt=!1,zi=!1,pi=!1,Vn=!1,Et=!1,Zt=!1,ms=!0,mi=!1;const to="user-content-";let mn=!0,$i=!1,gi={},et=null;const zn=me({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let no=null;const io=me({},["audio","video","img","source","image","track"]);let vi=null;const ro=me({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),U="http://www.w3.org/1998/Math/MathML",J="http://www.w3.org/2000/svg",ie="http://www.w3.org/1999/xhtml";let xe=ie,Pe=!1,yt=null;const Sc=me({},[U,J,ie],np);let Wi=me({},["mi","mo","mn","ms","mtext"]),Hi=me({},["annotation-xml"]);const Ut=me({},["title","style","font","a","script"]);let $n=null;const en=["application/xhtml+xml","text/html"],Nf="text/html";let te=null,ye=null;const Ae=n.createElement("form"),tn=function(R){return R instanceof RegExp||R instanceof Function},Bt=function(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ye&&ye===R)){if((!R||typeof R!="object")&&(R={}),R=Xi(R),$n=en.indexOf(R.PARSER_MEDIA_TYPE)===-1?Nf:R.PARSER_MEDIA_TYPE,te=$n==="application/xhtml+xml"?np:Uu,Y=Qn(R,"ALLOWED_TAGS")?me({},R.ALLOWED_TAGS,te):ne,ee=Qn(R,"ALLOWED_ATTR")?me({},R.ALLOWED_ATTR,te):ue,yt=Qn(R,"ALLOWED_NAMESPACES")?me({},R.ALLOWED_NAMESPACES,np):Sc,vi=Qn(R,"ADD_URI_SAFE_ATTR")?me(Xi(ro),R.ADD_URI_SAFE_ATTR,te):ro,no=Qn(R,"ADD_DATA_URI_TAGS")?me(Xi(io),R.ADD_DATA_URI_TAGS,te):io,et=Qn(R,"FORBID_CONTENTS")?me({},R.FORBID_CONTENTS,te):zn,Ce=Qn(R,"FORBID_TAGS")?me({},R.FORBID_TAGS,te):Xi({}),pe=Qn(R,"FORBID_ATTR")?me({},R.FORBID_ATTR,te):Xi({}),gi=Qn(R,"USE_PROFILES")?R.USE_PROFILES:!1,Xt=R.ALLOW_ARIA_ATTR!==!1,Ge=R.ALLOW_DATA_ATTR!==!1,jt=R.ALLOW_UNKNOWN_PROTOCOLS||!1,pn=R.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ft=R.SAFE_FOR_TEMPLATES||!1,Ct=R.SAFE_FOR_XML!==!1,Jt=R.WHOLE_DOCUMENT||!1,Vn=R.RETURN_DOM||!1,Et=R.RETURN_DOM_FRAGMENT||!1,Zt=R.RETURN_TRUSTED_TYPE||!1,pi=R.FORCE_BODY||!1,ms=R.SANITIZE_DOM!==!1,mi=R.SANITIZE_NAMED_PROPS||!1,mn=R.KEEP_CONTENT!==!1,$i=R.IN_PLACE||!1,q=R.ALLOWED_URI_REGEXP||q_,xe=R.NAMESPACE||ie,Wi=R.MATHML_TEXT_INTEGRATION_POINTS||Wi,Hi=R.HTML_INTEGRATION_POINTS||Hi,ce=R.CUSTOM_ELEMENT_HANDLING||{},R.CUSTOM_ELEMENT_HANDLING&&tn(R.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ce.tagNameCheck=R.CUSTOM_ELEMENT_HANDLING.tagNameCheck),R.CUSTOM_ELEMENT_HANDLING&&tn(R.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ce.attributeNameCheck=R.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),R.CUSTOM_ELEMENT_HANDLING&&typeof R.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ce.allowCustomizedBuiltInElements=R.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ft&&(Ge=!1),Et&&(Vn=!0),gi&&(Y=me({},TT),ee=[],gi.html===!0&&(me(Y,ST),me(ee,kT)),gi.svg===!0&&(me(Y,ip),me(ee,op),me(ee,iu)),gi.svgFilters===!0&&(me(Y,rp),me(ee,op),me(ee,iu)),gi.mathMl===!0&&(me(Y,sp),me(ee,wT),me(ee,iu))),R.ADD_TAGS&&(Y===ne&&(Y=Xi(Y)),me(Y,R.ADD_TAGS,te)),R.ADD_ATTR&&(ee===ue&&(ee=Xi(ee)),me(ee,R.ADD_ATTR,te)),R.ADD_URI_SAFE_ATTR&&me(vi,R.ADD_URI_SAFE_ATTR,te),R.FORBID_CONTENTS&&(et===zn&&(et=Xi(et)),me(et,R.FORBID_CONTENTS,te)),mn&&(Y["#text"]=!0),Jt&&me(Y,["html","head","body"]),Y.table&&(me(Y,["tbody"]),delete Ce.tbody),R.TRUSTED_TYPES_POLICY){if(typeof R.TRUSTED_TYPES_POLICY.createHTML!="function")throw Xa('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof R.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Xa('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');T=R.TRUSTED_TYPES_POLICY,k=T.createHTML("")}else T===void 0&&(T=I8(h,r)),T!==null&&typeof k=="string"&&(k=T.createHTML(""));Gt&&Gt(R),ye=R}},Wn=me({},[...ip,...rp,...S8]),yi=me({},[...sp,...T8]),gn=function(R){let $=S(R);(!$||!$.tagName)&&($={namespaceURI:xe,tagName:"template"});const re=Uu(R.tagName),Ue=Uu($.tagName);return yt[R.namespaceURI]?R.namespaceURI===J?$.namespaceURI===ie?re==="svg":$.namespaceURI===U?re==="svg"&&(Ue==="annotation-xml"||Wi[Ue]):!!Wn[re]:R.namespaceURI===U?$.namespaceURI===ie?re==="math":$.namespaceURI===J?re==="math"&&Hi[Ue]:!!yi[re]:R.namespaceURI===ie?$.namespaceURI===J&&!Hi[Ue]||$.namespaceURI===U&&!Wi[Ue]?!1:!yi[re]&&(Ut[re]||!Wn[re]):!!($n==="application/xhtml+xml"&&yt[R.namespaceURI]):!1},at=function(R){Ya(e.removed,{element:R});try{S(R).removeChild(R)}catch{b(R)}},so=function(R,$){try{Ya(e.removed,{attribute:$.getAttributeNode(R),from:$})}catch{Ya(e.removed,{attribute:null,from:$})}if($.removeAttribute(R),R==="is")if(Vn||Et)try{at($)}catch{}else try{$.setAttribute(R,"")}catch{}},Uy=function(R){let $=null,re=null;if(pi)R="<remove></remove>"+R;else{const lt=xT(R,/^[\r\n\t ]+/);re=lt&&lt[0]}$n==="application/xhtml+xml"&&xe===ie&&(R='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+R+"</body></html>");const Ue=T?T.createHTML(R):R;if(xe===ie)try{$=new f().parseFromString(Ue,$n)}catch{}if(!$||!$.documentElement){$=w.createDocument(xe,"template",null);try{$.documentElement.innerHTML=Pe?k:Ue}catch{}}const Pt=$.body||$.documentElement;return R&&re&&Pt.insertBefore(n.createTextNode(re),Pt.childNodes[0]||null),xe===ie?_.call($,Jt?"html":"body")[0]:Jt?$.documentElement:Pt},By=function(R){return E.call(R.ownerDocument||R,R,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},If=function(R){return R instanceof d&&(typeof R.nodeName!="string"||typeof R.textContent!="string"||typeof R.removeChild!="function"||!(R.attributes instanceof u)||typeof R.removeAttribute!="function"||typeof R.setAttribute!="function"||typeof R.namespaceURI!="string"||typeof R.insertBefore!="function"||typeof R.hasChildNodes!="function")},Vy=function(R){return typeof a=="function"&&R instanceof a};function qi(se,R,$){nu(se,re=>{re.call(e,R,$,ye)})}const zy=function(R){let $=null;if(qi(O.beforeSanitizeElements,R,null),If(R))return at(R),!0;const re=te(R.nodeName);if(qi(O.uponSanitizeElement,R,{tagName:re,allowedTags:Y}),Ct&&R.hasChildNodes()&&!Vy(R.firstElementChild)&&Vt(/<[/\w!]/g,R.innerHTML)&&Vt(/<[/\w!]/g,R.textContent)||R.nodeType===Za.progressingInstruction||Ct&&R.nodeType===Za.comment&&Vt(/<[/\w]/g,R.data))return at(R),!0;if(!Y[re]||Ce[re]){if(!Ce[re]&&Wy(re)&&(ce.tagNameCheck instanceof RegExp&&Vt(ce.tagNameCheck,re)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(re)))return!1;if(mn&&!et[re]){const Ue=S(R)||R.parentNode,Pt=y(R)||R.childNodes;if(Pt&&Ue){const lt=Pt.length;for(let nn=lt-1;nn>=0;--nn){const Gi=m(Pt[nn],!0);Gi.__removalCount=(R.__removalCount||0)+1,Ue.insertBefore(Gi,p(R))}}}return at(R),!0}return R instanceof l&&!gn(R)||(re==="noscript"||re==="noembed"||re==="noframes")&&Vt(/<\/no(script|embed|frames)/i,R.innerHTML)?(at(R),!0):(Ft&&R.nodeType===Za.text&&($=R.textContent,nu([L,Q,z],Ue=>{$=Qa($,Ue," ")}),R.textContent!==$&&(Ya(e.removed,{element:R.cloneNode()}),R.textContent=$)),qi(O.afterSanitizeElements,R,null),!1)},$y=function(R,$,re){if(ms&&($==="id"||$==="name")&&(re in n||re in Ae))return!1;if(!(Ge&&!pe[$]&&Vt(oe,$))){if(!(Xt&&Vt(ae,$))){if(!ee[$]||pe[$]){if(!(Wy(R)&&(ce.tagNameCheck instanceof RegExp&&Vt(ce.tagNameCheck,R)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(R))&&(ce.attributeNameCheck instanceof RegExp&&Vt(ce.attributeNameCheck,$)||ce.attributeNameCheck instanceof Function&&ce.attributeNameCheck($))||$==="is"&&ce.allowCustomizedBuiltInElements&&(ce.tagNameCheck instanceof RegExp&&Vt(ce.tagNameCheck,re)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(re))))return!1}else if(!vi[$]){if(!Vt(q,Qa(re,I,""))){if(!(($==="src"||$==="xlink:href"||$==="href")&&R!=="script"&&v8(re,"data:")===0&&no[R])){if(!(jt&&!Vt(X,Qa(re,I,"")))){if(re)return!1}}}}}}return!0},Wy=function(R){return R!=="annotation-xml"&&xT(R,M)},Hy=function(R){qi(O.beforeSanitizeAttributes,R,null);const{attributes:$}=R;if(!$||If(R))return;const re={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ee,forceKeepAttr:void 0};let Ue=$.length;for(;Ue--;){const Pt=$[Ue],{name:lt,namespaceURI:nn,value:Gi}=Pt,Na=te(lt),Of=Gi;let Rt=lt==="value"?Of:y8(Of);if(re.attrName=Na,re.attrValue=Rt,re.keepAttr=!0,re.forceKeepAttr=void 0,qi(O.uponSanitizeAttribute,R,re),Rt=re.attrValue,mi&&(Na==="id"||Na==="name")&&(so(lt,R),Rt=to+Rt),Ct&&Vt(/((--!?|])>)|<\/(style|title)/i,Rt)){so(lt,R);continue}if(re.forceKeepAttr)continue;if(!re.keepAttr){so(lt,R);continue}if(!pn&&Vt(/\/>/i,Rt)){so(lt,R);continue}Ft&&nu([L,Q,z],Gy=>{Rt=Qa(Rt,Gy," ")});const qy=te(R.nodeName);if(!$y(qy,Na,Rt)){so(lt,R);continue}if(T&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!nn)switch(h.getAttributeType(qy,Na)){case"TrustedHTML":{Rt=T.createHTML(Rt);break}case"TrustedScriptURL":{Rt=T.createScriptURL(Rt);break}}if(Rt!==Of)try{nn?R.setAttributeNS(nn,lt,Rt):R.setAttribute(lt,Rt),If(R)?at(R):bT(e.removed)}catch{so(lt,R)}}qi(O.afterSanitizeAttributes,R,null)},J_=function se(R){let $=null;const re=By(R);for(qi(O.beforeSanitizeShadowDOM,R,null);$=re.nextNode();)qi(O.uponSanitizeShadowNode,$,null),zy($),Hy($),$.content instanceof s&&se($.content);qi(O.afterSanitizeShadowDOM,R,null)};return e.sanitize=function(se){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=null,re=null,Ue=null,Pt=null;if(Pe=!se,Pe&&(se="<!-->"),typeof se!="string"&&!Vy(se))if(typeof se.toString=="function"){if(se=se.toString(),typeof se!="string")throw Xa("dirty is not a string, aborting")}else throw Xa("toString is not a function");if(!e.isSupported)return se;if(zi||Bt(R),e.removed=[],typeof se=="string"&&($i=!1),$i){if(se.nodeName){const Gi=te(se.nodeName);if(!Y[Gi]||Ce[Gi])throw Xa("root node is forbidden and cannot be sanitized in-place")}}else if(se instanceof a)$=Uy("<!---->"),re=$.ownerDocument.importNode(se,!0),re.nodeType===Za.element&&re.nodeName==="BODY"||re.nodeName==="HTML"?$=re:$.appendChild(re);else{if(!Vn&&!Ft&&!Jt&&se.indexOf("<")===-1)return T&&Zt?T.createHTML(se):se;if($=Uy(se),!$)return Vn?null:Zt?k:""}$&&pi&&at($.firstChild);const lt=By($i?se:$);for(;Ue=lt.nextNode();)zy(Ue),Hy(Ue),Ue.content instanceof s&&J_(Ue.content);if($i)return se;if(Vn){if(Et)for(Pt=P.call($.ownerDocument);$.firstChild;)Pt.appendChild($.firstChild);else Pt=$;return(ee.shadowroot||ee.shadowrootmode)&&(Pt=A.call(i,Pt,!0)),Pt}let nn=Jt?$.outerHTML:$.innerHTML;return Jt&&Y["!doctype"]&&$.ownerDocument&&$.ownerDocument.doctype&&$.ownerDocument.doctype.name&&Vt(G_,$.ownerDocument.doctype.name)&&(nn="<!DOCTYPE "+$.ownerDocument.doctype.name+`>
`+nn),Ft&&nu([L,Q,z],Gi=>{nn=Qa(nn,Gi," ")}),T&&Zt?T.createHTML(nn):nn},e.setConfig=function(){let se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Bt(se),zi=!0},e.clearConfig=function(){ye=null,zi=!1},e.isValidAttribute=function(se,R,$){ye||Bt({});const re=te(se),Ue=te(R);return $y(re,Ue,$)},e.addHook=function(se,R){typeof R=="function"&&Ya(O[se],R)},e.removeHook=function(se,R){if(R!==void 0){const $=m8(O[se],R);return $===-1?void 0:g8(O[se],$,1)[0]}return bT(O[se])},e.removeHooks=function(se){O[se]=[]},e.removeAllHooks=function(){O=ET()},e}var O8=K_();const M8=()=>{const{slug:t}=Gj(),e=AE(),[n,i]=x.useState("hr"),[r,s]=x.useState(null),[o,a]=x.useState([]),[l,c]=x.useState(!1),u=x.useMemo(()=>{if(!r)return"";const v=new DOMParser().parseFromString(r.content[n],"text/html");v.querySelectorAll("custom-tag").forEach(b=>{const p=v.createElement("div");p.className="custom-tag",p.innerHTML=b.innerHTML,b.replaceWith(p)}),v.querySelectorAll('argument[name="citation_id"]').forEach(b=>{const p=v.createElement("span");p.setAttribute("data-citation-id",b.getAttribute("value")||b.textContent||""),p.innerHTML=b.innerHTML,b.replaceWith(p)});const m=v.body.innerHTML.replace(/&nbsp;|&amp;nbsp;/g," ");return O8.sanitize(m,{ADD_TAGS:["iframe","div","span"],ADD_ATTR:["class","allow","allowfullscreen","frameborder","scrolling","data-citation-id"]})},[r,n]);if(x.useEffect(()=>{fetch("/api/articles").then(h=>h.ok?h.json():Promise.reject(new Error(h.statusText))).then(h=>{const v=h.find(m=>m.slug===t);if(v){s(v);const m=h.filter(b=>b.id!==v.id&&b.category[n]===v.category[n]).slice(0,3);a(m)}}).catch(h=>{console.error(h),c(!0)})},[t,n]),l)return g.jsx("div",{className:"min-h-screen bg-gradient-subtle flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx("h1",{className:"text-2xl font-bold text-foreground mb-4",children:n==="hr"?"Greka pri uitavanju lanka":"Error loading article"}),g.jsx("button",{onClick:()=>e("/"),className:"bg-gradient-primary text-white px-6 py-3 rounded-xl font-medium",children:n==="hr"?"Nazad na poetnu":"Back to home"})]})});if(!r)return g.jsx("div",{className:"min-h-screen bg-gradient-subtle flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx("h1",{className:"text-2xl font-bold text-foreground mb-4",children:n==="hr"?"lanak nije pronaen":"Article not found"}),g.jsx("button",{onClick:()=>e("/"),className:"bg-gradient-primary text-white px-6 py-3 rounded-xl font-medium",children:n==="hr"?"Nazad na poetnu":"Back to home"})]})});const f={hr:{backToHome:"Nazad na poetnu",relatedArticles:"Povezani lanci",shareArticle:"Podijeli lanak",author:"Autor"},en:{backToHome:"Back to home",relatedArticles:"Related Articles",shareArticle:"Share article",author:"Author"}}[n];return g.jsxs("div",{className:"min-h-screen bg-gradient-subtle",children:[g.jsx(cf,{language:n,onLanguageChange:i}),g.jsx("article",{className:"container mx-auto px-4 py-12",children:g.jsxs("div",{className:"max-w-4xl mx-auto",children:[g.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center space-x-2 text-lg font-bold text-primary hover:underline mb-8",children:[g.jsx(PC,{className:"w-5 h-5"}),g.jsx("span",{children:f.backToHome})]}),g.jsxs("div",{className:"mb-8",children:[g.jsx("div",{className:"flex items-center text-sm text-muted-foreground mb-4",children:g.jsxs("div",{className:"flex items-center space-x-1",children:[g.jsx(VO,{className:"w-4 h-4"}),g.jsx("span",{children:r.author??""})]})}),g.jsx("h1",{className:"text-4xl font-bold text-foreground leading-tight mb-4",children:r.title[n]}),g.jsx("p",{className:"text-xl text-muted-foreground leading-relaxed",children:r.excerpt[n]})]}),r.thumbnail&&g.jsx("div",{className:"mb-12 rounded-3xl overflow-hidden shadow-medium",children:g.jsx("img",{src:r.thumbnail,alt:r.title[n],className:"w-full h-96 object-cover"})}),g.jsxs("div",{className:"glass-strong rounded-3xl p-8 mb-12",children:[g.jsx("div",{className:"prose prose-lg max-w-none text-foreground",dangerouslySetInnerHTML:{__html:u}}),g.jsx("div",{className:"flex justify-end mt-8 pt-6 border-t border-white/20",children:g.jsxs("button",{onClick:()=>{var h;return(h=navigator.share)==null?void 0:h.call(navigator,{title:r.title[n],url:window.location.href})},className:"flex items-center space-x-2 text-muted-foreground hover:text-primary transition-colors",children:[g.jsx(BO,{className:"w-4 h-4"}),g.jsx("span",{children:f.shareArticle})]})})]})]})}),o.length>0&&g.jsx("section",{className:"bg-white/20 py-16",children:g.jsx("div",{className:"container mx-auto px-4",children:g.jsxs("div",{className:"max-w-6xl mx-auto",children:[g.jsx("h2",{className:"text-2xl font-bold text-foreground text-center mb-8",children:f.relatedArticles}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map(h=>g.jsx(Fy,{title:h.title[n],excerpt:h.excerpt[n],slug:h.slug,featured:h.featured,thumbnail:h.thumbnail},h.id))})]})})}),g.jsx("footer",{className:"bg-white/20 border-t border-white/20 py-8",children:g.jsx("div",{className:"container mx-auto px-4",children:g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[g.jsx("div",{className:"text-center md:text-left",children:g.jsxs("p",{className:"text-sm text-muted-foreground",children:[" 2024 Neurobiz. ",n==="hr"?"Sva prava pridrana.":"All rights reserved."]})}),g.jsxs("div",{className:"flex items-center space-x-6",children:[g.jsx("a",{href:"mailto:info@neurobiz.me",className:"text-sm text-muted-foreground hover:text-primary transition-colors",children:"info@neurobiz.me"}),g.jsx("a",{href:"/privacy",className:"text-sm text-muted-foreground hover:text-primary transition-colors",children:n==="hr"?"Privatnost":"Privacy"}),g.jsx("a",{href:"/terms",className:"text-sm text-muted-foreground hover:text-primary transition-colors",children:n==="hr"?"Uvjeti":"Terms"})]})]})})})]})},D8=()=>{const[t,e]=x.useState("hr"),n=AE(),r={hr:{backToHome:"Natrag na poetnu",title:"Zakazivanje poziva",subtitle:"Razgovarajte s naim AI ekspertom i dobijte personalizirane preporuke za vau tvrtku",description:"Tijekom 30-minutnog poziva analizirat emo vae poslovne procese i predloiti konkretna AI rjeenja koja e odmah utjecati na vau produktivnost.",whatYouGet:"to dobivate:",benefits:["Detaljnu analizu vaih trenutnih procesa","Konkretne preporuke za AI implementaciju","Procjenu ROI-ja za predloena rjeenja","Korak-po-korak plan implementacije","Follow-up e-mail s resursima"],duration:"30 minuta",format:"Video poziv (Google Meet)",price:"Besplatno",openCalendar:"Otvori kalendar",calendarNote:"Kalendar e se otvoriti u novom prozoru",whyChooseUs:"Zato odabrati nas?",reasons:["Specijalizirani smo za mala i srednja poduzea","Fokusiramo se na brze rezultate, ne na sloene sustave","Vie od 50 uspjeno implementiranih AI rjeenja","Pratimo vas kroz cijeli proces implementacije"]},en:{backToHome:"Back to home",title:"Schedule a Call",subtitle:"Talk with our AI expert and get personalized recommendations for your company",description:"During a 30-minute call, we will analyze your business processes and suggest concrete AI solutions that will immediately impact your productivity.",whatYouGet:"What you get:",benefits:["Detailed analysis of your current processes","Concrete recommendations for AI implementation","ROI assessment for proposed solutions","Step-by-step implementation plan","Follow-up email with resources"],duration:"30 minutes",format:"Video call (Google Meet)",price:"Free",openCalendar:"Open calendar",calendarNote:"Calendar will open in a new window",whyChooseUs:"Why choose us?",reasons:["We specialize in small and medium businesses","We focus on quick results, not complex systems","More than 50 successfully implemented AI solutions","We guide you through the entire implementation process"]}}[t],s=()=>{window.open("https://calendly.com/ai-consultant-demo","_blank")};return g.jsxs("div",{className:"min-h-screen bg-gradient-subtle",children:[g.jsx(cf,{language:t,onLanguageChange:e}),g.jsx("div",{className:"container mx-auto px-4 py-12",children:g.jsxs("div",{className:"max-w-4xl mx-auto",children:[g.jsxs("button",{onClick:()=>n("/"),className:"inline-flex items-center space-x-2 text-muted-foreground hover:text-primary transition-colors mb-8",children:[g.jsx(PC,{className:"w-4 h-4"}),g.jsx("span",{children:r.backToHome})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-4xl font-bold text-foreground mb-4",children:r.title}),g.jsx("p",{className:"text-xl text-muted-foreground mb-8 leading-relaxed",children:r.subtitle}),g.jsx("div",{className:"glass rounded-2xl p-6 mb-8",children:g.jsx("p",{className:"text-foreground leading-relaxed",children:r.description})}),g.jsxs("div",{className:"space-y-4 mb-8",children:[g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx(IO,{className:"w-5 h-5 text-primary"}),g.jsx("span",{className:"text-foreground font-medium",children:r.duration})]}),g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx(zO,{className:"w-5 h-5 text-primary"}),g.jsx("span",{className:"text-foreground font-medium",children:r.format})]}),g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx(DO,{className:"w-5 h-5 text-primary"}),g.jsx("span",{className:"text-foreground font-medium",children:r.price})]})]}),g.jsxs("div",{className:"glass rounded-2xl p-6",children:[g.jsx("h3",{className:"text-lg font-bold text-foreground mb-4",children:r.whatYouGet}),g.jsx("ul",{className:"space-y-3",children:r.benefits.map((o,a)=>g.jsxs("li",{className:"flex items-start space-x-3",children:[g.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),g.jsx("span",{className:"text-muted-foreground",children:o})]},a))})]})]}),g.jsx("div",{children:g.jsxs("div",{className:"glass-strong rounded-3xl p-8 shadow-medium sticky top-8",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx("div",{className:"w-16 h-16 bg-gradient-primary rounded-2xl flex items-center justify-center mx-auto mb-4",children:g.jsx(_O,{className:"w-8 h-8 text-white"})}),g.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:t==="hr"?"Besplatni razgovor":"Free consultation"}),g.jsx("p",{className:"text-muted-foreground",children:t==="hr"?"Odaberite termin koji vam odgovara":"Choose a time that works for you"})]}),g.jsx("button",{onClick:s,"data-evt":"book_call_click",className:"w-full bg-gradient-primary text-white py-4 px-6 rounded-xl font-semibold text-lg shadow-medium hover:shadow-strong transition-smooth hover:scale-[1.02] mb-4",children:r.openCalendar}),g.jsx("p",{className:"text-xs text-muted-foreground text-center",children:r.calendarNote}),g.jsxs("div",{className:"mt-8 pt-6 border-t border-white/20",children:[g.jsx("h4",{className:"text-sm font-semibold text-foreground mb-4",children:r.whyChooseUs}),g.jsx("ul",{className:"space-y-2",children:r.reasons.map((o,a)=>g.jsxs("li",{className:"flex items-start space-x-2",children:[g.jsx("div",{className:"w-1.5 h-1.5 bg-accent rounded-full mt-2 flex-shrink-0"}),g.jsx("span",{className:"text-xs text-muted-foreground leading-relaxed",children:o})]},a))})]}),g.jsx("div",{className:"mt-6 pt-4 border-t border-white/20",children:g.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-lg font-bold text-primary",children:"50+"}),g.jsx("div",{className:"text-xs text-muted-foreground",children:t==="hr"?"Projekata":"Projects"})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-lg font-bold text-primary",children:"4.9"}),g.jsx("div",{className:"text-xs text-muted-foreground",children:t==="hr"?"Ocjena":"Rating"})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-lg font-bold text-primary",children:"24h"}),g.jsx("div",{className:"text-xs text-muted-foreground",children:t==="hr"?"Odgovor":"Response"})]})]})})]})})]})]})}),g.jsx("footer",{className:"bg-white/20 border-t border-white/20 py-8 mt-16",children:g.jsx("div",{className:"container mx-auto px-4",children:g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[g.jsx("div",{className:"text-center md:text-left",children:g.jsxs("p",{className:"text-sm text-muted-foreground",children:[" 2024 Neurobiz. ",t==="hr"?"Sva prava pridrana.":"All rights reserved."]})}),g.jsxs("div",{className:"flex items-center space-x-6",children:[g.jsx("a",{href:"mailto:info@neurobiz.me",className:"text-sm text-muted-foreground hover:text-primary transition-colors",children:"info@neurobiz.me"}),g.jsx("a",{href:"/privacy",className:"text-sm text-muted-foreground hover:text-primary transition-colors",children:t==="hr"?"Privatnost":"Privacy"}),g.jsx("a",{href:"/terms",className:"text-sm text-muted-foreground hover:text-primary transition-colors",children:t==="hr"?"Uvjeti":"Terms"})]})]})})})]})},Ir=x.forwardRef(({className:t,type:e,...n},i)=>g.jsx("input",{type:e,className:Fe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:i,...n}));Ir.displayName="Input";function L8({open:t,onSubmit:e}){const[n,i]=x.useState("");return g.jsx(dy,{open:t,children:g.jsxs(yf,{className:"max-w-sm",children:[g.jsx(bf,{children:g.jsx(Sf,{children:"Admin lozinka"})}),g.jsx(Ir,{placeholder:"Lozinka",value:n,onChange:r=>i(r.target.value)}),g.jsx(xf,{children:g.jsx(xn,{onClick:()=>e(n),disabled:!n.trim(),children:"Potvrdi"})})]})})}const Y_=x.forwardRef(({className:t,...e},n)=>g.jsx("div",{className:"relative w-full overflow-auto",children:g.jsx("table",{ref:n,className:Fe("w-full caption-bottom text-sm",t),...e})}));Y_.displayName="Table";const Q_=x.forwardRef(({className:t,...e},n)=>g.jsx("thead",{ref:n,className:Fe("[&_tr]:border-b",t),...e}));Q_.displayName="TableHeader";const X_=x.forwardRef(({className:t,...e},n)=>g.jsx("tbody",{ref:n,className:Fe("[&_tr:last-child]:border-0",t),...e}));X_.displayName="TableBody";const j8=x.forwardRef(({className:t,...e},n)=>g.jsx("tfoot",{ref:n,className:Fe("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));j8.displayName="TableFooter";const hg=x.forwardRef(({className:t,...e},n)=>g.jsx("tr",{ref:n,className:Fe("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));hg.displayName="TableRow";const po=x.forwardRef(({className:t,...e},n)=>g.jsx("th",{ref:n,className:Fe("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));po.displayName="TableHead";const mo=x.forwardRef(({className:t,...e},n)=>g.jsx("td",{ref:n,className:Fe("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));mo.displayName="TableCell";const F8=x.forwardRef(({className:t,...e},n)=>g.jsx("caption",{ref:n,className:Fe("mt-4 text-sm text-muted-foreground",t),...e}));F8.displayName="TableCaption";const PT=({value:t,onChange:e})=>{const n=x.useRef(null);x.useEffect(()=>{n.current&&n.current.innerHTML!==t&&(n.current.innerHTML=t)},[t]);const i=(r,s)=>{var o;document.execCommand(r,!1,s),e(((o=n.current)==null?void 0:o.innerHTML)||"")};return g.jsxs("div",{children:[g.jsxs("div",{className:"flex gap-2 mb-2",children:[g.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onClick:()=>i("bold"),children:"B"}),g.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onClick:()=>i("italic"),children:"I"}),g.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onClick:()=>i("underline"),children:"U"}),g.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onClick:()=>i("formatBlock","H2"),children:"H2"}),g.jsx("input",{type:"color",onChange:r=>i("foreColor",r.target.value)})]}),g.jsx("div",{ref:n,className:"border rounded p-2 min-h-[150px] bg-white",contentEditable:!0,onInput:()=>{var r;return e(((r=n.current)==null?void 0:r.innerHTML)||"")}})]})};function U8({pass:t}){const[e,n]=x.useState([]),i={slug:"",titleHr:"",titleEn:"",contentHr:"",contentEn:"",categoryHr:"",categoryEn:"",featured:!1},[r,s]=x.useState(i),[o,a]=x.useState(!1);x.useEffect(()=>{fetch("/api/articles").then(f=>f.json()).then(n).catch(()=>n([]))},[t]);function l(f){f.preventDefault();const h=r.id?"PUT":"POST",v=r.id?`/api/articles/${r.id}`:"/api/articles",m={slug:r.slug,titleHr:r.titleHr,titleEn:r.titleEn,contentHr:r.contentHr,contentEn:r.contentEn,categoryHr:r.categoryHr,categoryEn:r.categoryEn,featured:r.featured,thumbnail:r.thumbnail};fetch(v,{method:h,headers:{"Content-Type":"application/json","x-admin-pass":t},body:JSON.stringify(m)}).then(b=>b.json()).then(b=>{n(p=>p.some(y=>y.id===b.id)?p.map(y=>y.id===b.id?b:y):[...p,b]),s(i),a(!1),Xw({description:"lanak uspjeno dodan"}),window.scrollTo({top:0,behavior:"smooth"})})}function c(f){s({id:f.id,slug:f.slug,titleHr:f.title.hr,titleEn:f.title.en,contentHr:f.content.hr,contentEn:f.content.en,categoryHr:f.category.hr,categoryEn:f.category.en,featured:f.featured,thumbnail:f.thumbnail}),a(!0)}function u(f){var m;const h=(m=f.target.files)==null?void 0:m[0];if(!h)return;const v=new FileReader;v.onload=b=>s(p=>{var y;return{...p,thumbnail:(y=b.target)==null?void 0:y.result}}),v.readAsDataURL(h)}function d(f){confirm("Delete article?")&&fetch(`/api/articles/${f}`,{method:"DELETE",headers:{"x-admin-pass":t}}).then(()=>n(h=>h.filter(v=>v.id!==f)))}return g.jsxs("div",{children:[g.jsx("h1",{className:"text-2xl font-bold mb-4",children:"lanci"}),!o&&g.jsxs(g.Fragment,{children:[g.jsx(xn,{className:"mb-4",onClick:()=>{s(i),a(!0)},children:"Novi lanak"}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(f=>g.jsxs("div",{className:"relative",children:[g.jsx(Fy,{title:f.title.hr,excerpt:f.excerpt.hr,slug:f.slug,featured:f.featured,thumbnail:f.thumbnail}),g.jsxs("div",{className:"absolute top-2 right-2 flex gap-1",children:[g.jsx(xn,{size:"sm",variant:"secondary",onClick:h=>{h.stopPropagation(),c(f)},children:"Edit"}),g.jsx(xn,{size:"sm",variant:"destructive",onClick:h=>{h.stopPropagation(),d(f.id)},children:"Delete"})]})]},f.id))})]}),o&&g.jsxs("form",{onSubmit:l,className:"mt-6 space-y-2",children:[g.jsx(Ir,{placeholder:"Slug",value:r.slug,onChange:f=>s({...r,slug:f.target.value})}),g.jsx(Ir,{placeholder:"Naslov HR",value:r.titleHr,onChange:f=>s({...r,titleHr:f.target.value})}),g.jsx(Ir,{placeholder:"Naslov EN",value:r.titleEn,onChange:f=>s({...r,titleEn:f.target.value})}),g.jsx(PT,{value:r.contentHr,onChange:f=>s({...r,contentHr:f})}),g.jsx(PT,{value:r.contentEn,onChange:f=>s({...r,contentEn:f})}),g.jsx(Ir,{placeholder:"Kategorija HR",value:r.categoryHr,onChange:f=>s({...r,categoryHr:f.target.value})}),g.jsx(Ir,{placeholder:"Kategorija EN",value:r.categoryEn,onChange:f=>s({...r,categoryEn:f.target.value})}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",checked:r.featured,onChange:f=>s({...r,featured:f.target.checked})}),g.jsx("span",{children:"Featured"})]}),g.jsx(Ir,{type:"file",accept:"image/*",onChange:u}),g.jsx(xn,{type:"submit",children:r.id?"Spremi":"Dodaj"}),g.jsx(xn,{type:"button",variant:"ghost",onClick:()=>{s(i),a(!1)},children:"Odustani"})]})]})}function B8(){const[t,e]=x.useState(()=>sessionStorage.getItem("adminPass")||""),[n,i]=x.useState([]),[r,s]=x.useState(null),[o,a]=x.useState("transcripts");x.useEffect(()=>{!t||o!=="transcripts"||fetch("/api/transcripts",{headers:{"x-admin-pass":t}}).then(c=>c.json()).then(i).catch(()=>{e(""),sessionStorage.removeItem("adminPass")})},[t,o]);function l(c){confirm("Delete transcript?")&&fetch(`/api/transcripts/${c}`,{method:"DELETE",headers:{"x-admin-pass":t}}).then(()=>i(n.filter(u=>u.id!==c)))}return g.jsxs("div",{className:"p-6 max-w-5xl mx-auto",children:[g.jsxs("div",{className:"flex gap-2 mb-4",children:[g.jsx(xn,{variant:o==="transcripts"?"default":"ghost",onClick:()=>a("transcripts"),children:"Transkripti"}),g.jsx(xn,{variant:o==="articles"?"default":"ghost",onClick:()=>a("articles"),children:"lanci"})]}),o==="transcripts"?g.jsxs("div",{children:[g.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Transkripti"}),g.jsxs(Y_,{children:[g.jsx(Q_,{children:g.jsxs(hg,{children:[g.jsx(po,{children:"ID"}),g.jsx(po,{children:"Start"}),g.jsx(po,{children:"Turns"}),g.jsx(po,{children:"Kontakt"}),g.jsx(po,{})]})}),g.jsx(X_,{children:n.map(c=>g.jsxs(hg,{className:"hover:bg-muted",onClick:()=>fetch(`/api/transcripts/${c.id}`,{headers:{"x-admin-pass":t}}).then(u=>u.json()).then(s),children:[g.jsx(mo,{className:"font-mono text-xs",children:c.id.slice(0,8)}),g.jsx(mo,{children:new Date(c.created).toLocaleString()}),g.jsx(mo,{children:c.turns}),g.jsx(mo,{children:c.hasContact?"":""}),g.jsx(mo,{children:g.jsx(xn,{size:"sm",variant:"ghost",onClick:u=>{u.stopPropagation(),l(c.id)},children:""})})]},c.id))})]}),r&&g.jsxs("div",{className:"mt-6",children:[g.jsx("h2",{className:"font-semibold mb-2",children:"Detalji"}),g.jsx("textarea",{className:"w-full h-80 text-xs bg-muted p-2 rounded",readOnly:!0,value:JSON.stringify(r,null,2)})]})]}):g.jsx(U8,{pass:t}),g.jsx(L8,{open:!t,onSubmit:c=>{sessionStorage.setItem("adminPass",c),e(c)}})]})}const V8=()=>{const t=Pv();return x.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:g.jsxs("div",{className:"text-center",children:[g.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),g.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),g.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},z8=()=>{const[t,e]=x.useState("hr"),i={hr:{title:"Obrada podataka i snimanje razgovora",intro:"Kada koristite ovu stranicu i zaponete razgovor s naim AI agentom, biljeimo i snimamo vau komunikaciju u svrhu poboljanja usluge i pruanja tonih odgovora. Obrada podataka odvija se u skladu s Opom uredbom o zatiti podataka (GDPR).",bullets:["Osnovni pravni temelj: Vaa privola (lanak 6. st. 1. toka a) GDPR).","Svrha obrade: pruanje i poboljanje AI savjetovanja.","Vrsta podataka: snimke razgovora, transkripti, IP adresa i tehniki metapodaci."],retention:"Podatke pohranjujemo ifrirane maksimalno 30 dana, nakon ega se automatski briu.",rights:"Imate pravo ostvariti pristup, ispravak, ogranienje obrade, brisanje ili prenosivost podataka, kao i uloiti prigovor na obradu u bilo kojem trenutku.",contact:"Za ostvarivanje svojih prava ili dodatna pitanja obratite nam se na: info@neurobiz.me.",effectiveDate:"Stupanje na snagu: 1. sijenja 2025."},en:{title:"Data Processing and Conversation Recording",intro:"When you use this site and initiate a conversation with our AI agent, we record and transcribe your communications for the purpose of improving our service and providing accurate answers. Data processing complies with the EU General Data Protection Regulation (GDPR).",bullets:["Legal basis: Your consent (Article 6(1)(a) GDPR).","Purpose: Provision and enhancement of AI consulting services.","Data collected: conversation recordings, transcripts, IP addresses, and technical metadata."],retention:"Data is stored encrypted for up to 30 days and then automatically deleted.",rights:"You have the right to request access, rectification, restriction of processing, erasure or data portability, and to object to processing at any time.",contact:"To exercise your rights or for any inquiries, please contact us at: info@neurobiz.me.",effectiveDate:"Effective date: January 1, 2025."}}[t];return g.jsxs("div",{className:"min-h-screen bg-gray-50 text-gray-800",children:[g.jsx(cf,{language:t,onLanguageChange:e}),g.jsx("main",{className:"container mx-auto px-6 py-12",children:g.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-lg p-8",children:[g.jsx("h1",{className:"text-3xl font-semibold mb-4 text-center",children:i.title}),g.jsx("p",{className:"mb-6 leading-relaxed",children:i.intro}),g.jsx("ul",{className:"list-disc list-inside space-y-2 mb-6",children:i.bullets.map((r,s)=>g.jsx("li",{className:"text-gray-700",children:r},s))}),g.jsx("p",{className:"mb-4",children:g.jsx("strong",{children:i.retention})}),g.jsx("p",{className:"mb-4",children:g.jsx("strong",{children:i.rights})}),g.jsx("p",{className:"mb-4",children:i.contact}),g.jsx("p",{className:"text-sm text-gray-500 mt-8 text-center",children:i.effectiveDate})]})})]})},$8=new pj,W8=()=>g.jsx(gj,{client:$8,children:g.jsxs(WL,{children:[g.jsx(EM,{}),g.jsx(rD,{}),g.jsx(f2,{children:g.jsxs(c2,{children:[g.jsx(bs,{path:"/",element:g.jsx(d8,{})}),g.jsx(bs,{path:"/articles/:slug",element:g.jsx(M8,{})}),g.jsx(bs,{path:"/book",element:g.jsx(D8,{})}),g.jsx(bs,{path:"/privacy",element:g.jsx(z8,{})}),g.jsx(bs,{path:"/admin",element:g.jsx(B8,{})}),g.jsx(bs,{path:"*",element:g.jsx(V8,{})})]})})]})});Qw(document.getElementById("root")).render(g.jsx(W8,{}));
